"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/get-starknet@3.3.3_starknet@6.24.1_encoding@0.1.13_";
exports.ids = ["vendor-chunks/get-starknet@3.3.3_starknet@6.24.1_encoding@0.1.13_"];
exports.modules = {

/***/ "(ssr)/./node_modules/.pnpm/get-starknet@3.3.3_starknet@6.24.1_encoding@0.1.13_/node_modules/get-starknet/dist/ui.js":
/*!*********************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/get-starknet@3.3.3_starknet@6.24.1_encoding@0.1.13_/node_modules/get-starknet/dist/ui.js ***!
  \*********************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   connect: () => (/* binding */ connect),\n/* harmony export */   disconnect: () => (/* binding */ disconnect)\n/* harmony export */ });\nfunction noop() {\n}\nfunction run(t) {\n  return t();\n}\nfunction blank_object() {\n  return /* @__PURE__ */ Object.create(null);\n}\nfunction run_all(t) {\n  t.forEach(run);\n}\nfunction is_function(t) {\n  return typeof t == \"function\";\n}\nfunction safe_not_equal(t, e) {\n  return t != t ? e == e : t !== e || t && typeof t == \"object\" || typeof t == \"function\";\n}\nlet src_url_equal_anchor;\nfunction src_url_equal(t, e) {\n  return src_url_equal_anchor || (src_url_equal_anchor = document.createElement(\"a\")), src_url_equal_anchor.href = e, t === src_url_equal_anchor.href;\n}\nfunction is_empty(t) {\n  return Object.keys(t).length === 0;\n}\nfunction null_to_empty(t) {\n  return t == null ? \"\" : t;\n}\nfunction append(t, e) {\n  t.appendChild(e);\n}\nfunction append_styles(t, e, r) {\n  const n = get_root_for_style(t);\n  if (!n.getElementById(e)) {\n    const o = element(\"style\");\n    o.id = e, o.textContent = r, append_stylesheet(n, o);\n  }\n}\nfunction get_root_for_style(t) {\n  if (!t)\n    return document;\n  const e = t.getRootNode ? t.getRootNode() : t.ownerDocument;\n  return e && e.host ? e : t.ownerDocument;\n}\nfunction append_stylesheet(t, e) {\n  append(t.head || t, e);\n}\nfunction insert(t, e, r) {\n  t.insertBefore(e, r || null);\n}\nfunction detach(t) {\n  t.parentNode.removeChild(t);\n}\nfunction destroy_each(t, e) {\n  for (let r = 0; r < t.length; r += 1)\n    t[r] && t[r].d(e);\n}\nfunction element(t) {\n  return document.createElement(t);\n}\nfunction text(t) {\n  return document.createTextNode(t);\n}\nfunction space() {\n  return text(\" \");\n}\nfunction listen(t, e, r, n) {\n  return t.addEventListener(e, r, n), () => t.removeEventListener(e, r, n);\n}\nfunction attr(t, e, r) {\n  r == null ? t.removeAttribute(e) : t.getAttribute(e) !== r && t.setAttribute(e, r);\n}\nfunction children(t) {\n  return Array.from(t.childNodes);\n}\nfunction set_data(t, e) {\n  e = \"\" + e, t.wholeText !== e && (t.data = e);\n}\nlet current_component;\nfunction set_current_component(t) {\n  current_component = t;\n}\nfunction get_current_component() {\n  if (!current_component)\n    throw new Error(\"Function called outside component initialization\");\n  return current_component;\n}\nfunction onMount(t) {\n  get_current_component().$$.on_mount.push(t);\n}\nconst dirty_components = [], binding_callbacks = [], render_callbacks = [], flush_callbacks = [], resolved_promise = Promise.resolve();\nlet update_scheduled = !1;\nfunction schedule_update() {\n  update_scheduled || (update_scheduled = !0, resolved_promise.then(flush));\n}\nfunction add_render_callback(t) {\n  render_callbacks.push(t);\n}\nconst seen_callbacks = /* @__PURE__ */ new Set();\nlet flushidx = 0;\nfunction flush() {\n  const t = current_component;\n  do {\n    for (; flushidx < dirty_components.length; ) {\n      const e = dirty_components[flushidx];\n      flushidx++, set_current_component(e), update(e.$$);\n    }\n    for (set_current_component(null), dirty_components.length = 0, flushidx = 0; binding_callbacks.length; )\n      binding_callbacks.pop()();\n    for (let e = 0; e < render_callbacks.length; e += 1) {\n      const r = render_callbacks[e];\n      seen_callbacks.has(r) || (seen_callbacks.add(r), r());\n    }\n    render_callbacks.length = 0;\n  } while (dirty_components.length);\n  for (; flush_callbacks.length; )\n    flush_callbacks.pop()();\n  update_scheduled = !1, seen_callbacks.clear(), set_current_component(t);\n}\nfunction update(t) {\n  if (t.fragment !== null) {\n    t.update(), run_all(t.before_update);\n    const e = t.dirty;\n    t.dirty = [-1], t.fragment && t.fragment.p(t.ctx, e), t.after_update.forEach(add_render_callback);\n  }\n}\nconst outroing = /* @__PURE__ */ new Set();\nfunction transition_in(t, e) {\n  t && t.i && (outroing.delete(t), t.i(e));\n}\nfunction mount_component(t, e, r, n) {\n  const { fragment: o, on_mount: i, on_destroy: s, after_update: a } = t.$$;\n  o && o.m(e, r), n || add_render_callback(() => {\n    const c = i.map(run).filter(is_function);\n    s ? s.push(...c) : run_all(c), t.$$.on_mount = [];\n  }), a.forEach(add_render_callback);\n}\nfunction destroy_component(t, e) {\n  const r = t.$$;\n  r.fragment !== null && (run_all(r.on_destroy), r.fragment && r.fragment.d(e), r.on_destroy = r.fragment = null, r.ctx = []);\n}\nfunction make_dirty(t, e) {\n  t.$$.dirty[0] === -1 && (dirty_components.push(t), schedule_update(), t.$$.dirty.fill(0)), t.$$.dirty[e / 31 | 0] |= 1 << e % 31;\n}\nfunction init$1(t, e, r, n, o, i, s, a = [-1]) {\n  const c = current_component;\n  set_current_component(t);\n  const l = t.$$ = {\n    fragment: null,\n    ctx: null,\n    props: i,\n    update: noop,\n    not_equal: o,\n    bound: blank_object(),\n    on_mount: [],\n    on_destroy: [],\n    on_disconnect: [],\n    before_update: [],\n    after_update: [],\n    context: new Map(e.context || (c ? c.$$.context : [])),\n    callbacks: blank_object(),\n    dirty: a,\n    skip_bound: !1,\n    root: e.target || c.$$.root\n  };\n  s && s(l.root);\n  let u = !1;\n  if (l.ctx = r ? r(t, e.props || {}, (d, m, ...p) => {\n    const h = p.length ? p[0] : m;\n    return l.ctx && o(l.ctx[d], l.ctx[d] = h) && (!l.skip_bound && l.bound[d] && l.bound[d](h), u && make_dirty(t, d)), m;\n  }) : [], l.update(), u = !0, run_all(l.before_update), l.fragment = n ? n(l.ctx) : !1, e.target) {\n    if (e.hydrate) {\n      const d = children(e.target);\n      l.fragment && l.fragment.l(d), d.forEach(detach);\n    } else\n      l.fragment && l.fragment.c();\n    e.intro && transition_in(t.$$.fragment), mount_component(t, e.target, e.anchor, e.customElement), flush();\n  }\n  set_current_component(c);\n}\nclass SvelteComponent {\n  $destroy() {\n    destroy_component(this, 1), this.$destroy = noop;\n  }\n  $on(e, r) {\n    const n = this.$$.callbacks[e] || (this.$$.callbacks[e] = []);\n    return n.push(r), () => {\n      const o = n.indexOf(r);\n      o !== -1 && n.splice(o, 1);\n    };\n  }\n  $set(e) {\n    this.$$set && !is_empty(e) && (this.$$.skip_bound = !0, this.$$set(e), this.$$.skip_bound = !1);\n  }\n}\nfunction add_css(t) {\n  append_styles(t, \"svelte-1mtuslq\", `.sr-only.svelte-1mtuslq.svelte-1mtuslq{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0}.fixed.svelte-1mtuslq.svelte-1mtuslq{position:fixed}.inset-0.svelte-1mtuslq.svelte-1mtuslq{top:0px;right:0px;bottom:0px;left:0px}.z-40.svelte-1mtuslq.svelte-1mtuslq{z-index:40}.z-50.svelte-1mtuslq.svelte-1mtuslq{z-index:50}.mx-6.svelte-1mtuslq.svelte-1mtuslq{margin-left:1.5rem;margin-right:1.5rem}.mb-4.svelte-1mtuslq.svelte-1mtuslq{margin-bottom:1rem}.flex.svelte-1mtuslq.svelte-1mtuslq{display:flex}.h-8.svelte-1mtuslq.svelte-1mtuslq{height:2rem}.w-full.svelte-1mtuslq.svelte-1mtuslq{width:100%}.w-8.svelte-1mtuslq.svelte-1mtuslq{width:2rem}.max-w-\\\\[500px\\\\].svelte-1mtuslq.svelte-1mtuslq{max-width:500px}@keyframes svelte-1mtuslq-spin{to{transform:rotate(360deg)}}.animate-spin.svelte-1mtuslq.svelte-1mtuslq{animation:svelte-1mtuslq-spin 1s linear infinite}.cursor-pointer.svelte-1mtuslq.svelte-1mtuslq{cursor:pointer}.flex-col.svelte-1mtuslq.svelte-1mtuslq{flex-direction:column}.items-center.svelte-1mtuslq.svelte-1mtuslq{align-items:center}.justify-center.svelte-1mtuslq.svelte-1mtuslq{justify-content:center}.justify-between.svelte-1mtuslq.svelte-1mtuslq{justify-content:space-between}.gap-3.svelte-1mtuslq.svelte-1mtuslq{gap:0.75rem}.rounded-md.svelte-1mtuslq.svelte-1mtuslq{border-radius:0.375rem}.rounded-full.svelte-1mtuslq.svelte-1mtuslq{border-radius:9999px}.bg-black\\\\/25.svelte-1mtuslq.svelte-1mtuslq{background-color:rgb(0 0 0 / 0.25)}.bg-slate-50.svelte-1mtuslq.svelte-1mtuslq{--tw-bg-opacity:1;background-color:rgb(248 250 252 / var(--tw-bg-opacity))}.bg-slate-100.svelte-1mtuslq.svelte-1mtuslq{--tw-bg-opacity:1;background-color:rgb(241 245 249 / var(--tw-bg-opacity))}.fill-neutral-600.svelte-1mtuslq.svelte-1mtuslq{fill:#525252}.p-4.svelte-1mtuslq.svelte-1mtuslq{padding:1rem}.p-3.svelte-1mtuslq.svelte-1mtuslq{padding:0.75rem}.text-center.svelte-1mtuslq.svelte-1mtuslq{text-align:center}.text-xl.svelte-1mtuslq.svelte-1mtuslq{font-size:1.25rem;line-height:1.75rem}.text-neutral-300.svelte-1mtuslq.svelte-1mtuslq{--tw-text-opacity:1;color:rgb(212 212 212 / var(--tw-text-opacity))}.antialiased.svelte-1mtuslq.svelte-1mtuslq{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.shadow.svelte-1mtuslq.svelte-1mtuslq{--tw-shadow:0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.shadow-sm.svelte-1mtuslq.svelte-1mtuslq{--tw-shadow:0 1px 2px 0 rgb(0 0 0 / 0.05);--tw-shadow-colored:0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.filter.svelte-1mtuslq.svelte-1mtuslq{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.backdrop-blur-sm.svelte-1mtuslq.svelte-1mtuslq{--tw-backdrop-blur:blur(4px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.transition-colors.svelte-1mtuslq.svelte-1mtuslq{transition-property:color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.svelte-1mtuslq.svelte-1mtuslq,.svelte-1mtuslq.svelte-1mtuslq::before,.svelte-1mtuslq.svelte-1mtuslq::after{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}.svelte-1mtuslq.svelte-1mtuslq::before,.svelte-1mtuslq.svelte-1mtuslq::after{--tw-content:''}h1.svelte-1mtuslq.svelte-1mtuslq{font-size:inherit;font-weight:inherit}a.svelte-1mtuslq.svelte-1mtuslq{color:inherit;text-decoration:inherit}.svelte-1mtuslq.svelte-1mtuslq:-moz-focusring{outline:auto}.svelte-1mtuslq.svelte-1mtuslq:-moz-ui-invalid{box-shadow:none}.svelte-1mtuslq.svelte-1mtuslq::-webkit-inner-spin-button,.svelte-1mtuslq.svelte-1mtuslq::-webkit-outer-spin-button{height:auto}.svelte-1mtuslq.svelte-1mtuslq::-webkit-search-decoration{-webkit-appearance:none}.svelte-1mtuslq.svelte-1mtuslq::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}h1.svelte-1mtuslq.svelte-1mtuslq{margin:0}ul.svelte-1mtuslq.svelte-1mtuslq{list-style:none;margin:0;padding:0}[role=\"button\"].svelte-1mtuslq.svelte-1mtuslq{cursor:pointer}.svelte-1mtuslq.svelte-1mtuslq:disabled{cursor:default}img.svelte-1mtuslq.svelte-1mtuslq,svg.svelte-1mtuslq.svelte-1mtuslq{display:block;vertical-align:middle}img.svelte-1mtuslq.svelte-1mtuslq{max-width:100%;height:auto}.svelte-1mtuslq.svelte-1mtuslq,.svelte-1mtuslq.svelte-1mtuslq::before,.svelte-1mtuslq.svelte-1mtuslq::after{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x:  ;--tw-pan-y:  ;--tw-pinch-zoom:  ;--tw-scroll-snap-strictness:proximity;--tw-ordinal:  ;--tw-slashed-zero:  ;--tw-numeric-figure:  ;--tw-numeric-spacing:  ;--tw-numeric-fraction:  ;--tw-ring-inset:  ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur:  ;--tw-brightness:  ;--tw-contrast:  ;--tw-grayscale:  ;--tw-hue-rotate:  ;--tw-invert:  ;--tw-saturate:  ;--tw-sepia:  ;--tw-drop-shadow:  ;--tw-backdrop-blur:  ;--tw-backdrop-brightness:  ;--tw-backdrop-contrast:  ;--tw-backdrop-grayscale:  ;--tw-backdrop-hue-rotate:  ;--tw-backdrop-invert:  ;--tw-backdrop-opacity:  ;--tw-backdrop-saturate:  ;--tw-backdrop-sepia:  }.svelte-1mtuslq.svelte-1mtuslq::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x:  ;--tw-pan-y:  ;--tw-pinch-zoom:  ;--tw-scroll-snap-strictness:proximity;--tw-ordinal:  ;--tw-slashed-zero:  ;--tw-numeric-figure:  ;--tw-numeric-spacing:  ;--tw-numeric-fraction:  ;--tw-ring-inset:  ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur:  ;--tw-brightness:  ;--tw-contrast:  ;--tw-grayscale:  ;--tw-hue-rotate:  ;--tw-invert:  ;--tw-saturate:  ;--tw-sepia:  ;--tw-drop-shadow:  ;--tw-backdrop-blur:  ;--tw-backdrop-brightness:  ;--tw-backdrop-contrast:  ;--tw-backdrop-grayscale:  ;--tw-backdrop-hue-rotate:  ;--tw-backdrop-invert:  ;--tw-backdrop-opacity:  ;--tw-backdrop-saturate:  ;--tw-backdrop-sepia:  }.svelte-1mtuslq.svelte-1mtuslq{font-family:Nunito, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto,\n      Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue,\n      sans-serif;-webkit-font-smoothing:antialiased}.hover\\\\:bg-slate-200.svelte-1mtuslq.svelte-1mtuslq:hover{--tw-bg-opacity:1;background-color:rgb(226 232 240 / var(--tw-bg-opacity))}.dark.svelte-1mtuslq .dark\\\\:border-neutral-600.svelte-1mtuslq{--tw-border-opacity:1;border-color:rgb(82 82 82 / var(--tw-border-opacity))}.dark.svelte-1mtuslq .dark\\\\:bg-neutral-900.svelte-1mtuslq{--tw-bg-opacity:1;background-color:rgb(23 23 23 / var(--tw-bg-opacity))}.dark.svelte-1mtuslq .dark\\\\:bg-neutral-800.svelte-1mtuslq{--tw-bg-opacity:1;background-color:rgb(38 38 38 / var(--tw-bg-opacity))}.dark.svelte-1mtuslq .dark\\\\:fill-neutral-300.svelte-1mtuslq{fill:#d4d4d4}.dark.svelte-1mtuslq .dark\\\\:text-white.svelte-1mtuslq{--tw-text-opacity:1;color:rgb(255 255 255 / var(--tw-text-opacity))}.dark.svelte-1mtuslq .dark\\\\:text-neutral-600.svelte-1mtuslq{--tw-text-opacity:1;color:rgb(82 82 82 / var(--tw-text-opacity))}.dark.svelte-1mtuslq .dark\\\\:hover\\\\:bg-neutral-700.svelte-1mtuslq:hover{--tw-bg-opacity:1;background-color:rgb(64 64 64 / var(--tw-bg-opacity))}`);\n}\nfunction get_each_context(t, e, r) {\n  const n = t.slice();\n  return n[20] = e[r], n;\n}\nfunction get_each_context_1(t, e, r) {\n  const n = t.slice();\n  return n[23] = e[r], n;\n}\nfunction create_else_block(t) {\n  let e, r;\n  return {\n    c() {\n      e = element(\"img\"), attr(e, \"alt\", t[23].name), src_url_equal(e.src, r = t[23].icon) || attr(e, \"src\", r), attr(e, \"class\", \"w-8 h-8 rounded-full svelte-1mtuslq\");\n    },\n    m(n, o) {\n      insert(n, e, o);\n    },\n    p: noop,\n    d(n) {\n      n && detach(e);\n    }\n  };\n}\nfunction create_if_block(t) {\n  let e;\n  return {\n    c() {\n      e = element(\"div\"), e.innerHTML = `<svg aria-hidden=\"true\" class=\"w-8 h-8 text-neutral-300 animate-spin dark:text-neutral-600 fill-neutral-600 dark:fill-neutral-300 svelte-1mtuslq\" viewBox=\"0 0 100 101\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z\" fill=\"currentColor\" class=\"svelte-1mtuslq\"></path><path d=\"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z\" fill=\"currentFill\" class=\"svelte-1mtuslq\"></path></svg> \n              <span class=\"sr-only svelte-1mtuslq\">Loading...</span>`, attr(e, \"role\", \"status\"), attr(e, \"class\", \"svelte-1mtuslq\");\n    },\n    m(r, n) {\n      insert(r, e, n);\n    },\n    p: noop,\n    d(r) {\n      r && detach(e);\n    }\n  };\n}\nfunction create_each_block_1(t) {\n  let e, r = t[23].name + \"\", n, o, i, s;\n  function a(m, p) {\n    return m[1] === m[23].id ? create_if_block : create_else_block;\n  }\n  let c = a(t), l = c(t);\n  function u() {\n    return t[12](t[23]);\n  }\n  function d(...m) {\n    return t[13](t[23], ...m);\n  }\n  return {\n    c() {\n      e = element(\"li\"), n = text(r), o = space(), l.c(), attr(e, \"class\", \"flex justify-between items-center p-3 bg-slate-100 rounded-md cursor-pointer shadow-sm hover:bg-slate-200 transition-colors dark:bg-neutral-800 dark:hover:bg-neutral-700 dark:border-neutral-600 dark:text-white svelte-1mtuslq\");\n    },\n    m(m, p) {\n      insert(m, e, p), append(e, n), append(e, o), l.m(e, null), i || (s = [\n        listen(e, \"click\", u),\n        listen(e, \"keyup\", d)\n      ], i = !0);\n    },\n    p(m, p) {\n      t = m, c === (c = a(t)) && l ? l.p(t, p) : (l.d(1), l = c(t), l && (l.c(), l.m(e, null)));\n    },\n    d(m) {\n      m && detach(e), l.d(), i = !1, run_all(s);\n    }\n  };\n}\nfunction create_each_block(t) {\n  let e, r, n = t[20].name + \"\", o, i, s, a, c, l, u, d, m, p;\n  return {\n    c() {\n      e = element(\"a\"), r = element(\"li\"), o = text(n), i = space(), s = element(\"img\"), l = space(), attr(s, \"alt\", a = t[20].name), src_url_equal(s.src, c = t[20].icon) || attr(s, \"src\", c), attr(s, \"class\", \"w-8 h-8 rounded-full svelte-1mtuslq\"), attr(r, \"class\", \"flex justify-between items-center p-3 bg-slate-100 rounded-md shadow-sm cursor-pointer hover:bg-slate-200 transition-colors dark:bg-neutral-800 dark:hover:bg-neutral-700 dark:border-neutral-600 dark:text-white svelte-1mtuslq\"), attr(e, \"alt\", u = t[20].name + \" download link\"), attr(e, \"href\", d = t[20].download), attr(e, \"target\", \"_blank\"), attr(e, \"rel\", \"noopener noreferrer\"), attr(e, \"class\", \"svelte-1mtuslq\");\n    },\n    m(h, y) {\n      insert(h, e, y), append(e, r), append(r, o), append(r, i), append(r, s), append(e, l), m || (p = [\n        listen(r, \"click\", t[14]),\n        listen(r, \"keyup\", t[15])\n      ], m = !0);\n    },\n    p(h, y) {\n      y & 1 && n !== (n = h[20].name + \"\") && set_data(o, n), y & 1 && a !== (a = h[20].name) && attr(s, \"alt\", a), y & 1 && !src_url_equal(s.src, c = h[20].icon) && attr(s, \"src\", c), y & 1 && u !== (u = h[20].name + \" download link\") && attr(e, \"alt\", u), y & 1 && d !== (d = h[20].download) && attr(e, \"href\", d);\n    },\n    d(h) {\n      h && detach(e), m = !1, run_all(p);\n    }\n  };\n}\nfunction create_fragment(t) {\n  let e, r, n, o, i, s, a, c, l, u, d, m, p = t[4], h = [];\n  for (let g = 0; g < p.length; g += 1)\n    h[g] = create_each_block_1(get_each_context_1(t, p, g));\n  let y = t[0], w = [];\n  for (let g = 0; g < y.length; g += 1)\n    w[g] = create_each_block(get_each_context(t, y, g));\n  return {\n    c() {\n      e = element(\"div\"), r = element(\"main\"), n = element(\"header\"), o = element(\"h1\"), o.textContent = \"Connect a wallet\", i = space(), s = element(\"span\"), s.innerHTML = '<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" width=\"24px\" viewBox=\"0 0 24 24\" fill=\"currentColor\" class=\"svelte-1mtuslq\"><path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z\" class=\"svelte-1mtuslq\"></path></svg>', a = space(), c = element(\"ul\");\n      for (let g = 0; g < h.length; g += 1)\n        h[g].c();\n      l = space();\n      for (let g = 0; g < w.length; g += 1)\n        w[g].c();\n      attr(o, \"class\", \"text-xl svelte-1mtuslq\"), attr(s, \"role\", \"button\"), attr(s, \"alt\", \"Close\"), attr(s, \"class\", \"cursor-pointer svelte-1mtuslq\"), attr(n, \"class\", \"flex items-center justify-between mb-4 svelte-1mtuslq\"), attr(c, \"class\", \"flex flex-col gap-3 svelte-1mtuslq\"), attr(r, \"role\", \"dialog\"), attr(r, \"class\", null_to_empty(\"bg-slate-50 rounded-md shadow w-full max-w-[500px] mx-6 p-4 text-center z-50 dark:bg-neutral-900 dark:text-white\") + \" svelte-1mtuslq\"), attr(e, \"class\", u = null_to_empty(\"backdrop-blur-sm fixed inset-0 flex items-center justify-center bg-black/25 z-40 \" + t[2]) + \" svelte-1mtuslq\");\n    },\n    m(g, I) {\n      insert(g, e, I), append(e, r), append(r, n), append(n, o), append(n, i), append(n, s), append(r, a), append(r, c);\n      for (let M = 0; M < h.length; M += 1)\n        h[M].m(c, null);\n      append(c, l);\n      for (let M = 0; M < w.length; M += 1)\n        w[M].m(c, null);\n      d || (m = [\n        listen(s, \"click\", t[10]),\n        listen(s, \"keyup\", t[11]),\n        listen(r, \"click\", click_handler_3),\n        listen(r, \"keyup\", keyup_handler_3),\n        listen(e, \"click\", t[16]),\n        listen(e, \"keyup\", t[17])\n      ], d = !0);\n    },\n    p(g, [I]) {\n      if (I & 26) {\n        p = g[4];\n        let M;\n        for (M = 0; M < p.length; M += 1) {\n          const S = get_each_context_1(g, p, M);\n          h[M] ? h[M].p(S, I) : (h[M] = create_each_block_1(S), h[M].c(), h[M].m(c, l));\n        }\n        for (; M < h.length; M += 1)\n          h[M].d(1);\n        h.length = p.length;\n      }\n      if (I & 9) {\n        y = g[0];\n        let M;\n        for (M = 0; M < y.length; M += 1) {\n          const S = get_each_context(g, y, M);\n          w[M] ? w[M].p(S, I) : (w[M] = create_each_block(S), w[M].c(), w[M].m(c, null));\n        }\n        for (; M < w.length; M += 1)\n          w[M].d(1);\n        w.length = y.length;\n      }\n      I & 4 && u !== (u = null_to_empty(\"backdrop-blur-sm fixed inset-0 flex items-center justify-center bg-black/25 z-40 \" + g[2]) + \" svelte-1mtuslq\") && attr(e, \"class\", u);\n    },\n    i: noop,\n    o: noop,\n    d(g) {\n      g && detach(e), destroy_each(h, g), destroy_each(w, g), d = !1, run_all(m);\n    }\n  };\n}\nconst click_handler_3 = (t) => t.stopPropagation(), keyup_handler_3 = (t) => t.stopPropagation();\nfunction instance(t, e, r) {\n  const n = typeof window < \"u\" ? window : null;\n  let { lastWallet: o = null } = e, { installedWallets: i = [] } = e, { preAuthorizedWallets: s = [] } = e, { discoveryWallets: a = [] } = e, { callback: c = async () => {\n  } } = e, { theme: l = null } = e, u = !1, d = async (b) => {\n    var _;\n    r(1, u = (_ = b == null ? void 0 : b.id) != null ? _ : !1), await c(b).catch(() => {\n    }), r(1, u = !1);\n  }, m = \"\";\n  l === \"dark\" || l === null && (n == null ? void 0 : n.matchMedia(\"(prefers-color-scheme: dark)\").matches) ? m = \"dark\" : m = \"\";\n  const p = (b) => {\n    r(2, m = b.matches ? \"dark\" : \"\");\n  };\n  onMount(() => {\n    if (l === null)\n      return n == null || n.matchMedia(\"(prefers-color-scheme: dark)\").addEventListener(\"change\", p), () => {\n        n == null || n.matchMedia(\"(prefers-color-scheme: dark)\").removeEventListener(\"change\", p);\n      };\n  });\n  const h = [o, ...s, ...i].filter(Boolean), y = () => d(null), w = (b) => {\n    b.key === \"Enter\" && d(null);\n  }, g = (b) => d(b), I = (b, _) => {\n    _.key === \"Enter\" && d(b);\n  }, M = () => d(null), S = (b) => {\n    b.key === \"Enter\" && d(null);\n  }, E = () => d(null), D = (b) => {\n    b.key === \"Escape\" && d(null);\n  };\n  return t.$$set = (b) => {\n    \"lastWallet\" in b && r(5, o = b.lastWallet), \"installedWallets\" in b && r(6, i = b.installedWallets), \"preAuthorizedWallets\" in b && r(7, s = b.preAuthorizedWallets), \"discoveryWallets\" in b && r(0, a = b.discoveryWallets), \"callback\" in b && r(8, c = b.callback), \"theme\" in b && r(9, l = b.theme);\n  }, [\n    a,\n    u,\n    m,\n    d,\n    h,\n    o,\n    i,\n    s,\n    c,\n    l,\n    y,\n    w,\n    g,\n    I,\n    M,\n    S,\n    E,\n    D\n  ];\n}\nclass Modal extends SvelteComponent {\n  constructor(e) {\n    super(), init$1(\n      this,\n      e,\n      instance,\n      create_fragment,\n      safe_not_equal,\n      {\n        lastWallet: 5,\n        installedWallets: 6,\n        preAuthorizedWallets: 7,\n        discoveryWallets: 0,\n        callback: 8,\n        theme: 9\n      },\n      add_css\n    );\n  }\n}\nfunction excludeWallets(t, e) {\n  return t.filter((r) => !e.some((n) => n.id === r.id));\n}\nasync function show({\n  discoveryWallets: t,\n  installedWallets: e,\n  lastWallet: r,\n  preAuthorizedWallets: n,\n  enable: o,\n  modalOptions: i\n}) {\n  return new Promise((s) => {\n    var l;\n    const a = [r].filter(Boolean);\n    n = excludeWallets(n, a), e = excludeWallets(e, [\n      ...a,\n      ...n\n    ]), t = excludeWallets(t, [\n      ...a,\n      ...e,\n      ...n\n    ]);\n    const c = new Modal({\n      target: document.body,\n      props: {\n        callback: async (u) => {\n          var m;\n          const d = (m = await (o == null ? void 0 : o(u))) != null ? m : u;\n          c.$destroy(), s(d);\n        },\n        lastWallet: r,\n        installedWallets: e,\n        preAuthorizedWallets: n,\n        discoveryWallets: t,\n        theme: (i == null ? void 0 : i.theme) === \"system\" ? null : (l = i == null ? void 0 : i.theme) != null ? l : null\n      }\n    });\n  });\n}\nconst BROWSER_ALIASES_MAP = {\n  \"Amazon Silk\": \"amazon_silk\",\n  \"Android Browser\": \"android\",\n  Bada: \"bada\",\n  BlackBerry: \"blackberry\",\n  Chrome: \"chrome\",\n  Chromium: \"chromium\",\n  Electron: \"electron\",\n  Epiphany: \"epiphany\",\n  Firefox: \"firefox\",\n  Focus: \"focus\",\n  Generic: \"generic\",\n  \"Google Search\": \"google_search\",\n  Googlebot: \"googlebot\",\n  \"Internet Explorer\": \"ie\",\n  \"K-Meleon\": \"k_meleon\",\n  Maxthon: \"maxthon\",\n  \"Microsoft Edge\": \"edge\",\n  \"MZ Browser\": \"mz\",\n  \"NAVER Whale Browser\": \"naver\",\n  Opera: \"opera\",\n  \"Opera Coast\": \"opera_coast\",\n  PhantomJS: \"phantomjs\",\n  Puffin: \"puffin\",\n  QupZilla: \"qupzilla\",\n  QQ: \"qq\",\n  QQLite: \"qqlite\",\n  Safari: \"safari\",\n  Sailfish: \"sailfish\",\n  \"Samsung Internet for Android\": \"samsung_internet\",\n  SeaMonkey: \"seamonkey\",\n  Sleipnir: \"sleipnir\",\n  Swing: \"swing\",\n  Tizen: \"tizen\",\n  \"UC Browser\": \"uc\",\n  Vivaldi: \"vivaldi\",\n  \"WebOS Browser\": \"webos\",\n  WeChat: \"wechat\",\n  \"Yandex Browser\": \"yandex\",\n  Roku: \"roku\"\n}, BROWSER_MAP = {\n  amazon_silk: \"Amazon Silk\",\n  android: \"Android Browser\",\n  bada: \"Bada\",\n  blackberry: \"BlackBerry\",\n  chrome: \"Chrome\",\n  chromium: \"Chromium\",\n  electron: \"Electron\",\n  epiphany: \"Epiphany\",\n  firefox: \"Firefox\",\n  focus: \"Focus\",\n  generic: \"Generic\",\n  googlebot: \"Googlebot\",\n  google_search: \"Google Search\",\n  ie: \"Internet Explorer\",\n  k_meleon: \"K-Meleon\",\n  maxthon: \"Maxthon\",\n  edge: \"Microsoft Edge\",\n  mz: \"MZ Browser\",\n  naver: \"NAVER Whale Browser\",\n  opera: \"Opera\",\n  opera_coast: \"Opera Coast\",\n  phantomjs: \"PhantomJS\",\n  puffin: \"Puffin\",\n  qupzilla: \"QupZilla\",\n  qq: \"QQ Browser\",\n  qqlite: \"QQ Browser Lite\",\n  safari: \"Safari\",\n  sailfish: \"Sailfish\",\n  samsung_internet: \"Samsung Internet for Android\",\n  seamonkey: \"SeaMonkey\",\n  sleipnir: \"Sleipnir\",\n  swing: \"Swing\",\n  tizen: \"Tizen\",\n  uc: \"UC Browser\",\n  vivaldi: \"Vivaldi\",\n  webos: \"WebOS Browser\",\n  wechat: \"WeChat\",\n  yandex: \"Yandex Browser\"\n}, PLATFORMS_MAP = {\n  tablet: \"tablet\",\n  mobile: \"mobile\",\n  desktop: \"desktop\",\n  tv: \"tv\"\n}, OS_MAP = {\n  WindowsPhone: \"Windows Phone\",\n  Windows: \"Windows\",\n  MacOS: \"macOS\",\n  iOS: \"iOS\",\n  Android: \"Android\",\n  WebOS: \"WebOS\",\n  BlackBerry: \"BlackBerry\",\n  Bada: \"Bada\",\n  Tizen: \"Tizen\",\n  Linux: \"Linux\",\n  ChromeOS: \"Chrome OS\",\n  PlayStation4: \"PlayStation 4\",\n  Roku: \"Roku\"\n}, ENGINE_MAP = {\n  EdgeHTML: \"EdgeHTML\",\n  Blink: \"Blink\",\n  Trident: \"Trident\",\n  Presto: \"Presto\",\n  Gecko: \"Gecko\",\n  WebKit: \"WebKit\"\n};\nclass Utils {\n  static getFirstMatch(e, r) {\n    const n = r.match(e);\n    return n && n.length > 0 && n[1] || \"\";\n  }\n  static getSecondMatch(e, r) {\n    const n = r.match(e);\n    return n && n.length > 1 && n[2] || \"\";\n  }\n  static matchAndReturnConst(e, r, n) {\n    if (e.test(r))\n      return n;\n  }\n  static getWindowsVersionName(e) {\n    switch (e) {\n      case \"NT\":\n        return \"NT\";\n      case \"XP\":\n        return \"XP\";\n      case \"NT 5.0\":\n        return \"2000\";\n      case \"NT 5.1\":\n        return \"XP\";\n      case \"NT 5.2\":\n        return \"2003\";\n      case \"NT 6.0\":\n        return \"Vista\";\n      case \"NT 6.1\":\n        return \"7\";\n      case \"NT 6.2\":\n        return \"8\";\n      case \"NT 6.3\":\n        return \"8.1\";\n      case \"NT 10.0\":\n        return \"10\";\n      default:\n        return;\n    }\n  }\n  static getMacOSVersionName(e) {\n    const r = e.split(\".\").splice(0, 2).map((n) => parseInt(n, 10) || 0);\n    if (r.push(0), r[0] === 10)\n      switch (r[1]) {\n        case 5:\n          return \"Leopard\";\n        case 6:\n          return \"Snow Leopard\";\n        case 7:\n          return \"Lion\";\n        case 8:\n          return \"Mountain Lion\";\n        case 9:\n          return \"Mavericks\";\n        case 10:\n          return \"Yosemite\";\n        case 11:\n          return \"El Capitan\";\n        case 12:\n          return \"Sierra\";\n        case 13:\n          return \"High Sierra\";\n        case 14:\n          return \"Mojave\";\n        case 15:\n          return \"Catalina\";\n        default:\n          return;\n      }\n  }\n  static getAndroidVersionName(e) {\n    const r = e.split(\".\").splice(0, 2).map((n) => parseInt(n, 10) || 0);\n    if (r.push(0), !(r[0] === 1 && r[1] < 5)) {\n      if (r[0] === 1 && r[1] < 6)\n        return \"Cupcake\";\n      if (r[0] === 1 && r[1] >= 6)\n        return \"Donut\";\n      if (r[0] === 2 && r[1] < 2)\n        return \"Eclair\";\n      if (r[0] === 2 && r[1] === 2)\n        return \"Froyo\";\n      if (r[0] === 2 && r[1] > 2)\n        return \"Gingerbread\";\n      if (r[0] === 3)\n        return \"Honeycomb\";\n      if (r[0] === 4 && r[1] < 1)\n        return \"Ice Cream Sandwich\";\n      if (r[0] === 4 && r[1] < 4)\n        return \"Jelly Bean\";\n      if (r[0] === 4 && r[1] >= 4)\n        return \"KitKat\";\n      if (r[0] === 5)\n        return \"Lollipop\";\n      if (r[0] === 6)\n        return \"Marshmallow\";\n      if (r[0] === 7)\n        return \"Nougat\";\n      if (r[0] === 8)\n        return \"Oreo\";\n      if (r[0] === 9)\n        return \"Pie\";\n    }\n  }\n  static getVersionPrecision(e) {\n    return e.split(\".\").length;\n  }\n  static compareVersions(e, r, n = !1) {\n    const o = Utils.getVersionPrecision(e), i = Utils.getVersionPrecision(r);\n    let s = Math.max(o, i), a = 0;\n    const c = Utils.map([e, r], (l) => {\n      const u = s - Utils.getVersionPrecision(l), d = l + new Array(u + 1).join(\".0\");\n      return Utils.map(d.split(\".\"), (m) => new Array(20 - m.length).join(\"0\") + m).reverse();\n    });\n    for (n && (a = s - Math.min(o, i)), s -= 1; s >= a; ) {\n      if (c[0][s] > c[1][s])\n        return 1;\n      if (c[0][s] === c[1][s]) {\n        if (s === a)\n          return 0;\n        s -= 1;\n      } else if (c[0][s] < c[1][s])\n        return -1;\n    }\n  }\n  static map(e, r) {\n    const n = [];\n    let o;\n    if (Array.prototype.map)\n      return Array.prototype.map.call(e, r);\n    for (o = 0; o < e.length; o += 1)\n      n.push(r(e[o]));\n    return n;\n  }\n  static find(e, r) {\n    let n, o;\n    if (Array.prototype.find)\n      return Array.prototype.find.call(e, r);\n    for (n = 0, o = e.length; n < o; n += 1) {\n      const i = e[n];\n      if (r(i, n))\n        return i;\n    }\n  }\n  static assign(e, ...r) {\n    const n = e;\n    let o, i;\n    if (Object.assign)\n      return Object.assign(e, ...r);\n    for (o = 0, i = r.length; o < i; o += 1) {\n      const s = r[o];\n      typeof s == \"object\" && s !== null && Object.keys(s).forEach((c) => {\n        n[c] = s[c];\n      });\n    }\n    return e;\n  }\n  static getBrowserAlias(e) {\n    return BROWSER_ALIASES_MAP[e];\n  }\n  static getBrowserTypeByAlias(e) {\n    return BROWSER_MAP[e] || \"\";\n  }\n}\nconst commonVersionIdentifier = /version\\/(\\d+(\\.?_?\\d+)+)/i, browsersList = [\n  {\n    test: [/googlebot/i],\n    describe(t) {\n      const e = {\n        name: \"Googlebot\"\n      }, r = Utils.getFirstMatch(/googlebot\\/(\\d+(\\.\\d+))/i, t) || Utils.getFirstMatch(commonVersionIdentifier, t);\n      return r && (e.version = r), e;\n    }\n  },\n  {\n    test: [/opera/i],\n    describe(t) {\n      const e = {\n        name: \"Opera\"\n      }, r = Utils.getFirstMatch(commonVersionIdentifier, t) || Utils.getFirstMatch(/(?:opera)[\\s/](\\d+(\\.?_?\\d+)+)/i, t);\n      return r && (e.version = r), e;\n    }\n  },\n  {\n    test: [/opr\\/|opios/i],\n    describe(t) {\n      const e = {\n        name: \"Opera\"\n      }, r = Utils.getFirstMatch(/(?:opr|opios)[\\s/](\\S+)/i, t) || Utils.getFirstMatch(commonVersionIdentifier, t);\n      return r && (e.version = r), e;\n    }\n  },\n  {\n    test: [/SamsungBrowser/i],\n    describe(t) {\n      const e = {\n        name: \"Samsung Internet for Android\"\n      }, r = Utils.getFirstMatch(commonVersionIdentifier, t) || Utils.getFirstMatch(/(?:SamsungBrowser)[\\s/](\\d+(\\.?_?\\d+)+)/i, t);\n      return r && (e.version = r), e;\n    }\n  },\n  {\n    test: [/Whale/i],\n    describe(t) {\n      const e = {\n        name: \"NAVER Whale Browser\"\n      }, r = Utils.getFirstMatch(commonVersionIdentifier, t) || Utils.getFirstMatch(/(?:whale)[\\s/](\\d+(?:\\.\\d+)+)/i, t);\n      return r && (e.version = r), e;\n    }\n  },\n  {\n    test: [/MZBrowser/i],\n    describe(t) {\n      const e = {\n        name: \"MZ Browser\"\n      }, r = Utils.getFirstMatch(/(?:MZBrowser)[\\s/](\\d+(?:\\.\\d+)+)/i, t) || Utils.getFirstMatch(commonVersionIdentifier, t);\n      return r && (e.version = r), e;\n    }\n  },\n  {\n    test: [/focus/i],\n    describe(t) {\n      const e = {\n        name: \"Focus\"\n      }, r = Utils.getFirstMatch(/(?:focus)[\\s/](\\d+(?:\\.\\d+)+)/i, t) || Utils.getFirstMatch(commonVersionIdentifier, t);\n      return r && (e.version = r), e;\n    }\n  },\n  {\n    test: [/swing/i],\n    describe(t) {\n      const e = {\n        name: \"Swing\"\n      }, r = Utils.getFirstMatch(/(?:swing)[\\s/](\\d+(?:\\.\\d+)+)/i, t) || Utils.getFirstMatch(commonVersionIdentifier, t);\n      return r && (e.version = r), e;\n    }\n  },\n  {\n    test: [/coast/i],\n    describe(t) {\n      const e = {\n        name: \"Opera Coast\"\n      }, r = Utils.getFirstMatch(commonVersionIdentifier, t) || Utils.getFirstMatch(/(?:coast)[\\s/](\\d+(\\.?_?\\d+)+)/i, t);\n      return r && (e.version = r), e;\n    }\n  },\n  {\n    test: [/opt\\/\\d+(?:.?_?\\d+)+/i],\n    describe(t) {\n      const e = {\n        name: \"Opera Touch\"\n      }, r = Utils.getFirstMatch(/(?:opt)[\\s/](\\d+(\\.?_?\\d+)+)/i, t) || Utils.getFirstMatch(commonVersionIdentifier, t);\n      return r && (e.version = r), e;\n    }\n  },\n  {\n    test: [/yabrowser/i],\n    describe(t) {\n      const e = {\n        name: \"Yandex Browser\"\n      }, r = Utils.getFirstMatch(/(?:yabrowser)[\\s/](\\d+(\\.?_?\\d+)+)/i, t) || Utils.getFirstMatch(commonVersionIdentifier, t);\n      return r && (e.version = r), e;\n    }\n  },\n  {\n    test: [/ucbrowser/i],\n    describe(t) {\n      const e = {\n        name: \"UC Browser\"\n      }, r = Utils.getFirstMatch(commonVersionIdentifier, t) || Utils.getFirstMatch(/(?:ucbrowser)[\\s/](\\d+(\\.?_?\\d+)+)/i, t);\n      return r && (e.version = r), e;\n    }\n  },\n  {\n    test: [/Maxthon|mxios/i],\n    describe(t) {\n      const e = {\n        name: \"Maxthon\"\n      }, r = Utils.getFirstMatch(commonVersionIdentifier, t) || Utils.getFirstMatch(/(?:Maxthon|mxios)[\\s/](\\d+(\\.?_?\\d+)+)/i, t);\n      return r && (e.version = r), e;\n    }\n  },\n  {\n    test: [/epiphany/i],\n    describe(t) {\n      const e = {\n        name: \"Epiphany\"\n      }, r = Utils.getFirstMatch(commonVersionIdentifier, t) || Utils.getFirstMatch(/(?:epiphany)[\\s/](\\d+(\\.?_?\\d+)+)/i, t);\n      return r && (e.version = r), e;\n    }\n  },\n  {\n    test: [/puffin/i],\n    describe(t) {\n      const e = {\n        name: \"Puffin\"\n      }, r = Utils.getFirstMatch(commonVersionIdentifier, t) || Utils.getFirstMatch(/(?:puffin)[\\s/](\\d+(\\.?_?\\d+)+)/i, t);\n      return r && (e.version = r), e;\n    }\n  },\n  {\n    test: [/sleipnir/i],\n    describe(t) {\n      const e = {\n        name: \"Sleipnir\"\n      }, r = Utils.getFirstMatch(commonVersionIdentifier, t) || Utils.getFirstMatch(/(?:sleipnir)[\\s/](\\d+(\\.?_?\\d+)+)/i, t);\n      return r && (e.version = r), e;\n    }\n  },\n  {\n    test: [/k-meleon/i],\n    describe(t) {\n      const e = {\n        name: \"K-Meleon\"\n      }, r = Utils.getFirstMatch(commonVersionIdentifier, t) || Utils.getFirstMatch(/(?:k-meleon)[\\s/](\\d+(\\.?_?\\d+)+)/i, t);\n      return r && (e.version = r), e;\n    }\n  },\n  {\n    test: [/micromessenger/i],\n    describe(t) {\n      const e = {\n        name: \"WeChat\"\n      }, r = Utils.getFirstMatch(/(?:micromessenger)[\\s/](\\d+(\\.?_?\\d+)+)/i, t) || Utils.getFirstMatch(commonVersionIdentifier, t);\n      return r && (e.version = r), e;\n    }\n  },\n  {\n    test: [/qqbrowser/i],\n    describe(t) {\n      const e = {\n        name: /qqbrowserlite/i.test(t) ? \"QQ Browser Lite\" : \"QQ Browser\"\n      }, r = Utils.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\\d+(\\.?_?\\d+)+)/i, t) || Utils.getFirstMatch(commonVersionIdentifier, t);\n      return r && (e.version = r), e;\n    }\n  },\n  {\n    test: [/msie|trident/i],\n    describe(t) {\n      const e = {\n        name: \"Internet Explorer\"\n      }, r = Utils.getFirstMatch(/(?:msie |rv:)(\\d+(\\.?_?\\d+)+)/i, t);\n      return r && (e.version = r), e;\n    }\n  },\n  {\n    test: [/\\sedg\\//i],\n    describe(t) {\n      const e = {\n        name: \"Microsoft Edge\"\n      }, r = Utils.getFirstMatch(/\\sedg\\/(\\d+(\\.?_?\\d+)+)/i, t);\n      return r && (e.version = r), e;\n    }\n  },\n  {\n    test: [/edg([ea]|ios)/i],\n    describe(t) {\n      const e = {\n        name: \"Microsoft Edge\"\n      }, r = Utils.getSecondMatch(/edg([ea]|ios)\\/(\\d+(\\.?_?\\d+)+)/i, t);\n      return r && (e.version = r), e;\n    }\n  },\n  {\n    test: [/vivaldi/i],\n    describe(t) {\n      const e = {\n        name: \"Vivaldi\"\n      }, r = Utils.getFirstMatch(/vivaldi\\/(\\d+(\\.?_?\\d+)+)/i, t);\n      return r && (e.version = r), e;\n    }\n  },\n  {\n    test: [/seamonkey/i],\n    describe(t) {\n      const e = {\n        name: \"SeaMonkey\"\n      }, r = Utils.getFirstMatch(/seamonkey\\/(\\d+(\\.?_?\\d+)+)/i, t);\n      return r && (e.version = r), e;\n    }\n  },\n  {\n    test: [/sailfish/i],\n    describe(t) {\n      const e = {\n        name: \"Sailfish\"\n      }, r = Utils.getFirstMatch(/sailfish\\s?browser\\/(\\d+(\\.\\d+)?)/i, t);\n      return r && (e.version = r), e;\n    }\n  },\n  {\n    test: [/silk/i],\n    describe(t) {\n      const e = {\n        name: \"Amazon Silk\"\n      }, r = Utils.getFirstMatch(/silk\\/(\\d+(\\.?_?\\d+)+)/i, t);\n      return r && (e.version = r), e;\n    }\n  },\n  {\n    test: [/phantom/i],\n    describe(t) {\n      const e = {\n        name: \"PhantomJS\"\n      }, r = Utils.getFirstMatch(/phantomjs\\/(\\d+(\\.?_?\\d+)+)/i, t);\n      return r && (e.version = r), e;\n    }\n  },\n  {\n    test: [/slimerjs/i],\n    describe(t) {\n      const e = {\n        name: \"SlimerJS\"\n      }, r = Utils.getFirstMatch(/slimerjs\\/(\\d+(\\.?_?\\d+)+)/i, t);\n      return r && (e.version = r), e;\n    }\n  },\n  {\n    test: [/blackberry|\\bbb\\d+/i, /rim\\stablet/i],\n    describe(t) {\n      const e = {\n        name: \"BlackBerry\"\n      }, r = Utils.getFirstMatch(commonVersionIdentifier, t) || Utils.getFirstMatch(/blackberry[\\d]+\\/(\\d+(\\.?_?\\d+)+)/i, t);\n      return r && (e.version = r), e;\n    }\n  },\n  {\n    test: [/(web|hpw)[o0]s/i],\n    describe(t) {\n      const e = {\n        name: \"WebOS Browser\"\n      }, r = Utils.getFirstMatch(commonVersionIdentifier, t) || Utils.getFirstMatch(/w(?:eb)?[o0]sbrowser\\/(\\d+(\\.?_?\\d+)+)/i, t);\n      return r && (e.version = r), e;\n    }\n  },\n  {\n    test: [/bada/i],\n    describe(t) {\n      const e = {\n        name: \"Bada\"\n      }, r = Utils.getFirstMatch(/dolfin\\/(\\d+(\\.?_?\\d+)+)/i, t);\n      return r && (e.version = r), e;\n    }\n  },\n  {\n    test: [/tizen/i],\n    describe(t) {\n      const e = {\n        name: \"Tizen\"\n      }, r = Utils.getFirstMatch(/(?:tizen\\s?)?browser\\/(\\d+(\\.?_?\\d+)+)/i, t) || Utils.getFirstMatch(commonVersionIdentifier, t);\n      return r && (e.version = r), e;\n    }\n  },\n  {\n    test: [/qupzilla/i],\n    describe(t) {\n      const e = {\n        name: \"QupZilla\"\n      }, r = Utils.getFirstMatch(/(?:qupzilla)[\\s/](\\d+(\\.?_?\\d+)+)/i, t) || Utils.getFirstMatch(commonVersionIdentifier, t);\n      return r && (e.version = r), e;\n    }\n  },\n  {\n    test: [/firefox|iceweasel|fxios/i],\n    describe(t) {\n      const e = {\n        name: \"Firefox\"\n      }, r = Utils.getFirstMatch(/(?:firefox|iceweasel|fxios)[\\s/](\\d+(\\.?_?\\d+)+)/i, t);\n      return r && (e.version = r), e;\n    }\n  },\n  {\n    test: [/electron/i],\n    describe(t) {\n      const e = {\n        name: \"Electron\"\n      }, r = Utils.getFirstMatch(/(?:electron)\\/(\\d+(\\.?_?\\d+)+)/i, t);\n      return r && (e.version = r), e;\n    }\n  },\n  {\n    test: [/MiuiBrowser/i],\n    describe(t) {\n      const e = {\n        name: \"Miui\"\n      }, r = Utils.getFirstMatch(/(?:MiuiBrowser)[\\s/](\\d+(\\.?_?\\d+)+)/i, t);\n      return r && (e.version = r), e;\n    }\n  },\n  {\n    test: [/chromium/i],\n    describe(t) {\n      const e = {\n        name: \"Chromium\"\n      }, r = Utils.getFirstMatch(/(?:chromium)[\\s/](\\d+(\\.?_?\\d+)+)/i, t) || Utils.getFirstMatch(commonVersionIdentifier, t);\n      return r && (e.version = r), e;\n    }\n  },\n  {\n    test: [/chrome|crios|crmo/i],\n    describe(t) {\n      const e = {\n        name: \"Chrome\"\n      }, r = Utils.getFirstMatch(/(?:chrome|crios|crmo)\\/(\\d+(\\.?_?\\d+)+)/i, t);\n      return r && (e.version = r), e;\n    }\n  },\n  {\n    test: [/GSA/i],\n    describe(t) {\n      const e = {\n        name: \"Google Search\"\n      }, r = Utils.getFirstMatch(/(?:GSA)\\/(\\d+(\\.?_?\\d+)+)/i, t);\n      return r && (e.version = r), e;\n    }\n  },\n  {\n    test(t) {\n      const e = !t.test(/like android/i), r = t.test(/android/i);\n      return e && r;\n    },\n    describe(t) {\n      const e = {\n        name: \"Android Browser\"\n      }, r = Utils.getFirstMatch(commonVersionIdentifier, t);\n      return r && (e.version = r), e;\n    }\n  },\n  {\n    test: [/playstation 4/i],\n    describe(t) {\n      const e = {\n        name: \"PlayStation 4\"\n      }, r = Utils.getFirstMatch(commonVersionIdentifier, t);\n      return r && (e.version = r), e;\n    }\n  },\n  {\n    test: [/safari|applewebkit/i],\n    describe(t) {\n      const e = {\n        name: \"Safari\"\n      }, r = Utils.getFirstMatch(commonVersionIdentifier, t);\n      return r && (e.version = r), e;\n    }\n  },\n  {\n    test: [/.*/i],\n    describe(t) {\n      const e = /^(.*)\\/(.*) /, r = /^(.*)\\/(.*)[ \\t]\\((.*)/, o = t.search(\"\\\\(\") !== -1 ? r : e;\n      return {\n        name: Utils.getFirstMatch(o, t),\n        version: Utils.getSecondMatch(o, t)\n      };\n    }\n  }\n], osParsersList = [\n  {\n    test: [/Roku\\/DVP/],\n    describe(t) {\n      const e = Utils.getFirstMatch(/Roku\\/DVP-(\\d+\\.\\d+)/i, t);\n      return {\n        name: OS_MAP.Roku,\n        version: e\n      };\n    }\n  },\n  {\n    test: [/windows phone/i],\n    describe(t) {\n      const e = Utils.getFirstMatch(/windows phone (?:os)?\\s?(\\d+(\\.\\d+)*)/i, t);\n      return {\n        name: OS_MAP.WindowsPhone,\n        version: e\n      };\n    }\n  },\n  {\n    test: [/windows /i],\n    describe(t) {\n      const e = Utils.getFirstMatch(/Windows ((NT|XP)( \\d\\d?.\\d)?)/i, t), r = Utils.getWindowsVersionName(e);\n      return {\n        name: OS_MAP.Windows,\n        version: e,\n        versionName: r\n      };\n    }\n  },\n  {\n    test: [/Macintosh(.*?) FxiOS(.*?)\\//],\n    describe(t) {\n      const e = {\n        name: OS_MAP.iOS\n      }, r = Utils.getSecondMatch(/(Version\\/)(\\d[\\d.]+)/, t);\n      return r && (e.version = r), e;\n    }\n  },\n  {\n    test: [/macintosh/i],\n    describe(t) {\n      const e = Utils.getFirstMatch(/mac os x (\\d+(\\.?_?\\d+)+)/i, t).replace(/[_\\s]/g, \".\"), r = Utils.getMacOSVersionName(e), n = {\n        name: OS_MAP.MacOS,\n        version: e\n      };\n      return r && (n.versionName = r), n;\n    }\n  },\n  {\n    test: [/(ipod|iphone|ipad)/i],\n    describe(t) {\n      const e = Utils.getFirstMatch(/os (\\d+([_\\s]\\d+)*) like mac os x/i, t).replace(/[_\\s]/g, \".\");\n      return {\n        name: OS_MAP.iOS,\n        version: e\n      };\n    }\n  },\n  {\n    test(t) {\n      const e = !t.test(/like android/i), r = t.test(/android/i);\n      return e && r;\n    },\n    describe(t) {\n      const e = Utils.getFirstMatch(/android[\\s/-](\\d+(\\.\\d+)*)/i, t), r = Utils.getAndroidVersionName(e), n = {\n        name: OS_MAP.Android,\n        version: e\n      };\n      return r && (n.versionName = r), n;\n    }\n  },\n  {\n    test: [/(web|hpw)[o0]s/i],\n    describe(t) {\n      const e = Utils.getFirstMatch(/(?:web|hpw)[o0]s\\/(\\d+(\\.\\d+)*)/i, t), r = {\n        name: OS_MAP.WebOS\n      };\n      return e && e.length && (r.version = e), r;\n    }\n  },\n  {\n    test: [/blackberry|\\bbb\\d+/i, /rim\\stablet/i],\n    describe(t) {\n      const e = Utils.getFirstMatch(/rim\\stablet\\sos\\s(\\d+(\\.\\d+)*)/i, t) || Utils.getFirstMatch(/blackberry\\d+\\/(\\d+([_\\s]\\d+)*)/i, t) || Utils.getFirstMatch(/\\bbb(\\d+)/i, t);\n      return {\n        name: OS_MAP.BlackBerry,\n        version: e\n      };\n    }\n  },\n  {\n    test: [/bada/i],\n    describe(t) {\n      const e = Utils.getFirstMatch(/bada\\/(\\d+(\\.\\d+)*)/i, t);\n      return {\n        name: OS_MAP.Bada,\n        version: e\n      };\n    }\n  },\n  {\n    test: [/tizen/i],\n    describe(t) {\n      const e = Utils.getFirstMatch(/tizen[/\\s](\\d+(\\.\\d+)*)/i, t);\n      return {\n        name: OS_MAP.Tizen,\n        version: e\n      };\n    }\n  },\n  {\n    test: [/linux/i],\n    describe() {\n      return {\n        name: OS_MAP.Linux\n      };\n    }\n  },\n  {\n    test: [/CrOS/],\n    describe() {\n      return {\n        name: OS_MAP.ChromeOS\n      };\n    }\n  },\n  {\n    test: [/PlayStation 4/],\n    describe(t) {\n      const e = Utils.getFirstMatch(/PlayStation 4[/\\s](\\d+(\\.\\d+)*)/i, t);\n      return {\n        name: OS_MAP.PlayStation4,\n        version: e\n      };\n    }\n  }\n], platformParsersList = [\n  {\n    test: [/googlebot/i],\n    describe() {\n      return {\n        type: \"bot\",\n        vendor: \"Google\"\n      };\n    }\n  },\n  {\n    test: [/huawei/i],\n    describe(t) {\n      const e = Utils.getFirstMatch(/(can-l01)/i, t) && \"Nova\", r = {\n        type: PLATFORMS_MAP.mobile,\n        vendor: \"Huawei\"\n      };\n      return e && (r.model = e), r;\n    }\n  },\n  {\n    test: [/nexus\\s*(?:7|8|9|10).*/i],\n    describe() {\n      return {\n        type: PLATFORMS_MAP.tablet,\n        vendor: \"Nexus\"\n      };\n    }\n  },\n  {\n    test: [/ipad/i],\n    describe() {\n      return {\n        type: PLATFORMS_MAP.tablet,\n        vendor: \"Apple\",\n        model: \"iPad\"\n      };\n    }\n  },\n  {\n    test: [/Macintosh(.*?) FxiOS(.*?)\\//],\n    describe() {\n      return {\n        type: PLATFORMS_MAP.tablet,\n        vendor: \"Apple\",\n        model: \"iPad\"\n      };\n    }\n  },\n  {\n    test: [/kftt build/i],\n    describe() {\n      return {\n        type: PLATFORMS_MAP.tablet,\n        vendor: \"Amazon\",\n        model: \"Kindle Fire HD 7\"\n      };\n    }\n  },\n  {\n    test: [/silk/i],\n    describe() {\n      return {\n        type: PLATFORMS_MAP.tablet,\n        vendor: \"Amazon\"\n      };\n    }\n  },\n  {\n    test: [/tablet(?! pc)/i],\n    describe() {\n      return {\n        type: PLATFORMS_MAP.tablet\n      };\n    }\n  },\n  {\n    test(t) {\n      const e = t.test(/ipod|iphone/i), r = t.test(/like (ipod|iphone)/i);\n      return e && !r;\n    },\n    describe(t) {\n      const e = Utils.getFirstMatch(/(ipod|iphone)/i, t);\n      return {\n        type: PLATFORMS_MAP.mobile,\n        vendor: \"Apple\",\n        model: e\n      };\n    }\n  },\n  {\n    test: [/nexus\\s*[0-6].*/i, /galaxy nexus/i],\n    describe() {\n      return {\n        type: PLATFORMS_MAP.mobile,\n        vendor: \"Nexus\"\n      };\n    }\n  },\n  {\n    test: [/[^-]mobi/i],\n    describe() {\n      return {\n        type: PLATFORMS_MAP.mobile\n      };\n    }\n  },\n  {\n    test(t) {\n      return t.getBrowserName(!0) === \"blackberry\";\n    },\n    describe() {\n      return {\n        type: PLATFORMS_MAP.mobile,\n        vendor: \"BlackBerry\"\n      };\n    }\n  },\n  {\n    test(t) {\n      return t.getBrowserName(!0) === \"bada\";\n    },\n    describe() {\n      return {\n        type: PLATFORMS_MAP.mobile\n      };\n    }\n  },\n  {\n    test(t) {\n      return t.getBrowserName() === \"windows phone\";\n    },\n    describe() {\n      return {\n        type: PLATFORMS_MAP.mobile,\n        vendor: \"Microsoft\"\n      };\n    }\n  },\n  {\n    test(t) {\n      const e = Number(String(t.getOSVersion()).split(\".\")[0]);\n      return t.getOSName(!0) === \"android\" && e >= 3;\n    },\n    describe() {\n      return {\n        type: PLATFORMS_MAP.tablet\n      };\n    }\n  },\n  {\n    test(t) {\n      return t.getOSName(!0) === \"android\";\n    },\n    describe() {\n      return {\n        type: PLATFORMS_MAP.mobile\n      };\n    }\n  },\n  {\n    test(t) {\n      return t.getOSName(!0) === \"macos\";\n    },\n    describe() {\n      return {\n        type: PLATFORMS_MAP.desktop,\n        vendor: \"Apple\"\n      };\n    }\n  },\n  {\n    test(t) {\n      return t.getOSName(!0) === \"windows\";\n    },\n    describe() {\n      return {\n        type: PLATFORMS_MAP.desktop\n      };\n    }\n  },\n  {\n    test(t) {\n      return t.getOSName(!0) === \"linux\";\n    },\n    describe() {\n      return {\n        type: PLATFORMS_MAP.desktop\n      };\n    }\n  },\n  {\n    test(t) {\n      return t.getOSName(!0) === \"playstation 4\";\n    },\n    describe() {\n      return {\n        type: PLATFORMS_MAP.tv\n      };\n    }\n  },\n  {\n    test(t) {\n      return t.getOSName(!0) === \"roku\";\n    },\n    describe() {\n      return {\n        type: PLATFORMS_MAP.tv\n      };\n    }\n  }\n], enginesParsersList = [\n  {\n    test(t) {\n      return t.getBrowserName(!0) === \"microsoft edge\";\n    },\n    describe(t) {\n      if (/\\sedg\\//i.test(t))\n        return {\n          name: ENGINE_MAP.Blink\n        };\n      const r = Utils.getFirstMatch(/edge\\/(\\d+(\\.?_?\\d+)+)/i, t);\n      return {\n        name: ENGINE_MAP.EdgeHTML,\n        version: r\n      };\n    }\n  },\n  {\n    test: [/trident/i],\n    describe(t) {\n      const e = {\n        name: ENGINE_MAP.Trident\n      }, r = Utils.getFirstMatch(/trident\\/(\\d+(\\.?_?\\d+)+)/i, t);\n      return r && (e.version = r), e;\n    }\n  },\n  {\n    test(t) {\n      return t.test(/presto/i);\n    },\n    describe(t) {\n      const e = {\n        name: ENGINE_MAP.Presto\n      }, r = Utils.getFirstMatch(/presto\\/(\\d+(\\.?_?\\d+)+)/i, t);\n      return r && (e.version = r), e;\n    }\n  },\n  {\n    test(t) {\n      const e = t.test(/gecko/i), r = t.test(/like gecko/i);\n      return e && !r;\n    },\n    describe(t) {\n      const e = {\n        name: ENGINE_MAP.Gecko\n      }, r = Utils.getFirstMatch(/gecko\\/(\\d+(\\.?_?\\d+)+)/i, t);\n      return r && (e.version = r), e;\n    }\n  },\n  {\n    test: [/(apple)?webkit\\/537\\.36/i],\n    describe() {\n      return {\n        name: ENGINE_MAP.Blink\n      };\n    }\n  },\n  {\n    test: [/(apple)?webkit/i],\n    describe(t) {\n      const e = {\n        name: ENGINE_MAP.WebKit\n      }, r = Utils.getFirstMatch(/webkit\\/(\\d+(\\.?_?\\d+)+)/i, t);\n      return r && (e.version = r), e;\n    }\n  }\n];\nclass Parser {\n  constructor(e, r = !1) {\n    if (e == null || e === \"\")\n      throw new Error(\"UserAgent parameter can't be empty\");\n    this._ua = e, this.parsedResult = {}, r !== !0 && this.parse();\n  }\n  getUA() {\n    return this._ua;\n  }\n  test(e) {\n    return e.test(this._ua);\n  }\n  parseBrowser() {\n    this.parsedResult.browser = {};\n    const e = Utils.find(browsersList, (r) => {\n      if (typeof r.test == \"function\")\n        return r.test(this);\n      if (r.test instanceof Array)\n        return r.test.some((n) => this.test(n));\n      throw new Error(\"Browser's test function is not valid\");\n    });\n    return e && (this.parsedResult.browser = e.describe(this.getUA())), this.parsedResult.browser;\n  }\n  getBrowser() {\n    return this.parsedResult.browser ? this.parsedResult.browser : this.parseBrowser();\n  }\n  getBrowserName(e) {\n    return e ? String(this.getBrowser().name).toLowerCase() || \"\" : this.getBrowser().name || \"\";\n  }\n  getBrowserVersion() {\n    return this.getBrowser().version;\n  }\n  getOS() {\n    return this.parsedResult.os ? this.parsedResult.os : this.parseOS();\n  }\n  parseOS() {\n    this.parsedResult.os = {};\n    const e = Utils.find(osParsersList, (r) => {\n      if (typeof r.test == \"function\")\n        return r.test(this);\n      if (r.test instanceof Array)\n        return r.test.some((n) => this.test(n));\n      throw new Error(\"Browser's test function is not valid\");\n    });\n    return e && (this.parsedResult.os = e.describe(this.getUA())), this.parsedResult.os;\n  }\n  getOSName(e) {\n    const { name: r } = this.getOS();\n    return e ? String(r).toLowerCase() || \"\" : r || \"\";\n  }\n  getOSVersion() {\n    return this.getOS().version;\n  }\n  getPlatform() {\n    return this.parsedResult.platform ? this.parsedResult.platform : this.parsePlatform();\n  }\n  getPlatformType(e = !1) {\n    const { type: r } = this.getPlatform();\n    return e ? String(r).toLowerCase() || \"\" : r || \"\";\n  }\n  parsePlatform() {\n    this.parsedResult.platform = {};\n    const e = Utils.find(platformParsersList, (r) => {\n      if (typeof r.test == \"function\")\n        return r.test(this);\n      if (r.test instanceof Array)\n        return r.test.some((n) => this.test(n));\n      throw new Error(\"Browser's test function is not valid\");\n    });\n    return e && (this.parsedResult.platform = e.describe(this.getUA())), this.parsedResult.platform;\n  }\n  getEngine() {\n    return this.parsedResult.engine ? this.parsedResult.engine : this.parseEngine();\n  }\n  getEngineName(e) {\n    return e ? String(this.getEngine().name).toLowerCase() || \"\" : this.getEngine().name || \"\";\n  }\n  parseEngine() {\n    this.parsedResult.engine = {};\n    const e = Utils.find(enginesParsersList, (r) => {\n      if (typeof r.test == \"function\")\n        return r.test(this);\n      if (r.test instanceof Array)\n        return r.test.some((n) => this.test(n));\n      throw new Error(\"Browser's test function is not valid\");\n    });\n    return e && (this.parsedResult.engine = e.describe(this.getUA())), this.parsedResult.engine;\n  }\n  parse() {\n    return this.parseBrowser(), this.parseOS(), this.parsePlatform(), this.parseEngine(), this;\n  }\n  getResult() {\n    return Utils.assign({}, this.parsedResult);\n  }\n  satisfies(e) {\n    const r = {};\n    let n = 0;\n    const o = {};\n    let i = 0;\n    if (Object.keys(e).forEach((a) => {\n      const c = e[a];\n      typeof c == \"string\" ? (o[a] = c, i += 1) : typeof c == \"object\" && (r[a] = c, n += 1);\n    }), n > 0) {\n      const a = Object.keys(r), c = Utils.find(a, (u) => this.isOS(u));\n      if (c) {\n        const u = this.satisfies(r[c]);\n        if (u !== void 0)\n          return u;\n      }\n      const l = Utils.find(\n        a,\n        (u) => this.isPlatform(u)\n      );\n      if (l) {\n        const u = this.satisfies(r[l]);\n        if (u !== void 0)\n          return u;\n      }\n    }\n    if (i > 0) {\n      const a = Object.keys(o), c = Utils.find(a, (l) => this.isBrowser(l, !0));\n      if (c !== void 0)\n        return this.compareVersion(o[c]);\n    }\n  }\n  isBrowser(e, r = !1) {\n    const n = this.getBrowserName().toLowerCase();\n    let o = e.toLowerCase();\n    const i = Utils.getBrowserTypeByAlias(o);\n    return r && i && (o = i.toLowerCase()), o === n;\n  }\n  compareVersion(e) {\n    let r = [0], n = e, o = !1;\n    const i = this.getBrowserVersion();\n    if (typeof i == \"string\")\n      return e[0] === \">\" || e[0] === \"<\" ? (n = e.substr(1), e[1] === \"=\" ? (o = !0, n = e.substr(2)) : r = [], e[0] === \">\" ? r.push(1) : r.push(-1)) : e[0] === \"=\" ? n = e.substr(1) : e[0] === \"~\" && (o = !0, n = e.substr(1)), r.indexOf(\n        Utils.compareVersions(i, n, o)\n      ) > -1;\n  }\n  isOS(e) {\n    return this.getOSName(!0) === String(e).toLowerCase();\n  }\n  isPlatform(e) {\n    return this.getPlatformType(!0) === String(e).toLowerCase();\n  }\n  isEngine(e) {\n    return this.getEngineName(!0) === String(e).toLowerCase();\n  }\n  is(e, r = !1) {\n    return this.isBrowser(e, r) || this.isOS(e) || this.isPlatform(e);\n  }\n  some(e = []) {\n    return e.some((r) => this.is(r));\n  }\n}\n/*!\n * Bowser - a browser detector\n * https://github.com/lancedikson/bowser\n * MIT License | (c) Dustin Diaz 2012-2015\n * MIT License | (c) Denis Demchenko 2015-2019\n */\nclass Bowser {\n  static getParser(e, r = !1) {\n    if (typeof e != \"string\")\n      throw new Error(\"UserAgent should be a string\");\n    return new Parser(e, r);\n  }\n  static parse(e) {\n    return new Parser(e).getResult();\n  }\n  static get BROWSER_MAP() {\n    return BROWSER_MAP;\n  }\n  static get ENGINE_MAP() {\n    return ENGINE_MAP;\n  }\n  static get OS_MAP() {\n    return OS_MAP;\n  }\n  static get PLATFORMS_MAP() {\n    return PLATFORMS_MAP;\n  }\n}\nvar Z = Object.defineProperty, X = (t, e, r) => e in t ? Z(t, e, { enumerable: !0, configurable: !0, writable: !0, value: r }) : t[e] = r, F = (t, e, r) => (X(t, typeof e != \"symbol\" ? e + \"\" : e, r), r), B = (t, e, r) => {\n  if (!e.has(t))\n    throw TypeError(\"Cannot \" + r);\n}, N = (t, e, r) => (B(t, e, \"read from private field\"), r ? r.call(t) : e.get(t)), L = (t, e, r) => {\n  if (e.has(t))\n    throw TypeError(\"Cannot add the same private member more than once\");\n  e instanceof WeakSet ? e.add(t) : e.set(t, r);\n}, $ = (t, e, r, n) => (B(t, e, \"write to private field\"), n ? n.call(t, r) : e.set(t, r), r), P = (t, e, r) => (B(t, e, \"access private method\"), r);\nconst generateUID = () => `${Date.now()}-${Math.floor(Math.random() * 8999999999999) + 1e12}`, shuffle = (t) => {\n  for (let e = t.length - 1; e > 0; e--) {\n    const r = Math.floor(Math.random() * (e + 1));\n    [t[e], t[r]] = [t[r], t[e]];\n  }\n  return t;\n};\nfunction pipe$1(...t) {\n  return (e) => t.reduce((r, n) => r.then(n), Promise.resolve(e));\n}\nconst ssrSafeWindow = typeof window < \"u\" ? window : null;\nvar Y, V;\nconst wallets = [\n  {\n    id: \"argentX\",\n    name: \"Argent X\",\n    icon: \"data:image/svg+xml;base64,Cjxzdmcgd2lkdGg9IjQwIiBoZWlnaHQ9IjM2IiB2aWV3Qm94PSIwIDAgNDAgMzYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGQ9Ik0yNC43NTgyIC0zLjk3MzY0ZS0wN0gxNC42MjM4QzE0LjI4NTEgLTMuOTczNjRlLTA3IDE0LjAxMzggMC4yODExNzggMTQuMDA2NCAwLjYzMDY4M0MxMy44MDE3IDEwLjQ1NDkgOC44MjIzNCAxOS43NzkyIDAuMjUxODkzIDI2LjM4MzdDLTAuMDIwMjA0NiAyNi41OTMzIC0wLjA4MjE5NDYgMjYuOTg3MiAwLjExNjczNCAyNy4yNzA5TDYuMDQ2MjMgMzUuNzM0QzYuMjQ3OTYgMzYuMDIyIDYuNjQwOTkgMzYuMDg3IDYuOTE3NjYgMzUuODc1NEMxMi4yNzY1IDMxLjc3MjggMTYuNTg2OSAyNi44MjM2IDE5LjY5MSAyMS4zMzhDMjIuNzk1MSAyNi44MjM2IDI3LjEwNTcgMzEuNzcyOCAzMi40NjQ2IDM1Ljg3NTRDMzIuNzQxIDM2LjA4NyAzMy4xMzQxIDM2LjAyMiAzMy4zMzYxIDM1LjczNEwzOS4yNjU2IDI3LjI3MDlDMzkuNDY0MiAyNi45ODcyIDM5LjQwMjIgMjYuNTkzMyAzOS4xMzA0IDI2LjM4MzdDMzAuNTU5NyAxOS43NzkyIDI1LjU4MDQgMTAuNDU0OSAyNS4zNzU5IDAuNjMwNjgzQzI1LjM2ODUgMC4yODExNzggMjUuMDk2OSAtMy45NzM2NGUtMDcgMjQuNzU4MiAtMy45NzM2NGUtMDdaIiBmaWxsPSIjRkY4NzVCIi8+Cjwvc3ZnPgo=\",\n    downloads: {\n      chrome: \"https://chrome.google.com/webstore/detail/argent-x-starknet-wallet/dlcobpjiigpikoobohmabehhmhfoodbb\",\n      firefox: \"https://addons.mozilla.org/en-US/firefox/addon/argent-x\",\n      edge: \"https://microsoftedge.microsoft.com/addons/detail/argent-x/ajcicjlkibolbeaaagejfhnofogocgcj\"\n    }\n  },\n  {\n    id: \"braavos\",\n    name: \"Braavos\",\n    icon: \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgICA8cGF0aAogICAgICAgIGQ9Ik02Mi43MDUgMTMuOTExNkM2Mi44MzU5IDE0LjEzMzMgNjIuNjYyMSAxNC40MDcgNjIuNDAzOSAxNC40MDdDNTcuMTgwNyAxNC40MDcgNTIuOTM0OCAxOC41NDI3IDUyLjgzNTEgMjMuNjgxN0M1MS4wNDY1IDIzLjM0NzcgNDkuMTkzMyAyMy4zMjI2IDQ3LjM2MjYgMjMuNjMxMUM0Ny4yMzYxIDE4LjUxNTYgNDMuMDAwOSAxNC40MDcgMzcuNzk0OCAxNC40MDdDMzcuNTM2NSAxNC40MDcgMzcuMzYyNSAxNC4xMzMxIDM3LjQ5MzUgMTMuOTExMkM0MC4wMjE3IDkuNjI4MDkgNDQuNzIwNCA2Ljc1IDUwLjA5OTEgNi43NUM1NS40NzgxIDYuNzUgNjAuMTc2OSA5LjYyODI2IDYyLjcwNSAxMy45MTE2WiIKICAgICAgICBmaWxsPSJ1cmwoI3BhaW50MF9saW5lYXJfMzcyXzQwMjU5KSIgLz4KICAgIDxwYXRoCiAgICAgICAgZD0iTTc4Ljc2MDYgNDUuODcxOEM4MC4yNzI1IDQ2LjMyOTcgODEuNzAyNSA0NS4wMDU1IDgxLjE3MTQgNDMuNTIyMkM3Ni40MTM3IDMwLjIzMzQgNjEuMzkxMSAyNC44MDM5IDUwLjAyNzcgMjQuODAzOUMzOC42NDQyIDI0LjgwMzkgMjMuMjg2OCAzMC40MDcgMTguODc1NCA0My41OTEyQzE4LjM4MjQgNDUuMDY0NSAxOS44MDgzIDQ2LjM0NDYgMjEuMjk3OCA0NS44ODgxTDQ4Ljg3MiAzNy40MzgxQzQ5LjUzMzEgMzcuMjM1NSA1MC4yMzk5IDM3LjIzNDQgNTAuOTAxNyAzNy40MzQ4TDc4Ljc2MDYgNDUuODcxOFoiCiAgICAgICAgZmlsbD0idXJsKCNwYWludDFfbGluZWFyXzM3Ml80MDI1OSkiIC8+CiAgICA8cGF0aAogICAgICAgIGQ9Ik0xOC44MTMyIDQ4LjE3MDdMNDguODkzNSAzOS4wNDcyQzQ5LjU1MDYgMzguODQ3OCA1MC4yNTI0IDM4Ljg0NzMgNTAuOTA5OCAzOS4wNDU2TDgxLjE3ODEgNDguMTc1MkM4My42OTEyIDQ4LjkzMzIgODUuNDExIDUxLjI0ODMgODUuNDExIDUzLjg3MzVWODEuMjIzM0M4NS4yOTQ0IDg3Ljg5OTEgNzkuMjk3NyA5My4yNSA3Mi42MjQ1IDkzLjI1SDYxLjU0MDZDNjAuNDQ0OSA5My4yNSA1OS41NTc3IDkyLjM2MzcgNTkuNTU3NyA5MS4yNjhWODEuNjc4OUM1OS41NTc3IDc3LjkwMzEgNjEuNzkyMSA3NC40ODU1IDY1LjI0OTggNzIuOTcyOUM2OS44ODQ5IDcwLjk0NTQgNzUuMzY4MSA2OC4yMDI4IDc2LjM5OTQgNjIuNjk5MkM3Ni43MzIzIDYwLjkyMjkgNzUuNTc0MSA1OS4yMDk0IDczLjgwMjQgNTguODU3M0M2OS4zMjI2IDU3Ljk2NjcgNjQuMzU2MiA1OC4zMTA3IDYwLjE1NjQgNjAuMTg5M0M1NS4zODg3IDYyLjMyMTkgNTQuMTQxNSA2NS44Njk0IDUzLjY3OTcgNzAuNjMzN0w1My4xMjAxIDc1Ljc2NjJDNTIuOTQ5MSA3Ny4zMzQ5IDUxLjQ3ODUgNzguNTM2NiA0OS45MDE0IDc4LjUzNjZDNDguMjY5OSA3OC41MzY2IDQ3LjA0NjUgNzcuMjk0IDQ2Ljg2OTYgNzUuNjcxMkw0Ni4zMjA0IDcwLjYzMzdDNDUuOTI0OSA2Ni41NTI5IDQ1LjIwNzkgNjIuNTg4NyA0MC45ODk1IDYwLjcwMThDMzYuMTc3NiA1OC41NDk0IDMxLjM0MTkgNTcuODM0NyAyNi4xOTc2IDU4Ljg1NzNDMjQuNDI2IDU5LjIwOTQgMjMuMjY3OCA2MC45MjI5IDIzLjYwMDcgNjIuNjk5MkMyNC42NDEgNjguMjUwNyAzMC4wODEyIDcwLjkzMDUgMzQuNzUwMyA3Mi45NzI5QzM4LjIwOCA3NC40ODU1IDQwLjQ0MjQgNzcuOTAzMSA0MC40NDI0IDgxLjY3ODlWOTEuMjY2M0M0MC40NDI0IDkyLjM2MiAzOS41NTU1IDkzLjI1IDM4LjQ1OTkgOTMuMjVIMjcuMzc1NkMyMC43MDI0IDkzLjI1IDE0LjcwNTcgODcuODk5MSAxNC41ODkxIDgxLjIyMzNWNTMuODY2M0MxNC41ODkxIDUxLjI0NDYgMTYuMzA0NSA0OC45MzE2IDE4LjgxMzIgNDguMTcwN1oiCiAgICAgICAgZmlsbD0idXJsKCNwYWludDJfbGluZWFyXzM3Ml80MDI1OSkiIC8+CiAgICA8ZGVmcz4KICAgICAgICA8bGluZWFyR3JhZGllbnQgaWQ9InBhaW50MF9saW5lYXJfMzcyXzQwMjU5IiB4MT0iNDkuMzA1NyIgeTE9IjIuMDc5IiB4Mj0iODAuMzYyNyIgeTI9IjkzLjY1OTciCiAgICAgICAgICAgIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KICAgICAgICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iI0Y1RDQ1RSIgLz4KICAgICAgICAgICAgPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjRkY5NjAwIiAvPgogICAgICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgICAgICAgPGxpbmVhckdyYWRpZW50IGlkPSJwYWludDFfbGluZWFyXzM3Ml80MDI1OSIgeDE9IjQ5LjMwNTciIHkxPSIyLjA3OSIgeDI9IjgwLjM2MjciIHkyPSI5My42NTk3IgogICAgICAgICAgICBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CiAgICAgICAgICAgIDxzdG9wIHN0b3AtY29sb3I9IiNGNUQ0NUUiIC8+CiAgICAgICAgICAgIDxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI0ZGOTYwMCIgLz4KICAgICAgICA8L2xpbmVhckdyYWRpZW50PgogICAgICAgIDxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQyX2xpbmVhcl8zNzJfNDAyNTkiIHgxPSI0OS4zMDU3IiB5MT0iMi4wNzkiIHgyPSI4MC4zNjI3IiB5Mj0iOTMuNjU5NyIKICAgICAgICAgICAgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgogICAgICAgICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjRjVENDVFIiAvPgogICAgICAgICAgICA8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNGRjk2MDAiIC8+CiAgICAgICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDwvZGVmcz4KPC9zdmc+\",\n    downloads: {\n      chrome: \"https://chrome.google.com/webstore/detail/braavos-wallet/jnlgamecbpmbajjfhmmmlhejkemejdma\",\n      firefox: \"https://addons.mozilla.org/en-US/firefox/addon/braavos-wallet\",\n      edge: \"https://microsoftedge.microsoft.com/addons/detail/braavos-wallet/hkkpjehhcnhgefhbdcgfkeegglpjchdc\",\n      ios: `https://link.braavos.app/dapp/${(Y = ssrSafeWindow == null ? void 0 : ssrSafeWindow.location) == null ? void 0 : Y.host}`,\n      android: `https://link.braavos.app/dapp/${(V = ssrSafeWindow == null ? void 0 : ssrSafeWindow.location) == null ? void 0 : V.host}`\n    }\n  },\n  {\n    id: \"okxwallet\",\n    name: \"OKX Wallet\",\n    icon: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAJDSURBVHgB7Zq9jtpAEMfHlhEgQLiioXEkoAGECwoKxMcTRHmC5E3IoyRPkPAEkI7unJYmTgEFTYwA8a3NTKScLnCHN6c9r1e3P2llWQy7M/s1Gv1twCP0ej37dDq9x+Zut1t3t9vZjDEHIiSRSPg4ZpDL5fxkMvn1cDh8m0wmfugfO53OoFQq/crn8wxfY9EymQyrVCqMfHvScZx1p9ls3pFxXBy/bKlUipGPrVbLuQqAfsCliq3zl0H84zwtjQrOw4Mt1W63P5LvBm2d+Xz+YzqdgkqUy+WgWCy+Mc/nc282m4FqLBYL+3g8fjDxenq72WxANZbLJeA13zDX67UDioL5ybXwafMYu64Ltn3bdDweQ5R97fd7GyhBQMipx4POeEDHIu2LfDdBIGGz+hJ9CQ1ABjoA2egAZPM6AgiCAEQhsi/C4jHyPA/6/f5NG3Ks2+3CYDC4aTccDrn6ojG54MnEvG00GoVmWLIRNZ7wTCwDHYBsdACy0QHIhiuRETxlICWpMMhGZHmqS8qH6JLyGegAZKMDkI0uKf8X4SWlaZo+Pp1bRrwlJU8ZKLIvUjKh0WiQ3sRUbNVq9c5Ebew7KEo2m/1p4jJ4qAmDaqDQBzj5XyiAT4VCQezJigAU+IDU+z8vJFnGWeC+bKQV/5VZ71FV6L7PA3gg3tXrdQ+DgLhC+75Wq3no69P3MC0NFQpx2lL04Ql9gHK1bRDjsSBIvScBnDTk1WrlGIZBorIDEYJj+rhdgnQ67VmWRe0zlplXl81vcyEt0rSoYDUAAAAASUVORK5CYII=\",\n    downloads: {\n      chrome: \"https://chrome.google.com/webstore/detail/mcohilncbfahbmgdjkbpemcciiolgcge\",\n      firefox: \"https://addons.mozilla.org/en-US/firefox/addon/okexwallet\",\n      edge: \"https://microsoftedge.microsoft.com/addons/detail/%E6%AC%A7%E6%98%93-web3-%E9%92%B1%E5%8C%85/pbpjkcldjiffchgbbndmhojiacbgflha\",\n      safari: \"https://apps.apple.com/us/app/okx-wallet/id6463797825\"\n    }\n  },\n  {\n    id: \"metamask\",\n    name: \"MetaMask\",\n    icon: \"data:image/svg+xml;utf8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMTIiIGhlaWdodD0iMTg5IiB2aWV3Qm94PSIwIDAgMjEyIDE4OSI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48cG9seWdvbiBmaWxsPSIjQ0RCREIyIiBwb2ludHM9IjYwLjc1IDE3My4yNSA4OC4zMTMgMTgwLjU2MyA4OC4zMTMgMTcxIDkwLjU2MyAxNjguNzUgMTA2LjMxMyAxNjguNzUgMTA2LjMxMyAxODAgMTA2LjMxMyAxODcuODc1IDg5LjQzOCAxODcuODc1IDY4LjYyNSAxNzguODc1Ii8+PHBvbHlnb24gZmlsbD0iI0NEQkRCMiIgcG9pbnRzPSIxMDUuNzUgMTczLjI1IDEzMi43NSAxODAuNTYzIDEzMi43NSAxNzEgMTM1IDE2OC43NSAxNTAuNzUgMTY4Ljc1IDE1MC43NSAxODAgMTUwLjc1IDE4Ny44NzUgMTMzLjg3NSAxODcuODc1IDExMy4wNjMgMTc4Ljg3NSIgdHJhbnNmb3JtPSJtYXRyaXgoLTEgMCAwIDEgMjU2LjUgMCkiLz48cG9seWdvbiBmaWxsPSIjMzkzOTM5IiBwb2ludHM9IjkwLjU2MyAxNTIuNDM4IDg4LjMxMyAxNzEgOTEuMTI1IDE2OC43NSAxMjAuMzc1IDE2OC43NSAxMjMuNzUgMTcxIDEyMS41IDE1Mi40MzggMTE3IDE0OS42MjUgOTQuNSAxNTAuMTg4Ii8+PHBvbHlnb24gZmlsbD0iI0Y4OUMzNSIgcG9pbnRzPSI3NS4zNzUgMjcgODguODc1IDU4LjUgOTUuMDYzIDE1MC4xODggMTE3IDE1MC4xODggMTIzLjc1IDU4LjUgMTM2LjEyNSAyNyIvPjxwb2x5Z29uIGZpbGw9IiNGODlEMzUiIHBvaW50cz0iMTYuMzEzIDk2LjE4OCAuNTYzIDE0MS43NSAzOS45MzggMTM5LjUgNjUuMjUgMTM5LjUgNjUuMjUgMTE5LjgxMyA2NC4xMjUgNzkuMzEzIDU4LjUgODMuODEzIi8+PHBvbHlnb24gZmlsbD0iI0Q4N0MzMCIgcG9pbnRzPSI0Ni4xMjUgMTAxLjI1IDkyLjI1IDEwMi4zNzUgODcuMTg4IDEyNiA2NS4yNSAxMjAuMzc1Ii8+PHBvbHlnb24gZmlsbD0iI0VBOEQzQSIgcG9pbnRzPSI0Ni4xMjUgMTAxLjgxMyA2NS4yNSAxMTkuODEzIDY1LjI1IDEzNy44MTMiLz48cG9seWdvbiBmaWxsPSIjRjg5RDM1IiBwb2ludHM9IjY1LjI1IDEyMC4zNzUgODcuNzUgMTI2IDk1LjA2MyAxNTAuMTg4IDkwIDE1MyA2NS4yNSAxMzguMzc1Ii8+PHBvbHlnb24gZmlsbD0iI0VCOEYzNSIgcG9pbnRzPSI2NS4yNSAxMzguMzc1IDYwLjc1IDE3My4yNSA5MC41NjMgMTUyLjQzOCIvPjxwb2x5Z29uIGZpbGw9IiNFQThFM0EiIHBvaW50cz0iOTIuMjUgMTAyLjM3NSA5NS4wNjMgMTUwLjE4OCA4Ni42MjUgMTI1LjcxOSIvPjxwb2x5Z29uIGZpbGw9IiNEODdDMzAiIHBvaW50cz0iMzkuMzc1IDEzOC45MzggNjUuMjUgMTM4LjM3NSA2MC43NSAxNzMuMjUiLz48cG9seWdvbiBmaWxsPSIjRUI4RjM1IiBwb2ludHM9IjEyLjkzOCAxODguNDM4IDYwLjc1IDE3My4yNSAzOS4zNzUgMTM4LjkzOCAuNTYzIDE0MS43NSIvPjxwb2x5Z29uIGZpbGw9IiNFODgyMUUiIHBvaW50cz0iODguODc1IDU4LjUgNjQuNjg4IDc4Ljc1IDQ2LjEyNSAxMDEuMjUgOTIuMjUgMTAyLjkzOCIvPjxwb2x5Z29uIGZpbGw9IiNERkNFQzMiIHBvaW50cz0iNjAuNzUgMTczLjI1IDkwLjU2MyAxNTIuNDM4IDg4LjMxMyAxNzAuNDM4IDg4LjMxMyAxODAuNTYzIDY4LjA2MyAxNzYuNjI1Ii8+PHBvbHlnb24gZmlsbD0iI0RGQ0VDMyIgcG9pbnRzPSIxMjEuNSAxNzMuMjUgMTUwLjc1IDE1Mi40MzggMTQ4LjUgMTcwLjQzOCAxNDguNSAxODAuNTYzIDEyOC4yNSAxNzYuNjI1IiB0cmFuc2Zvcm09Im1hdHJpeCgtMSAwIDAgMSAyNzIuMjUgMCkiLz48cG9seWdvbiBmaWxsPSIjMzkzOTM5IiBwb2ludHM9IjcwLjMxMyAxMTIuNSA2NC4xMjUgMTI1LjQzOCA4Ni4wNjMgMTE5LjgxMyIgdHJhbnNmb3JtPSJtYXRyaXgoLTEgMCAwIDEgMTUwLjE4OCAwKSIvPjxwb2x5Z29uIGZpbGw9IiNFODhGMzUiIHBvaW50cz0iMTIuMzc1IC41NjMgODguODc1IDU4LjUgNzUuOTM4IDI3Ii8+PHBhdGggZmlsbD0iIzhFNUEzMCIgZD0iTTEyLjM3NTAwMDIsMC41NjI1MDAwMDggTDIuMjUwMDAwMDMsMzEuNTAwMDAwNSBMNy44NzUwMDAxMiw2NS4yNTAwMDEgTDMuOTM3NTAwMDYsNjcuNTAwMDAxIEw5LjU2MjUwMDE0LDcyLjU2MjUgTDUuMDYyNTAwMDgsNzYuNTAwMDAxMSBMMTEuMjUsODIuMTI1MDAxMiBMNy4zMTI1MDAxMSw4NS41MDAwMDEzIEwxNi4zMTI1MDAyLDk2Ljc1MDAwMTQgTDU4LjUwMDAwMDksODMuODEyNTAxMiBDNzkuMTI1MDAxMiw2Ny4zMTI1MDA0IDg5LjI1MDAwMTMsNTguODc1MDAwMyA4OC44NzUwMDEzLDU4LjUwMDAwMDkgQzg4LjUwMDAwMTMsNTguMTI1MDAwOSA2My4wMDAwMDA5LDM4LjgxMjUwMDYgMTIuMzc1MDAwMiwwLjU2MjUwMDAwOCBaIi8+PGcgdHJhbnNmb3JtPSJtYXRyaXgoLTEgMCAwIDEgMjExLjUgMCkiPjxwb2x5Z29uIGZpbGw9IiNGODlEMzUiIHBvaW50cz0iMTYuMzEzIDk2LjE4OCAuNTYzIDE0MS43NSAzOS45MzggMTM5LjUgNjUuMjUgMTM5LjUgNjUuMjUgMTE5LjgxMyA2NC4xMjUgNzkuMzEzIDU4LjUgODMuODEzIi8+PHBvbHlnb24gZmlsbD0iI0Q4N0MzMCIgcG9pbnRzPSI0Ni4xMjUgMTAxLjI1IDkyLjI1IDEwMi4zNzUgODcuMTg4IDEyNiA2NS4yNSAxMjAuMzc1Ii8+PHBvbHlnb24gZmlsbD0iI0VBOEQzQSIgcG9pbnRzPSI0Ni4xMjUgMTAxLjgxMyA2NS4yNSAxMTkuODEzIDY1LjI1IDEzNy44MTMiLz48cG9seWdvbiBmaWxsPSIjRjg5RDM1IiBwb2ludHM9IjY1LjI1IDEyMC4zNzUgODcuNzUgMTI2IDk1LjA2MyAxNTAuMTg4IDkwIDE1MyA2NS4yNSAxMzguMzc1Ii8+PHBvbHlnb24gZmlsbD0iI0VCOEYzNSIgcG9pbnRzPSI2NS4yNSAxMzguMzc1IDYwLjc1IDE3My4yNSA5MCAxNTMiLz48cG9seWdvbiBmaWxsPSIjRUE4RTNBIiBwb2ludHM9IjkyLjI1IDEwMi4zNzUgOTUuMDYzIDE1MC4xODggODYuNjI1IDEyNS43MTkiLz48cG9seWdvbiBmaWxsPSIjRDg3QzMwIiBwb2ludHM9IjM5LjM3NSAxMzguOTM4IDY1LjI1IDEzOC4zNzUgNjAuNzUgMTczLjI1Ii8+PHBvbHlnb24gZmlsbD0iI0VCOEYzNSIgcG9pbnRzPSIxMi45MzggMTg4LjQzOCA2MC43NSAxNzMuMjUgMzkuMzc1IDEzOC45MzggLjU2MyAxNDEuNzUiLz48cG9seWdvbiBmaWxsPSIjRTg4MjFFIiBwb2ludHM9Ijg4Ljg3NSA1OC41IDY0LjY4OCA3OC43NSA0Ni4xMjUgMTAxLjI1IDkyLjI1IDEwMi45MzgiLz48cG9seWdvbiBmaWxsPSIjMzkzOTM5IiBwb2ludHM9IjcwLjMxMyAxMTIuNSA2NC4xMjUgMTI1LjQzOCA4Ni4wNjMgMTE5LjgxMyIgdHJhbnNmb3JtPSJtYXRyaXgoLTEgMCAwIDEgMTUwLjE4OCAwKSIvPjxwb2x5Z29uIGZpbGw9IiNFODhGMzUiIHBvaW50cz0iMTIuMzc1IC41NjMgODguODc1IDU4LjUgNzUuOTM4IDI3Ii8+PHBhdGggZmlsbD0iIzhFNUEzMCIgZD0iTTEyLjM3NTAwMDIsMC41NjI1MDAwMDggTDIuMjUwMDAwMDMsMzEuNTAwMDAwNSBMNy44NzUwMDAxMiw2NS4yNTAwMDEgTDMuOTM3NTAwMDYsNjcuNTAwMDAxIEw5LjU2MjUwMDE0LDcyLjU2MjUgTDUuMDYyNTAwMDgsNzYuNTAwMDAxMSBMMTEuMjUsODIuMTI1MDAxMiBMNy4zMTI1MDAxMSw4NS41MDAwMDEzIEwxNi4zMTI1MDAyLDk2Ljc1MDAwMTQgTDU4LjUwMDAwMDksODMuODEyNTAxMiBDNzkuMTI1MDAxMiw2Ny4zMTI1MDA0IDg5LjI1MDAwMTMsNTguODc1MDAwMyA4OC44NzUwMDEzLDU4LjUwMDAwMDkgQzg4LjUwMDAwMTMsNTguMTI1MDAwOSA2My4wMDAwMDA5LDM4LjgxMjUwMDYgMTIuMzc1MDAwMiwwLjU2MjUwMDAwOCBaIi8+PC9nPjwvZz48L3N2Zz4=\",\n    downloads: {\n      chrome: \"https://chrome.google.com/webstore/detail/metamask/nkbihfbeogaeaoehlefnkodbefgpgknn\",\n      firefox: \"https://addons.mozilla.org/en-US/firefox/addon/ether-metamask/\",\n      edge: \"https://microsoftedge.microsoft.com/addons/detail/metamask/ejbalbakoplchlghecdalmeeeajnimhm?hl=en-US\"\n    }\n  }\n];\nvar T, j, x, H, Q, C, G;\nclass LocalStorageWrapper {\n  constructor(e) {\n    L(this, H), L(this, C), L(this, T, !1), L(this, j, void 0), L(this, x, void 0), F(this, \"value\"), $(this, x, e), P(this, C, G).call(this);\n  }\n  set(e) {\n    return !N(this, T) && !P(this, C, G).call(this) ? !1 : (this.delete(), this.value = e, e && ($(this, j, `${N(this, x)}-${generateUID()}`), localStorage.setItem(N(this, j), e)), !0);\n  }\n  get() {\n    return P(this, H, Q).call(this), this.value;\n  }\n  delete() {\n    return !N(this, T) && !P(this, C, G).call(this) ? !1 : (this.value = null, N(this, j) && localStorage.removeItem(N(this, j)), !0);\n  }\n}\nT = /* @__PURE__ */ new WeakMap(), j = /* @__PURE__ */ new WeakMap(), x = /* @__PURE__ */ new WeakMap(), H = /* @__PURE__ */ new WeakSet(), Q = function() {\n  this.value && this.set(this.value);\n}, C = /* @__PURE__ */ new WeakSet(), G = function() {\n  try {\n    !N(this, T) && typeof window < \"u\" && ($(this, j, Object.keys(localStorage).find(\n      (t) => t.startsWith(N(this, x))\n    )), $(this, T, !0), N(this, j) && this.set(localStorage.getItem(N(this, j))));\n  } catch (t) {\n    console.warn(t);\n  }\n  return N(this, T);\n};\nfunction filterBy(t, e) {\n  var r, n;\n  if ((r = e == null ? void 0 : e.include) != null && r.length) {\n    const o = new Set(e.include);\n    return t.filter((i) => o.has(i.id));\n  }\n  if ((n = e == null ? void 0 : e.exclude) != null && n.length) {\n    const o = new Set(e.exclude);\n    return t.filter((i) => !o.has(i.id));\n  }\n  return t;\n}\nconst filterByPreAuthorized = async (t) => {\n  const e = await Promise.all(\n    t.map((r) => r.isPreauthorized().catch(() => !1))\n  );\n  return t.filter((r, n) => e[n]);\n}, isWalletObj = (t) => {\n  try {\n    return t && [\n      \"request\",\n      \"isConnected\",\n      \"provider\",\n      \"enable\",\n      \"isPreauthorized\",\n      \"on\",\n      \"off\",\n      \"version\",\n      \"id\",\n      \"name\",\n      \"icon\"\n    ].every((e) => e in t);\n  } catch {\n  }\n  return !1;\n};\nfunction getBuilderId() {\n  return typeof FEDERATION_BUILD_IDENTIFIER < \"u\" ? FEDERATION_BUILD_IDENTIFIER : \"\";\n}\nfunction isDebugMode$1() {\n  return Boolean(\"\");\n}\nfunction isBrowserEnv$1() {\n  return typeof window < \"u\";\n}\nconst LOG_CATEGORY$1 = \"[ Federation Runtime ]\";\nfunction assert(t, e) {\n  t || error(e);\n}\nfunction error(t) {\n  throw t instanceof Error ? (t.message = `${LOG_CATEGORY$1}: ${t.message}`, t) : new Error(`${LOG_CATEGORY$1}: ${t}`);\n}\nfunction warn$1(t) {\n  t instanceof Error ? (t.message = `${LOG_CATEGORY$1}: ${t.message}`, console.warn(t)) : console.warn(`${LOG_CATEGORY$1}: ${t}`);\n}\nfunction addUniqueItem(t, e) {\n  return t.findIndex((r) => r === e) === -1 && t.push(e), t;\n}\nfunction getFMId(t) {\n  return \"version\" in t && t.version ? `${t.name}:${t.version}` : \"entry\" in t && t.entry ? `${t.name}:${t.entry}` : `${t.name}`;\n}\nfunction isRemoteInfoWithEntry(t) {\n  return typeof t.entry < \"u\";\n}\nfunction isPureRemoteEntry(t) {\n  return !t.entry.includes(\".json\") && t.entry.includes(\".js\");\n}\nfunction safeToString$1(t) {\n  try {\n    return JSON.stringify(t, null, 2);\n  } catch {\n    return \"\";\n  }\n}\nfunction isObject(t) {\n  return t && typeof t == \"object\";\n}\nconst objectToString = Object.prototype.toString;\nfunction isPlainObject(t) {\n  return objectToString.call(t) === \"[object Object]\";\n}\nfunction _extends$1$1() {\n  return _extends$1$1 = Object.assign || function(t) {\n    for (var e = 1; e < arguments.length; e++) {\n      var r = arguments[e];\n      for (var n in r)\n        Object.prototype.hasOwnProperty.call(r, n) && (t[n] = r[n]);\n    }\n    return t;\n  }, _extends$1$1.apply(this, arguments);\n}\nfunction _object_without_properties_loose$1(t, e) {\n  if (t == null)\n    return {};\n  var r = {}, n = Object.keys(t), o, i;\n  for (i = 0; i < n.length; i++)\n    o = n[i], !(e.indexOf(o) >= 0) && (r[o] = t[o]);\n  return r;\n}\nconst nativeGlobal = (() => {\n  try {\n    return new Function(\"return this\")();\n  } catch {\n    return globalThis;\n  }\n})(), Global = nativeGlobal;\nfunction definePropertyGlobalVal(t, e, r) {\n  Object.defineProperty(t, e, {\n    value: r,\n    configurable: !1,\n    writable: !0\n  });\n}\nfunction includeOwnProperty(t, e) {\n  return Object.hasOwnProperty.call(t, e);\n}\nincludeOwnProperty(globalThis, \"__GLOBAL_LOADING_REMOTE_ENTRY__\") || definePropertyGlobalVal(globalThis, \"__GLOBAL_LOADING_REMOTE_ENTRY__\", {});\nconst globalLoading = globalThis.__GLOBAL_LOADING_REMOTE_ENTRY__;\nfunction setGlobalDefaultVal(t) {\n  var e, r, n, o, i, s;\n  includeOwnProperty(t, \"__VMOK__\") && !includeOwnProperty(t, \"__FEDERATION__\") && definePropertyGlobalVal(t, \"__FEDERATION__\", t.__VMOK__), includeOwnProperty(t, \"__FEDERATION__\") || (definePropertyGlobalVal(t, \"__FEDERATION__\", {\n    __GLOBAL_PLUGIN__: [],\n    __INSTANCES__: [],\n    moduleInfo: {},\n    __SHARE__: {},\n    __MANIFEST_LOADING__: {},\n    __PRELOADED_MAP__: /* @__PURE__ */ new Map()\n  }), definePropertyGlobalVal(t, \"__VMOK__\", t.__FEDERATION__)), (e = t.__FEDERATION__).__GLOBAL_PLUGIN__ != null || (e.__GLOBAL_PLUGIN__ = []), (r = t.__FEDERATION__).__INSTANCES__ != null || (r.__INSTANCES__ = []), (n = t.__FEDERATION__).moduleInfo != null || (n.moduleInfo = {}), (o = t.__FEDERATION__).__SHARE__ != null || (o.__SHARE__ = {}), (i = t.__FEDERATION__).__MANIFEST_LOADING__ != null || (i.__MANIFEST_LOADING__ = {}), (s = t.__FEDERATION__).__PRELOADED_MAP__ != null || (s.__PRELOADED_MAP__ = /* @__PURE__ */ new Map());\n}\nsetGlobalDefaultVal(globalThis);\nsetGlobalDefaultVal(nativeGlobal);\nfunction getGlobalFederationInstance(t, e) {\n  const r = getBuilderId();\n  return globalThis.__FEDERATION__.__INSTANCES__.find((n) => !!(r && n.options.id === getBuilderId() || n.options.name === t && !n.options.version && !e || n.options.name === t && e && n.options.version === e));\n}\nfunction setGlobalFederationInstance(t) {\n  globalThis.__FEDERATION__.__INSTANCES__.push(t);\n}\nfunction getGlobalFederationConstructor() {\n  return globalThis.__FEDERATION__.__DEBUG_CONSTRUCTOR__;\n}\nfunction setGlobalFederationConstructor(t, e = isDebugMode$1()) {\n  e && (globalThis.__FEDERATION__.__DEBUG_CONSTRUCTOR__ = t, globalThis.__FEDERATION__.__DEBUG_CONSTRUCTOR_VERSION__ = \"0.1.2\");\n}\nfunction getInfoWithoutType(t, e) {\n  if (typeof e == \"string\") {\n    if (t[e])\n      return {\n        value: t[e],\n        key: e\n      };\n    {\n      const r = Object.keys(t);\n      for (const n of r) {\n        const [o, i] = n.split(\":\"), s = `${o}:${e}`, a = t[s];\n        if (a)\n          return {\n            value: a,\n            key: s\n          };\n      }\n      return {\n        value: void 0,\n        key: e\n      };\n    }\n  } else\n    throw new Error(\"key must be string\");\n}\nconst getGlobalSnapshot = () => nativeGlobal.__FEDERATION__.moduleInfo, getTargetSnapshotInfoByModuleInfo = (t, e) => {\n  const r = getFMId(t), n = getInfoWithoutType(e, r).value;\n  if (n && !n.version && \"version\" in t && t.version && (n.version = t.version), n)\n    return n;\n  if (\"version\" in t && t.version) {\n    const { version: o } = t, i = _object_without_properties_loose$1(t, [\n      \"version\"\n    ]), s = getFMId(i), a = getInfoWithoutType(nativeGlobal.__FEDERATION__.moduleInfo, s).value;\n    if ((a == null ? void 0 : a.version) === o)\n      return a;\n  }\n}, getGlobalSnapshotInfoByModuleInfo = (t) => getTargetSnapshotInfoByModuleInfo(t, nativeGlobal.__FEDERATION__.moduleInfo), setGlobalSnapshotInfoByModuleInfo = (t, e) => {\n  const r = getFMId(t);\n  return nativeGlobal.__FEDERATION__.moduleInfo[r] = e, nativeGlobal.__FEDERATION__.moduleInfo;\n}, addGlobalSnapshot = (t) => (nativeGlobal.__FEDERATION__.moduleInfo = _extends$1$1({}, nativeGlobal.__FEDERATION__.moduleInfo, t), () => {\n  const e = Object.keys(t);\n  for (const r of e)\n    delete nativeGlobal.__FEDERATION__.moduleInfo[r];\n}), getRemoteEntryExports = (t, e) => {\n  const r = e || `__FEDERATION_${t}:custom__`, n = globalThis[r];\n  return {\n    remoteEntryKey: r,\n    entryExports: n\n  };\n}, getGlobalHostPlugins = () => nativeGlobal.__FEDERATION__.__GLOBAL_PLUGIN__, getPreloaded = (t) => globalThis.__FEDERATION__.__PRELOADED_MAP__.get(t), setPreloaded = (t) => globalThis.__FEDERATION__.__PRELOADED_MAP__.set(t, !0), DEFAULT_SCOPE = \"default\", DEFAULT_REMOTE_TYPE = \"global\", buildIdentifier = \"[0-9A-Za-z-]+\", build = `(?:\\\\+(${buildIdentifier}(?:\\\\.${buildIdentifier})*))`, numericIdentifier = \"0|[1-9]\\\\d*\", numericIdentifierLoose = \"[0-9]+\", nonNumericIdentifier = \"\\\\d*[a-zA-Z-][a-zA-Z0-9-]*\", preReleaseIdentifierLoose = `(?:${numericIdentifierLoose}|${nonNumericIdentifier})`, preReleaseLoose = `(?:-?(${preReleaseIdentifierLoose}(?:\\\\.${preReleaseIdentifierLoose})*))`, preReleaseIdentifier = `(?:${numericIdentifier}|${nonNumericIdentifier})`, preRelease = `(?:-(${preReleaseIdentifier}(?:\\\\.${preReleaseIdentifier})*))`, xRangeIdentifier = `${numericIdentifier}|x|X|\\\\*`, xRangePlain = `[v=\\\\s]*(${xRangeIdentifier})(?:\\\\.(${xRangeIdentifier})(?:\\\\.(${xRangeIdentifier})(?:${preRelease})?${build}?)?)?`, hyphenRange = `^\\\\s*(${xRangePlain})\\\\s+-\\\\s+(${xRangePlain})\\\\s*$`, mainVersionLoose = `(${numericIdentifierLoose})\\\\.(${numericIdentifierLoose})\\\\.(${numericIdentifierLoose})`, loosePlain = `[v=\\\\s]*${mainVersionLoose}${preReleaseLoose}?${build}?`, gtlt = \"((?:<|>)?=?)\", comparatorTrim = `(\\\\s*)${gtlt}\\\\s*(${loosePlain}|${xRangePlain})`, loneTilde = \"(?:~>?)\", tildeTrim = `(\\\\s*)${loneTilde}\\\\s+`, loneCaret = \"(?:\\\\^)\", caretTrim = `(\\\\s*)${loneCaret}\\\\s+`, star = \"(<|>)?=?\\\\s*\\\\*\", caret = `^${loneCaret}${xRangePlain}$`, mainVersion = `(${numericIdentifier})\\\\.(${numericIdentifier})\\\\.(${numericIdentifier})`, fullPlain = `v?${mainVersion}${preRelease}?${build}?`, tilde = `^${loneTilde}${xRangePlain}$`, xRange = `^${gtlt}\\\\s*${xRangePlain}$`, comparator = `^${gtlt}\\\\s*(${fullPlain})$|^$`, gte0 = \"^\\\\s*>=\\\\s*0.0.0\\\\s*$\";\nfunction parseRegex(t) {\n  return new RegExp(t);\n}\nfunction isXVersion(t) {\n  return !t || t.toLowerCase() === \"x\" || t === \"*\";\n}\nfunction pipe(...t) {\n  return (e) => t.reduce((r, n) => n(r), e);\n}\nfunction extractComparator(t) {\n  return t.match(parseRegex(comparator));\n}\nfunction combineVersion(t, e, r, n) {\n  const o = `${t}.${e}.${r}`;\n  return n ? `${o}-${n}` : o;\n}\nfunction parseHyphen(t) {\n  return t.replace(parseRegex(hyphenRange), (e, r, n, o, i, s, a, c, l, u, d, m) => (isXVersion(n) ? r = \"\" : isXVersion(o) ? r = `>=${n}.0.0` : isXVersion(i) ? r = `>=${n}.${o}.0` : r = `>=${r}`, isXVersion(l) ? c = \"\" : isXVersion(u) ? c = `<${Number(l) + 1}.0.0-0` : isXVersion(d) ? c = `<${l}.${Number(u) + 1}.0-0` : m ? c = `<=${l}.${u}.${d}-${m}` : c = `<=${c}`, `${r} ${c}`.trim()));\n}\nfunction parseComparatorTrim(t) {\n  return t.replace(parseRegex(comparatorTrim), \"$1$2$3\");\n}\nfunction parseTildeTrim(t) {\n  return t.replace(parseRegex(tildeTrim), \"$1~\");\n}\nfunction parseCaretTrim(t) {\n  return t.replace(parseRegex(caretTrim), \"$1^\");\n}\nfunction parseCarets(t) {\n  return t.trim().split(/\\s+/).map((e) => e.replace(parseRegex(caret), (r, n, o, i, s) => isXVersion(n) ? \"\" : isXVersion(o) ? `>=${n}.0.0 <${Number(n) + 1}.0.0-0` : isXVersion(i) ? n === \"0\" ? `>=${n}.${o}.0 <${n}.${Number(o) + 1}.0-0` : `>=${n}.${o}.0 <${Number(n) + 1}.0.0-0` : s ? n === \"0\" ? o === \"0\" ? `>=${n}.${o}.${i}-${s} <${n}.${o}.${Number(i) + 1}-0` : `>=${n}.${o}.${i}-${s} <${n}.${Number(o) + 1}.0-0` : `>=${n}.${o}.${i}-${s} <${Number(n) + 1}.0.0-0` : n === \"0\" ? o === \"0\" ? `>=${n}.${o}.${i} <${n}.${o}.${Number(i) + 1}-0` : `>=${n}.${o}.${i} <${n}.${Number(o) + 1}.0-0` : `>=${n}.${o}.${i} <${Number(n) + 1}.0.0-0`)).join(\" \");\n}\nfunction parseTildes(t) {\n  return t.trim().split(/\\s+/).map((e) => e.replace(parseRegex(tilde), (r, n, o, i, s) => isXVersion(n) ? \"\" : isXVersion(o) ? `>=${n}.0.0 <${Number(n) + 1}.0.0-0` : isXVersion(i) ? `>=${n}.${o}.0 <${n}.${Number(o) + 1}.0-0` : s ? `>=${n}.${o}.${i}-${s} <${n}.${Number(o) + 1}.0-0` : `>=${n}.${o}.${i} <${n}.${Number(o) + 1}.0-0`)).join(\" \");\n}\nfunction parseXRanges(t) {\n  return t.split(/\\s+/).map((e) => e.trim().replace(parseRegex(xRange), (r, n, o, i, s, a) => {\n    const c = isXVersion(o), l = c || isXVersion(i), u = l || isXVersion(s);\n    return n === \"=\" && u && (n = \"\"), a = \"\", c ? n === \">\" || n === \"<\" ? \"<0.0.0-0\" : \"*\" : n && u ? (l && (i = 0), s = 0, n === \">\" ? (n = \">=\", l ? (o = Number(o) + 1, i = 0, s = 0) : (i = Number(i) + 1, s = 0)) : n === \"<=\" && (n = \"<\", l ? o = Number(o) + 1 : i = Number(i) + 1), n === \"<\" && (a = \"-0\"), `${n + o}.${i}.${s}${a}`) : l ? `>=${o}.0.0${a} <${Number(o) + 1}.0.0-0` : u ? `>=${o}.${i}.0${a} <${o}.${Number(i) + 1}.0-0` : r;\n  })).join(\" \");\n}\nfunction parseStar(t) {\n  return t.trim().replace(parseRegex(star), \"\");\n}\nfunction parseGTE0(t) {\n  return t.trim().replace(parseRegex(gte0), \"\");\n}\nfunction compareAtom(t, e) {\n  return t = Number(t) || t, e = Number(e) || e, t > e ? 1 : t === e ? 0 : -1;\n}\nfunction comparePreRelease(t, e) {\n  const { preRelease: r } = t, { preRelease: n } = e;\n  if (r === void 0 && Boolean(n))\n    return 1;\n  if (Boolean(r) && n === void 0)\n    return -1;\n  if (r === void 0 && n === void 0)\n    return 0;\n  for (let o = 0, i = r.length; o <= i; o++) {\n    const s = r[o], a = n[o];\n    if (s !== a)\n      return s === void 0 && a === void 0 ? 0 : s ? a ? compareAtom(s, a) : -1 : 1;\n  }\n  return 0;\n}\nfunction compareVersion(t, e) {\n  return compareAtom(t.major, e.major) || compareAtom(t.minor, e.minor) || compareAtom(t.patch, e.patch) || comparePreRelease(t, e);\n}\nfunction eq(t, e) {\n  return t.version === e.version;\n}\nfunction compare(t, e) {\n  switch (t.operator) {\n    case \"\":\n    case \"=\":\n      return eq(t, e);\n    case \">\":\n      return compareVersion(t, e) < 0;\n    case \">=\":\n      return eq(t, e) || compareVersion(t, e) < 0;\n    case \"<\":\n      return compareVersion(t, e) > 0;\n    case \"<=\":\n      return eq(t, e) || compareVersion(t, e) > 0;\n    case void 0:\n      return !0;\n    default:\n      return !1;\n  }\n}\nfunction parseComparatorString(t) {\n  return pipe(\n    parseCarets,\n    parseTildes,\n    parseXRanges,\n    parseStar\n  )(t);\n}\nfunction parseRange(t) {\n  return pipe(\n    parseHyphen,\n    parseComparatorTrim,\n    parseTildeTrim,\n    parseCaretTrim\n  )(t.trim()).split(/\\s+/).join(\" \");\n}\nfunction satisfy(t, e) {\n  if (!t)\n    return !1;\n  const r = parseRange(e).split(\" \").map((u) => parseComparatorString(u)).join(\" \").split(/\\s+/).map((u) => parseGTE0(u)), n = extractComparator(t);\n  if (!n)\n    return !1;\n  const [, o, , i, s, a, c] = n, l = {\n    operator: o,\n    version: combineVersion(i, s, a, c),\n    major: i,\n    minor: s,\n    patch: a,\n    preRelease: c == null ? void 0 : c.split(\".\")\n  };\n  for (const u of r) {\n    const d = extractComparator(u);\n    if (!d)\n      return !1;\n    const [, m, , p, h, y, w] = d, g = {\n      operator: m,\n      version: combineVersion(p, h, y, w),\n      major: p,\n      minor: h,\n      patch: y,\n      preRelease: w == null ? void 0 : w.split(\".\")\n    };\n    if (!compare(g, l))\n      return !1;\n  }\n  return !0;\n}\nfunction _extends$6() {\n  return _extends$6 = Object.assign || function(t) {\n    for (var e = 1; e < arguments.length; e++) {\n      var r = arguments[e];\n      for (var n in r)\n        Object.prototype.hasOwnProperty.call(r, n) && (t[n] = r[n]);\n    }\n    return t;\n  }, _extends$6.apply(this, arguments);\n}\nfunction formatShare(t, e) {\n  let r;\n  return \"get\" in t ? r = t.get : r = () => Promise.resolve(t.lib), _extends$6({\n    deps: [],\n    useIn: [],\n    from: e,\n    loading: null\n  }, t, {\n    shareConfig: _extends$6({\n      requiredVersion: `^${t.version}`,\n      singleton: !1,\n      eager: !1,\n      strictVersion: !1\n    }, t.shareConfig),\n    get: r,\n    loaded: \"lib\" in t ? !0 : void 0,\n    scope: Array.isArray(t.scope) ? t.scope : [\n      \"default\"\n    ],\n    strategy: t.strategy || \"version-first\"\n  });\n}\nfunction formatShareConfigs(t, e) {\n  return t ? Object.keys(t).reduce((r, n) => (r[n] = formatShare(t[n], e), r), {}) : {};\n}\nfunction versionLt(t, e) {\n  const r = (n) => {\n    if (!Number.isNaN(Number(n))) {\n      const o = n.split(\".\");\n      let i = n;\n      for (let s = 0; s < 3 - o.length; s++)\n        i += \".0\";\n      return i;\n    }\n    return n;\n  };\n  return !!satisfy(r(t), `<=${r(e)}`);\n}\nconst findVersion = (t, e, r, n) => {\n  const o = t[e][r], i = n || function(s, a) {\n    return versionLt(s, a);\n  };\n  return Object.keys(o).reduce((s, a) => !s || i(s, a) || s === \"0\" ? a : s, 0);\n}, isLoaded = (t) => Boolean(t.loaded) || typeof t.lib == \"function\";\nfunction findSingletonVersionOrderByVersion(t, e, r) {\n  const n = t[e][r];\n  return findVersion(t, e, r, function(o, i) {\n    return !isLoaded(n[o]) && versionLt(o, i);\n  });\n}\nfunction findSingletonVersionOrderByLoaded(t, e, r) {\n  const n = t[e][r];\n  return findVersion(t, e, r, function(o, i) {\n    return isLoaded(n[i]) ? isLoaded(n[o]) ? Boolean(versionLt(o, i)) : !0 : isLoaded(n[o]) ? !1 : versionLt(o, i);\n  });\n}\nfunction getFindShareFunction(t) {\n  return t === \"loaded-first\" ? findSingletonVersionOrderByLoaded : findSingletonVersionOrderByVersion;\n}\nfunction getRegisteredShare(t, e, r, n) {\n  if (!t)\n    return;\n  const { shareConfig: o, scope: i = DEFAULT_SCOPE, strategy: s } = r, a = Array.isArray(i) ? i : [\n    i\n  ];\n  for (const c of a)\n    if (o && t[c] && t[c][e]) {\n      const { requiredVersion: l } = o, u = getFindShareFunction(s)(t, c, e), d = () => {\n        if (o.singleton) {\n          if (typeof l == \"string\" && !satisfy(u, l)) {\n            const p = `Version ${u} from ${u && t[c][e][u].from} of shared singleton module ${e} does not satisfy the requirement of ${r.from} which needs ${l})`;\n            o.strictVersion ? error(p) : warn$1(p);\n          }\n          return t[c][e][u];\n        } else {\n          if (l === !1 || l === \"*\" || satisfy(u, l))\n            return t[c][e][u];\n          for (const [p, h] of Object.entries(t[c][e]))\n            if (satisfy(p, l))\n              return h;\n        }\n      }, m = {\n        shareScopeMap: t,\n        scope: c,\n        pkgName: e,\n        version: u,\n        GlobalFederation: Global.__FEDERATION__,\n        resolver: d\n      };\n      return (n.emit(m) || m).resolver();\n    }\n}\nfunction getGlobalShareScope() {\n  return Global.__FEDERATION__.__SHARE__;\n}\nfunction _define_property$3(t, e, r) {\n  return e in t ? Object.defineProperty(t, e, {\n    value: r,\n    enumerable: !0,\n    configurable: !0,\n    writable: !0\n  }) : t[e] = r, t;\n}\nvar MANIFEST_EXT = \".json\", BROWSER_LOG_KEY = \"FEDERATION_DEBUG\", BROWSER_LOG_VALUE = \"1\", NameTransformSymbol = {\n  AT: \"@\",\n  HYPHEN: \"-\",\n  SLASH: \"/\"\n}, _obj, NameTransformMap = (_obj = {}, _define_property$3(_obj, NameTransformSymbol.AT, \"scope_\"), _define_property$3(_obj, NameTransformSymbol.HYPHEN, \"_\"), _define_property$3(_obj, NameTransformSymbol.SLASH, \"__\"), _obj), _obj1;\n_obj1 = {}, _define_property$3(_obj1, NameTransformMap[NameTransformSymbol.AT], NameTransformSymbol.AT), _define_property$3(_obj1, NameTransformMap[NameTransformSymbol.HYPHEN], NameTransformSymbol.HYPHEN), _define_property$3(_obj1, NameTransformMap[NameTransformSymbol.SLASH], NameTransformSymbol.SLASH);\nvar SEPARATOR = \":\";\nfunction isBrowserEnv() {\n  return typeof window < \"u\";\n}\nfunction isDebugMode() {\n  return typeof process < \"u\" && process.env && process.env.FEDERATION_DEBUG ? Boolean(process.env.FEDERATION_DEBUG) : typeof FEDERATION_DEBUG < \"u\" && Boolean(FEDERATION_DEBUG);\n}\nfunction _array_like_to_array$2(t, e) {\n  (e == null || e > t.length) && (e = t.length);\n  for (var r = 0, n = new Array(e); r < e; r++)\n    n[r] = t[r];\n  return n;\n}\nfunction _array_without_holes(t) {\n  if (Array.isArray(t))\n    return _array_like_to_array$2(t);\n}\nfunction _class_call_check(t, e) {\n  if (!(t instanceof e))\n    throw new TypeError(\"Cannot call a class as a function\");\n}\nfunction _defineProperties(t, e) {\n  for (var r = 0; r < e.length; r++) {\n    var n = e[r];\n    n.enumerable = n.enumerable || !1, n.configurable = !0, \"value\" in n && (n.writable = !0), Object.defineProperty(t, n.key, n);\n  }\n}\nfunction _create_class(t, e, r) {\n  return e && _defineProperties(t.prototype, e), r && _defineProperties(t, r), t;\n}\nfunction _define_property$2(t, e, r) {\n  return e in t ? Object.defineProperty(t, e, {\n    value: r,\n    enumerable: !0,\n    configurable: !0,\n    writable: !0\n  }) : t[e] = r, t;\n}\nfunction _iterable_to_array$1(t) {\n  if (typeof Symbol < \"u\" && t[Symbol.iterator] != null || t[\"@@iterator\"] != null)\n    return Array.from(t);\n}\nfunction _non_iterable_spread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nfunction _to_consumable_array(t) {\n  return _array_without_holes(t) || _iterable_to_array$1(t) || _unsupported_iterable_to_array$2(t) || _non_iterable_spread();\n}\nfunction _unsupported_iterable_to_array$2(t, e) {\n  if (t) {\n    if (typeof t == \"string\")\n      return _array_like_to_array$2(t, e);\n    var r = Object.prototype.toString.call(t).slice(8, -1);\n    if (r === \"Object\" && t.constructor && (r = t.constructor.name), r === \"Map\" || r === \"Set\")\n      return Array.from(r);\n    if (r === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))\n      return _array_like_to_array$2(t, e);\n  }\n}\nfunction safeToString(t) {\n  try {\n    return JSON.stringify(t, null, 2);\n  } catch {\n    return \"\";\n  }\n}\nvar DEBUG_LOG = \"[ FEDERATION DEBUG ]\";\nfunction safeGetLocalStorageItem() {\n  try {\n    if (typeof window < \"u\" && window.localStorage)\n      return localStorage.getItem(BROWSER_LOG_KEY) === BROWSER_LOG_VALUE;\n  } catch {\n    return typeof document < \"u\";\n  }\n  return !1;\n}\nvar Logger = /* @__PURE__ */ function() {\n  function t(e) {\n    _class_call_check(this, t), _define_property$2(this, \"enable\", !1), _define_property$2(this, \"identifier\", void 0), this.identifier = e || DEBUG_LOG, isBrowserEnv() && safeGetLocalStorageItem() ? this.enable = !0 : isDebugMode() && (this.enable = !0);\n  }\n  return _create_class(t, [\n    {\n      key: \"info\",\n      value: function(e, r) {\n        if (this.enable) {\n          var n = safeToString(r) || \"\";\n          isBrowserEnv() ? console.info(\"%c \".concat(this.identifier, \": \").concat(e, \" \").concat(n), \"color:#3300CC\") : console.info(\"\\x1B[34m%s\", \"\".concat(this.identifier, \": \").concat(e, \" \").concat(n ? `\n`.concat(n) : \"\"));\n        }\n      }\n    },\n    {\n      key: \"logOriginalInfo\",\n      value: function() {\n        for (var e = arguments.length, r = new Array(e), n = 0; n < e; n++)\n          r[n] = arguments[n];\n        if (this.enable)\n          if (isBrowserEnv()) {\n            var o;\n            console.info(\"%c \".concat(this.identifier, \": OriginalInfo\"), \"color:#3300CC\"), (o = console).log.apply(o, _to_consumable_array(r));\n          } else {\n            var i;\n            console.info(\"%c \".concat(this.identifier, \": OriginalInfo\"), \"color:#3300CC\"), (i = console).log.apply(i, _to_consumable_array(r));\n          }\n      }\n    }\n  ]), t;\n}(), LOG_CATEGORY = \"[ Federation Runtime ]\";\nnew Logger();\nvar composeKeyWithSeparator = function() {\n  for (var t = arguments.length, e = new Array(t), r = 0; r < t; r++)\n    e[r] = arguments[r];\n  return e.length ? e.reduce(function(n, o) {\n    return o ? n ? \"\".concat(n).concat(SEPARATOR).concat(o) : o : n;\n  }, \"\") : \"\";\n}, getResourceUrl = function(t, e) {\n  if (\"getPublicPath\" in t) {\n    var r = new Function(t.getPublicPath)();\n    return \"\".concat(r).concat(e);\n  } else\n    return \"publicPath\" in t ? \"\".concat(t.publicPath).concat(e) : (console.warn(\"Can not get resource url, if in debug mode, please ignore\", t, e), \"\");\n}, warn = function(t) {\n  console.warn(\"\".concat(LOG_CATEGORY, \": \").concat(t));\n};\nfunction _define_property$1(t, e, r) {\n  return e in t ? Object.defineProperty(t, e, {\n    value: r,\n    enumerable: !0,\n    configurable: !0,\n    writable: !0\n  }) : t[e] = r, t;\n}\nfunction _object_spread$1(t) {\n  for (var e = 1; e < arguments.length; e++) {\n    var r = arguments[e] != null ? arguments[e] : {}, n = Object.keys(r);\n    typeof Object.getOwnPropertySymbols == \"function\" && (n = n.concat(Object.getOwnPropertySymbols(r).filter(function(o) {\n      return Object.getOwnPropertyDescriptor(r, o).enumerable;\n    }))), n.forEach(function(o) {\n      _define_property$1(t, o, r[o]);\n    });\n  }\n  return t;\n}\nfunction ownKeys(t, e) {\n  var r = Object.keys(t);\n  if (Object.getOwnPropertySymbols) {\n    var n = Object.getOwnPropertySymbols(t);\n    e && (n = n.filter(function(o) {\n      return Object.getOwnPropertyDescriptor(t, o).enumerable;\n    })), r.push.apply(r, n);\n  }\n  return r;\n}\nfunction _object_spread_props(t, e) {\n  return e = e != null ? e : {}, Object.getOwnPropertyDescriptors ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(e)) : ownKeys(Object(e)).forEach(function(r) {\n    Object.defineProperty(t, r, Object.getOwnPropertyDescriptor(e, r));\n  }), t;\n}\nvar simpleJoinRemoteEntry = function(t, e) {\n  if (!t)\n    return e;\n  var r = function(o) {\n    if (o === \".\")\n      return \"\";\n    if (o.startsWith(\"./\"))\n      return o.replace(\"./\", \"\");\n    if (o.startsWith(\"/\")) {\n      var i = o.slice(1);\n      return i.endsWith(\"/\") ? i.slice(0, -1) : i;\n    }\n    return o;\n  }, n = r(t);\n  return n ? n.endsWith(\"/\") ? \"\".concat(n).concat(e) : \"\".concat(n, \"/\").concat(e) : e;\n};\nfunction generateSnapshotFromManifest(t) {\n  var e = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {}, r, n, o = e.remotes, i = o === void 0 ? {} : o, s = e.overrides, a = s === void 0 ? {} : s, c = e.version, l, u = function() {\n    return \"publicPath\" in t.metaData ? t.metaData.publicPath : t.metaData.getPublicPath;\n  }, d = Object.keys(a), m = {};\n  if (!Object.keys(i).length) {\n    var p;\n    m = ((p = t.remotes) === null || p === void 0 ? void 0 : p.reduce(function(A, O) {\n      var z, R = O.federationContainerName;\n      return d.includes(R) ? z = a[R] : \"version\" in O ? z = O.version : z = O.entry, A[R] = {\n        matchedVersion: z\n      }, A;\n    }, {})) || {};\n  }\n  Object.keys(i).forEach(function(A) {\n    return m[A] = {\n      matchedVersion: d.includes(A) ? a[A] : i[A]\n    };\n  });\n  var h = t.metaData, y = h.remoteEntry, w = y.path, g = y.name, I = y.type, M = h.types, S = h.buildInfo.buildVersion, E = h.globalName, D = t.exposes, b = {\n    version: c || \"\",\n    buildVersion: S,\n    globalName: E,\n    remoteEntry: simpleJoinRemoteEntry(w, g),\n    remoteEntryType: I,\n    remoteTypes: simpleJoinRemoteEntry(M.path, M.name),\n    remoteTypesZip: M.zip || \"\",\n    remoteTypesAPI: M.api || \"\",\n    remotesInfo: m,\n    shared: t == null ? void 0 : t.shared.map(function(A) {\n      return {\n        assets: A.assets,\n        sharedName: A.name\n      };\n    }),\n    modules: D == null ? void 0 : D.map(function(A) {\n      return {\n        moduleName: A.name,\n        modulePath: A.path,\n        assets: A.assets\n      };\n    })\n  };\n  if (!((r = t.metaData) === null || r === void 0) && r.prefetchInterface) {\n    var _ = t.metaData.prefetchInterface;\n    b = _object_spread_props(_object_spread$1({}, b), {\n      prefetchInterface: _\n    });\n  }\n  if (!((n = t.metaData) === null || n === void 0) && n.prefetchEntry) {\n    var v = t.metaData.prefetchEntry, k = v.path, U = v.name, q = v.type;\n    b = _object_spread_props(_object_spread$1({}, b), {\n      prefetchEntry: simpleJoinRemoteEntry(k, U),\n      prefetchEntryType: q\n    });\n  }\n  return \"publicPath\" in t.metaData ? l = _object_spread_props(_object_spread$1({}, b), {\n    publicPath: u()\n  }) : l = _object_spread_props(_object_spread$1({}, b), {\n    getPublicPath: u()\n  }), l;\n}\nfunction isManifestProvider(t) {\n  return !!(\"remoteEntry\" in t && t.remoteEntry.includes(MANIFEST_EXT));\n}\nfunction asyncGeneratorStep$1(t, e, r, n, o, i, s) {\n  try {\n    var a = t[i](s), c = a.value;\n  } catch (l) {\n    r(l);\n    return;\n  }\n  a.done ? e(c) : Promise.resolve(c).then(n, o);\n}\nfunction _async_to_generator$1(t) {\n  return function() {\n    var e = this, r = arguments;\n    return new Promise(function(n, o) {\n      var i = t.apply(e, r);\n      function s(c) {\n        asyncGeneratorStep$1(i, n, o, s, a, \"next\", c);\n      }\n      function a(c) {\n        asyncGeneratorStep$1(i, n, o, s, a, \"throw\", c);\n      }\n      s(void 0);\n    });\n  };\n}\nfunction _instanceof(t, e) {\n  return e != null && typeof Symbol < \"u\" && e[Symbol.hasInstance] ? !!e[Symbol.hasInstance](t) : t instanceof e;\n}\nfunction _ts_generator$1(t, e) {\n  var r, n, o, i, s = {\n    label: 0,\n    sent: function() {\n      if (o[0] & 1)\n        throw o[1];\n      return o[1];\n    },\n    trys: [],\n    ops: []\n  };\n  return i = {\n    next: a(0),\n    throw: a(1),\n    return: a(2)\n  }, typeof Symbol == \"function\" && (i[Symbol.iterator] = function() {\n    return this;\n  }), i;\n  function a(l) {\n    return function(u) {\n      return c([\n        l,\n        u\n      ]);\n    };\n  }\n  function c(l) {\n    if (r)\n      throw new TypeError(\"Generator is already executing.\");\n    for (; s; )\n      try {\n        if (r = 1, n && (o = l[0] & 2 ? n.return : l[0] ? n.throw || ((o = n.return) && o.call(n), 0) : n.next) && !(o = o.call(n, l[1])).done)\n          return o;\n        switch (n = 0, o && (l = [\n          l[0] & 2,\n          o.value\n        ]), l[0]) {\n          case 0:\n          case 1:\n            o = l;\n            break;\n          case 4:\n            return s.label++, {\n              value: l[1],\n              done: !1\n            };\n          case 5:\n            s.label++, n = l[1], l = [\n              0\n            ];\n            continue;\n          case 7:\n            l = s.ops.pop(), s.trys.pop();\n            continue;\n          default:\n            if (o = s.trys, !(o = o.length > 0 && o[o.length - 1]) && (l[0] === 6 || l[0] === 2)) {\n              s = 0;\n              continue;\n            }\n            if (l[0] === 3 && (!o || l[1] > o[0] && l[1] < o[3])) {\n              s.label = l[1];\n              break;\n            }\n            if (l[0] === 6 && s.label < o[1]) {\n              s.label = o[1], o = l;\n              break;\n            }\n            if (o && s.label < o[2]) {\n              s.label = o[2], s.ops.push(l);\n              break;\n            }\n            o[2] && s.ops.pop(), s.trys.pop();\n            continue;\n        }\n        l = e.call(t, s);\n      } catch (u) {\n        l = [\n          6,\n          u\n        ], n = 0;\n      } finally {\n        r = o = 0;\n      }\n    if (l[0] & 5)\n      throw l[1];\n    return {\n      value: l[0] ? l[1] : void 0,\n      done: !0\n    };\n  }\n}\nfunction safeWrapper(t, e) {\n  return _safeWrapper.apply(this, arguments);\n}\nfunction _safeWrapper() {\n  return _safeWrapper = _async_to_generator$1(function(t, e) {\n    var r, n;\n    return _ts_generator$1(this, function(o) {\n      switch (o.label) {\n        case 0:\n          return o.trys.push([\n            0,\n            2,\n            ,\n            3\n          ]), [\n            4,\n            t()\n          ];\n        case 1:\n          return r = o.sent(), [\n            2,\n            r\n          ];\n        case 2:\n          return n = o.sent(), !e && warn(n), [\n            2\n          ];\n        case 3:\n          return [\n            2\n          ];\n      }\n    });\n  }), _safeWrapper.apply(this, arguments);\n}\nfunction isStaticResourcesEqual(t, e) {\n  var r = /^(https?:)?\\/\\//i, n = t.replace(r, \"\").replace(/\\/$/, \"\"), o = e.replace(r, \"\").replace(/\\/$/, \"\");\n  return n === o;\n}\nfunction createScript(t, e, r, n) {\n  for (var o = null, i = !0, s = document.getElementsByTagName(\"script\"), a = 0; a < s.length; a++) {\n    var c = s[a], l = c.getAttribute(\"src\");\n    if (l && isStaticResourcesEqual(l, t)) {\n      o = c, i = !1;\n      break;\n    }\n  }\n  if (!o && (o = document.createElement(\"script\"), o.type = \"text/javascript\", o.src = t, n)) {\n    var u = n(t);\n    _instanceof(u, HTMLScriptElement) && (o = u);\n  }\n  r && Object.keys(r).forEach(function(m) {\n    o && (m === \"async\" || m === \"defer\" ? o[m] = r[m] : o.setAttribute(m, r[m]));\n  });\n  var d = function(m, p) {\n    if (o && (o.onerror = null, o.onload = null, safeWrapper(function() {\n      o != null && o.parentNode && o.parentNode.removeChild(o);\n    }), m)) {\n      var h = m(p);\n      return e(), h;\n    }\n    e();\n  };\n  return o.onerror = d.bind(null, o.onerror), o.onload = d.bind(null, o.onload), {\n    script: o,\n    needAttach: i\n  };\n}\nfunction createLink(t, e) {\n  for (var r = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {}, n = arguments.length > 3 ? arguments[3] : void 0, o = null, i = !0, s = document.getElementsByTagName(\"link\"), a = 0; a < s.length; a++) {\n    var c = s[a], l = c.getAttribute(\"href\"), u = c.getAttribute(\"ref\");\n    if (l && isStaticResourcesEqual(l, t) && u === r.ref) {\n      o = c, i = !1;\n      break;\n    }\n  }\n  if (!o && (o = document.createElement(\"link\"), o.setAttribute(\"href\", t), n)) {\n    var d = n(t);\n    _instanceof(d, HTMLLinkElement) && (o = d);\n  }\n  r && Object.keys(r).forEach(function(p) {\n    o && o.setAttribute(p, r[p]);\n  });\n  var m = function(p, h) {\n    if (o && (o.onerror = null, o.onload = null, safeWrapper(function() {\n      o != null && o.parentNode && o.parentNode.removeChild(o);\n    }), p)) {\n      var y = p(h);\n      return e(), y;\n    }\n    e();\n  };\n  return o.onerror = m.bind(null, o.onerror), o.onload = m.bind(null, o.onload), {\n    link: o,\n    needAttach: i\n  };\n}\nfunction loadScript(t, e) {\n  var r = e.attrs, n = e.createScriptHook;\n  return new Promise(function(o, i) {\n    var s = createScript(t, o, r, n), a = s.script, c = s.needAttach;\n    c && document.getElementsByTagName(\"head\")[0].appendChild(a);\n  });\n}\nfunction _array_like_to_array(t, e) {\n  (e == null || e > t.length) && (e = t.length);\n  for (var r = 0, n = new Array(e); r < e; r++)\n    n[r] = t[r];\n  return n;\n}\nfunction _array_with_holes(t) {\n  if (Array.isArray(t))\n    return t;\n}\nfunction asyncGeneratorStep(t, e, r, n, o, i, s) {\n  try {\n    var a = t[i](s), c = a.value;\n  } catch (l) {\n    r(l);\n    return;\n  }\n  a.done ? e(c) : Promise.resolve(c).then(n, o);\n}\nfunction _async_to_generator(t) {\n  return function() {\n    var e = this, r = arguments;\n    return new Promise(function(n, o) {\n      var i = t.apply(e, r);\n      function s(c) {\n        asyncGeneratorStep(i, n, o, s, a, \"next\", c);\n      }\n      function a(c) {\n        asyncGeneratorStep(i, n, o, s, a, \"throw\", c);\n      }\n      s(void 0);\n    });\n  };\n}\nfunction _iterable_to_array_limit(t, e) {\n  var r = t == null ? null : typeof Symbol < \"u\" && t[Symbol.iterator] || t[\"@@iterator\"];\n  if (r != null) {\n    var n = [], o = !0, i = !1, s, a;\n    try {\n      for (r = r.call(t); !(o = (s = r.next()).done) && (n.push(s.value), !(e && n.length === e)); o = !0)\n        ;\n    } catch (c) {\n      i = !0, a = c;\n    } finally {\n      try {\n        !o && r.return != null && r.return();\n      } finally {\n        if (i)\n          throw a;\n      }\n    }\n    return n;\n  }\n}\nfunction _non_iterable_rest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nfunction _sliced_to_array(t, e) {\n  return _array_with_holes(t) || _iterable_to_array_limit(t, e) || _unsupported_iterable_to_array(t, e) || _non_iterable_rest();\n}\nfunction _unsupported_iterable_to_array(t, e) {\n  if (t) {\n    if (typeof t == \"string\")\n      return _array_like_to_array(t, e);\n    var r = Object.prototype.toString.call(t).slice(8, -1);\n    if (r === \"Object\" && t.constructor && (r = t.constructor.name), r === \"Map\" || r === \"Set\")\n      return Array.from(r);\n    if (r === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))\n      return _array_like_to_array(t, e);\n  }\n}\nfunction _ts_generator(t, e) {\n  var r, n, o, i, s = {\n    label: 0,\n    sent: function() {\n      if (o[0] & 1)\n        throw o[1];\n      return o[1];\n    },\n    trys: [],\n    ops: []\n  };\n  return i = {\n    next: a(0),\n    throw: a(1),\n    return: a(2)\n  }, typeof Symbol == \"function\" && (i[Symbol.iterator] = function() {\n    return this;\n  }), i;\n  function a(l) {\n    return function(u) {\n      return c([\n        l,\n        u\n      ]);\n    };\n  }\n  function c(l) {\n    if (r)\n      throw new TypeError(\"Generator is already executing.\");\n    for (; s; )\n      try {\n        if (r = 1, n && (o = l[0] & 2 ? n.return : l[0] ? n.throw || ((o = n.return) && o.call(n), 0) : n.next) && !(o = o.call(n, l[1])).done)\n          return o;\n        switch (n = 0, o && (l = [\n          l[0] & 2,\n          o.value\n        ]), l[0]) {\n          case 0:\n          case 1:\n            o = l;\n            break;\n          case 4:\n            return s.label++, {\n              value: l[1],\n              done: !1\n            };\n          case 5:\n            s.label++, n = l[1], l = [\n              0\n            ];\n            continue;\n          case 7:\n            l = s.ops.pop(), s.trys.pop();\n            continue;\n          default:\n            if (o = s.trys, !(o = o.length > 0 && o[o.length - 1]) && (l[0] === 6 || l[0] === 2)) {\n              s = 0;\n              continue;\n            }\n            if (l[0] === 3 && (!o || l[1] > o[0] && l[1] < o[3])) {\n              s.label = l[1];\n              break;\n            }\n            if (l[0] === 6 && s.label < o[1]) {\n              s.label = o[1], o = l;\n              break;\n            }\n            if (o && s.label < o[2]) {\n              s.label = o[2], s.ops.push(l);\n              break;\n            }\n            o[2] && s.ops.pop(), s.trys.pop();\n            continue;\n        }\n        l = e.call(t, s);\n      } catch (u) {\n        l = [\n          6,\n          u\n        ], n = 0;\n      } finally {\n        r = o = 0;\n      }\n    if (l[0] & 5)\n      throw l[1];\n    return {\n      value: l[0] ? l[1] : void 0,\n      done: !0\n    };\n  }\n}\nfunction importNodeModule(t) {\n  if (!t)\n    throw new Error(\"import specifier is required\");\n  var e = new Function(\"name\", \"return import(name)\");\n  return e(t).then(function(r) {\n    return r.default;\n  }).catch(function(r) {\n    throw console.error(\"Error importing module \".concat(t, \":\"), r), r;\n  });\n}\nfunction createScriptNode(url, cb, attrs, createScriptHook) {\n  if (createScriptHook) {\n    var hookResult = createScriptHook(url);\n    hookResult && typeof hookResult == \"object\" && \"url\" in hookResult && (url = hookResult.url);\n  }\n  var urlObj;\n  try {\n    urlObj = new URL(url);\n  } catch (t) {\n    console.error(\"Error constructing URL:\", t), cb(new Error(\"Invalid URL: \".concat(t)));\n    return;\n  }\n  var getFetch = function() {\n    var t = _async_to_generator(function() {\n      var e;\n      return _ts_generator(this, function(r) {\n        switch (r.label) {\n          case 0:\n            return typeof fetch > \"u\" ? [\n              4,\n              importNodeModule(\"node-fetch\")\n            ] : [\n              3,\n              2\n            ];\n          case 1:\n            return e = r.sent(), [\n              2,\n              (e == null ? void 0 : e.default) || e\n            ];\n          case 2:\n            return [\n              2,\n              fetch\n            ];\n          case 3:\n            return [\n              2\n            ];\n        }\n      });\n    });\n    return function() {\n      return t.apply(this, arguments);\n    };\n  }();\n  console.log(\"fetching\", urlObj.href), getFetch().then(function(f) {\n    f(urlObj.href).then(function(t) {\n      return t.text();\n    }).then(function() {\n      var _ref = _async_to_generator(function(data) {\n        var _ref, path, vm, scriptContext, urlDirname, filename, script, exportedInterface, container;\n        return _ts_generator(this, function(_state) {\n          switch (_state.label) {\n            case 0:\n              return [\n                4,\n                Promise.all([\n                  importNodeModule(\"path\"),\n                  importNodeModule(\"vm\")\n                ])\n              ];\n            case 1:\n              _ref = _sliced_to_array.apply(void 0, [\n                _state.sent(),\n                2\n              ]), path = _ref[0], vm = _ref[1], scriptContext = {\n                exports: {},\n                module: {\n                  exports: {}\n                }\n              }, urlDirname = urlObj.pathname.split(\"/\").slice(0, -1).join(\"/\"), filename = path.basename(urlObj.pathname);\n              try {\n                if (script = new vm.Script(\"(function(exports, module, require, __dirname, __filename) {\".concat(data, `\n})`), filename), script.runInThisContext()(scriptContext.exports, scriptContext.module, eval(\"require\"), urlDirname, filename), exportedInterface = scriptContext.module.exports || scriptContext.exports, attrs && exportedInterface && attrs.globalName)\n                  return container = exportedInterface[attrs.globalName] || exportedInterface, cb(void 0, container), [\n                    2\n                  ];\n                cb(void 0, exportedInterface);\n              } catch (t) {\n                cb(new Error(\"Script execution error: \".concat(t)));\n              }\n              return [\n                2\n              ];\n          }\n        });\n      });\n      return function(t) {\n        return _ref.apply(this, arguments);\n      };\n    }()).catch(function(t) {\n      cb(t);\n    });\n  });\n}\nfunction loadScriptNode(t, e) {\n  return new Promise(function(r, n) {\n    createScriptNode(t, function(o, i) {\n      if (o)\n        n(o);\n      else {\n        var s, a, c = (e == null || (s = e.attrs) === null || s === void 0 ? void 0 : s.globalName) || \"__FEDERATION_\".concat(e == null || (a = e.attrs) === null || a === void 0 ? void 0 : a.name, \":custom__\"), l = globalThis[c] = i;\n        r(l);\n      }\n    }, e.attrs, e.createScriptHook);\n  });\n}\nfunction matchRemoteWithNameAndExpose(t, e) {\n  for (const r of t) {\n    const n = e.startsWith(r.name);\n    let o = e.replace(r.name, \"\");\n    if (n) {\n      if (o.startsWith(\"/\")) {\n        const a = r.name;\n        return o = `.${o}`, {\n          pkgNameOrAlias: a,\n          expose: o,\n          remote: r\n        };\n      } else if (o === \"\")\n        return {\n          pkgNameOrAlias: r.name,\n          expose: \".\",\n          remote: r\n        };\n    }\n    const i = r.alias && e.startsWith(r.alias);\n    let s = r.alias && e.replace(r.alias, \"\");\n    if (r.alias && i) {\n      if (s && s.startsWith(\"/\")) {\n        const a = r.alias;\n        return s = `.${s}`, {\n          pkgNameOrAlias: a,\n          expose: s,\n          remote: r\n        };\n      } else if (s === \"\")\n        return {\n          pkgNameOrAlias: r.alias,\n          expose: \".\",\n          remote: r\n        };\n    }\n  }\n}\nfunction matchRemote(t, e) {\n  for (const r of t)\n    if (e === r.name || r.alias && e === r.alias)\n      return r;\n}\nfunction registerPlugins(t, e) {\n  const r = getGlobalHostPlugins();\n  r.length > 0 && r.forEach((n) => {\n    t != null && t.find((o) => o.name !== n.name) && t.push(n);\n  }), t && t.length > 0 && t.forEach((n) => {\n    e.forEach((o) => {\n      o.applyPlugin(n);\n    });\n  });\n}\nfunction _extends$5() {\n  return _extends$5 = Object.assign || function(t) {\n    for (var e = 1; e < arguments.length; e++) {\n      var r = arguments[e];\n      for (var n in r)\n        Object.prototype.hasOwnProperty.call(r, n) && (t[n] = r[n]);\n    }\n    return t;\n  }, _extends$5.apply(this, arguments);\n}\nasync function loadEsmEntry({ entry: t, remoteEntryExports: e }) {\n  return new Promise((r, n) => {\n    try {\n      e ? r(e) : new Function(\"callbacks\", `import(\"${t}\").then(callbacks[0]).catch(callbacks[1])`)([\n        r,\n        n\n      ]);\n    } catch (o) {\n      n(o);\n    }\n  });\n}\nasync function loadEntryScript({ name: t, globalName: e, entry: r, createScriptHook: n }) {\n  const { entryExports: o } = getRemoteEntryExports(t, e);\n  return o || (typeof document > \"u\" ? loadScriptNode(r, {\n    attrs: {\n      name: t,\n      globalName: e\n    },\n    createScriptHook: n\n  }).then(() => {\n    const { remoteEntryKey: i, entryExports: s } = getRemoteEntryExports(t, e);\n    return assert(s, `\n        Unable to use the ${t}'s '${r}' URL with ${i}'s globalName to get remoteEntry exports.\n        Possible reasons could be:\n\n        1. '${r}' is not the correct URL, or the remoteEntry resource or name is incorrect.\n\n        2. ${i} cannot be used to get remoteEntry exports in the window object.\n      `), s;\n  }).catch((i) => i) : loadScript(r, {\n    attrs: {},\n    createScriptHook: n\n  }).then(() => {\n    const { remoteEntryKey: i, entryExports: s } = getRemoteEntryExports(t, e);\n    return assert(s, `\n      Unable to use the ${t}'s '${r}' URL with ${i}'s globalName to get remoteEntry exports.\n      Possible reasons could be:\n\n      1. '${r}' is not the correct URL, or the remoteEntry resource or name is incorrect.\n\n      2. ${i} cannot be used to get remoteEntry exports in the window object.\n    `), s;\n  }).catch((i) => i));\n}\nfunction getRemoteEntryUniqueKey(t) {\n  const { entry: e, name: r } = t;\n  return composeKeyWithSeparator(r, e);\n}\nasync function getRemoteEntry({ remoteEntryExports: t, remoteInfo: e, createScriptHook: r }) {\n  const { entry: n, name: o, type: i, entryGlobalName: s } = e, a = getRemoteEntryUniqueKey(e);\n  return t || (globalLoading[a] || (i === \"esm\" ? globalLoading[a] = loadEsmEntry({\n    entry: n,\n    remoteEntryExports: t\n  }) : globalLoading[a] = loadEntryScript({\n    name: o,\n    globalName: s,\n    entry: n,\n    createScriptHook: r\n  })), globalLoading[a]);\n}\nfunction getRemoteInfo(t) {\n  return _extends$5({}, t, {\n    entry: \"entry\" in t ? t.entry : \"\",\n    type: t.type || DEFAULT_REMOTE_TYPE,\n    entryGlobalName: t.entryGlobalName || t.name,\n    shareScope: t.shareScope || DEFAULT_SCOPE\n  });\n}\nfunction _extends$4() {\n  return _extends$4 = Object.assign || function(t) {\n    for (var e = 1; e < arguments.length; e++) {\n      var r = arguments[e];\n      for (var n in r)\n        Object.prototype.hasOwnProperty.call(r, n) && (t[n] = r[n]);\n    }\n    return t;\n  }, _extends$4.apply(this, arguments);\n}\nlet Module = class {\n  async getEntry() {\n    if (this.remoteEntryExports)\n      return this.remoteEntryExports;\n    const t = await getRemoteEntry({\n      remoteInfo: this.remoteInfo,\n      remoteEntryExports: this.remoteEntryExports,\n      createScriptHook: (e) => {\n        const r = this.host.loaderHook.lifecycle.createScript.emit({\n          url: e\n        });\n        if (typeof document > \"u\" || r instanceof HTMLScriptElement)\n          return r;\n      }\n    });\n    return assert(t, `remoteEntryExports is undefined \n ${safeToString$1(this.remoteInfo)}`), this.remoteEntryExports = t, this.remoteEntryExports;\n  }\n  async get(t, e) {\n    const { loadFactory: r = !0 } = e || {\n      loadFactory: !0\n    }, n = await this.getEntry();\n    if (!this.inited) {\n      const i = this.host.shareScopeMap, s = this.remoteInfo.shareScope || \"default\";\n      i[s] || (i[s] = {});\n      const a = i[s], c = [], l = {\n        version: this.remoteInfo.version || \"\"\n      };\n      Object.defineProperty(l, \"hostId\", {\n        value: this.host.options.id || this.host.name,\n        enumerable: !1\n      });\n      const u = await this.host.hooks.lifecycle.beforeInitContainer.emit({\n        shareScope: a,\n        remoteEntryInitOptions: l,\n        initScope: c,\n        remoteInfo: this.remoteInfo,\n        origin: this.host\n      });\n      await n.init(u.shareScope, u.initScope, u.remoteEntryInitOptions), await this.host.hooks.lifecycle.initContainer.emit(_extends$4({}, u, {\n        remoteEntryExports: n\n      }));\n    }\n    this.lib = n, this.inited = !0;\n    const o = await n.get(t);\n    return assert(o, `${getFMId(this.remoteInfo)} remote don't export ${t}.`), r ? await o() : o;\n  }\n  constructor({ remoteInfo: t, host: e }) {\n    this.inited = !1, this.lib = void 0, this.remoteInfo = t, this.host = e;\n  }\n};\nclass SyncHook {\n  on(e) {\n    typeof e == \"function\" && this.listeners.add(e);\n  }\n  once(e) {\n    const r = this;\n    this.on(function n(...o) {\n      return r.remove(n), e.apply(null, o);\n    });\n  }\n  emit(...e) {\n    let r;\n    return this.listeners.size > 0 && this.listeners.forEach((n) => {\n      r = n(...e);\n    }), r;\n  }\n  remove(e) {\n    this.listeners.delete(e);\n  }\n  removeAll() {\n    this.listeners.clear();\n  }\n  constructor(e) {\n    this.type = \"\", this.listeners = /* @__PURE__ */ new Set(), e && (this.type = e);\n  }\n}\nclass AsyncHook extends SyncHook {\n  emit(...e) {\n    let r;\n    const n = Array.from(this.listeners);\n    if (n.length > 0) {\n      let o = 0;\n      const i = (s) => s === !1 ? !1 : o < n.length ? Promise.resolve(n[o++].apply(null, e)).then(i) : s;\n      r = i();\n    }\n    return Promise.resolve(r);\n  }\n}\nfunction checkReturnData(t, e) {\n  if (!isObject(e))\n    return !1;\n  if (t !== e) {\n    for (const r in t)\n      if (!(r in e))\n        return !1;\n  }\n  return !0;\n}\nclass SyncWaterfallHook extends SyncHook {\n  emit(e) {\n    isObject(e) || error(`The data for the \"${this.type}\" hook should be an object.`);\n    for (const r of this.listeners)\n      try {\n        const n = r(e);\n        if (checkReturnData(e, n))\n          e = n;\n        else {\n          this.onerror(`A plugin returned an unacceptable value for the \"${this.type}\" type.`);\n          break;\n        }\n      } catch (n) {\n        warn$1(n), this.onerror(n);\n      }\n    return e;\n  }\n  constructor(e) {\n    super(), this.onerror = error, this.type = e;\n  }\n}\nclass AsyncWaterfallHook extends SyncHook {\n  emit(e) {\n    isObject(e) || error(`The response data for the \"${this.type}\" hook must be an object.`);\n    const r = Array.from(this.listeners);\n    if (r.length > 0) {\n      let n = 0;\n      const o = (s) => (warn$1(s), this.onerror(s), e), i = (s) => {\n        if (checkReturnData(e, s)) {\n          if (e = s, n < r.length)\n            try {\n              return Promise.resolve(r[n++](e)).then(i, o);\n            } catch (a) {\n              return o(a);\n            }\n        } else\n          this.onerror(`A plugin returned an incorrect value for the \"${this.type}\" type.`);\n        return e;\n      };\n      return Promise.resolve(i(e));\n    }\n    return Promise.resolve(e);\n  }\n  constructor(e) {\n    super(), this.onerror = error, this.type = e;\n  }\n}\nclass PluginSystem {\n  applyPlugin(e) {\n    assert(isPlainObject(e), \"Plugin configuration is invalid.\");\n    const r = e.name;\n    assert(r, \"A name must be provided by the plugin.\"), this.registerPlugins[r] || (this.registerPlugins[r] = e, Object.keys(this.lifecycle).forEach((n) => {\n      const o = e[n];\n      o && this.lifecycle[n].on(o);\n    }));\n  }\n  removePlugin(e) {\n    assert(e, \"A name is required.\");\n    const r = this.registerPlugins[e];\n    assert(r, `The plugin \"${e}\" is not registered.`), Object.keys(r).forEach((n) => {\n      n !== \"name\" && this.lifecycle[n].remove(r[n]);\n    });\n  }\n  inherit({ lifecycle: e, registerPlugins: r }) {\n    Object.keys(e).forEach((n) => {\n      assert(!this.lifecycle[n], `The hook \"${n}\" has a conflict and cannot be inherited.`), this.lifecycle[n] = e[n];\n    }), Object.keys(r).forEach((n) => {\n      assert(!this.registerPlugins[n], `The plugin \"${n}\" has a conflict and cannot be inherited.`), this.applyPlugin(r[n]);\n    });\n  }\n  constructor(e) {\n    this.registerPlugins = {}, this.lifecycle = e, this.lifecycleKeys = Object.keys(e);\n  }\n}\nfunction _extends$3() {\n  return _extends$3 = Object.assign || function(t) {\n    for (var e = 1; e < arguments.length; e++) {\n      var r = arguments[e];\n      for (var n in r)\n        Object.prototype.hasOwnProperty.call(r, n) && (t[n] = r[n]);\n    }\n    return t;\n  }, _extends$3.apply(this, arguments);\n}\nfunction defaultPreloadArgs(t) {\n  return _extends$3({\n    resourceCategory: \"sync\",\n    share: !0,\n    depsRemote: !0,\n    prefetchInterface: !1\n  }, t);\n}\nfunction formatPreloadArgs(t, e) {\n  return e.map((r) => {\n    const n = matchRemote(t, r.nameOrAlias);\n    return assert(n, `Unable to preload ${r.nameOrAlias} as it is not included in ${!n && safeToString$1({\n      remoteInfo: n,\n      remotes: t\n    })}`), {\n      remote: n,\n      preloadConfig: defaultPreloadArgs(r)\n    };\n  });\n}\nfunction normalizePreloadExposes(t) {\n  return t ? t.map((e) => e === \".\" ? e : e.startsWith(\"./\") ? e.replace(\"./\", \"\") : e) : [];\n}\nfunction preloadAssets(t, e, r) {\n  const { cssAssets: n, jsAssetsWithoutEntry: o, entryAssets: i } = r;\n  if (e.options.inBrowser) {\n    i.forEach((a) => {\n      const { moduleInfo: c } = a, l = e.moduleCache.get(t.name);\n      getRemoteEntry(l ? {\n        remoteInfo: c,\n        remoteEntryExports: l.remoteEntryExports,\n        createScriptHook: (u) => {\n          const d = e.loaderHook.lifecycle.createScript.emit({\n            url: u\n          });\n          if (d instanceof HTMLScriptElement)\n            return d;\n        }\n      } : {\n        remoteInfo: c,\n        remoteEntryExports: void 0,\n        createScriptHook: (u) => {\n          const d = e.loaderHook.lifecycle.createScript.emit({\n            url: u\n          });\n          if (d instanceof HTMLScriptElement)\n            return d;\n        }\n      });\n    });\n    const s = document.createDocumentFragment();\n    n.forEach((a) => {\n      const { link: c, needAttach: l } = createLink(a, () => {\n      }, {\n        rel: \"preload\",\n        as: \"style\"\n      }, (u) => {\n        const d = e.loaderHook.lifecycle.createLink.emit({\n          url: u\n        });\n        if (d instanceof HTMLLinkElement)\n          return d;\n      });\n      l && s.appendChild(c);\n    }), o.forEach((a) => {\n      const { link: c, needAttach: l } = createLink(a, () => {\n      }, {\n        rel: \"preload\",\n        as: \"script\"\n      }, (u) => {\n        const d = e.loaderHook.lifecycle.createLink.emit({\n          url: u\n        });\n        if (d instanceof HTMLLinkElement)\n          return d;\n      });\n      l && document.head.appendChild(c);\n    }), document.head.appendChild(s);\n  }\n}\nfunction _extends$2() {\n  return _extends$2 = Object.assign || function(t) {\n    for (var e = 1; e < arguments.length; e++) {\n      var r = arguments[e];\n      for (var n in r)\n        Object.prototype.hasOwnProperty.call(r, n) && (t[n] = r[n]);\n    }\n    return t;\n  }, _extends$2.apply(this, arguments);\n}\nfunction assignRemoteInfo(t, e) {\n  (!(\"remoteEntry\" in e) || !e.remoteEntry) && error(`The attribute remoteEntry of ${name} must not be undefined.`);\n  const { remoteEntry: r } = e, n = getResourceUrl(e, r);\n  t.type = e.remoteEntryType, t.entryGlobalName = e.globalName, t.entry = n, t.version = e.version, t.buildVersion = e.buildVersion;\n}\nfunction snapshotPlugin() {\n  return {\n    name: \"snapshot-plugin\",\n    async afterResolve(t) {\n      const { remote: e, pkgNameOrAlias: r, expose: n, origin: o, remoteInfo: i } = t;\n      if (!isRemoteInfoWithEntry(e) || !isPureRemoteEntry(e)) {\n        const { remoteSnapshot: s, globalSnapshot: a } = await o.snapshotHandler.loadRemoteSnapshotInfo(e);\n        assignRemoteInfo(i, s);\n        const c = {\n          remote: e,\n          preloadConfig: {\n            nameOrAlias: r,\n            exposes: [\n              n\n            ],\n            resourceCategory: \"sync\",\n            share: !1,\n            depsRemote: !1\n          }\n        }, l = await o.hooks.lifecycle.generatePreloadAssets.emit({\n          origin: o,\n          preloadOptions: c,\n          remoteInfo: i,\n          remote: e,\n          remoteSnapshot: s,\n          globalSnapshot: a\n        });\n        return l && preloadAssets(i, o, l), _extends$2({}, t, {\n          remoteSnapshot: s\n        });\n      }\n      return t;\n    }\n  };\n}\nfunction splitId(t) {\n  const e = t.split(\":\");\n  return e.length === 1 ? {\n    name: e[0],\n    version: void 0\n  } : e.length === 2 ? {\n    name: e[0],\n    version: e[1]\n  } : {\n    name: e[1],\n    version: e[2]\n  };\n}\nfunction traverseModuleInfo(t, e, r, n, o = {}, i) {\n  const s = getFMId(e), { value: a } = getInfoWithoutType(t, s), c = i || a;\n  if (c && !isManifestProvider(c) && (r(c, e, n), c.remotesInfo)) {\n    const l = Object.keys(c.remotesInfo);\n    for (const u of l) {\n      if (o[u])\n        continue;\n      o[u] = !0;\n      const d = splitId(u), m = c.remotesInfo[u];\n      traverseModuleInfo(t, {\n        name: d.name,\n        version: m.matchedVersion\n      }, r, !1, o, void 0);\n    }\n  }\n}\nfunction generatePreloadAssets(t, e, r, n, o) {\n  const i = [], s = [], a = [], c = /* @__PURE__ */ new Set(), l = /* @__PURE__ */ new Set(), { options: u } = t, { preloadConfig: d } = e, { depsRemote: m } = d;\n  traverseModuleInfo(n, r, (h, y, w) => {\n    let g;\n    if (w)\n      g = d;\n    else if (Array.isArray(m)) {\n      const b = m.find((_) => _.nameOrAlias === y.name || _.nameOrAlias === y.alias);\n      if (!b)\n        return;\n      g = defaultPreloadArgs(b);\n    } else if (m === !0)\n      g = d;\n    else\n      return;\n    const I = getResourceUrl(h, \"remoteEntry\" in h ? h.remoteEntry : \"\");\n    I && a.push({\n      name: y.name,\n      moduleInfo: {\n        name: y.name,\n        entry: I,\n        type: \"remoteEntryType\" in h ? h.remoteEntryType : \"global\",\n        entryGlobalName: \"globalName\" in h ? h.globalName : y.name,\n        shareScope: \"\",\n        version: \"version\" in h ? h.version : void 0\n      },\n      url: I\n    });\n    let M = \"modules\" in h ? h.modules : [];\n    const S = normalizePreloadExposes(g.exposes);\n    if (S.length && \"modules\" in h) {\n      var E;\n      M = h == null || (E = h.modules) == null ? void 0 : E.reduce((b, _) => ((S == null ? void 0 : S.indexOf(_.moduleName)) !== -1 && b.push(_), b), []);\n    }\n    function D(b) {\n      const _ = b.map((v) => getResourceUrl(h, v));\n      return g.filter ? _.filter(g.filter) : _;\n    }\n    if (M) {\n      const b = M.length;\n      for (let _ = 0; _ < b; _++) {\n        const v = M[_], k = `${y.name}/${v.moduleName}`;\n        t.hooks.lifecycle.handlePreloadModule.emit({\n          id: v.moduleName === \".\" ? y.name : k,\n          name: y.name,\n          remoteSnapshot: h,\n          preloadConfig: g,\n          remote: y,\n          origin: t\n        }), !getPreloaded(k) && (g.resourceCategory === \"all\" ? (i.push(...D(v.assets.css.async)), i.push(...D(v.assets.css.sync)), s.push(...D(v.assets.js.async)), s.push(...D(v.assets.js.sync))) : (g.resourceCategory = \"sync\") && (i.push(...D(v.assets.css.sync)), s.push(...D(v.assets.js.sync))), setPreloaded(k));\n      }\n    }\n  }, !0, {}, o), o.shared && o.shared.forEach((h) => {\n    var y;\n    const w = (y = u.shared) == null ? void 0 : y[h.sharedName];\n    if (!w)\n      return;\n    const g = getRegisteredShare(t.shareScopeMap, h.sharedName, w, t.hooks.lifecycle.resolveShare);\n    g && typeof g.lib == \"function\" && (h.assets.js.sync.forEach((I) => {\n      c.add(I);\n    }), h.assets.css.sync.forEach((I) => {\n      l.add(I);\n    }));\n  });\n  const p = s.filter((h) => !c.has(h));\n  return {\n    cssAssets: i.filter((h) => !l.has(h)),\n    jsAssetsWithoutEntry: p,\n    entryAssets: a\n  };\n}\nconst generatePreloadAssetsPlugin = function() {\n  return {\n    name: \"generate-preload-assets-plugin\",\n    async generatePreloadAssets(t) {\n      const { origin: e, preloadOptions: r, remoteInfo: n, remote: o, globalSnapshot: i, remoteSnapshot: s } = t;\n      return isRemoteInfoWithEntry(o) && isPureRemoteEntry(o) ? {\n        cssAssets: [],\n        jsAssetsWithoutEntry: [],\n        entryAssets: [\n          {\n            name: o.name,\n            url: o.entry,\n            moduleInfo: {\n              name: n.name,\n              entry: o.entry,\n              type: \"global\",\n              entryGlobalName: \"\",\n              shareScope: \"\"\n            }\n          }\n        ]\n      } : (assignRemoteInfo(n, s), generatePreloadAssets(e, r, n, i, s));\n    }\n  };\n};\nfunction _extends$1() {\n  return _extends$1 = Object.assign || function(t) {\n    for (var e = 1; e < arguments.length; e++) {\n      var r = arguments[e];\n      for (var n in r)\n        Object.prototype.hasOwnProperty.call(r, n) && (t[n] = r[n]);\n    }\n    return t;\n  }, _extends$1.apply(this, arguments);\n}\nclass SnapshotHandler {\n  async loadSnapshot(e) {\n    const { options: r } = this.HostInstance, { hostGlobalSnapshot: n, remoteSnapshot: o, globalSnapshot: i } = this.getGlobalRemoteInfo(e), { remoteSnapshot: s, globalSnapshot: a } = await this.hooks.lifecycle.loadSnapshot.emit({\n      options: r,\n      moduleInfo: e,\n      hostGlobalSnapshot: n,\n      remoteSnapshot: o,\n      globalSnapshot: i\n    });\n    return {\n      remoteSnapshot: s,\n      globalSnapshot: a\n    };\n  }\n  async loadRemoteSnapshotInfo(e) {\n    const { options: r } = this.HostInstance;\n    await this.hooks.lifecycle.beforeLoadRemoteSnapshot.emit({\n      options: r,\n      moduleInfo: e\n    });\n    let n = getGlobalSnapshotInfoByModuleInfo({\n      name: this.HostInstance.options.name,\n      version: this.HostInstance.options.version\n    });\n    n || (n = {\n      version: this.HostInstance.options.version || \"\",\n      remoteEntry: \"\",\n      remotesInfo: {}\n    }, addGlobalSnapshot({\n      [this.HostInstance.options.name]: n\n    })), n && \"remotesInfo\" in n && !getInfoWithoutType(n.remotesInfo, e.name).value && (\"version\" in e || \"entry\" in e) && (n.remotesInfo = _extends$1({}, n == null ? void 0 : n.remotesInfo, {\n      [e.name]: {\n        matchedVersion: \"version\" in e ? e.version : e.entry\n      }\n    }));\n    const { hostGlobalSnapshot: o, remoteSnapshot: i, globalSnapshot: s } = this.getGlobalRemoteInfo(e), { remoteSnapshot: a, globalSnapshot: c } = await this.hooks.lifecycle.loadSnapshot.emit({\n      options: r,\n      moduleInfo: e,\n      hostGlobalSnapshot: o,\n      remoteSnapshot: i,\n      globalSnapshot: s\n    });\n    if (a)\n      if (isManifestProvider(a)) {\n        const l = await this.getManifestJson(a.remoteEntry, e, {}), u = setGlobalSnapshotInfoByModuleInfo(_extends$1({}, e, {\n          entry: a.remoteEntry\n        }), l);\n        return {\n          remoteSnapshot: l,\n          globalSnapshot: u\n        };\n      } else {\n        const { remoteSnapshot: l } = await this.hooks.lifecycle.loadRemoteSnapshot.emit({\n          options: this.HostInstance.options,\n          moduleInfo: e,\n          remoteSnapshot: a,\n          from: \"global\"\n        });\n        return {\n          remoteSnapshot: l,\n          globalSnapshot: c\n        };\n      }\n    else if (isRemoteInfoWithEntry(e)) {\n      const l = await this.getManifestJson(e.entry, e, {}), u = setGlobalSnapshotInfoByModuleInfo(e, l), { remoteSnapshot: d } = await this.hooks.lifecycle.loadRemoteSnapshot.emit({\n        options: this.HostInstance.options,\n        moduleInfo: e,\n        remoteSnapshot: l,\n        from: \"global\"\n      });\n      return {\n        remoteSnapshot: d,\n        globalSnapshot: u\n      };\n    } else\n      error(`\n          Cannot get remoteSnapshot with the name: '${e.name}', version: '${e.version}' from __FEDERATION__.moduleInfo. The following reasons may be causing the problem:\n\n          1. The Deploy platform did not deliver the correct data. You can use __FEDERATION__.moduleInfo to check the remoteInfo.\n\n          2. The remote '${e.name}' version '${e.version}' is not released.\n\n          The transformed module info: ${JSON.stringify(c)}\n        `);\n  }\n  getGlobalRemoteInfo(e) {\n    const r = getGlobalSnapshotInfoByModuleInfo({\n      name: this.HostInstance.options.name,\n      version: this.HostInstance.options.version\n    }), n = r && \"remotesInfo\" in r && r.remotesInfo && getInfoWithoutType(r.remotesInfo, e.name).value;\n    return n && n.matchedVersion ? {\n      hostGlobalSnapshot: r,\n      globalSnapshot: getGlobalSnapshot(),\n      remoteSnapshot: getGlobalSnapshotInfoByModuleInfo({\n        name: e.name,\n        version: n.matchedVersion\n      })\n    } : {\n      hostGlobalSnapshot: void 0,\n      globalSnapshot: getGlobalSnapshot(),\n      remoteSnapshot: getGlobalSnapshotInfoByModuleInfo({\n        name: e.name,\n        version: \"version\" in e ? e.version : void 0\n      })\n    };\n  }\n  async getManifestJson(e, r, n) {\n    const o = async () => {\n      let s = this.manifestCache.get(e);\n      if (s)\n        return s;\n      try {\n        let a = await this.loaderHook.lifecycle.fetch.emit(e, {});\n        return (!a || !(a instanceof Response)) && (a = await fetch(e, {})), s = await a.json(), assert(s.metaData && s.exposes && s.shared, `${e} is not a federation manifest`), this.manifestCache.set(e, s), s;\n      } catch (a) {\n        error(`Failed to get manifestJson for ${r.name}. The manifest URL is ${e}. Please ensure that the manifestUrl is accessible.\n          \n Error message:\n          \n ${a}`);\n      }\n    }, i = async () => {\n      const s = await o(), a = generateSnapshotFromManifest(s, {\n        version: e\n      }), { remoteSnapshot: c } = await this.hooks.lifecycle.loadRemoteSnapshot.emit({\n        options: this.HostInstance.options,\n        moduleInfo: r,\n        manifestJson: s,\n        remoteSnapshot: a,\n        manifestUrl: e,\n        from: \"manifest\"\n      });\n      return c;\n    };\n    return this.manifestLoading[e] || (this.manifestLoading[e] = i().then((s) => s)), this.manifestLoading[e];\n  }\n  constructor(e) {\n    this.loadingHostSnapshot = null, this.manifestCache = /* @__PURE__ */ new Map(), this.hooks = new PluginSystem({\n      beforeLoadRemoteSnapshot: new AsyncHook(\"beforeLoadRemoteSnapshot\"),\n      loadSnapshot: new AsyncWaterfallHook(\"loadGlobalSnapshot\"),\n      loadRemoteSnapshot: new AsyncWaterfallHook(\"loadRemoteSnapshot\")\n    }), this.manifestLoading = Global.__FEDERATION__.__MANIFEST_LOADING__, this.HostInstance = e, this.loaderHook = e.loaderHook;\n  }\n}\nfunction _extends() {\n  return _extends = Object.assign || function(t) {\n    for (var e = 1; e < arguments.length; e++) {\n      var r = arguments[e];\n      for (var n in r)\n        Object.prototype.hasOwnProperty.call(r, n) && (t[n] = r[n]);\n    }\n    return t;\n  }, _extends.apply(this, arguments);\n}\nfunction _object_without_properties_loose(t, e) {\n  if (t == null)\n    return {};\n  var r = {}, n = Object.keys(t), o, i;\n  for (i = 0; i < n.length; i++)\n    o = n[i], !(e.indexOf(o) >= 0) && (r[o] = t[o]);\n  return r;\n}\nclass FederationHost {\n  _setGlobalShareScopeMap() {\n    const e = getGlobalShareScope(), r = this.options.id || this.options.name;\n    r && !e[r] && (e[r] = this.shareScopeMap);\n  }\n  initOptions(e) {\n    this.registerPlugins(e.plugins);\n    const r = this.formatOptions(this.options, e);\n    return this.options = r, r;\n  }\n  async loadShare(e, r) {\n    var n;\n    const o = Object.assign({}, (n = this.options.shared) == null ? void 0 : n[e], r);\n    o != null && o.scope && await Promise.all(o.scope.map(async (l) => {\n      await Promise.all(this.initializeSharing(l, o.strategy));\n    }));\n    const i = await this.hooks.lifecycle.beforeLoadShare.emit({\n      pkgName: e,\n      shareInfo: o,\n      shared: this.options.shared,\n      origin: this\n    }), { shareInfo: s } = i;\n    assert(s, `Cannot find ${e} Share in the ${this.options.name}. Please ensure that the ${e} Share parameters have been injected`);\n    const a = getRegisteredShare(this.shareScopeMap, e, s, this.hooks.lifecycle.resolveShare), c = (l) => {\n      l.useIn || (l.useIn = []), addUniqueItem(l.useIn, this.options.name);\n    };\n    if (a && a.lib)\n      return c(a), a.lib;\n    if (a && a.loading && !a.loaded) {\n      const l = await a.loading;\n      return a.loaded = !0, a.lib || (a.lib = l), c(a), l;\n    } else if (a) {\n      const l = (async () => {\n        const u = await a.get();\n        s.lib = u, s.loaded = !0, c(s);\n        const d = getRegisteredShare(this.shareScopeMap, e, s, this.hooks.lifecycle.resolveShare);\n        return d && (d.lib = u, d.loaded = !0), u;\n      })();\n      return this.setShared({\n        pkgName: e,\n        loaded: !1,\n        shared: a,\n        from: this.options.name,\n        lib: null,\n        loading: l\n      }), l;\n    } else {\n      if (r)\n        return !1;\n      const l = (async () => {\n        const u = await s.get();\n        s.lib = u, s.loaded = !0, c(s);\n        const d = getRegisteredShare(this.shareScopeMap, e, s, this.hooks.lifecycle.resolveShare);\n        return d && (d.lib = u, d.loaded = !0), u;\n      })();\n      return this.setShared({\n        pkgName: e,\n        loaded: !1,\n        shared: s,\n        from: this.options.name,\n        lib: null,\n        loading: l\n      }), l;\n    }\n  }\n  loadShareSync(e, r) {\n    var n;\n    const o = Object.assign({}, (n = this.options.shared) == null ? void 0 : n[e], r);\n    o != null && o.scope && o.scope.forEach((a) => {\n      this.initializeSharing(a, o.strategy);\n    });\n    const i = getRegisteredShare(this.shareScopeMap, e, o, this.hooks.lifecycle.resolveShare), s = (a) => {\n      a.useIn || (a.useIn = []), addUniqueItem(a.useIn, this.options.name);\n    };\n    if (i) {\n      if (typeof i.lib == \"function\")\n        return s(i), i.loaded || (i.loaded = !0, i.from === this.options.name && (o.loaded = !0)), i.lib;\n      if (typeof i.get == \"function\") {\n        const a = i.get();\n        if (!(a instanceof Promise))\n          return s(i), this.setShared({\n            pkgName: e,\n            loaded: !0,\n            from: this.options.name,\n            lib: a,\n            shared: i\n          }), a;\n      }\n    }\n    if (o.lib)\n      return o.loaded || (o.loaded = !0), o.lib;\n    if (o.get) {\n      const a = o.get();\n      if (a instanceof Promise)\n        throw new Error(`\n        The loadShareSync function was unable to load ${e}. The ${e} could not be found in ${this.options.name}.\n        Possible reasons for failure: \n\n        1. The ${e} share was registered with the 'get' attribute, but loadShare was not used beforehand.\n\n        2. The ${e} share was not registered with the 'lib' attribute.\n\n      `);\n      return o.lib = a, this.setShared({\n        pkgName: e,\n        loaded: !0,\n        from: this.options.name,\n        lib: o.lib,\n        shared: o\n      }), o.lib;\n    }\n    throw new Error(`\n        The loadShareSync function was unable to load ${e}. The ${e} could not be found in ${this.options.name}.\n        Possible reasons for failure: \n\n        1. The ${e} share was registered with the 'get' attribute, but loadShare was not used beforehand.\n\n        2. The ${e} share was not registered with the 'lib' attribute.\n\n      `);\n  }\n  initRawContainer(e, r, n) {\n    const o = getRemoteInfo({\n      name: e,\n      entry: r\n    }), i = new Module({\n      host: this,\n      remoteInfo: o\n    });\n    return i.remoteEntryExports = n, this.moduleCache.set(e, i), i;\n  }\n  async _getRemoteModuleAndOptions(e) {\n    const r = await this.hooks.lifecycle.beforeRequest.emit({\n      id: e,\n      options: this.options,\n      origin: this\n    }), { id: n } = r, o = matchRemoteWithNameAndExpose(this.options.remotes, n);\n    assert(o, `\n        Unable to locate ${n} in ${this.options.name}. Potential reasons for failure include:\n\n        1. ${n} was not included in the 'remotes' parameter of ${this.options.name || \"the host\"}.\n\n        2. ${n} could not be found in the 'remotes' of ${this.options.name} with either 'name' or 'alias' attributes.\n        3. ${n} is not online, injected, or loaded.\n        4. ${n}  cannot be accessed on the expected.\n        5. The 'beforeRequest' hook was provided but did not return the correct 'remoteInfo' when attempting to load ${n}.\n      `);\n    const { remote: i } = o, s = getRemoteInfo(i), a = await this.hooks.lifecycle.afterResolve.emit(_extends({\n      id: n\n    }, o, {\n      options: this.options,\n      origin: this,\n      remoteInfo: s\n    })), { remote: c, expose: l } = a;\n    assert(c && l, `The 'beforeRequest' hook was executed, but it failed to return the correct 'remote' and 'expose' values while loading ${n}.`);\n    let u = this.moduleCache.get(c.name);\n    const d = {\n      host: this,\n      remoteInfo: s\n    };\n    return u || (u = new Module(d), this.moduleCache.set(c.name, u)), {\n      module: u,\n      moduleOptions: d,\n      remoteMatchInfo: a\n    };\n  }\n  async loadRemote(e, r) {\n    try {\n      const { loadFactory: n = !0 } = r || {\n        loadFactory: !0\n      }, { module: o, moduleOptions: i, remoteMatchInfo: s } = await this._getRemoteModuleAndOptions(e), { pkgNameOrAlias: a, remote: c, expose: l, id: u } = s, d = await o.get(l, r), m = await this.hooks.lifecycle.onLoad.emit({\n        id: u,\n        pkgNameOrAlias: a,\n        expose: l,\n        exposeModule: n ? d : void 0,\n        exposeModuleFactory: n ? void 0 : d,\n        remote: c,\n        options: i,\n        moduleInstance: o,\n        origin: this\n      });\n      return typeof m == \"function\" ? m : d;\n    } catch (n) {\n      const { from: o = \"runtime\" } = r || {\n        from: \"runtime\"\n      }, i = await this.hooks.lifecycle.errorLoadRemote.emit({\n        id: e,\n        error: n,\n        from: o,\n        origin: this\n      });\n      if (!i)\n        throw n;\n      return i;\n    }\n  }\n  async preloadRemote(e) {\n    await this.hooks.lifecycle.beforePreloadRemote.emit({\n      preloadOptions: e,\n      options: this.options,\n      origin: this\n    });\n    const r = formatPreloadArgs(this.options.remotes, e);\n    await Promise.all(r.map(async (n) => {\n      const { remote: o } = n, i = getRemoteInfo(o), { globalSnapshot: s, remoteSnapshot: a } = await this.snapshotHandler.loadRemoteSnapshotInfo(o), c = await this.hooks.lifecycle.generatePreloadAssets.emit({\n        origin: this,\n        preloadOptions: n,\n        remote: o,\n        remoteInfo: i,\n        globalSnapshot: s,\n        remoteSnapshot: a\n      });\n      !c || preloadAssets(i, this, c);\n    }));\n  }\n  initializeSharing(e = DEFAULT_SCOPE, r) {\n    const n = this.shareScopeMap, o = this.options.name;\n    n[e] || (n[e] = {});\n    const i = n[e], s = (u, d) => {\n      var m;\n      const { version: p, eager: h } = d;\n      i[u] = i[u] || {};\n      const y = i[u], w = y[p], g = Boolean(w && (w.eager || ((m = w.shareConfig) == null ? void 0 : m.eager)));\n      (!w || w.strategy !== \"loaded-first\" && !w.loaded && (Boolean(!h) !== !g ? h : o > w.from)) && (y[p] = d);\n    }, a = [], c = (u) => u && u.init && u.init(n[e]), l = async (u) => {\n      const { module: d } = await this._getRemoteModuleAndOptions(u);\n      if (d.getEntry) {\n        const m = await d.getEntry();\n        d.inited || (c(m), d.inited = !0);\n      }\n    };\n    return Object.keys(this.options.shared).forEach((u) => {\n      const d = this.options.shared[u];\n      d.scope.includes(e) && s(u, d);\n    }), r === \"version-first\" && this.options.remotes.forEach((u) => {\n      u.shareScope === e && a.push(l(u.name));\n    }), a;\n  }\n  initShareScopeMap(e, r) {\n    this.shareScopeMap[e] = r, this.hooks.lifecycle.initContainerShareScopeMap.emit({\n      shareScope: r,\n      options: this.options,\n      origin: this\n    });\n  }\n  formatOptions(e, r) {\n    const n = formatShareConfigs(r.shared || {}, r.name), o = _extends({}, e.shared, n), { userOptions: i, options: s } = this.hooks.lifecycle.beforeInit.emit({\n      origin: this,\n      userOptions: r,\n      options: e,\n      shareInfo: o\n    }), a = (i.remotes || []).reduce((u, d) => (this.registerRemote(d, u, {\n      force: !1\n    }), u), s.remotes);\n    Object.keys(n).forEach((u) => {\n      const d = n[u];\n      !getRegisteredShare(this.shareScopeMap, u, d, this.hooks.lifecycle.resolveShare) && d && d.lib && this.setShared({\n        pkgName: u,\n        lib: d.lib,\n        get: d.get,\n        loaded: !0,\n        shared: d,\n        from: r.name\n      });\n    });\n    const c = [\n      ...s.plugins\n    ];\n    i.plugins && i.plugins.forEach((u) => {\n      c.includes(u) || c.push(u);\n    });\n    const l = _extends({}, e, r, {\n      plugins: c,\n      remotes: a,\n      shared: o\n    });\n    return this.hooks.lifecycle.init.emit({\n      origin: this,\n      options: l\n    }), l;\n  }\n  registerPlugins(e) {\n    registerPlugins(e, [\n      this.hooks,\n      this.snapshotHandler.hooks,\n      this.loaderHook\n    ]);\n  }\n  setShared({ pkgName: e, shared: r, from: n, lib: o, loading: i, loaded: s, get: a }) {\n    const { version: c, scope: l = \"default\" } = r, u = _object_without_properties_loose(r, [\n      \"version\",\n      \"scope\"\n    ]);\n    (Array.isArray(l) ? l : [\n      l\n    ]).forEach((d) => {\n      this.shareScopeMap[d] || (this.shareScopeMap[d] = {}), this.shareScopeMap[d][e] || (this.shareScopeMap[d][e] = {}), !this.shareScopeMap[d][e][c] && (this.shareScopeMap[d][e][c] = _extends({\n        version: c,\n        scope: [\n          \"default\"\n        ]\n      }, u, {\n        lib: o,\n        loaded: s,\n        loading: i\n      }), a && (this.shareScopeMap[d][e][c].get = a));\n    });\n  }\n  removeRemote(e) {\n    const { name: r } = e, n = this.options.remotes.findIndex((i) => i.name === r);\n    n !== -1 && this.options.remotes.splice(n, 1);\n    const o = this.moduleCache.get(e.name);\n    if (o) {\n      const i = o.remoteInfo.entryGlobalName;\n      globalThis[i] && delete globalThis[i];\n      const s = getRemoteEntryUniqueKey(o.remoteInfo);\n      globalLoading[s] && delete globalLoading[s], this.moduleCache.delete(e.name);\n    }\n  }\n  registerRemote(e, r, n) {\n    const o = () => {\n      if (e.alias) {\n        const s = r.find((a) => {\n          var c;\n          return e.alias && (a.name.startsWith(e.alias) || ((c = a.alias) == null ? void 0 : c.startsWith(e.alias)));\n        });\n        assert(!s, `The alias ${e.alias} of remote ${e.name} is not allowed to be the prefix of ${s && s.name} name or alias`);\n      }\n      \"entry\" in e && isBrowserEnv$1() && !e.entry.startsWith(\"http\") && (e.entry = new URL(e.entry, window.location.origin).href), e.shareScope || (e.shareScope = DEFAULT_SCOPE), e.type || (e.type = DEFAULT_REMOTE_TYPE);\n    }, i = r.find((s) => s.name === e.name);\n    if (!i)\n      o(), r.push(e);\n    else {\n      const s = [\n        `The remote \"${e.name}\" is already registered.`,\n        n != null && n.force ? \"Hope you have known that OVERRIDE it may have some unexpected errors\" : 'If you want to merge the remote, you can set \"force: true\".'\n      ];\n      n != null && n.force && (this.removeRemote(i), o(), r.push(e)), warn$1(s.join(\" \"));\n    }\n  }\n  registerRemotes(e, r) {\n    e.forEach((n) => {\n      this.registerRemote(n, this.options.remotes, {\n        force: r == null ? void 0 : r.force\n      });\n    });\n  }\n  constructor(e) {\n    this.hooks = new PluginSystem({\n      beforeInit: new SyncWaterfallHook(\"beforeInit\"),\n      init: new SyncHook(),\n      beforeRequest: new AsyncWaterfallHook(\"beforeRequest\"),\n      afterResolve: new AsyncWaterfallHook(\"afterResolve\"),\n      beforeInitContainer: new AsyncWaterfallHook(\"beforeInitContainer\"),\n      initContainerShareScopeMap: new AsyncWaterfallHook(\"initContainer\"),\n      initContainer: new AsyncWaterfallHook(\"initContainer\"),\n      onLoad: new AsyncHook(\"onLoad\"),\n      handlePreloadModule: new SyncHook(\"handlePreloadModule\"),\n      errorLoadRemote: new AsyncHook(\"errorLoadRemote\"),\n      beforeLoadShare: new AsyncWaterfallHook(\"beforeLoadShare\"),\n      loadShare: new AsyncHook(),\n      resolveShare: new SyncWaterfallHook(\"resolveShare\"),\n      beforePreloadRemote: new AsyncHook(),\n      generatePreloadAssets: new AsyncHook(\"generatePreloadAssets\"),\n      afterPreloadRemote: new AsyncHook()\n    }), this.version = \"0.1.2\", this.moduleCache = /* @__PURE__ */ new Map(), this.loaderHook = new PluginSystem({\n      getModuleInfo: new SyncHook(),\n      createScript: new SyncHook(),\n      createLink: new SyncHook(),\n      fetch: new AsyncHook(\"fetch\")\n    });\n    const r = {\n      id: getBuilderId(),\n      name: e.name,\n      plugins: [\n        snapshotPlugin(),\n        generatePreloadAssetsPlugin()\n      ],\n      remotes: [],\n      shared: {},\n      inBrowser: isBrowserEnv$1()\n    };\n    this.name = e.name, this.options = r, this.shareScopeMap = {}, this._setGlobalShareScopeMap(), this.snapshotHandler = new SnapshotHandler(this), this.registerPlugins([\n      ...r.plugins,\n      ...e.plugins || []\n    ]), this.options = this.formatOptions(r, e);\n  }\n}\nlet FederationInstance = null;\nfunction init(t) {\n  const e = getGlobalFederationInstance(t.name, t.version);\n  if (e)\n    return e.initOptions(t), FederationInstance || (FederationInstance = e), e;\n  {\n    const r = getGlobalFederationConstructor() || FederationHost;\n    return FederationInstance = new r(t), setGlobalFederationInstance(FederationInstance), FederationInstance;\n  }\n}\nfunction loadRemote(...t) {\n  return assert(FederationInstance, \"Please call init first\"), FederationInstance.loadRemote.apply(FederationInstance, t);\n}\nsetGlobalFederationConstructor(FederationHost);\nfunction isMetaMaskProvider(t) {\n  return t !== null && typeof t == \"object\" && t.hasOwnProperty(\"isMetaMask\") && t.hasOwnProperty(\"request\");\n}\nfunction detectMetaMaskProvider(t, { timeout: e = 3e3 } = {}) {\n  let r = !1;\n  return new Promise((n) => {\n    const o = (i) => {\n      const { info: s, provider: a } = i.detail;\n      [\"io.metamask\", \"io.metamask.flask\"].includes(s.rdns) && isMetaMaskProvider(a) && (n(a), r = !0);\n    };\n    typeof t.addEventListener == \"function\" && t.addEventListener(\n      \"eip6963:announceProvider\",\n      o\n    ), setTimeout(() => {\n      r || n(null);\n    }, e), typeof t.dispatchEvent == \"function\" && t.dispatchEvent(new Event(\"eip6963:requestProvider\"));\n  });\n}\nasync function waitForMetaMaskProvider(t, { timeout: e = 3e3, retries: r = 0 } = {}) {\n  return detectMetaMaskProvider(t, { timeout: e }).catch(function() {\n    return null;\n  }).then(function(n) {\n    return n || r === 0 ? n : waitForMetaMaskProvider(t, {\n      timeout: e,\n      retries: r - 1\n    });\n  });\n}\nasync function detectMetamaskSupport(t) {\n  return await waitForMetaMaskProvider(t, { retries: 3 });\n}\nasync function fetchMetaMaskSnapWallet(t) {\n  await init({\n    name: \"MetaMaskStarknetSnapWallet\",\n    remotes: [\n      {\n        name: \"MetaMaskStarknetSnapWallet\",\n        alias: \"MetaMaskStarknetSnapWallet\",\n        entry: \"https://snaps.consensys.io/starknet/get-starknet/v1/remoteEntry.js\"\n      }\n    ]\n  });\n  const e = await loadRemote(\"MetaMaskStarknetSnapWallet/index\"), { MetaMaskSnapWallet: r } = e;\n  return new r(t, \"*\");\n}\nfunction createMetaMaskProviderWrapper(t, e) {\n  let r, n;\n  return {\n    id: t.id,\n    name: t.name,\n    icon: t.icon,\n    get version() {\n      var o;\n      return (o = r == null ? void 0 : r.version) != null ? o : \"0.0.0\";\n    },\n    get isConnected() {\n      var o;\n      return (o = r == null ? void 0 : r.isConnected) != null ? o : !1;\n    },\n    get provider() {\n      return r == null ? void 0 : r.provider;\n    },\n    get account() {\n      return r == null ? void 0 : r.account;\n    },\n    get selectedAddress() {\n      return r == null ? void 0 : r.selectedAddress;\n    },\n    get chainId() {\n      return r == null ? void 0 : r.chainId;\n    },\n    request(o) {\n      if (!r)\n        throw new Error(\"Wallet not enabled\");\n      return r.request(o);\n    },\n    async enable() {\n      return r || (n = n || fetchMetaMaskSnapWallet(e), r = await n), await r.enable();\n    },\n    isPreauthorized() {\n      var o;\n      return (o = r == null ? void 0 : r.isPreauthorized()) != null ? o : Promise.resolve(!1);\n    },\n    on(o, i) {\n      if (!r)\n        throw new Error(\"Wallet not enabled\");\n      return r.on(o, i);\n    },\n    off(o, i) {\n      if (!r)\n        throw new Error(\"Wallet not enabled\");\n      return r.off(o, i);\n    }\n  };\n}\nasync function injectMetamaskBridge(t) {\n  if (t.hasOwnProperty(\"starknet_metamask\"))\n    return;\n  const e = wallets.find((n) => n.id === \"metamask\");\n  if (!e)\n    return;\n  const r = await detectMetamaskSupport(t);\n  !r || (t.starknet_metamask = createMetaMaskProviderWrapper(\n    e,\n    r\n  ));\n}\nfunction scanObjectForWallets(t, e) {\n  return Object.values(\n    Object.getOwnPropertyNames(t).reduce((r, n) => {\n      if (n.startsWith(\"starknet\")) {\n        const o = t[n];\n        e(o) && !r[o.id] && (r[o.id] = o);\n      }\n      return r;\n    }, {})\n  );\n}\nconst sortBy = (t, e) => {\n  if (e && Array.isArray(e)) {\n    t.sort((n, o) => e.indexOf(n.id) - e.indexOf(o.id));\n    const r = t.length - e.length;\n    return [\n      ...t.slice(r),\n      ...shuffle(t.slice(0, r))\n    ];\n  } else\n    return shuffle(t);\n}, defaultOptions = {\n  windowObject: ssrSafeWindow != null ? ssrSafeWindow : {},\n  isWalletObject: isWalletObj,\n  storageFactoryImplementation: (t) => new LocalStorageWrapper(t)\n};\nfunction getStarknet(t = {}) {\n  const { storageFactoryImplementation: e, windowObject: r, isWalletObject: n } = {\n    ...defaultOptions,\n    ...t\n  }, o = e(\"gsw-last\");\n  return injectMetamaskBridge(r), {\n    getAvailableWallets: async (i = {}) => {\n      const s = scanObjectForWallets(\n        r,\n        n\n      );\n      return pipe$1(\n        (a) => filterBy(a, i),\n        (a) => sortBy(a, i.sort)\n      )(s);\n    },\n    getPreAuthorizedWallets: async (i = {}) => {\n      const s = scanObjectForWallets(\n        r,\n        n\n      );\n      return pipe$1(\n        (a) => filterByPreAuthorized(a),\n        (a) => filterBy(a, i),\n        (a) => sortBy(a, i.sort)\n      )(s);\n    },\n    getDiscoveryWallets: async (i = {}) => pipe$1(\n      (s) => filterBy(s, i),\n      (s) => sortBy(s, i.sort)\n    )(wallets),\n    getLastConnectedWallet: async () => {\n      const i = o.get(), s = scanObjectForWallets(r, n).find(\n        (c) => c.id === i\n      ), [a] = await filterByPreAuthorized(\n        s ? [s] : []\n      );\n      return a || (o.delete(), null);\n    },\n    enable: async (i, s) => {\n      if (await i.enable(s != null ? s : { starknetVersion: \"v5\" }), !i.isConnected)\n        throw new Error(\"Failed to connect to wallet\");\n      return o.set(i.id), i;\n    },\n    disconnect: async ({ clearLastWallet: i } = {}) => {\n      i && o.delete();\n    }\n  };\n}\nconst main = getStarknet();\nfunction getBrowserStoreVersionFromBrowser() {\n  var e;\n  switch ((e = Bowser.getParser(ssrSafeWindow == null ? void 0 : ssrSafeWindow.navigator.userAgent).getBrowserName()) == null ? void 0 : e.toLowerCase()) {\n    case \"firefox\":\n      return \"firefox\";\n    case \"microsoft edge\":\n      return \"edge\";\n    case \"android browser\":\n    case \"chrome\":\n    case \"chromium\":\n    case \"electron\":\n    case \"opera\":\n    case \"vivaldi\":\n      return \"chrome\";\n    case \"safari\":\n      return \"safari\";\n    default:\n      return null;\n  }\n}\nfunction getOperatingSystemStoreVersionFromBrowser() {\n  var e, r, n;\n  const t = (n = (r = (e = Bowser.getParser(ssrSafeWindow == null ? void 0 : ssrSafeWindow.navigator.userAgent).getOS()) == null ? void 0 : e.name) == null ? void 0 : r.toLowerCase()) != null ? n : null;\n  switch (t) {\n    case \"ios\":\n    case \"android\":\n      return t;\n    default:\n      return null;\n  }\n}\nconst enableWithVersion = async (t) => t ? main.enable(t, { starknetVersion: \"v5\" }).catch(() => null) : null, connect = async ({\n  modalMode: t = \"canAsk\",\n  storeVersion: e = getBrowserStoreVersionFromBrowser(),\n  osVersion: r = getOperatingSystemStoreVersionFromBrowser(),\n  modalTheme: n,\n  ...o\n} = {}) => {\n  var u, d;\n  const i = await main.getPreAuthorizedWallets({\n    ...o\n  }), s = await main.getLastConnectedWallet();\n  if (t === \"neverAsk\") {\n    const m = (u = i.find((p) => p.id === (s == null ? void 0 : s.id))) != null ? u : i[0];\n    return enableWithVersion(m);\n  }\n  const a = await main.getAvailableWallets(o);\n  if (t === \"canAsk\" && s) {\n    const m = (d = i.find((p) => p.id === (s == null ? void 0 : s.id))) != null ? d : a.length === 1 ? a[0] : void 0;\n    if (m)\n      return enableWithVersion(m);\n  }\n  const l = (await main.getDiscoveryWallets(o)).reduce((m, p) => {\n    const h = p.downloads[r] || p.downloads[e];\n    if (h) {\n      const y = Object.keys(p.downloads).find(\n        (I) => p.downloads[I] === h\n      ), g = y === \"android\" || y === \"ios\" ? `${p.name} Mobile` : `Install ${p.name}`;\n      m.push({ ...p, name: g, download: h });\n    }\n    return m;\n  }, []);\n  return show({\n    lastWallet: s,\n    preAuthorizedWallets: i,\n    installedWallets: a,\n    discoveryWallets: l,\n    enable: enableWithVersion,\n    modalOptions: {\n      theme: n\n    }\n  });\n};\nfunction disconnect(t = {}) {\n  return main.disconnect(t);\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vZ2V0LXN0YXJrbmV0QDMuMy4zX3N0YXJrbmV0QDYuMjQuMV9lbmNvZGluZ0AwLjEuMTNfL25vZGVfbW9kdWxlcy9nZXQtc3RhcmtuZXQvZGlzdC91aS5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsY0FBYztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLG9DQUFvQztBQUMvQztBQUNBO0FBQ0E7QUFDQSxpRkFBaUYsMEJBQTBCO0FBQzNHO0FBQ0Esb0JBQW9CLDZCQUE2QjtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixTQUFTLHdCQUF3QjtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLDJEQUEyRDtBQUNy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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxnREFBZ0QsUUFBUTtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixjQUFjO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLE9BQU87QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsT0FBTztBQUNyQztBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxZQUFZLFVBQVU7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxVQUFVO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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QSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsZ0RBQWdEO0FBQ2hEO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRDtBQUNoRDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0Esa0ZBQWtGO0FBQ2xGO0FBQ0EsR0FBRyxnREFBZ0Q7QUFDbkQ7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsR0FBRztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlGQUFpRixjQUFjO0FBQy9GO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtGQUFrRix3SEFBd0gsY0FBYztBQUN4TjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MsT0FBTztBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLHlFQUF5RTtBQUNuRztBQUNBLE1BQU07QUFDTjtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLEdBQUc7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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QTtBQUNBO0FBQ0EsaURBQWlELFFBQVEscUJBQXFCLE9BQU87QUFDckYsZUFBZSw0QkFBNEI7QUFDM0M7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSwwQkFBMEI7QUFDMUI7QUFDQTtBQUlFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvLnBucG0vZ2V0LXN0YXJrbmV0QDMuMy4zX3N0YXJrbmV0QDYuMjQuMV9lbmNvZGluZ0AwLjEuMTNfL25vZGVfbW9kdWxlcy9nZXQtc3RhcmtuZXQvZGlzdC91aS5qcz9lOGNkIl0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIG5vb3AoKSB7XG59XG5mdW5jdGlvbiBydW4odCkge1xuICByZXR1cm4gdCgpO1xufVxuZnVuY3Rpb24gYmxhbmtfb2JqZWN0KCkge1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIE9iamVjdC5jcmVhdGUobnVsbCk7XG59XG5mdW5jdGlvbiBydW5fYWxsKHQpIHtcbiAgdC5mb3JFYWNoKHJ1bik7XG59XG5mdW5jdGlvbiBpc19mdW5jdGlvbih0KSB7XG4gIHJldHVybiB0eXBlb2YgdCA9PSBcImZ1bmN0aW9uXCI7XG59XG5mdW5jdGlvbiBzYWZlX25vdF9lcXVhbCh0LCBlKSB7XG4gIHJldHVybiB0ICE9IHQgPyBlID09IGUgOiB0ICE9PSBlIHx8IHQgJiYgdHlwZW9mIHQgPT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgdCA9PSBcImZ1bmN0aW9uXCI7XG59XG5sZXQgc3JjX3VybF9lcXVhbF9hbmNob3I7XG5mdW5jdGlvbiBzcmNfdXJsX2VxdWFsKHQsIGUpIHtcbiAgcmV0dXJuIHNyY191cmxfZXF1YWxfYW5jaG9yIHx8IChzcmNfdXJsX2VxdWFsX2FuY2hvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpKSwgc3JjX3VybF9lcXVhbF9hbmNob3IuaHJlZiA9IGUsIHQgPT09IHNyY191cmxfZXF1YWxfYW5jaG9yLmhyZWY7XG59XG5mdW5jdGlvbiBpc19lbXB0eSh0KSB7XG4gIHJldHVybiBPYmplY3Qua2V5cyh0KS5sZW5ndGggPT09IDA7XG59XG5mdW5jdGlvbiBudWxsX3RvX2VtcHR5KHQpIHtcbiAgcmV0dXJuIHQgPT0gbnVsbCA/IFwiXCIgOiB0O1xufVxuZnVuY3Rpb24gYXBwZW5kKHQsIGUpIHtcbiAgdC5hcHBlbmRDaGlsZChlKTtcbn1cbmZ1bmN0aW9uIGFwcGVuZF9zdHlsZXModCwgZSwgcikge1xuICBjb25zdCBuID0gZ2V0X3Jvb3RfZm9yX3N0eWxlKHQpO1xuICBpZiAoIW4uZ2V0RWxlbWVudEJ5SWQoZSkpIHtcbiAgICBjb25zdCBvID0gZWxlbWVudChcInN0eWxlXCIpO1xuICAgIG8uaWQgPSBlLCBvLnRleHRDb250ZW50ID0gciwgYXBwZW5kX3N0eWxlc2hlZXQobiwgbyk7XG4gIH1cbn1cbmZ1bmN0aW9uIGdldF9yb290X2Zvcl9zdHlsZSh0KSB7XG4gIGlmICghdClcbiAgICByZXR1cm4gZG9jdW1lbnQ7XG4gIGNvbnN0IGUgPSB0LmdldFJvb3ROb2RlID8gdC5nZXRSb290Tm9kZSgpIDogdC5vd25lckRvY3VtZW50O1xuICByZXR1cm4gZSAmJiBlLmhvc3QgPyBlIDogdC5vd25lckRvY3VtZW50O1xufVxuZnVuY3Rpb24gYXBwZW5kX3N0eWxlc2hlZXQodCwgZSkge1xuICBhcHBlbmQodC5oZWFkIHx8IHQsIGUpO1xufVxuZnVuY3Rpb24gaW5zZXJ0KHQsIGUsIHIpIHtcbiAgdC5pbnNlcnRCZWZvcmUoZSwgciB8fCBudWxsKTtcbn1cbmZ1bmN0aW9uIGRldGFjaCh0KSB7XG4gIHQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0KTtcbn1cbmZ1bmN0aW9uIGRlc3Ryb3lfZWFjaCh0LCBlKSB7XG4gIGZvciAobGV0IHIgPSAwOyByIDwgdC5sZW5ndGg7IHIgKz0gMSlcbiAgICB0W3JdICYmIHRbcl0uZChlKTtcbn1cbmZ1bmN0aW9uIGVsZW1lbnQodCkge1xuICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0KTtcbn1cbmZ1bmN0aW9uIHRleHQodCkge1xuICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodCk7XG59XG5mdW5jdGlvbiBzcGFjZSgpIHtcbiAgcmV0dXJuIHRleHQoXCIgXCIpO1xufVxuZnVuY3Rpb24gbGlzdGVuKHQsIGUsIHIsIG4pIHtcbiAgcmV0dXJuIHQuYWRkRXZlbnRMaXN0ZW5lcihlLCByLCBuKSwgKCkgPT4gdC5yZW1vdmVFdmVudExpc3RlbmVyKGUsIHIsIG4pO1xufVxuZnVuY3Rpb24gYXR0cih0LCBlLCByKSB7XG4gIHIgPT0gbnVsbCA/IHQucmVtb3ZlQXR0cmlidXRlKGUpIDogdC5nZXRBdHRyaWJ1dGUoZSkgIT09IHIgJiYgdC5zZXRBdHRyaWJ1dGUoZSwgcik7XG59XG5mdW5jdGlvbiBjaGlsZHJlbih0KSB7XG4gIHJldHVybiBBcnJheS5mcm9tKHQuY2hpbGROb2Rlcyk7XG59XG5mdW5jdGlvbiBzZXRfZGF0YSh0LCBlKSB7XG4gIGUgPSBcIlwiICsgZSwgdC53aG9sZVRleHQgIT09IGUgJiYgKHQuZGF0YSA9IGUpO1xufVxubGV0IGN1cnJlbnRfY29tcG9uZW50O1xuZnVuY3Rpb24gc2V0X2N1cnJlbnRfY29tcG9uZW50KHQpIHtcbiAgY3VycmVudF9jb21wb25lbnQgPSB0O1xufVxuZnVuY3Rpb24gZ2V0X2N1cnJlbnRfY29tcG9uZW50KCkge1xuICBpZiAoIWN1cnJlbnRfY29tcG9uZW50KVxuICAgIHRocm93IG5ldyBFcnJvcihcIkZ1bmN0aW9uIGNhbGxlZCBvdXRzaWRlIGNvbXBvbmVudCBpbml0aWFsaXphdGlvblwiKTtcbiAgcmV0dXJuIGN1cnJlbnRfY29tcG9uZW50O1xufVxuZnVuY3Rpb24gb25Nb3VudCh0KSB7XG4gIGdldF9jdXJyZW50X2NvbXBvbmVudCgpLiQkLm9uX21vdW50LnB1c2godCk7XG59XG5jb25zdCBkaXJ0eV9jb21wb25lbnRzID0gW10sIGJpbmRpbmdfY2FsbGJhY2tzID0gW10sIHJlbmRlcl9jYWxsYmFja3MgPSBbXSwgZmx1c2hfY2FsbGJhY2tzID0gW10sIHJlc29sdmVkX3Byb21pc2UgPSBQcm9taXNlLnJlc29sdmUoKTtcbmxldCB1cGRhdGVfc2NoZWR1bGVkID0gITE7XG5mdW5jdGlvbiBzY2hlZHVsZV91cGRhdGUoKSB7XG4gIHVwZGF0ZV9zY2hlZHVsZWQgfHwgKHVwZGF0ZV9zY2hlZHVsZWQgPSAhMCwgcmVzb2x2ZWRfcHJvbWlzZS50aGVuKGZsdXNoKSk7XG59XG5mdW5jdGlvbiBhZGRfcmVuZGVyX2NhbGxiYWNrKHQpIHtcbiAgcmVuZGVyX2NhbGxiYWNrcy5wdXNoKHQpO1xufVxuY29uc3Qgc2Vlbl9jYWxsYmFja3MgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpO1xubGV0IGZsdXNoaWR4ID0gMDtcbmZ1bmN0aW9uIGZsdXNoKCkge1xuICBjb25zdCB0ID0gY3VycmVudF9jb21wb25lbnQ7XG4gIGRvIHtcbiAgICBmb3IgKDsgZmx1c2hpZHggPCBkaXJ0eV9jb21wb25lbnRzLmxlbmd0aDsgKSB7XG4gICAgICBjb25zdCBlID0gZGlydHlfY29tcG9uZW50c1tmbHVzaGlkeF07XG4gICAgICBmbHVzaGlkeCsrLCBzZXRfY3VycmVudF9jb21wb25lbnQoZSksIHVwZGF0ZShlLiQkKTtcbiAgICB9XG4gICAgZm9yIChzZXRfY3VycmVudF9jb21wb25lbnQobnVsbCksIGRpcnR5X2NvbXBvbmVudHMubGVuZ3RoID0gMCwgZmx1c2hpZHggPSAwOyBiaW5kaW5nX2NhbGxiYWNrcy5sZW5ndGg7IClcbiAgICAgIGJpbmRpbmdfY2FsbGJhY2tzLnBvcCgpKCk7XG4gICAgZm9yIChsZXQgZSA9IDA7IGUgPCByZW5kZXJfY2FsbGJhY2tzLmxlbmd0aDsgZSArPSAxKSB7XG4gICAgICBjb25zdCByID0gcmVuZGVyX2NhbGxiYWNrc1tlXTtcbiAgICAgIHNlZW5fY2FsbGJhY2tzLmhhcyhyKSB8fCAoc2Vlbl9jYWxsYmFja3MuYWRkKHIpLCByKCkpO1xuICAgIH1cbiAgICByZW5kZXJfY2FsbGJhY2tzLmxlbmd0aCA9IDA7XG4gIH0gd2hpbGUgKGRpcnR5X2NvbXBvbmVudHMubGVuZ3RoKTtcbiAgZm9yICg7IGZsdXNoX2NhbGxiYWNrcy5sZW5ndGg7IClcbiAgICBmbHVzaF9jYWxsYmFja3MucG9wKCkoKTtcbiAgdXBkYXRlX3NjaGVkdWxlZCA9ICExLCBzZWVuX2NhbGxiYWNrcy5jbGVhcigpLCBzZXRfY3VycmVudF9jb21wb25lbnQodCk7XG59XG5mdW5jdGlvbiB1cGRhdGUodCkge1xuICBpZiAodC5mcmFnbWVudCAhPT0gbnVsbCkge1xuICAgIHQudXBkYXRlKCksIHJ1bl9hbGwodC5iZWZvcmVfdXBkYXRlKTtcbiAgICBjb25zdCBlID0gdC5kaXJ0eTtcbiAgICB0LmRpcnR5ID0gWy0xXSwgdC5mcmFnbWVudCAmJiB0LmZyYWdtZW50LnAodC5jdHgsIGUpLCB0LmFmdGVyX3VwZGF0ZS5mb3JFYWNoKGFkZF9yZW5kZXJfY2FsbGJhY2spO1xuICB9XG59XG5jb25zdCBvdXRyb2luZyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG5mdW5jdGlvbiB0cmFuc2l0aW9uX2luKHQsIGUpIHtcbiAgdCAmJiB0LmkgJiYgKG91dHJvaW5nLmRlbGV0ZSh0KSwgdC5pKGUpKTtcbn1cbmZ1bmN0aW9uIG1vdW50X2NvbXBvbmVudCh0LCBlLCByLCBuKSB7XG4gIGNvbnN0IHsgZnJhZ21lbnQ6IG8sIG9uX21vdW50OiBpLCBvbl9kZXN0cm95OiBzLCBhZnRlcl91cGRhdGU6IGEgfSA9IHQuJCQ7XG4gIG8gJiYgby5tKGUsIHIpLCBuIHx8IGFkZF9yZW5kZXJfY2FsbGJhY2soKCkgPT4ge1xuICAgIGNvbnN0IGMgPSBpLm1hcChydW4pLmZpbHRlcihpc19mdW5jdGlvbik7XG4gICAgcyA/IHMucHVzaCguLi5jKSA6IHJ1bl9hbGwoYyksIHQuJCQub25fbW91bnQgPSBbXTtcbiAgfSksIGEuZm9yRWFjaChhZGRfcmVuZGVyX2NhbGxiYWNrKTtcbn1cbmZ1bmN0aW9uIGRlc3Ryb3lfY29tcG9uZW50KHQsIGUpIHtcbiAgY29uc3QgciA9IHQuJCQ7XG4gIHIuZnJhZ21lbnQgIT09IG51bGwgJiYgKHJ1bl9hbGwoci5vbl9kZXN0cm95KSwgci5mcmFnbWVudCAmJiByLmZyYWdtZW50LmQoZSksIHIub25fZGVzdHJveSA9IHIuZnJhZ21lbnQgPSBudWxsLCByLmN0eCA9IFtdKTtcbn1cbmZ1bmN0aW9uIG1ha2VfZGlydHkodCwgZSkge1xuICB0LiQkLmRpcnR5WzBdID09PSAtMSAmJiAoZGlydHlfY29tcG9uZW50cy5wdXNoKHQpLCBzY2hlZHVsZV91cGRhdGUoKSwgdC4kJC5kaXJ0eS5maWxsKDApKSwgdC4kJC5kaXJ0eVtlIC8gMzEgfCAwXSB8PSAxIDw8IGUgJSAzMTtcbn1cbmZ1bmN0aW9uIGluaXQkMSh0LCBlLCByLCBuLCBvLCBpLCBzLCBhID0gWy0xXSkge1xuICBjb25zdCBjID0gY3VycmVudF9jb21wb25lbnQ7XG4gIHNldF9jdXJyZW50X2NvbXBvbmVudCh0KTtcbiAgY29uc3QgbCA9IHQuJCQgPSB7XG4gICAgZnJhZ21lbnQ6IG51bGwsXG4gICAgY3R4OiBudWxsLFxuICAgIHByb3BzOiBpLFxuICAgIHVwZGF0ZTogbm9vcCxcbiAgICBub3RfZXF1YWw6IG8sXG4gICAgYm91bmQ6IGJsYW5rX29iamVjdCgpLFxuICAgIG9uX21vdW50OiBbXSxcbiAgICBvbl9kZXN0cm95OiBbXSxcbiAgICBvbl9kaXNjb25uZWN0OiBbXSxcbiAgICBiZWZvcmVfdXBkYXRlOiBbXSxcbiAgICBhZnRlcl91cGRhdGU6IFtdLFxuICAgIGNvbnRleHQ6IG5ldyBNYXAoZS5jb250ZXh0IHx8IChjID8gYy4kJC5jb250ZXh0IDogW10pKSxcbiAgICBjYWxsYmFja3M6IGJsYW5rX29iamVjdCgpLFxuICAgIGRpcnR5OiBhLFxuICAgIHNraXBfYm91bmQ6ICExLFxuICAgIHJvb3Q6IGUudGFyZ2V0IHx8IGMuJCQucm9vdFxuICB9O1xuICBzICYmIHMobC5yb290KTtcbiAgbGV0IHUgPSAhMTtcbiAgaWYgKGwuY3R4ID0gciA/IHIodCwgZS5wcm9wcyB8fCB7fSwgKGQsIG0sIC4uLnApID0+IHtcbiAgICBjb25zdCBoID0gcC5sZW5ndGggPyBwWzBdIDogbTtcbiAgICByZXR1cm4gbC5jdHggJiYgbyhsLmN0eFtkXSwgbC5jdHhbZF0gPSBoKSAmJiAoIWwuc2tpcF9ib3VuZCAmJiBsLmJvdW5kW2RdICYmIGwuYm91bmRbZF0oaCksIHUgJiYgbWFrZV9kaXJ0eSh0LCBkKSksIG07XG4gIH0pIDogW10sIGwudXBkYXRlKCksIHUgPSAhMCwgcnVuX2FsbChsLmJlZm9yZV91cGRhdGUpLCBsLmZyYWdtZW50ID0gbiA/IG4obC5jdHgpIDogITEsIGUudGFyZ2V0KSB7XG4gICAgaWYgKGUuaHlkcmF0ZSkge1xuICAgICAgY29uc3QgZCA9IGNoaWxkcmVuKGUudGFyZ2V0KTtcbiAgICAgIGwuZnJhZ21lbnQgJiYgbC5mcmFnbWVudC5sKGQpLCBkLmZvckVhY2goZGV0YWNoKTtcbiAgICB9IGVsc2VcbiAgICAgIGwuZnJhZ21lbnQgJiYgbC5mcmFnbWVudC5jKCk7XG4gICAgZS5pbnRybyAmJiB0cmFuc2l0aW9uX2luKHQuJCQuZnJhZ21lbnQpLCBtb3VudF9jb21wb25lbnQodCwgZS50YXJnZXQsIGUuYW5jaG9yLCBlLmN1c3RvbUVsZW1lbnQpLCBmbHVzaCgpO1xuICB9XG4gIHNldF9jdXJyZW50X2NvbXBvbmVudChjKTtcbn1cbmNsYXNzIFN2ZWx0ZUNvbXBvbmVudCB7XG4gICRkZXN0cm95KCkge1xuICAgIGRlc3Ryb3lfY29tcG9uZW50KHRoaXMsIDEpLCB0aGlzLiRkZXN0cm95ID0gbm9vcDtcbiAgfVxuICAkb24oZSwgcikge1xuICAgIGNvbnN0IG4gPSB0aGlzLiQkLmNhbGxiYWNrc1tlXSB8fCAodGhpcy4kJC5jYWxsYmFja3NbZV0gPSBbXSk7XG4gICAgcmV0dXJuIG4ucHVzaChyKSwgKCkgPT4ge1xuICAgICAgY29uc3QgbyA9IG4uaW5kZXhPZihyKTtcbiAgICAgIG8gIT09IC0xICYmIG4uc3BsaWNlKG8sIDEpO1xuICAgIH07XG4gIH1cbiAgJHNldChlKSB7XG4gICAgdGhpcy4kJHNldCAmJiAhaXNfZW1wdHkoZSkgJiYgKHRoaXMuJCQuc2tpcF9ib3VuZCA9ICEwLCB0aGlzLiQkc2V0KGUpLCB0aGlzLiQkLnNraXBfYm91bmQgPSAhMSk7XG4gIH1cbn1cbmZ1bmN0aW9uIGFkZF9jc3ModCkge1xuICBhcHBlbmRfc3R5bGVzKHQsIFwic3ZlbHRlLTFtdHVzbHFcIiwgYC5zci1vbmx5LnN2ZWx0ZS0xbXR1c2xxLnN2ZWx0ZS0xbXR1c2xxe3Bvc2l0aW9uOmFic29sdXRlO3dpZHRoOjFweDtoZWlnaHQ6MXB4O3BhZGRpbmc6MDttYXJnaW46LTFweDtvdmVyZmxvdzpoaWRkZW47Y2xpcDpyZWN0KDAsIDAsIDAsIDApO3doaXRlLXNwYWNlOm5vd3JhcDtib3JkZXItd2lkdGg6MH0uZml4ZWQuc3ZlbHRlLTFtdHVzbHEuc3ZlbHRlLTFtdHVzbHF7cG9zaXRpb246Zml4ZWR9Lmluc2V0LTAuc3ZlbHRlLTFtdHVzbHEuc3ZlbHRlLTFtdHVzbHF7dG9wOjBweDtyaWdodDowcHg7Ym90dG9tOjBweDtsZWZ0OjBweH0uei00MC5zdmVsdGUtMW10dXNscS5zdmVsdGUtMW10dXNscXt6LWluZGV4OjQwfS56LTUwLnN2ZWx0ZS0xbXR1c2xxLnN2ZWx0ZS0xbXR1c2xxe3otaW5kZXg6NTB9Lm14LTYuc3ZlbHRlLTFtdHVzbHEuc3ZlbHRlLTFtdHVzbHF7bWFyZ2luLWxlZnQ6MS41cmVtO21hcmdpbi1yaWdodDoxLjVyZW19Lm1iLTQuc3ZlbHRlLTFtdHVzbHEuc3ZlbHRlLTFtdHVzbHF7bWFyZ2luLWJvdHRvbToxcmVtfS5mbGV4LnN2ZWx0ZS0xbXR1c2xxLnN2ZWx0ZS0xbXR1c2xxe2Rpc3BsYXk6ZmxleH0uaC04LnN2ZWx0ZS0xbXR1c2xxLnN2ZWx0ZS0xbXR1c2xxe2hlaWdodDoycmVtfS53LWZ1bGwuc3ZlbHRlLTFtdHVzbHEuc3ZlbHRlLTFtdHVzbHF7d2lkdGg6MTAwJX0udy04LnN2ZWx0ZS0xbXR1c2xxLnN2ZWx0ZS0xbXR1c2xxe3dpZHRoOjJyZW19Lm1heC13LVxcXFxbNTAwcHhcXFxcXS5zdmVsdGUtMW10dXNscS5zdmVsdGUtMW10dXNscXttYXgtd2lkdGg6NTAwcHh9QGtleWZyYW1lcyBzdmVsdGUtMW10dXNscS1zcGlue3Rve3RyYW5zZm9ybTpyb3RhdGUoMzYwZGVnKX19LmFuaW1hdGUtc3Bpbi5zdmVsdGUtMW10dXNscS5zdmVsdGUtMW10dXNscXthbmltYXRpb246c3ZlbHRlLTFtdHVzbHEtc3BpbiAxcyBsaW5lYXIgaW5maW5pdGV9LmN1cnNvci1wb2ludGVyLnN2ZWx0ZS0xbXR1c2xxLnN2ZWx0ZS0xbXR1c2xxe2N1cnNvcjpwb2ludGVyfS5mbGV4LWNvbC5zdmVsdGUtMW10dXNscS5zdmVsdGUtMW10dXNscXtmbGV4LWRpcmVjdGlvbjpjb2x1bW59Lml0ZW1zLWNlbnRlci5zdmVsdGUtMW10dXNscS5zdmVsdGUtMW10dXNscXthbGlnbi1pdGVtczpjZW50ZXJ9Lmp1c3RpZnktY2VudGVyLnN2ZWx0ZS0xbXR1c2xxLnN2ZWx0ZS0xbXR1c2xxe2p1c3RpZnktY29udGVudDpjZW50ZXJ9Lmp1c3RpZnktYmV0d2Vlbi5zdmVsdGUtMW10dXNscS5zdmVsdGUtMW10dXNscXtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2Vlbn0uZ2FwLTMuc3ZlbHRlLTFtdHVzbHEuc3ZlbHRlLTFtdHVzbHF7Z2FwOjAuNzVyZW19LnJvdW5kZWQtbWQuc3ZlbHRlLTFtdHVzbHEuc3ZlbHRlLTFtdHVzbHF7Ym9yZGVyLXJhZGl1czowLjM3NXJlbX0ucm91bmRlZC1mdWxsLnN2ZWx0ZS0xbXR1c2xxLnN2ZWx0ZS0xbXR1c2xxe2JvcmRlci1yYWRpdXM6OTk5OXB4fS5iZy1ibGFja1xcXFwvMjUuc3ZlbHRlLTFtdHVzbHEuc3ZlbHRlLTFtdHVzbHF7YmFja2dyb3VuZC1jb2xvcjpyZ2IoMCAwIDAgLyAwLjI1KX0uYmctc2xhdGUtNTAuc3ZlbHRlLTFtdHVzbHEuc3ZlbHRlLTFtdHVzbHF7LS10dy1iZy1vcGFjaXR5OjE7YmFja2dyb3VuZC1jb2xvcjpyZ2IoMjQ4IDI1MCAyNTIgLyB2YXIoLS10dy1iZy1vcGFjaXR5KSl9LmJnLXNsYXRlLTEwMC5zdmVsdGUtMW10dXNscS5zdmVsdGUtMW10dXNscXstLXR3LWJnLW9wYWNpdHk6MTtiYWNrZ3JvdW5kLWNvbG9yOnJnYigyNDEgMjQ1IDI0OSAvIHZhcigtLXR3LWJnLW9wYWNpdHkpKX0uZmlsbC1uZXV0cmFsLTYwMC5zdmVsdGUtMW10dXNscS5zdmVsdGUtMW10dXNscXtmaWxsOiM1MjUyNTJ9LnAtNC5zdmVsdGUtMW10dXNscS5zdmVsdGUtMW10dXNscXtwYWRkaW5nOjFyZW19LnAtMy5zdmVsdGUtMW10dXNscS5zdmVsdGUtMW10dXNscXtwYWRkaW5nOjAuNzVyZW19LnRleHQtY2VudGVyLnN2ZWx0ZS0xbXR1c2xxLnN2ZWx0ZS0xbXR1c2xxe3RleHQtYWxpZ246Y2VudGVyfS50ZXh0LXhsLnN2ZWx0ZS0xbXR1c2xxLnN2ZWx0ZS0xbXR1c2xxe2ZvbnQtc2l6ZToxLjI1cmVtO2xpbmUtaGVpZ2h0OjEuNzVyZW19LnRleHQtbmV1dHJhbC0zMDAuc3ZlbHRlLTFtdHVzbHEuc3ZlbHRlLTFtdHVzbHF7LS10dy10ZXh0LW9wYWNpdHk6MTtjb2xvcjpyZ2IoMjEyIDIxMiAyMTIgLyB2YXIoLS10dy10ZXh0LW9wYWNpdHkpKX0uYW50aWFsaWFzZWQuc3ZlbHRlLTFtdHVzbHEuc3ZlbHRlLTFtdHVzbHF7LXdlYmtpdC1mb250LXNtb290aGluZzphbnRpYWxpYXNlZDstbW96LW9zeC1mb250LXNtb290aGluZzpncmF5c2NhbGV9LnNoYWRvdy5zdmVsdGUtMW10dXNscS5zdmVsdGUtMW10dXNscXstLXR3LXNoYWRvdzowIDFweCAzcHggMCByZ2IoMCAwIDAgLyAwLjEpLCAwIDFweCAycHggLTFweCByZ2IoMCAwIDAgLyAwLjEpOy0tdHctc2hhZG93LWNvbG9yZWQ6MCAxcHggM3B4IDAgdmFyKC0tdHctc2hhZG93LWNvbG9yKSwgMCAxcHggMnB4IC0xcHggdmFyKC0tdHctc2hhZG93LWNvbG9yKTtib3gtc2hhZG93OnZhcigtLXR3LXJpbmctb2Zmc2V0LXNoYWRvdywgMCAwICMwMDAwKSwgdmFyKC0tdHctcmluZy1zaGFkb3csIDAgMCAjMDAwMCksIHZhcigtLXR3LXNoYWRvdyl9LnNoYWRvdy1zbS5zdmVsdGUtMW10dXNscS5zdmVsdGUtMW10dXNscXstLXR3LXNoYWRvdzowIDFweCAycHggMCByZ2IoMCAwIDAgLyAwLjA1KTstLXR3LXNoYWRvdy1jb2xvcmVkOjAgMXB4IDJweCAwIHZhcigtLXR3LXNoYWRvdy1jb2xvcik7Ym94LXNoYWRvdzp2YXIoLS10dy1yaW5nLW9mZnNldC1zaGFkb3csIDAgMCAjMDAwMCksIHZhcigtLXR3LXJpbmctc2hhZG93LCAwIDAgIzAwMDApLCB2YXIoLS10dy1zaGFkb3cpfS5maWx0ZXIuc3ZlbHRlLTFtdHVzbHEuc3ZlbHRlLTFtdHVzbHF7ZmlsdGVyOnZhcigtLXR3LWJsdXIpIHZhcigtLXR3LWJyaWdodG5lc3MpIHZhcigtLXR3LWNvbnRyYXN0KSB2YXIoLS10dy1ncmF5c2NhbGUpIHZhcigtLXR3LWh1ZS1yb3RhdGUpIHZhcigtLXR3LWludmVydCkgdmFyKC0tdHctc2F0dXJhdGUpIHZhcigtLXR3LXNlcGlhKSB2YXIoLS10dy1kcm9wLXNoYWRvdyl9LmJhY2tkcm9wLWJsdXItc20uc3ZlbHRlLTFtdHVzbHEuc3ZlbHRlLTFtdHVzbHF7LS10dy1iYWNrZHJvcC1ibHVyOmJsdXIoNHB4KTstd2Via2l0LWJhY2tkcm9wLWZpbHRlcjp2YXIoLS10dy1iYWNrZHJvcC1ibHVyKSB2YXIoLS10dy1iYWNrZHJvcC1icmlnaHRuZXNzKSB2YXIoLS10dy1iYWNrZHJvcC1jb250cmFzdCkgdmFyKC0tdHctYmFja2Ryb3AtZ3JheXNjYWxlKSB2YXIoLS10dy1iYWNrZHJvcC1odWUtcm90YXRlKSB2YXIoLS10dy1iYWNrZHJvcC1pbnZlcnQpIHZhcigtLXR3LWJhY2tkcm9wLW9wYWNpdHkpIHZhcigtLXR3LWJhY2tkcm9wLXNhdHVyYXRlKSB2YXIoLS10dy1iYWNrZHJvcC1zZXBpYSk7YmFja2Ryb3AtZmlsdGVyOnZhcigtLXR3LWJhY2tkcm9wLWJsdXIpIHZhcigtLXR3LWJhY2tkcm9wLWJyaWdodG5lc3MpIHZhcigtLXR3LWJhY2tkcm9wLWNvbnRyYXN0KSB2YXIoLS10dy1iYWNrZHJvcC1ncmF5c2NhbGUpIHZhcigtLXR3LWJhY2tkcm9wLWh1ZS1yb3RhdGUpIHZhcigtLXR3LWJhY2tkcm9wLWludmVydCkgdmFyKC0tdHctYmFja2Ryb3Atb3BhY2l0eSkgdmFyKC0tdHctYmFja2Ryb3Atc2F0dXJhdGUpIHZhcigtLXR3LWJhY2tkcm9wLXNlcGlhKX0udHJhbnNpdGlvbi1jb2xvcnMuc3ZlbHRlLTFtdHVzbHEuc3ZlbHRlLTFtdHVzbHF7dHJhbnNpdGlvbi1wcm9wZXJ0eTpjb2xvciwgYmFja2dyb3VuZC1jb2xvciwgYm9yZGVyLWNvbG9yLCBmaWxsLCBzdHJva2UsIC13ZWJraXQtdGV4dC1kZWNvcmF0aW9uLWNvbG9yO3RyYW5zaXRpb24tcHJvcGVydHk6Y29sb3IsIGJhY2tncm91bmQtY29sb3IsIGJvcmRlci1jb2xvciwgdGV4dC1kZWNvcmF0aW9uLWNvbG9yLCBmaWxsLCBzdHJva2U7dHJhbnNpdGlvbi1wcm9wZXJ0eTpjb2xvciwgYmFja2dyb3VuZC1jb2xvciwgYm9yZGVyLWNvbG9yLCB0ZXh0LWRlY29yYXRpb24tY29sb3IsIGZpbGwsIHN0cm9rZSwgLXdlYmtpdC10ZXh0LWRlY29yYXRpb24tY29sb3I7dHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb246Y3ViaWMtYmV6aWVyKDAuNCwgMCwgMC4yLCAxKTt0cmFuc2l0aW9uLWR1cmF0aW9uOjE1MG1zfS5zdmVsdGUtMW10dXNscS5zdmVsdGUtMW10dXNscSwuc3ZlbHRlLTFtdHVzbHEuc3ZlbHRlLTFtdHVzbHE6OmJlZm9yZSwuc3ZlbHRlLTFtdHVzbHEuc3ZlbHRlLTFtdHVzbHE6OmFmdGVye2JveC1zaXppbmc6Ym9yZGVyLWJveDtib3JkZXItd2lkdGg6MDtib3JkZXItc3R5bGU6c29saWQ7Ym9yZGVyLWNvbG9yOiNlNWU3ZWJ9LnN2ZWx0ZS0xbXR1c2xxLnN2ZWx0ZS0xbXR1c2xxOjpiZWZvcmUsLnN2ZWx0ZS0xbXR1c2xxLnN2ZWx0ZS0xbXR1c2xxOjphZnRlcnstLXR3LWNvbnRlbnQ6Jyd9aDEuc3ZlbHRlLTFtdHVzbHEuc3ZlbHRlLTFtdHVzbHF7Zm9udC1zaXplOmluaGVyaXQ7Zm9udC13ZWlnaHQ6aW5oZXJpdH1hLnN2ZWx0ZS0xbXR1c2xxLnN2ZWx0ZS0xbXR1c2xxe2NvbG9yOmluaGVyaXQ7dGV4dC1kZWNvcmF0aW9uOmluaGVyaXR9LnN2ZWx0ZS0xbXR1c2xxLnN2ZWx0ZS0xbXR1c2xxOi1tb3otZm9jdXNyaW5ne291dGxpbmU6YXV0b30uc3ZlbHRlLTFtdHVzbHEuc3ZlbHRlLTFtdHVzbHE6LW1vei11aS1pbnZhbGlke2JveC1zaGFkb3c6bm9uZX0uc3ZlbHRlLTFtdHVzbHEuc3ZlbHRlLTFtdHVzbHE6Oi13ZWJraXQtaW5uZXItc3Bpbi1idXR0b24sLnN2ZWx0ZS0xbXR1c2xxLnN2ZWx0ZS0xbXR1c2xxOjotd2Via2l0LW91dGVyLXNwaW4tYnV0dG9ue2hlaWdodDphdXRvfS5zdmVsdGUtMW10dXNscS5zdmVsdGUtMW10dXNscTo6LXdlYmtpdC1zZWFyY2gtZGVjb3JhdGlvbnstd2Via2l0LWFwcGVhcmFuY2U6bm9uZX0uc3ZlbHRlLTFtdHVzbHEuc3ZlbHRlLTFtdHVzbHE6Oi13ZWJraXQtZmlsZS11cGxvYWQtYnV0dG9uey13ZWJraXQtYXBwZWFyYW5jZTpidXR0b247Zm9udDppbmhlcml0fWgxLnN2ZWx0ZS0xbXR1c2xxLnN2ZWx0ZS0xbXR1c2xxe21hcmdpbjowfXVsLnN2ZWx0ZS0xbXR1c2xxLnN2ZWx0ZS0xbXR1c2xxe2xpc3Qtc3R5bGU6bm9uZTttYXJnaW46MDtwYWRkaW5nOjB9W3JvbGU9XCJidXR0b25cIl0uc3ZlbHRlLTFtdHVzbHEuc3ZlbHRlLTFtdHVzbHF7Y3Vyc29yOnBvaW50ZXJ9LnN2ZWx0ZS0xbXR1c2xxLnN2ZWx0ZS0xbXR1c2xxOmRpc2FibGVke2N1cnNvcjpkZWZhdWx0fWltZy5zdmVsdGUtMW10dXNscS5zdmVsdGUtMW10dXNscSxzdmcuc3ZlbHRlLTFtdHVzbHEuc3ZlbHRlLTFtdHVzbHF7ZGlzcGxheTpibG9jazt2ZXJ0aWNhbC1hbGlnbjptaWRkbGV9aW1nLnN2ZWx0ZS0xbXR1c2xxLnN2ZWx0ZS0xbXR1c2xxe21heC13aWR0aDoxMDAlO2hlaWdodDphdXRvfS5zdmVsdGUtMW10dXNscS5zdmVsdGUtMW10dXNscSwuc3ZlbHRlLTFtdHVzbHEuc3ZlbHRlLTFtdHVzbHE6OmJlZm9yZSwuc3ZlbHRlLTFtdHVzbHEuc3ZlbHRlLTFtdHVzbHE6OmFmdGVyey0tdHctYm9yZGVyLXNwYWNpbmcteDowOy0tdHctYm9yZGVyLXNwYWNpbmcteTowOy0tdHctdHJhbnNsYXRlLXg6MDstLXR3LXRyYW5zbGF0ZS15OjA7LS10dy1yb3RhdGU6MDstLXR3LXNrZXcteDowOy0tdHctc2tldy15OjA7LS10dy1zY2FsZS14OjE7LS10dy1zY2FsZS15OjE7LS10dy1wYW4teDogIDstLXR3LXBhbi15OiAgOy0tdHctcGluY2gtem9vbTogIDstLXR3LXNjcm9sbC1zbmFwLXN0cmljdG5lc3M6cHJveGltaXR5Oy0tdHctb3JkaW5hbDogIDstLXR3LXNsYXNoZWQtemVybzogIDstLXR3LW51bWVyaWMtZmlndXJlOiAgOy0tdHctbnVtZXJpYy1zcGFjaW5nOiAgOy0tdHctbnVtZXJpYy1mcmFjdGlvbjogIDstLXR3LXJpbmctaW5zZXQ6ICA7LS10dy1yaW5nLW9mZnNldC13aWR0aDowcHg7LS10dy1yaW5nLW9mZnNldC1jb2xvcjojZmZmOy0tdHctcmluZy1jb2xvcjpyZ2IoNTkgMTMwIDI0NiAvIDAuNSk7LS10dy1yaW5nLW9mZnNldC1zaGFkb3c6MCAwICMwMDAwOy0tdHctcmluZy1zaGFkb3c6MCAwICMwMDAwOy0tdHctc2hhZG93OjAgMCAjMDAwMDstLXR3LXNoYWRvdy1jb2xvcmVkOjAgMCAjMDAwMDstLXR3LWJsdXI6ICA7LS10dy1icmlnaHRuZXNzOiAgOy0tdHctY29udHJhc3Q6ICA7LS10dy1ncmF5c2NhbGU6ICA7LS10dy1odWUtcm90YXRlOiAgOy0tdHctaW52ZXJ0OiAgOy0tdHctc2F0dXJhdGU6ICA7LS10dy1zZXBpYTogIDstLXR3LWRyb3Atc2hhZG93OiAgOy0tdHctYmFja2Ryb3AtYmx1cjogIDstLXR3LWJhY2tkcm9wLWJyaWdodG5lc3M6ICA7LS10dy1iYWNrZHJvcC1jb250cmFzdDogIDstLXR3LWJhY2tkcm9wLWdyYXlzY2FsZTogIDstLXR3LWJhY2tkcm9wLWh1ZS1yb3RhdGU6ICA7LS10dy1iYWNrZHJvcC1pbnZlcnQ6ICA7LS10dy1iYWNrZHJvcC1vcGFjaXR5OiAgOy0tdHctYmFja2Ryb3Atc2F0dXJhdGU6ICA7LS10dy1iYWNrZHJvcC1zZXBpYTogIH0uc3ZlbHRlLTFtdHVzbHEuc3ZlbHRlLTFtdHVzbHE6OmJhY2tkcm9wey0tdHctYm9yZGVyLXNwYWNpbmcteDowOy0tdHctYm9yZGVyLXNwYWNpbmcteTowOy0tdHctdHJhbnNsYXRlLXg6MDstLXR3LXRyYW5zbGF0ZS15OjA7LS10dy1yb3RhdGU6MDstLXR3LXNrZXcteDowOy0tdHctc2tldy15OjA7LS10dy1zY2FsZS14OjE7LS10dy1zY2FsZS15OjE7LS10dy1wYW4teDogIDstLXR3LXBhbi15OiAgOy0tdHctcGluY2gtem9vbTogIDstLXR3LXNjcm9sbC1zbmFwLXN0cmljdG5lc3M6cHJveGltaXR5Oy0tdHctb3JkaW5hbDogIDstLXR3LXNsYXNoZWQtemVybzogIDstLXR3LW51bWVyaWMtZmlndXJlOiAgOy0tdHctbnVtZXJpYy1zcGFjaW5nOiAgOy0tdHctbnVtZXJpYy1mcmFjdGlvbjogIDstLXR3LXJpbmctaW5zZXQ6ICA7LS10dy1yaW5nLW9mZnNldC13aWR0aDowcHg7LS10dy1yaW5nLW9mZnNldC1jb2xvcjojZmZmOy0tdHctcmluZy1jb2xvcjpyZ2IoNTkgMTMwIDI0NiAvIDAuNSk7LS10dy1yaW5nLW9mZnNldC1zaGFkb3c6MCAwICMwMDAwOy0tdHctcmluZy1zaGFkb3c6MCAwICMwMDAwOy0tdHctc2hhZG93OjAgMCAjMDAwMDstLXR3LXNoYWRvdy1jb2xvcmVkOjAgMCAjMDAwMDstLXR3LWJsdXI6ICA7LS10dy1icmlnaHRuZXNzOiAgOy0tdHctY29udHJhc3Q6ICA7LS10dy1ncmF5c2NhbGU6ICA7LS10dy1odWUtcm90YXRlOiAgOy0tdHctaW52ZXJ0OiAgOy0tdHctc2F0dXJhdGU6ICA7LS10dy1zZXBpYTogIDstLXR3LWRyb3Atc2hhZG93OiAgOy0tdHctYmFja2Ryb3AtYmx1cjogIDstLXR3LWJhY2tkcm9wLWJyaWdodG5lc3M6ICA7LS10dy1iYWNrZHJvcC1jb250cmFzdDogIDstLXR3LWJhY2tkcm9wLWdyYXlzY2FsZTogIDstLXR3LWJhY2tkcm9wLWh1ZS1yb3RhdGU6ICA7LS10dy1iYWNrZHJvcC1pbnZlcnQ6ICA7LS10dy1iYWNrZHJvcC1vcGFjaXR5OiAgOy0tdHctYmFja2Ryb3Atc2F0dXJhdGU6ICA7LS10dy1iYWNrZHJvcC1zZXBpYTogIH0uc3ZlbHRlLTFtdHVzbHEuc3ZlbHRlLTFtdHVzbHF7Zm9udC1mYW1pbHk6TnVuaXRvLCAtYXBwbGUtc3lzdGVtLCBCbGlua01hY1N5c3RlbUZvbnQsIFNlZ29lIFVJLCBSb2JvdG8sXG4gICAgICBPeHlnZW4sIFVidW50dSwgQ2FudGFyZWxsLCBGaXJhIFNhbnMsIERyb2lkIFNhbnMsIEhlbHZldGljYSBOZXVlLFxuICAgICAgc2Fucy1zZXJpZjstd2Via2l0LWZvbnQtc21vb3RoaW5nOmFudGlhbGlhc2VkfS5ob3ZlclxcXFw6Ymctc2xhdGUtMjAwLnN2ZWx0ZS0xbXR1c2xxLnN2ZWx0ZS0xbXR1c2xxOmhvdmVyey0tdHctYmctb3BhY2l0eToxO2JhY2tncm91bmQtY29sb3I6cmdiKDIyNiAyMzIgMjQwIC8gdmFyKC0tdHctYmctb3BhY2l0eSkpfS5kYXJrLnN2ZWx0ZS0xbXR1c2xxIC5kYXJrXFxcXDpib3JkZXItbmV1dHJhbC02MDAuc3ZlbHRlLTFtdHVzbHF7LS10dy1ib3JkZXItb3BhY2l0eToxO2JvcmRlci1jb2xvcjpyZ2IoODIgODIgODIgLyB2YXIoLS10dy1ib3JkZXItb3BhY2l0eSkpfS5kYXJrLnN2ZWx0ZS0xbXR1c2xxIC5kYXJrXFxcXDpiZy1uZXV0cmFsLTkwMC5zdmVsdGUtMW10dXNscXstLXR3LWJnLW9wYWNpdHk6MTtiYWNrZ3JvdW5kLWNvbG9yOnJnYigyMyAyMyAyMyAvIHZhcigtLXR3LWJnLW9wYWNpdHkpKX0uZGFyay5zdmVsdGUtMW10dXNscSAuZGFya1xcXFw6YmctbmV1dHJhbC04MDAuc3ZlbHRlLTFtdHVzbHF7LS10dy1iZy1vcGFjaXR5OjE7YmFja2dyb3VuZC1jb2xvcjpyZ2IoMzggMzggMzggLyB2YXIoLS10dy1iZy1vcGFjaXR5KSl9LmRhcmsuc3ZlbHRlLTFtdHVzbHEgLmRhcmtcXFxcOmZpbGwtbmV1dHJhbC0zMDAuc3ZlbHRlLTFtdHVzbHF7ZmlsbDojZDRkNGQ0fS5kYXJrLnN2ZWx0ZS0xbXR1c2xxIC5kYXJrXFxcXDp0ZXh0LXdoaXRlLnN2ZWx0ZS0xbXR1c2xxey0tdHctdGV4dC1vcGFjaXR5OjE7Y29sb3I6cmdiKDI1NSAyNTUgMjU1IC8gdmFyKC0tdHctdGV4dC1vcGFjaXR5KSl9LmRhcmsuc3ZlbHRlLTFtdHVzbHEgLmRhcmtcXFxcOnRleHQtbmV1dHJhbC02MDAuc3ZlbHRlLTFtdHVzbHF7LS10dy10ZXh0LW9wYWNpdHk6MTtjb2xvcjpyZ2IoODIgODIgODIgLyB2YXIoLS10dy10ZXh0LW9wYWNpdHkpKX0uZGFyay5zdmVsdGUtMW10dXNscSAuZGFya1xcXFw6aG92ZXJcXFxcOmJnLW5ldXRyYWwtNzAwLnN2ZWx0ZS0xbXR1c2xxOmhvdmVyey0tdHctYmctb3BhY2l0eToxO2JhY2tncm91bmQtY29sb3I6cmdiKDY0IDY0IDY0IC8gdmFyKC0tdHctYmctb3BhY2l0eSkpfWApO1xufVxuZnVuY3Rpb24gZ2V0X2VhY2hfY29udGV4dCh0LCBlLCByKSB7XG4gIGNvbnN0IG4gPSB0LnNsaWNlKCk7XG4gIHJldHVybiBuWzIwXSA9IGVbcl0sIG47XG59XG5mdW5jdGlvbiBnZXRfZWFjaF9jb250ZXh0XzEodCwgZSwgcikge1xuICBjb25zdCBuID0gdC5zbGljZSgpO1xuICByZXR1cm4gblsyM10gPSBlW3JdLCBuO1xufVxuZnVuY3Rpb24gY3JlYXRlX2Vsc2VfYmxvY2sodCkge1xuICBsZXQgZSwgcjtcbiAgcmV0dXJuIHtcbiAgICBjKCkge1xuICAgICAgZSA9IGVsZW1lbnQoXCJpbWdcIiksIGF0dHIoZSwgXCJhbHRcIiwgdFsyM10ubmFtZSksIHNyY191cmxfZXF1YWwoZS5zcmMsIHIgPSB0WzIzXS5pY29uKSB8fCBhdHRyKGUsIFwic3JjXCIsIHIpLCBhdHRyKGUsIFwiY2xhc3NcIiwgXCJ3LTggaC04IHJvdW5kZWQtZnVsbCBzdmVsdGUtMW10dXNscVwiKTtcbiAgICB9LFxuICAgIG0obiwgbykge1xuICAgICAgaW5zZXJ0KG4sIGUsIG8pO1xuICAgIH0sXG4gICAgcDogbm9vcCxcbiAgICBkKG4pIHtcbiAgICAgIG4gJiYgZGV0YWNoKGUpO1xuICAgIH1cbiAgfTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZV9pZl9ibG9jayh0KSB7XG4gIGxldCBlO1xuICByZXR1cm4ge1xuICAgIGMoKSB7XG4gICAgICBlID0gZWxlbWVudChcImRpdlwiKSwgZS5pbm5lckhUTUwgPSBgPHN2ZyBhcmlhLWhpZGRlbj1cInRydWVcIiBjbGFzcz1cInctOCBoLTggdGV4dC1uZXV0cmFsLTMwMCBhbmltYXRlLXNwaW4gZGFyazp0ZXh0LW5ldXRyYWwtNjAwIGZpbGwtbmV1dHJhbC02MDAgZGFyazpmaWxsLW5ldXRyYWwtMzAwIHN2ZWx0ZS0xbXR1c2xxXCIgdmlld0JveD1cIjAgMCAxMDAgMTAxXCIgZmlsbD1cIm5vbmVcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI+PHBhdGggZD1cIk0xMDAgNTAuNTkwOEMxMDAgNzguMjA1MSA3Ny42MTQyIDEwMC41OTEgNTAgMTAwLjU5MUMyMi4zODU4IDEwMC41OTEgMCA3OC4yMDUxIDAgNTAuNTkwOEMwIDIyLjk3NjYgMjIuMzg1OCAwLjU5MDgyIDUwIDAuNTkwODJDNzcuNjE0MiAwLjU5MDgyIDEwMCAyMi45NzY2IDEwMCA1MC41OTA4Wk05LjA4MTQ0IDUwLjU5MDhDOS4wODE0NCA3My4xODk1IDI3LjQwMTMgOTEuNTA5NCA1MCA5MS41MDk0QzcyLjU5ODcgOTEuNTA5NCA5MC45MTg2IDczLjE4OTUgOTAuOTE4NiA1MC41OTA4QzkwLjkxODYgMjcuOTkyMSA3Mi41OTg3IDkuNjcyMjYgNTAgOS42NzIyNkMyNy40MDEzIDkuNjcyMjYgOS4wODE0NCAyNy45OTIxIDkuMDgxNDQgNTAuNTkwOFpcIiBmaWxsPVwiY3VycmVudENvbG9yXCIgY2xhc3M9XCJzdmVsdGUtMW10dXNscVwiPjwvcGF0aD48cGF0aCBkPVwiTTkzLjk2NzYgMzkuMDQwOUM5Ni4zOTMgMzguNDAzOCA5Ny44NjI0IDM1LjkxMTYgOTcuMDA3OSAzMy41NTM5Qzk1LjI5MzIgMjguODIyNyA5Mi44NzEgMjQuMzY5MiA4OS44MTY3IDIwLjM0OEM4NS44NDUyIDE1LjExOTIgODAuODgyNiAxMC43MjM4IDc1LjIxMjQgNy40MTI4OUM2OS41NDIyIDQuMTAxOTQgNjMuMjc1NCAxLjk0MDI1IDU2Ljc2OTggMS4wNTEyNEM1MS43NjY2IDAuMzY3NTQxIDQ2LjY5NzYgMC40NDY4NDMgNDEuNzM0NSAxLjI3ODczQzM5LjI2MTMgMS42OTMyOCAzNy44MTMgNC4xOTc3OCAzOC40NTAxIDYuNjIzMjZDMzkuMDg3MyA5LjA0ODc0IDQxLjU2OTQgMTAuNDcxNyA0NC4wNTA1IDEwLjEwNzFDNDcuODUxMSA5LjU0ODU1IDUxLjcxOTEgOS41MjY4OSA1NS41NDAyIDEwLjA0OTFDNjAuODY0MiAxMC43NzY2IDY1Ljk5MjggMTIuNTQ1NyA3MC42MzMxIDE1LjI1NTJDNzUuMjczNSAxNy45NjQ4IDc5LjMzNDcgMjEuNTYxOSA4Mi41ODQ5IDI1Ljg0MUM4NC45MTc1IDI4LjkxMjEgODYuNzk5NyAzMi4yOTEzIDg4LjE4MTEgMzUuODc1OEM4OS4wODMgMzguMjE1OCA5MS41NDIxIDM5LjY3ODEgOTMuOTY3NiAzOS4wNDA5WlwiIGZpbGw9XCJjdXJyZW50RmlsbFwiIGNsYXNzPVwic3ZlbHRlLTFtdHVzbHFcIj48L3BhdGg+PC9zdmc+IFxuICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInNyLW9ubHkgc3ZlbHRlLTFtdHVzbHFcIj5Mb2FkaW5nLi4uPC9zcGFuPmAsIGF0dHIoZSwgXCJyb2xlXCIsIFwic3RhdHVzXCIpLCBhdHRyKGUsIFwiY2xhc3NcIiwgXCJzdmVsdGUtMW10dXNscVwiKTtcbiAgICB9LFxuICAgIG0ociwgbikge1xuICAgICAgaW5zZXJ0KHIsIGUsIG4pO1xuICAgIH0sXG4gICAgcDogbm9vcCxcbiAgICBkKHIpIHtcbiAgICAgIHIgJiYgZGV0YWNoKGUpO1xuICAgIH1cbiAgfTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZV9lYWNoX2Jsb2NrXzEodCkge1xuICBsZXQgZSwgciA9IHRbMjNdLm5hbWUgKyBcIlwiLCBuLCBvLCBpLCBzO1xuICBmdW5jdGlvbiBhKG0sIHApIHtcbiAgICByZXR1cm4gbVsxXSA9PT0gbVsyM10uaWQgPyBjcmVhdGVfaWZfYmxvY2sgOiBjcmVhdGVfZWxzZV9ibG9jaztcbiAgfVxuICBsZXQgYyA9IGEodCksIGwgPSBjKHQpO1xuICBmdW5jdGlvbiB1KCkge1xuICAgIHJldHVybiB0WzEyXSh0WzIzXSk7XG4gIH1cbiAgZnVuY3Rpb24gZCguLi5tKSB7XG4gICAgcmV0dXJuIHRbMTNdKHRbMjNdLCAuLi5tKTtcbiAgfVxuICByZXR1cm4ge1xuICAgIGMoKSB7XG4gICAgICBlID0gZWxlbWVudChcImxpXCIpLCBuID0gdGV4dChyKSwgbyA9IHNwYWNlKCksIGwuYygpLCBhdHRyKGUsIFwiY2xhc3NcIiwgXCJmbGV4IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1jZW50ZXIgcC0zIGJnLXNsYXRlLTEwMCByb3VuZGVkLW1kIGN1cnNvci1wb2ludGVyIHNoYWRvdy1zbSBob3ZlcjpiZy1zbGF0ZS0yMDAgdHJhbnNpdGlvbi1jb2xvcnMgZGFyazpiZy1uZXV0cmFsLTgwMCBkYXJrOmhvdmVyOmJnLW5ldXRyYWwtNzAwIGRhcms6Ym9yZGVyLW5ldXRyYWwtNjAwIGRhcms6dGV4dC13aGl0ZSBzdmVsdGUtMW10dXNscVwiKTtcbiAgICB9LFxuICAgIG0obSwgcCkge1xuICAgICAgaW5zZXJ0KG0sIGUsIHApLCBhcHBlbmQoZSwgbiksIGFwcGVuZChlLCBvKSwgbC5tKGUsIG51bGwpLCBpIHx8IChzID0gW1xuICAgICAgICBsaXN0ZW4oZSwgXCJjbGlja1wiLCB1KSxcbiAgICAgICAgbGlzdGVuKGUsIFwia2V5dXBcIiwgZClcbiAgICAgIF0sIGkgPSAhMCk7XG4gICAgfSxcbiAgICBwKG0sIHApIHtcbiAgICAgIHQgPSBtLCBjID09PSAoYyA9IGEodCkpICYmIGwgPyBsLnAodCwgcCkgOiAobC5kKDEpLCBsID0gYyh0KSwgbCAmJiAobC5jKCksIGwubShlLCBudWxsKSkpO1xuICAgIH0sXG4gICAgZChtKSB7XG4gICAgICBtICYmIGRldGFjaChlKSwgbC5kKCksIGkgPSAhMSwgcnVuX2FsbChzKTtcbiAgICB9XG4gIH07XG59XG5mdW5jdGlvbiBjcmVhdGVfZWFjaF9ibG9jayh0KSB7XG4gIGxldCBlLCByLCBuID0gdFsyMF0ubmFtZSArIFwiXCIsIG8sIGksIHMsIGEsIGMsIGwsIHUsIGQsIG0sIHA7XG4gIHJldHVybiB7XG4gICAgYygpIHtcbiAgICAgIGUgPSBlbGVtZW50KFwiYVwiKSwgciA9IGVsZW1lbnQoXCJsaVwiKSwgbyA9IHRleHQobiksIGkgPSBzcGFjZSgpLCBzID0gZWxlbWVudChcImltZ1wiKSwgbCA9IHNwYWNlKCksIGF0dHIocywgXCJhbHRcIiwgYSA9IHRbMjBdLm5hbWUpLCBzcmNfdXJsX2VxdWFsKHMuc3JjLCBjID0gdFsyMF0uaWNvbikgfHwgYXR0cihzLCBcInNyY1wiLCBjKSwgYXR0cihzLCBcImNsYXNzXCIsIFwidy04IGgtOCByb3VuZGVkLWZ1bGwgc3ZlbHRlLTFtdHVzbHFcIiksIGF0dHIociwgXCJjbGFzc1wiLCBcImZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlciBwLTMgYmctc2xhdGUtMTAwIHJvdW5kZWQtbWQgc2hhZG93LXNtIGN1cnNvci1wb2ludGVyIGhvdmVyOmJnLXNsYXRlLTIwMCB0cmFuc2l0aW9uLWNvbG9ycyBkYXJrOmJnLW5ldXRyYWwtODAwIGRhcms6aG92ZXI6YmctbmV1dHJhbC03MDAgZGFyazpib3JkZXItbmV1dHJhbC02MDAgZGFyazp0ZXh0LXdoaXRlIHN2ZWx0ZS0xbXR1c2xxXCIpLCBhdHRyKGUsIFwiYWx0XCIsIHUgPSB0WzIwXS5uYW1lICsgXCIgZG93bmxvYWQgbGlua1wiKSwgYXR0cihlLCBcImhyZWZcIiwgZCA9IHRbMjBdLmRvd25sb2FkKSwgYXR0cihlLCBcInRhcmdldFwiLCBcIl9ibGFua1wiKSwgYXR0cihlLCBcInJlbFwiLCBcIm5vb3BlbmVyIG5vcmVmZXJyZXJcIiksIGF0dHIoZSwgXCJjbGFzc1wiLCBcInN2ZWx0ZS0xbXR1c2xxXCIpO1xuICAgIH0sXG4gICAgbShoLCB5KSB7XG4gICAgICBpbnNlcnQoaCwgZSwgeSksIGFwcGVuZChlLCByKSwgYXBwZW5kKHIsIG8pLCBhcHBlbmQociwgaSksIGFwcGVuZChyLCBzKSwgYXBwZW5kKGUsIGwpLCBtIHx8IChwID0gW1xuICAgICAgICBsaXN0ZW4ociwgXCJjbGlja1wiLCB0WzE0XSksXG4gICAgICAgIGxpc3RlbihyLCBcImtleXVwXCIsIHRbMTVdKVxuICAgICAgXSwgbSA9ICEwKTtcbiAgICB9LFxuICAgIHAoaCwgeSkge1xuICAgICAgeSAmIDEgJiYgbiAhPT0gKG4gPSBoWzIwXS5uYW1lICsgXCJcIikgJiYgc2V0X2RhdGEobywgbiksIHkgJiAxICYmIGEgIT09IChhID0gaFsyMF0ubmFtZSkgJiYgYXR0cihzLCBcImFsdFwiLCBhKSwgeSAmIDEgJiYgIXNyY191cmxfZXF1YWwocy5zcmMsIGMgPSBoWzIwXS5pY29uKSAmJiBhdHRyKHMsIFwic3JjXCIsIGMpLCB5ICYgMSAmJiB1ICE9PSAodSA9IGhbMjBdLm5hbWUgKyBcIiBkb3dubG9hZCBsaW5rXCIpICYmIGF0dHIoZSwgXCJhbHRcIiwgdSksIHkgJiAxICYmIGQgIT09IChkID0gaFsyMF0uZG93bmxvYWQpICYmIGF0dHIoZSwgXCJocmVmXCIsIGQpO1xuICAgIH0sXG4gICAgZChoKSB7XG4gICAgICBoICYmIGRldGFjaChlKSwgbSA9ICExLCBydW5fYWxsKHApO1xuICAgIH1cbiAgfTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZV9mcmFnbWVudCh0KSB7XG4gIGxldCBlLCByLCBuLCBvLCBpLCBzLCBhLCBjLCBsLCB1LCBkLCBtLCBwID0gdFs0XSwgaCA9IFtdO1xuICBmb3IgKGxldCBnID0gMDsgZyA8IHAubGVuZ3RoOyBnICs9IDEpXG4gICAgaFtnXSA9IGNyZWF0ZV9lYWNoX2Jsb2NrXzEoZ2V0X2VhY2hfY29udGV4dF8xKHQsIHAsIGcpKTtcbiAgbGV0IHkgPSB0WzBdLCB3ID0gW107XG4gIGZvciAobGV0IGcgPSAwOyBnIDwgeS5sZW5ndGg7IGcgKz0gMSlcbiAgICB3W2ddID0gY3JlYXRlX2VhY2hfYmxvY2soZ2V0X2VhY2hfY29udGV4dCh0LCB5LCBnKSk7XG4gIHJldHVybiB7XG4gICAgYygpIHtcbiAgICAgIGUgPSBlbGVtZW50KFwiZGl2XCIpLCByID0gZWxlbWVudChcIm1haW5cIiksIG4gPSBlbGVtZW50KFwiaGVhZGVyXCIpLCBvID0gZWxlbWVudChcImgxXCIpLCBvLnRleHRDb250ZW50ID0gXCJDb25uZWN0IGEgd2FsbGV0XCIsIGkgPSBzcGFjZSgpLCBzID0gZWxlbWVudChcInNwYW5cIiksIHMuaW5uZXJIVE1MID0gJzxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGhlaWdodD1cIjI0cHhcIiB3aWR0aD1cIjI0cHhcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgZmlsbD1cImN1cnJlbnRDb2xvclwiIGNsYXNzPVwic3ZlbHRlLTFtdHVzbHFcIj48cGF0aCBkPVwiTTE5IDYuNDFMMTcuNTkgNSAxMiAxMC41OSA2LjQxIDUgNSA2LjQxIDEwLjU5IDEyIDUgMTcuNTkgNi40MSAxOSAxMiAxMy40MSAxNy41OSAxOSAxOSAxNy41OSAxMy40MSAxMiAxOSA2LjQxelwiIGNsYXNzPVwic3ZlbHRlLTFtdHVzbHFcIj48L3BhdGg+PC9zdmc+JywgYSA9IHNwYWNlKCksIGMgPSBlbGVtZW50KFwidWxcIik7XG4gICAgICBmb3IgKGxldCBnID0gMDsgZyA8IGgubGVuZ3RoOyBnICs9IDEpXG4gICAgICAgIGhbZ10uYygpO1xuICAgICAgbCA9IHNwYWNlKCk7XG4gICAgICBmb3IgKGxldCBnID0gMDsgZyA8IHcubGVuZ3RoOyBnICs9IDEpXG4gICAgICAgIHdbZ10uYygpO1xuICAgICAgYXR0cihvLCBcImNsYXNzXCIsIFwidGV4dC14bCBzdmVsdGUtMW10dXNscVwiKSwgYXR0cihzLCBcInJvbGVcIiwgXCJidXR0b25cIiksIGF0dHIocywgXCJhbHRcIiwgXCJDbG9zZVwiKSwgYXR0cihzLCBcImNsYXNzXCIsIFwiY3Vyc29yLXBvaW50ZXIgc3ZlbHRlLTFtdHVzbHFcIiksIGF0dHIobiwgXCJjbGFzc1wiLCBcImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBtYi00IHN2ZWx0ZS0xbXR1c2xxXCIpLCBhdHRyKGMsIFwiY2xhc3NcIiwgXCJmbGV4IGZsZXgtY29sIGdhcC0zIHN2ZWx0ZS0xbXR1c2xxXCIpLCBhdHRyKHIsIFwicm9sZVwiLCBcImRpYWxvZ1wiKSwgYXR0cihyLCBcImNsYXNzXCIsIG51bGxfdG9fZW1wdHkoXCJiZy1zbGF0ZS01MCByb3VuZGVkLW1kIHNoYWRvdyB3LWZ1bGwgbWF4LXctWzUwMHB4XSBteC02IHAtNCB0ZXh0LWNlbnRlciB6LTUwIGRhcms6YmctbmV1dHJhbC05MDAgZGFyazp0ZXh0LXdoaXRlXCIpICsgXCIgc3ZlbHRlLTFtdHVzbHFcIiksIGF0dHIoZSwgXCJjbGFzc1wiLCB1ID0gbnVsbF90b19lbXB0eShcImJhY2tkcm9wLWJsdXItc20gZml4ZWQgaW5zZXQtMCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBiZy1ibGFjay8yNSB6LTQwIFwiICsgdFsyXSkgKyBcIiBzdmVsdGUtMW10dXNscVwiKTtcbiAgICB9LFxuICAgIG0oZywgSSkge1xuICAgICAgaW5zZXJ0KGcsIGUsIEkpLCBhcHBlbmQoZSwgciksIGFwcGVuZChyLCBuKSwgYXBwZW5kKG4sIG8pLCBhcHBlbmQobiwgaSksIGFwcGVuZChuLCBzKSwgYXBwZW5kKHIsIGEpLCBhcHBlbmQociwgYyk7XG4gICAgICBmb3IgKGxldCBNID0gMDsgTSA8IGgubGVuZ3RoOyBNICs9IDEpXG4gICAgICAgIGhbTV0ubShjLCBudWxsKTtcbiAgICAgIGFwcGVuZChjLCBsKTtcbiAgICAgIGZvciAobGV0IE0gPSAwOyBNIDwgdy5sZW5ndGg7IE0gKz0gMSlcbiAgICAgICAgd1tNXS5tKGMsIG51bGwpO1xuICAgICAgZCB8fCAobSA9IFtcbiAgICAgICAgbGlzdGVuKHMsIFwiY2xpY2tcIiwgdFsxMF0pLFxuICAgICAgICBsaXN0ZW4ocywgXCJrZXl1cFwiLCB0WzExXSksXG4gICAgICAgIGxpc3RlbihyLCBcImNsaWNrXCIsIGNsaWNrX2hhbmRsZXJfMyksXG4gICAgICAgIGxpc3RlbihyLCBcImtleXVwXCIsIGtleXVwX2hhbmRsZXJfMyksXG4gICAgICAgIGxpc3RlbihlLCBcImNsaWNrXCIsIHRbMTZdKSxcbiAgICAgICAgbGlzdGVuKGUsIFwia2V5dXBcIiwgdFsxN10pXG4gICAgICBdLCBkID0gITApO1xuICAgIH0sXG4gICAgcChnLCBbSV0pIHtcbiAgICAgIGlmIChJICYgMjYpIHtcbiAgICAgICAgcCA9IGdbNF07XG4gICAgICAgIGxldCBNO1xuICAgICAgICBmb3IgKE0gPSAwOyBNIDwgcC5sZW5ndGg7IE0gKz0gMSkge1xuICAgICAgICAgIGNvbnN0IFMgPSBnZXRfZWFjaF9jb250ZXh0XzEoZywgcCwgTSk7XG4gICAgICAgICAgaFtNXSA/IGhbTV0ucChTLCBJKSA6IChoW01dID0gY3JlYXRlX2VhY2hfYmxvY2tfMShTKSwgaFtNXS5jKCksIGhbTV0ubShjLCBsKSk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yICg7IE0gPCBoLmxlbmd0aDsgTSArPSAxKVxuICAgICAgICAgIGhbTV0uZCgxKTtcbiAgICAgICAgaC5sZW5ndGggPSBwLmxlbmd0aDtcbiAgICAgIH1cbiAgICAgIGlmIChJICYgOSkge1xuICAgICAgICB5ID0gZ1swXTtcbiAgICAgICAgbGV0IE07XG4gICAgICAgIGZvciAoTSA9IDA7IE0gPCB5Lmxlbmd0aDsgTSArPSAxKSB7XG4gICAgICAgICAgY29uc3QgUyA9IGdldF9lYWNoX2NvbnRleHQoZywgeSwgTSk7XG4gICAgICAgICAgd1tNXSA/IHdbTV0ucChTLCBJKSA6ICh3W01dID0gY3JlYXRlX2VhY2hfYmxvY2soUyksIHdbTV0uYygpLCB3W01dLm0oYywgbnVsbCkpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoOyBNIDwgdy5sZW5ndGg7IE0gKz0gMSlcbiAgICAgICAgICB3W01dLmQoMSk7XG4gICAgICAgIHcubGVuZ3RoID0geS5sZW5ndGg7XG4gICAgICB9XG4gICAgICBJICYgNCAmJiB1ICE9PSAodSA9IG51bGxfdG9fZW1wdHkoXCJiYWNrZHJvcC1ibHVyLXNtIGZpeGVkIGluc2V0LTAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgYmctYmxhY2svMjUgei00MCBcIiArIGdbMl0pICsgXCIgc3ZlbHRlLTFtdHVzbHFcIikgJiYgYXR0cihlLCBcImNsYXNzXCIsIHUpO1xuICAgIH0sXG4gICAgaTogbm9vcCxcbiAgICBvOiBub29wLFxuICAgIGQoZykge1xuICAgICAgZyAmJiBkZXRhY2goZSksIGRlc3Ryb3lfZWFjaChoLCBnKSwgZGVzdHJveV9lYWNoKHcsIGcpLCBkID0gITEsIHJ1bl9hbGwobSk7XG4gICAgfVxuICB9O1xufVxuY29uc3QgY2xpY2tfaGFuZGxlcl8zID0gKHQpID0+IHQuc3RvcFByb3BhZ2F0aW9uKCksIGtleXVwX2hhbmRsZXJfMyA9ICh0KSA9PiB0LnN0b3BQcm9wYWdhdGlvbigpO1xuZnVuY3Rpb24gaW5zdGFuY2UodCwgZSwgcikge1xuICBjb25zdCBuID0gdHlwZW9mIHdpbmRvdyA8IFwidVwiID8gd2luZG93IDogbnVsbDtcbiAgbGV0IHsgbGFzdFdhbGxldDogbyA9IG51bGwgfSA9IGUsIHsgaW5zdGFsbGVkV2FsbGV0czogaSA9IFtdIH0gPSBlLCB7IHByZUF1dGhvcml6ZWRXYWxsZXRzOiBzID0gW10gfSA9IGUsIHsgZGlzY292ZXJ5V2FsbGV0czogYSA9IFtdIH0gPSBlLCB7IGNhbGxiYWNrOiBjID0gYXN5bmMgKCkgPT4ge1xuICB9IH0gPSBlLCB7IHRoZW1lOiBsID0gbnVsbCB9ID0gZSwgdSA9ICExLCBkID0gYXN5bmMgKGIpID0+IHtcbiAgICB2YXIgXztcbiAgICByKDEsIHUgPSAoXyA9IGIgPT0gbnVsbCA/IHZvaWQgMCA6IGIuaWQpICE9IG51bGwgPyBfIDogITEpLCBhd2FpdCBjKGIpLmNhdGNoKCgpID0+IHtcbiAgICB9KSwgcigxLCB1ID0gITEpO1xuICB9LCBtID0gXCJcIjtcbiAgbCA9PT0gXCJkYXJrXCIgfHwgbCA9PT0gbnVsbCAmJiAobiA9PSBudWxsID8gdm9pZCAwIDogbi5tYXRjaE1lZGlhKFwiKHByZWZlcnMtY29sb3Itc2NoZW1lOiBkYXJrKVwiKS5tYXRjaGVzKSA/IG0gPSBcImRhcmtcIiA6IG0gPSBcIlwiO1xuICBjb25zdCBwID0gKGIpID0+IHtcbiAgICByKDIsIG0gPSBiLm1hdGNoZXMgPyBcImRhcmtcIiA6IFwiXCIpO1xuICB9O1xuICBvbk1vdW50KCgpID0+IHtcbiAgICBpZiAobCA9PT0gbnVsbClcbiAgICAgIHJldHVybiBuID09IG51bGwgfHwgbi5tYXRjaE1lZGlhKFwiKHByZWZlcnMtY29sb3Itc2NoZW1lOiBkYXJrKVwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIHApLCAoKSA9PiB7XG4gICAgICAgIG4gPT0gbnVsbCB8fCBuLm1hdGNoTWVkaWEoXCIocHJlZmVycy1jb2xvci1zY2hlbWU6IGRhcmspXCIpLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgcCk7XG4gICAgICB9O1xuICB9KTtcbiAgY29uc3QgaCA9IFtvLCAuLi5zLCAuLi5pXS5maWx0ZXIoQm9vbGVhbiksIHkgPSAoKSA9PiBkKG51bGwpLCB3ID0gKGIpID0+IHtcbiAgICBiLmtleSA9PT0gXCJFbnRlclwiICYmIGQobnVsbCk7XG4gIH0sIGcgPSAoYikgPT4gZChiKSwgSSA9IChiLCBfKSA9PiB7XG4gICAgXy5rZXkgPT09IFwiRW50ZXJcIiAmJiBkKGIpO1xuICB9LCBNID0gKCkgPT4gZChudWxsKSwgUyA9IChiKSA9PiB7XG4gICAgYi5rZXkgPT09IFwiRW50ZXJcIiAmJiBkKG51bGwpO1xuICB9LCBFID0gKCkgPT4gZChudWxsKSwgRCA9IChiKSA9PiB7XG4gICAgYi5rZXkgPT09IFwiRXNjYXBlXCIgJiYgZChudWxsKTtcbiAgfTtcbiAgcmV0dXJuIHQuJCRzZXQgPSAoYikgPT4ge1xuICAgIFwibGFzdFdhbGxldFwiIGluIGIgJiYgcig1LCBvID0gYi5sYXN0V2FsbGV0KSwgXCJpbnN0YWxsZWRXYWxsZXRzXCIgaW4gYiAmJiByKDYsIGkgPSBiLmluc3RhbGxlZFdhbGxldHMpLCBcInByZUF1dGhvcml6ZWRXYWxsZXRzXCIgaW4gYiAmJiByKDcsIHMgPSBiLnByZUF1dGhvcml6ZWRXYWxsZXRzKSwgXCJkaXNjb3ZlcnlXYWxsZXRzXCIgaW4gYiAmJiByKDAsIGEgPSBiLmRpc2NvdmVyeVdhbGxldHMpLCBcImNhbGxiYWNrXCIgaW4gYiAmJiByKDgsIGMgPSBiLmNhbGxiYWNrKSwgXCJ0aGVtZVwiIGluIGIgJiYgcig5LCBsID0gYi50aGVtZSk7XG4gIH0sIFtcbiAgICBhLFxuICAgIHUsXG4gICAgbSxcbiAgICBkLFxuICAgIGgsXG4gICAgbyxcbiAgICBpLFxuICAgIHMsXG4gICAgYyxcbiAgICBsLFxuICAgIHksXG4gICAgdyxcbiAgICBnLFxuICAgIEksXG4gICAgTSxcbiAgICBTLFxuICAgIEUsXG4gICAgRFxuICBdO1xufVxuY2xhc3MgTW9kYWwgZXh0ZW5kcyBTdmVsdGVDb21wb25lbnQge1xuICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgc3VwZXIoKSwgaW5pdCQxKFxuICAgICAgdGhpcyxcbiAgICAgIGUsXG4gICAgICBpbnN0YW5jZSxcbiAgICAgIGNyZWF0ZV9mcmFnbWVudCxcbiAgICAgIHNhZmVfbm90X2VxdWFsLFxuICAgICAge1xuICAgICAgICBsYXN0V2FsbGV0OiA1LFxuICAgICAgICBpbnN0YWxsZWRXYWxsZXRzOiA2LFxuICAgICAgICBwcmVBdXRob3JpemVkV2FsbGV0czogNyxcbiAgICAgICAgZGlzY292ZXJ5V2FsbGV0czogMCxcbiAgICAgICAgY2FsbGJhY2s6IDgsXG4gICAgICAgIHRoZW1lOiA5XG4gICAgICB9LFxuICAgICAgYWRkX2Nzc1xuICAgICk7XG4gIH1cbn1cbmZ1bmN0aW9uIGV4Y2x1ZGVXYWxsZXRzKHQsIGUpIHtcbiAgcmV0dXJuIHQuZmlsdGVyKChyKSA9PiAhZS5zb21lKChuKSA9PiBuLmlkID09PSByLmlkKSk7XG59XG5hc3luYyBmdW5jdGlvbiBzaG93KHtcbiAgZGlzY292ZXJ5V2FsbGV0czogdCxcbiAgaW5zdGFsbGVkV2FsbGV0czogZSxcbiAgbGFzdFdhbGxldDogcixcbiAgcHJlQXV0aG9yaXplZFdhbGxldHM6IG4sXG4gIGVuYWJsZTogbyxcbiAgbW9kYWxPcHRpb25zOiBpXG59KSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZSgocykgPT4ge1xuICAgIHZhciBsO1xuICAgIGNvbnN0IGEgPSBbcl0uZmlsdGVyKEJvb2xlYW4pO1xuICAgIG4gPSBleGNsdWRlV2FsbGV0cyhuLCBhKSwgZSA9IGV4Y2x1ZGVXYWxsZXRzKGUsIFtcbiAgICAgIC4uLmEsXG4gICAgICAuLi5uXG4gICAgXSksIHQgPSBleGNsdWRlV2FsbGV0cyh0LCBbXG4gICAgICAuLi5hLFxuICAgICAgLi4uZSxcbiAgICAgIC4uLm5cbiAgICBdKTtcbiAgICBjb25zdCBjID0gbmV3IE1vZGFsKHtcbiAgICAgIHRhcmdldDogZG9jdW1lbnQuYm9keSxcbiAgICAgIHByb3BzOiB7XG4gICAgICAgIGNhbGxiYWNrOiBhc3luYyAodSkgPT4ge1xuICAgICAgICAgIHZhciBtO1xuICAgICAgICAgIGNvbnN0IGQgPSAobSA9IGF3YWl0IChvID09IG51bGwgPyB2b2lkIDAgOiBvKHUpKSkgIT0gbnVsbCA/IG0gOiB1O1xuICAgICAgICAgIGMuJGRlc3Ryb3koKSwgcyhkKTtcbiAgICAgICAgfSxcbiAgICAgICAgbGFzdFdhbGxldDogcixcbiAgICAgICAgaW5zdGFsbGVkV2FsbGV0czogZSxcbiAgICAgICAgcHJlQXV0aG9yaXplZFdhbGxldHM6IG4sXG4gICAgICAgIGRpc2NvdmVyeVdhbGxldHM6IHQsXG4gICAgICAgIHRoZW1lOiAoaSA9PSBudWxsID8gdm9pZCAwIDogaS50aGVtZSkgPT09IFwic3lzdGVtXCIgPyBudWxsIDogKGwgPSBpID09IG51bGwgPyB2b2lkIDAgOiBpLnRoZW1lKSAhPSBudWxsID8gbCA6IG51bGxcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG59XG5jb25zdCBCUk9XU0VSX0FMSUFTRVNfTUFQID0ge1xuICBcIkFtYXpvbiBTaWxrXCI6IFwiYW1hem9uX3NpbGtcIixcbiAgXCJBbmRyb2lkIEJyb3dzZXJcIjogXCJhbmRyb2lkXCIsXG4gIEJhZGE6IFwiYmFkYVwiLFxuICBCbGFja0JlcnJ5OiBcImJsYWNrYmVycnlcIixcbiAgQ2hyb21lOiBcImNocm9tZVwiLFxuICBDaHJvbWl1bTogXCJjaHJvbWl1bVwiLFxuICBFbGVjdHJvbjogXCJlbGVjdHJvblwiLFxuICBFcGlwaGFueTogXCJlcGlwaGFueVwiLFxuICBGaXJlZm94OiBcImZpcmVmb3hcIixcbiAgRm9jdXM6IFwiZm9jdXNcIixcbiAgR2VuZXJpYzogXCJnZW5lcmljXCIsXG4gIFwiR29vZ2xlIFNlYXJjaFwiOiBcImdvb2dsZV9zZWFyY2hcIixcbiAgR29vZ2xlYm90OiBcImdvb2dsZWJvdFwiLFxuICBcIkludGVybmV0IEV4cGxvcmVyXCI6IFwiaWVcIixcbiAgXCJLLU1lbGVvblwiOiBcImtfbWVsZW9uXCIsXG4gIE1heHRob246IFwibWF4dGhvblwiLFxuICBcIk1pY3Jvc29mdCBFZGdlXCI6IFwiZWRnZVwiLFxuICBcIk1aIEJyb3dzZXJcIjogXCJtelwiLFxuICBcIk5BVkVSIFdoYWxlIEJyb3dzZXJcIjogXCJuYXZlclwiLFxuICBPcGVyYTogXCJvcGVyYVwiLFxuICBcIk9wZXJhIENvYXN0XCI6IFwib3BlcmFfY29hc3RcIixcbiAgUGhhbnRvbUpTOiBcInBoYW50b21qc1wiLFxuICBQdWZmaW46IFwicHVmZmluXCIsXG4gIFF1cFppbGxhOiBcInF1cHppbGxhXCIsXG4gIFFROiBcInFxXCIsXG4gIFFRTGl0ZTogXCJxcWxpdGVcIixcbiAgU2FmYXJpOiBcInNhZmFyaVwiLFxuICBTYWlsZmlzaDogXCJzYWlsZmlzaFwiLFxuICBcIlNhbXN1bmcgSW50ZXJuZXQgZm9yIEFuZHJvaWRcIjogXCJzYW1zdW5nX2ludGVybmV0XCIsXG4gIFNlYU1vbmtleTogXCJzZWFtb25rZXlcIixcbiAgU2xlaXBuaXI6IFwic2xlaXBuaXJcIixcbiAgU3dpbmc6IFwic3dpbmdcIixcbiAgVGl6ZW46IFwidGl6ZW5cIixcbiAgXCJVQyBCcm93c2VyXCI6IFwidWNcIixcbiAgVml2YWxkaTogXCJ2aXZhbGRpXCIsXG4gIFwiV2ViT1MgQnJvd3NlclwiOiBcIndlYm9zXCIsXG4gIFdlQ2hhdDogXCJ3ZWNoYXRcIixcbiAgXCJZYW5kZXggQnJvd3NlclwiOiBcInlhbmRleFwiLFxuICBSb2t1OiBcInJva3VcIlxufSwgQlJPV1NFUl9NQVAgPSB7XG4gIGFtYXpvbl9zaWxrOiBcIkFtYXpvbiBTaWxrXCIsXG4gIGFuZHJvaWQ6IFwiQW5kcm9pZCBCcm93c2VyXCIsXG4gIGJhZGE6IFwiQmFkYVwiLFxuICBibGFja2JlcnJ5OiBcIkJsYWNrQmVycnlcIixcbiAgY2hyb21lOiBcIkNocm9tZVwiLFxuICBjaHJvbWl1bTogXCJDaHJvbWl1bVwiLFxuICBlbGVjdHJvbjogXCJFbGVjdHJvblwiLFxuICBlcGlwaGFueTogXCJFcGlwaGFueVwiLFxuICBmaXJlZm94OiBcIkZpcmVmb3hcIixcbiAgZm9jdXM6IFwiRm9jdXNcIixcbiAgZ2VuZXJpYzogXCJHZW5lcmljXCIsXG4gIGdvb2dsZWJvdDogXCJHb29nbGVib3RcIixcbiAgZ29vZ2xlX3NlYXJjaDogXCJHb29nbGUgU2VhcmNoXCIsXG4gIGllOiBcIkludGVybmV0IEV4cGxvcmVyXCIsXG4gIGtfbWVsZW9uOiBcIkstTWVsZW9uXCIsXG4gIG1heHRob246IFwiTWF4dGhvblwiLFxuICBlZGdlOiBcIk1pY3Jvc29mdCBFZGdlXCIsXG4gIG16OiBcIk1aIEJyb3dzZXJcIixcbiAgbmF2ZXI6IFwiTkFWRVIgV2hhbGUgQnJvd3NlclwiLFxuICBvcGVyYTogXCJPcGVyYVwiLFxuICBvcGVyYV9jb2FzdDogXCJPcGVyYSBDb2FzdFwiLFxuICBwaGFudG9tanM6IFwiUGhhbnRvbUpTXCIsXG4gIHB1ZmZpbjogXCJQdWZmaW5cIixcbiAgcXVwemlsbGE6IFwiUXVwWmlsbGFcIixcbiAgcXE6IFwiUVEgQnJvd3NlclwiLFxuICBxcWxpdGU6IFwiUVEgQnJvd3NlciBMaXRlXCIsXG4gIHNhZmFyaTogXCJTYWZhcmlcIixcbiAgc2FpbGZpc2g6IFwiU2FpbGZpc2hcIixcbiAgc2Ftc3VuZ19pbnRlcm5ldDogXCJTYW1zdW5nIEludGVybmV0IGZvciBBbmRyb2lkXCIsXG4gIHNlYW1vbmtleTogXCJTZWFNb25rZXlcIixcbiAgc2xlaXBuaXI6IFwiU2xlaXBuaXJcIixcbiAgc3dpbmc6IFwiU3dpbmdcIixcbiAgdGl6ZW46IFwiVGl6ZW5cIixcbiAgdWM6IFwiVUMgQnJvd3NlclwiLFxuICB2aXZhbGRpOiBcIlZpdmFsZGlcIixcbiAgd2Vib3M6IFwiV2ViT1MgQnJvd3NlclwiLFxuICB3ZWNoYXQ6IFwiV2VDaGF0XCIsXG4gIHlhbmRleDogXCJZYW5kZXggQnJvd3NlclwiXG59LCBQTEFURk9STVNfTUFQID0ge1xuICB0YWJsZXQ6IFwidGFibGV0XCIsXG4gIG1vYmlsZTogXCJtb2JpbGVcIixcbiAgZGVza3RvcDogXCJkZXNrdG9wXCIsXG4gIHR2OiBcInR2XCJcbn0sIE9TX01BUCA9IHtcbiAgV2luZG93c1Bob25lOiBcIldpbmRvd3MgUGhvbmVcIixcbiAgV2luZG93czogXCJXaW5kb3dzXCIsXG4gIE1hY09TOiBcIm1hY09TXCIsXG4gIGlPUzogXCJpT1NcIixcbiAgQW5kcm9pZDogXCJBbmRyb2lkXCIsXG4gIFdlYk9TOiBcIldlYk9TXCIsXG4gIEJsYWNrQmVycnk6IFwiQmxhY2tCZXJyeVwiLFxuICBCYWRhOiBcIkJhZGFcIixcbiAgVGl6ZW46IFwiVGl6ZW5cIixcbiAgTGludXg6IFwiTGludXhcIixcbiAgQ2hyb21lT1M6IFwiQ2hyb21lIE9TXCIsXG4gIFBsYXlTdGF0aW9uNDogXCJQbGF5U3RhdGlvbiA0XCIsXG4gIFJva3U6IFwiUm9rdVwiXG59LCBFTkdJTkVfTUFQID0ge1xuICBFZGdlSFRNTDogXCJFZGdlSFRNTFwiLFxuICBCbGluazogXCJCbGlua1wiLFxuICBUcmlkZW50OiBcIlRyaWRlbnRcIixcbiAgUHJlc3RvOiBcIlByZXN0b1wiLFxuICBHZWNrbzogXCJHZWNrb1wiLFxuICBXZWJLaXQ6IFwiV2ViS2l0XCJcbn07XG5jbGFzcyBVdGlscyB7XG4gIHN0YXRpYyBnZXRGaXJzdE1hdGNoKGUsIHIpIHtcbiAgICBjb25zdCBuID0gci5tYXRjaChlKTtcbiAgICByZXR1cm4gbiAmJiBuLmxlbmd0aCA+IDAgJiYgblsxXSB8fCBcIlwiO1xuICB9XG4gIHN0YXRpYyBnZXRTZWNvbmRNYXRjaChlLCByKSB7XG4gICAgY29uc3QgbiA9IHIubWF0Y2goZSk7XG4gICAgcmV0dXJuIG4gJiYgbi5sZW5ndGggPiAxICYmIG5bMl0gfHwgXCJcIjtcbiAgfVxuICBzdGF0aWMgbWF0Y2hBbmRSZXR1cm5Db25zdChlLCByLCBuKSB7XG4gICAgaWYgKGUudGVzdChyKSlcbiAgICAgIHJldHVybiBuO1xuICB9XG4gIHN0YXRpYyBnZXRXaW5kb3dzVmVyc2lvbk5hbWUoZSkge1xuICAgIHN3aXRjaCAoZSkge1xuICAgICAgY2FzZSBcIk5UXCI6XG4gICAgICAgIHJldHVybiBcIk5UXCI7XG4gICAgICBjYXNlIFwiWFBcIjpcbiAgICAgICAgcmV0dXJuIFwiWFBcIjtcbiAgICAgIGNhc2UgXCJOVCA1LjBcIjpcbiAgICAgICAgcmV0dXJuIFwiMjAwMFwiO1xuICAgICAgY2FzZSBcIk5UIDUuMVwiOlxuICAgICAgICByZXR1cm4gXCJYUFwiO1xuICAgICAgY2FzZSBcIk5UIDUuMlwiOlxuICAgICAgICByZXR1cm4gXCIyMDAzXCI7XG4gICAgICBjYXNlIFwiTlQgNi4wXCI6XG4gICAgICAgIHJldHVybiBcIlZpc3RhXCI7XG4gICAgICBjYXNlIFwiTlQgNi4xXCI6XG4gICAgICAgIHJldHVybiBcIjdcIjtcbiAgICAgIGNhc2UgXCJOVCA2LjJcIjpcbiAgICAgICAgcmV0dXJuIFwiOFwiO1xuICAgICAgY2FzZSBcIk5UIDYuM1wiOlxuICAgICAgICByZXR1cm4gXCI4LjFcIjtcbiAgICAgIGNhc2UgXCJOVCAxMC4wXCI6XG4gICAgICAgIHJldHVybiBcIjEwXCI7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm47XG4gICAgfVxuICB9XG4gIHN0YXRpYyBnZXRNYWNPU1ZlcnNpb25OYW1lKGUpIHtcbiAgICBjb25zdCByID0gZS5zcGxpdChcIi5cIikuc3BsaWNlKDAsIDIpLm1hcCgobikgPT4gcGFyc2VJbnQobiwgMTApIHx8IDApO1xuICAgIGlmIChyLnB1c2goMCksIHJbMF0gPT09IDEwKVxuICAgICAgc3dpdGNoIChyWzFdKSB7XG4gICAgICAgIGNhc2UgNTpcbiAgICAgICAgICByZXR1cm4gXCJMZW9wYXJkXCI7XG4gICAgICAgIGNhc2UgNjpcbiAgICAgICAgICByZXR1cm4gXCJTbm93IExlb3BhcmRcIjtcbiAgICAgICAgY2FzZSA3OlxuICAgICAgICAgIHJldHVybiBcIkxpb25cIjtcbiAgICAgICAgY2FzZSA4OlxuICAgICAgICAgIHJldHVybiBcIk1vdW50YWluIExpb25cIjtcbiAgICAgICAgY2FzZSA5OlxuICAgICAgICAgIHJldHVybiBcIk1hdmVyaWNrc1wiO1xuICAgICAgICBjYXNlIDEwOlxuICAgICAgICAgIHJldHVybiBcIllvc2VtaXRlXCI7XG4gICAgICAgIGNhc2UgMTE6XG4gICAgICAgICAgcmV0dXJuIFwiRWwgQ2FwaXRhblwiO1xuICAgICAgICBjYXNlIDEyOlxuICAgICAgICAgIHJldHVybiBcIlNpZXJyYVwiO1xuICAgICAgICBjYXNlIDEzOlxuICAgICAgICAgIHJldHVybiBcIkhpZ2ggU2llcnJhXCI7XG4gICAgICAgIGNhc2UgMTQ6XG4gICAgICAgICAgcmV0dXJuIFwiTW9qYXZlXCI7XG4gICAgICAgIGNhc2UgMTU6XG4gICAgICAgICAgcmV0dXJuIFwiQ2F0YWxpbmFcIjtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICByZXR1cm47XG4gICAgICB9XG4gIH1cbiAgc3RhdGljIGdldEFuZHJvaWRWZXJzaW9uTmFtZShlKSB7XG4gICAgY29uc3QgciA9IGUuc3BsaXQoXCIuXCIpLnNwbGljZSgwLCAyKS5tYXAoKG4pID0+IHBhcnNlSW50KG4sIDEwKSB8fCAwKTtcbiAgICBpZiAoci5wdXNoKDApLCAhKHJbMF0gPT09IDEgJiYgclsxXSA8IDUpKSB7XG4gICAgICBpZiAoclswXSA9PT0gMSAmJiByWzFdIDwgNilcbiAgICAgICAgcmV0dXJuIFwiQ3VwY2FrZVwiO1xuICAgICAgaWYgKHJbMF0gPT09IDEgJiYgclsxXSA+PSA2KVxuICAgICAgICByZXR1cm4gXCJEb251dFwiO1xuICAgICAgaWYgKHJbMF0gPT09IDIgJiYgclsxXSA8IDIpXG4gICAgICAgIHJldHVybiBcIkVjbGFpclwiO1xuICAgICAgaWYgKHJbMF0gPT09IDIgJiYgclsxXSA9PT0gMilcbiAgICAgICAgcmV0dXJuIFwiRnJveW9cIjtcbiAgICAgIGlmIChyWzBdID09PSAyICYmIHJbMV0gPiAyKVxuICAgICAgICByZXR1cm4gXCJHaW5nZXJicmVhZFwiO1xuICAgICAgaWYgKHJbMF0gPT09IDMpXG4gICAgICAgIHJldHVybiBcIkhvbmV5Y29tYlwiO1xuICAgICAgaWYgKHJbMF0gPT09IDQgJiYgclsxXSA8IDEpXG4gICAgICAgIHJldHVybiBcIkljZSBDcmVhbSBTYW5kd2ljaFwiO1xuICAgICAgaWYgKHJbMF0gPT09IDQgJiYgclsxXSA8IDQpXG4gICAgICAgIHJldHVybiBcIkplbGx5IEJlYW5cIjtcbiAgICAgIGlmIChyWzBdID09PSA0ICYmIHJbMV0gPj0gNClcbiAgICAgICAgcmV0dXJuIFwiS2l0S2F0XCI7XG4gICAgICBpZiAoclswXSA9PT0gNSlcbiAgICAgICAgcmV0dXJuIFwiTG9sbGlwb3BcIjtcbiAgICAgIGlmIChyWzBdID09PSA2KVxuICAgICAgICByZXR1cm4gXCJNYXJzaG1hbGxvd1wiO1xuICAgICAgaWYgKHJbMF0gPT09IDcpXG4gICAgICAgIHJldHVybiBcIk5vdWdhdFwiO1xuICAgICAgaWYgKHJbMF0gPT09IDgpXG4gICAgICAgIHJldHVybiBcIk9yZW9cIjtcbiAgICAgIGlmIChyWzBdID09PSA5KVxuICAgICAgICByZXR1cm4gXCJQaWVcIjtcbiAgICB9XG4gIH1cbiAgc3RhdGljIGdldFZlcnNpb25QcmVjaXNpb24oZSkge1xuICAgIHJldHVybiBlLnNwbGl0KFwiLlwiKS5sZW5ndGg7XG4gIH1cbiAgc3RhdGljIGNvbXBhcmVWZXJzaW9ucyhlLCByLCBuID0gITEpIHtcbiAgICBjb25zdCBvID0gVXRpbHMuZ2V0VmVyc2lvblByZWNpc2lvbihlKSwgaSA9IFV0aWxzLmdldFZlcnNpb25QcmVjaXNpb24ocik7XG4gICAgbGV0IHMgPSBNYXRoLm1heChvLCBpKSwgYSA9IDA7XG4gICAgY29uc3QgYyA9IFV0aWxzLm1hcChbZSwgcl0sIChsKSA9PiB7XG4gICAgICBjb25zdCB1ID0gcyAtIFV0aWxzLmdldFZlcnNpb25QcmVjaXNpb24obCksIGQgPSBsICsgbmV3IEFycmF5KHUgKyAxKS5qb2luKFwiLjBcIik7XG4gICAgICByZXR1cm4gVXRpbHMubWFwKGQuc3BsaXQoXCIuXCIpLCAobSkgPT4gbmV3IEFycmF5KDIwIC0gbS5sZW5ndGgpLmpvaW4oXCIwXCIpICsgbSkucmV2ZXJzZSgpO1xuICAgIH0pO1xuICAgIGZvciAobiAmJiAoYSA9IHMgLSBNYXRoLm1pbihvLCBpKSksIHMgLT0gMTsgcyA+PSBhOyApIHtcbiAgICAgIGlmIChjWzBdW3NdID4gY1sxXVtzXSlcbiAgICAgICAgcmV0dXJuIDE7XG4gICAgICBpZiAoY1swXVtzXSA9PT0gY1sxXVtzXSkge1xuICAgICAgICBpZiAocyA9PT0gYSlcbiAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgcyAtPSAxO1xuICAgICAgfSBlbHNlIGlmIChjWzBdW3NdIDwgY1sxXVtzXSlcbiAgICAgICAgcmV0dXJuIC0xO1xuICAgIH1cbiAgfVxuICBzdGF0aWMgbWFwKGUsIHIpIHtcbiAgICBjb25zdCBuID0gW107XG4gICAgbGV0IG87XG4gICAgaWYgKEFycmF5LnByb3RvdHlwZS5tYXApXG4gICAgICByZXR1cm4gQXJyYXkucHJvdG90eXBlLm1hcC5jYWxsKGUsIHIpO1xuICAgIGZvciAobyA9IDA7IG8gPCBlLmxlbmd0aDsgbyArPSAxKVxuICAgICAgbi5wdXNoKHIoZVtvXSkpO1xuICAgIHJldHVybiBuO1xuICB9XG4gIHN0YXRpYyBmaW5kKGUsIHIpIHtcbiAgICBsZXQgbiwgbztcbiAgICBpZiAoQXJyYXkucHJvdG90eXBlLmZpbmQpXG4gICAgICByZXR1cm4gQXJyYXkucHJvdG90eXBlLmZpbmQuY2FsbChlLCByKTtcbiAgICBmb3IgKG4gPSAwLCBvID0gZS5sZW5ndGg7IG4gPCBvOyBuICs9IDEpIHtcbiAgICAgIGNvbnN0IGkgPSBlW25dO1xuICAgICAgaWYgKHIoaSwgbikpXG4gICAgICAgIHJldHVybiBpO1xuICAgIH1cbiAgfVxuICBzdGF0aWMgYXNzaWduKGUsIC4uLnIpIHtcbiAgICBjb25zdCBuID0gZTtcbiAgICBsZXQgbywgaTtcbiAgICBpZiAoT2JqZWN0LmFzc2lnbilcbiAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKGUsIC4uLnIpO1xuICAgIGZvciAobyA9IDAsIGkgPSByLmxlbmd0aDsgbyA8IGk7IG8gKz0gMSkge1xuICAgICAgY29uc3QgcyA9IHJbb107XG4gICAgICB0eXBlb2YgcyA9PSBcIm9iamVjdFwiICYmIHMgIT09IG51bGwgJiYgT2JqZWN0LmtleXMocykuZm9yRWFjaCgoYykgPT4ge1xuICAgICAgICBuW2NdID0gc1tjXTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gZTtcbiAgfVxuICBzdGF0aWMgZ2V0QnJvd3NlckFsaWFzKGUpIHtcbiAgICByZXR1cm4gQlJPV1NFUl9BTElBU0VTX01BUFtlXTtcbiAgfVxuICBzdGF0aWMgZ2V0QnJvd3NlclR5cGVCeUFsaWFzKGUpIHtcbiAgICByZXR1cm4gQlJPV1NFUl9NQVBbZV0gfHwgXCJcIjtcbiAgfVxufVxuY29uc3QgY29tbW9uVmVyc2lvbklkZW50aWZpZXIgPSAvdmVyc2lvblxcLyhcXGQrKFxcLj9fP1xcZCspKykvaSwgYnJvd3NlcnNMaXN0ID0gW1xuICB7XG4gICAgdGVzdDogWy9nb29nbGVib3QvaV0sXG4gICAgZGVzY3JpYmUodCkge1xuICAgICAgY29uc3QgZSA9IHtcbiAgICAgICAgbmFtZTogXCJHb29nbGVib3RcIlxuICAgICAgfSwgciA9IFV0aWxzLmdldEZpcnN0TWF0Y2goL2dvb2dsZWJvdFxcLyhcXGQrKFxcLlxcZCspKS9pLCB0KSB8fCBVdGlscy5nZXRGaXJzdE1hdGNoKGNvbW1vblZlcnNpb25JZGVudGlmaWVyLCB0KTtcbiAgICAgIHJldHVybiByICYmIChlLnZlcnNpb24gPSByKSwgZTtcbiAgICB9XG4gIH0sXG4gIHtcbiAgICB0ZXN0OiBbL29wZXJhL2ldLFxuICAgIGRlc2NyaWJlKHQpIHtcbiAgICAgIGNvbnN0IGUgPSB7XG4gICAgICAgIG5hbWU6IFwiT3BlcmFcIlxuICAgICAgfSwgciA9IFV0aWxzLmdldEZpcnN0TWF0Y2goY29tbW9uVmVyc2lvbklkZW50aWZpZXIsIHQpIHx8IFV0aWxzLmdldEZpcnN0TWF0Y2goLyg/Om9wZXJhKVtcXHMvXShcXGQrKFxcLj9fP1xcZCspKykvaSwgdCk7XG4gICAgICByZXR1cm4gciAmJiAoZS52ZXJzaW9uID0gciksIGU7XG4gICAgfVxuICB9LFxuICB7XG4gICAgdGVzdDogWy9vcHJcXC98b3Bpb3MvaV0sXG4gICAgZGVzY3JpYmUodCkge1xuICAgICAgY29uc3QgZSA9IHtcbiAgICAgICAgbmFtZTogXCJPcGVyYVwiXG4gICAgICB9LCByID0gVXRpbHMuZ2V0Rmlyc3RNYXRjaCgvKD86b3ByfG9waW9zKVtcXHMvXShcXFMrKS9pLCB0KSB8fCBVdGlscy5nZXRGaXJzdE1hdGNoKGNvbW1vblZlcnNpb25JZGVudGlmaWVyLCB0KTtcbiAgICAgIHJldHVybiByICYmIChlLnZlcnNpb24gPSByKSwgZTtcbiAgICB9XG4gIH0sXG4gIHtcbiAgICB0ZXN0OiBbL1NhbXN1bmdCcm93c2VyL2ldLFxuICAgIGRlc2NyaWJlKHQpIHtcbiAgICAgIGNvbnN0IGUgPSB7XG4gICAgICAgIG5hbWU6IFwiU2Ftc3VuZyBJbnRlcm5ldCBmb3IgQW5kcm9pZFwiXG4gICAgICB9LCByID0gVXRpbHMuZ2V0Rmlyc3RNYXRjaChjb21tb25WZXJzaW9uSWRlbnRpZmllciwgdCkgfHwgVXRpbHMuZ2V0Rmlyc3RNYXRjaCgvKD86U2Ftc3VuZ0Jyb3dzZXIpW1xccy9dKFxcZCsoXFwuP18/XFxkKykrKS9pLCB0KTtcbiAgICAgIHJldHVybiByICYmIChlLnZlcnNpb24gPSByKSwgZTtcbiAgICB9XG4gIH0sXG4gIHtcbiAgICB0ZXN0OiBbL1doYWxlL2ldLFxuICAgIGRlc2NyaWJlKHQpIHtcbiAgICAgIGNvbnN0IGUgPSB7XG4gICAgICAgIG5hbWU6IFwiTkFWRVIgV2hhbGUgQnJvd3NlclwiXG4gICAgICB9LCByID0gVXRpbHMuZ2V0Rmlyc3RNYXRjaChjb21tb25WZXJzaW9uSWRlbnRpZmllciwgdCkgfHwgVXRpbHMuZ2V0Rmlyc3RNYXRjaCgvKD86d2hhbGUpW1xccy9dKFxcZCsoPzpcXC5cXGQrKSspL2ksIHQpO1xuICAgICAgcmV0dXJuIHIgJiYgKGUudmVyc2lvbiA9IHIpLCBlO1xuICAgIH1cbiAgfSxcbiAge1xuICAgIHRlc3Q6IFsvTVpCcm93c2VyL2ldLFxuICAgIGRlc2NyaWJlKHQpIHtcbiAgICAgIGNvbnN0IGUgPSB7XG4gICAgICAgIG5hbWU6IFwiTVogQnJvd3NlclwiXG4gICAgICB9LCByID0gVXRpbHMuZ2V0Rmlyc3RNYXRjaCgvKD86TVpCcm93c2VyKVtcXHMvXShcXGQrKD86XFwuXFxkKykrKS9pLCB0KSB8fCBVdGlscy5nZXRGaXJzdE1hdGNoKGNvbW1vblZlcnNpb25JZGVudGlmaWVyLCB0KTtcbiAgICAgIHJldHVybiByICYmIChlLnZlcnNpb24gPSByKSwgZTtcbiAgICB9XG4gIH0sXG4gIHtcbiAgICB0ZXN0OiBbL2ZvY3VzL2ldLFxuICAgIGRlc2NyaWJlKHQpIHtcbiAgICAgIGNvbnN0IGUgPSB7XG4gICAgICAgIG5hbWU6IFwiRm9jdXNcIlxuICAgICAgfSwgciA9IFV0aWxzLmdldEZpcnN0TWF0Y2goLyg/OmZvY3VzKVtcXHMvXShcXGQrKD86XFwuXFxkKykrKS9pLCB0KSB8fCBVdGlscy5nZXRGaXJzdE1hdGNoKGNvbW1vblZlcnNpb25JZGVudGlmaWVyLCB0KTtcbiAgICAgIHJldHVybiByICYmIChlLnZlcnNpb24gPSByKSwgZTtcbiAgICB9XG4gIH0sXG4gIHtcbiAgICB0ZXN0OiBbL3N3aW5nL2ldLFxuICAgIGRlc2NyaWJlKHQpIHtcbiAgICAgIGNvbnN0IGUgPSB7XG4gICAgICAgIG5hbWU6IFwiU3dpbmdcIlxuICAgICAgfSwgciA9IFV0aWxzLmdldEZpcnN0TWF0Y2goLyg/OnN3aW5nKVtcXHMvXShcXGQrKD86XFwuXFxkKykrKS9pLCB0KSB8fCBVdGlscy5nZXRGaXJzdE1hdGNoKGNvbW1vblZlcnNpb25JZGVudGlmaWVyLCB0KTtcbiAgICAgIHJldHVybiByICYmIChlLnZlcnNpb24gPSByKSwgZTtcbiAgICB9XG4gIH0sXG4gIHtcbiAgICB0ZXN0OiBbL2NvYXN0L2ldLFxuICAgIGRlc2NyaWJlKHQpIHtcbiAgICAgIGNvbnN0IGUgPSB7XG4gICAgICAgIG5hbWU6IFwiT3BlcmEgQ29hc3RcIlxuICAgICAgfSwgciA9IFV0aWxzLmdldEZpcnN0TWF0Y2goY29tbW9uVmVyc2lvbklkZW50aWZpZXIsIHQpIHx8IFV0aWxzLmdldEZpcnN0TWF0Y2goLyg/OmNvYXN0KVtcXHMvXShcXGQrKFxcLj9fP1xcZCspKykvaSwgdCk7XG4gICAgICByZXR1cm4gciAmJiAoZS52ZXJzaW9uID0gciksIGU7XG4gICAgfVxuICB9LFxuICB7XG4gICAgdGVzdDogWy9vcHRcXC9cXGQrKD86Lj9fP1xcZCspKy9pXSxcbiAgICBkZXNjcmliZSh0KSB7XG4gICAgICBjb25zdCBlID0ge1xuICAgICAgICBuYW1lOiBcIk9wZXJhIFRvdWNoXCJcbiAgICAgIH0sIHIgPSBVdGlscy5nZXRGaXJzdE1hdGNoKC8oPzpvcHQpW1xccy9dKFxcZCsoXFwuP18/XFxkKykrKS9pLCB0KSB8fCBVdGlscy5nZXRGaXJzdE1hdGNoKGNvbW1vblZlcnNpb25JZGVudGlmaWVyLCB0KTtcbiAgICAgIHJldHVybiByICYmIChlLnZlcnNpb24gPSByKSwgZTtcbiAgICB9XG4gIH0sXG4gIHtcbiAgICB0ZXN0OiBbL3lhYnJvd3Nlci9pXSxcbiAgICBkZXNjcmliZSh0KSB7XG4gICAgICBjb25zdCBlID0ge1xuICAgICAgICBuYW1lOiBcIllhbmRleCBCcm93c2VyXCJcbiAgICAgIH0sIHIgPSBVdGlscy5nZXRGaXJzdE1hdGNoKC8oPzp5YWJyb3dzZXIpW1xccy9dKFxcZCsoXFwuP18/XFxkKykrKS9pLCB0KSB8fCBVdGlscy5nZXRGaXJzdE1hdGNoKGNvbW1vblZlcnNpb25JZGVudGlmaWVyLCB0KTtcbiAgICAgIHJldHVybiByICYmIChlLnZlcnNpb24gPSByKSwgZTtcbiAgICB9XG4gIH0sXG4gIHtcbiAgICB0ZXN0OiBbL3VjYnJvd3Nlci9pXSxcbiAgICBkZXNjcmliZSh0KSB7XG4gICAgICBjb25zdCBlID0ge1xuICAgICAgICBuYW1lOiBcIlVDIEJyb3dzZXJcIlxuICAgICAgfSwgciA9IFV0aWxzLmdldEZpcnN0TWF0Y2goY29tbW9uVmVyc2lvbklkZW50aWZpZXIsIHQpIHx8IFV0aWxzLmdldEZpcnN0TWF0Y2goLyg/OnVjYnJvd3NlcilbXFxzL10oXFxkKyhcXC4/Xz9cXGQrKSspL2ksIHQpO1xuICAgICAgcmV0dXJuIHIgJiYgKGUudmVyc2lvbiA9IHIpLCBlO1xuICAgIH1cbiAgfSxcbiAge1xuICAgIHRlc3Q6IFsvTWF4dGhvbnxteGlvcy9pXSxcbiAgICBkZXNjcmliZSh0KSB7XG4gICAgICBjb25zdCBlID0ge1xuICAgICAgICBuYW1lOiBcIk1heHRob25cIlxuICAgICAgfSwgciA9IFV0aWxzLmdldEZpcnN0TWF0Y2goY29tbW9uVmVyc2lvbklkZW50aWZpZXIsIHQpIHx8IFV0aWxzLmdldEZpcnN0TWF0Y2goLyg/Ok1heHRob258bXhpb3MpW1xccy9dKFxcZCsoXFwuP18/XFxkKykrKS9pLCB0KTtcbiAgICAgIHJldHVybiByICYmIChlLnZlcnNpb24gPSByKSwgZTtcbiAgICB9XG4gIH0sXG4gIHtcbiAgICB0ZXN0OiBbL2VwaXBoYW55L2ldLFxuICAgIGRlc2NyaWJlKHQpIHtcbiAgICAgIGNvbnN0IGUgPSB7XG4gICAgICAgIG5hbWU6IFwiRXBpcGhhbnlcIlxuICAgICAgfSwgciA9IFV0aWxzLmdldEZpcnN0TWF0Y2goY29tbW9uVmVyc2lvbklkZW50aWZpZXIsIHQpIHx8IFV0aWxzLmdldEZpcnN0TWF0Y2goLyg/OmVwaXBoYW55KVtcXHMvXShcXGQrKFxcLj9fP1xcZCspKykvaSwgdCk7XG4gICAgICByZXR1cm4gciAmJiAoZS52ZXJzaW9uID0gciksIGU7XG4gICAgfVxuICB9LFxuICB7XG4gICAgdGVzdDogWy9wdWZmaW4vaV0sXG4gICAgZGVzY3JpYmUodCkge1xuICAgICAgY29uc3QgZSA9IHtcbiAgICAgICAgbmFtZTogXCJQdWZmaW5cIlxuICAgICAgfSwgciA9IFV0aWxzLmdldEZpcnN0TWF0Y2goY29tbW9uVmVyc2lvbklkZW50aWZpZXIsIHQpIHx8IFV0aWxzLmdldEZpcnN0TWF0Y2goLyg/OnB1ZmZpbilbXFxzL10oXFxkKyhcXC4/Xz9cXGQrKSspL2ksIHQpO1xuICAgICAgcmV0dXJuIHIgJiYgKGUudmVyc2lvbiA9IHIpLCBlO1xuICAgIH1cbiAgfSxcbiAge1xuICAgIHRlc3Q6IFsvc2xlaXBuaXIvaV0sXG4gICAgZGVzY3JpYmUodCkge1xuICAgICAgY29uc3QgZSA9IHtcbiAgICAgICAgbmFtZTogXCJTbGVpcG5pclwiXG4gICAgICB9LCByID0gVXRpbHMuZ2V0Rmlyc3RNYXRjaChjb21tb25WZXJzaW9uSWRlbnRpZmllciwgdCkgfHwgVXRpbHMuZ2V0Rmlyc3RNYXRjaCgvKD86c2xlaXBuaXIpW1xccy9dKFxcZCsoXFwuP18/XFxkKykrKS9pLCB0KTtcbiAgICAgIHJldHVybiByICYmIChlLnZlcnNpb24gPSByKSwgZTtcbiAgICB9XG4gIH0sXG4gIHtcbiAgICB0ZXN0OiBbL2stbWVsZW9uL2ldLFxuICAgIGRlc2NyaWJlKHQpIHtcbiAgICAgIGNvbnN0IGUgPSB7XG4gICAgICAgIG5hbWU6IFwiSy1NZWxlb25cIlxuICAgICAgfSwgciA9IFV0aWxzLmdldEZpcnN0TWF0Y2goY29tbW9uVmVyc2lvbklkZW50aWZpZXIsIHQpIHx8IFV0aWxzLmdldEZpcnN0TWF0Y2goLyg/OmstbWVsZW9uKVtcXHMvXShcXGQrKFxcLj9fP1xcZCspKykvaSwgdCk7XG4gICAgICByZXR1cm4gciAmJiAoZS52ZXJzaW9uID0gciksIGU7XG4gICAgfVxuICB9LFxuICB7XG4gICAgdGVzdDogWy9taWNyb21lc3Nlbmdlci9pXSxcbiAgICBkZXNjcmliZSh0KSB7XG4gICAgICBjb25zdCBlID0ge1xuICAgICAgICBuYW1lOiBcIldlQ2hhdFwiXG4gICAgICB9LCByID0gVXRpbHMuZ2V0Rmlyc3RNYXRjaCgvKD86bWljcm9tZXNzZW5nZXIpW1xccy9dKFxcZCsoXFwuP18/XFxkKykrKS9pLCB0KSB8fCBVdGlscy5nZXRGaXJzdE1hdGNoKGNvbW1vblZlcnNpb25JZGVudGlmaWVyLCB0KTtcbiAgICAgIHJldHVybiByICYmIChlLnZlcnNpb24gPSByKSwgZTtcbiAgICB9XG4gIH0sXG4gIHtcbiAgICB0ZXN0OiBbL3FxYnJvd3Nlci9pXSxcbiAgICBkZXNjcmliZSh0KSB7XG4gICAgICBjb25zdCBlID0ge1xuICAgICAgICBuYW1lOiAvcXFicm93c2VybGl0ZS9pLnRlc3QodCkgPyBcIlFRIEJyb3dzZXIgTGl0ZVwiIDogXCJRUSBCcm93c2VyXCJcbiAgICAgIH0sIHIgPSBVdGlscy5nZXRGaXJzdE1hdGNoKC8oPzpxcWJyb3dzZXJsaXRlfHFxYnJvd3NlcilbL10oXFxkKyhcXC4/Xz9cXGQrKSspL2ksIHQpIHx8IFV0aWxzLmdldEZpcnN0TWF0Y2goY29tbW9uVmVyc2lvbklkZW50aWZpZXIsIHQpO1xuICAgICAgcmV0dXJuIHIgJiYgKGUudmVyc2lvbiA9IHIpLCBlO1xuICAgIH1cbiAgfSxcbiAge1xuICAgIHRlc3Q6IFsvbXNpZXx0cmlkZW50L2ldLFxuICAgIGRlc2NyaWJlKHQpIHtcbiAgICAgIGNvbnN0IGUgPSB7XG4gICAgICAgIG5hbWU6IFwiSW50ZXJuZXQgRXhwbG9yZXJcIlxuICAgICAgfSwgciA9IFV0aWxzLmdldEZpcnN0TWF0Y2goLyg/Om1zaWUgfHJ2OikoXFxkKyhcXC4/Xz9cXGQrKSspL2ksIHQpO1xuICAgICAgcmV0dXJuIHIgJiYgKGUudmVyc2lvbiA9IHIpLCBlO1xuICAgIH1cbiAgfSxcbiAge1xuICAgIHRlc3Q6IFsvXFxzZWRnXFwvL2ldLFxuICAgIGRlc2NyaWJlKHQpIHtcbiAgICAgIGNvbnN0IGUgPSB7XG4gICAgICAgIG5hbWU6IFwiTWljcm9zb2Z0IEVkZ2VcIlxuICAgICAgfSwgciA9IFV0aWxzLmdldEZpcnN0TWF0Y2goL1xcc2VkZ1xcLyhcXGQrKFxcLj9fP1xcZCspKykvaSwgdCk7XG4gICAgICByZXR1cm4gciAmJiAoZS52ZXJzaW9uID0gciksIGU7XG4gICAgfVxuICB9LFxuICB7XG4gICAgdGVzdDogWy9lZGcoW2VhXXxpb3MpL2ldLFxuICAgIGRlc2NyaWJlKHQpIHtcbiAgICAgIGNvbnN0IGUgPSB7XG4gICAgICAgIG5hbWU6IFwiTWljcm9zb2Z0IEVkZ2VcIlxuICAgICAgfSwgciA9IFV0aWxzLmdldFNlY29uZE1hdGNoKC9lZGcoW2VhXXxpb3MpXFwvKFxcZCsoXFwuP18/XFxkKykrKS9pLCB0KTtcbiAgICAgIHJldHVybiByICYmIChlLnZlcnNpb24gPSByKSwgZTtcbiAgICB9XG4gIH0sXG4gIHtcbiAgICB0ZXN0OiBbL3ZpdmFsZGkvaV0sXG4gICAgZGVzY3JpYmUodCkge1xuICAgICAgY29uc3QgZSA9IHtcbiAgICAgICAgbmFtZTogXCJWaXZhbGRpXCJcbiAgICAgIH0sIHIgPSBVdGlscy5nZXRGaXJzdE1hdGNoKC92aXZhbGRpXFwvKFxcZCsoXFwuP18/XFxkKykrKS9pLCB0KTtcbiAgICAgIHJldHVybiByICYmIChlLnZlcnNpb24gPSByKSwgZTtcbiAgICB9XG4gIH0sXG4gIHtcbiAgICB0ZXN0OiBbL3NlYW1vbmtleS9pXSxcbiAgICBkZXNjcmliZSh0KSB7XG4gICAgICBjb25zdCBlID0ge1xuICAgICAgICBuYW1lOiBcIlNlYU1vbmtleVwiXG4gICAgICB9LCByID0gVXRpbHMuZ2V0Rmlyc3RNYXRjaCgvc2VhbW9ua2V5XFwvKFxcZCsoXFwuP18/XFxkKykrKS9pLCB0KTtcbiAgICAgIHJldHVybiByICYmIChlLnZlcnNpb24gPSByKSwgZTtcbiAgICB9XG4gIH0sXG4gIHtcbiAgICB0ZXN0OiBbL3NhaWxmaXNoL2ldLFxuICAgIGRlc2NyaWJlKHQpIHtcbiAgICAgIGNvbnN0IGUgPSB7XG4gICAgICAgIG5hbWU6IFwiU2FpbGZpc2hcIlxuICAgICAgfSwgciA9IFV0aWxzLmdldEZpcnN0TWF0Y2goL3NhaWxmaXNoXFxzP2Jyb3dzZXJcXC8oXFxkKyhcXC5cXGQrKT8pL2ksIHQpO1xuICAgICAgcmV0dXJuIHIgJiYgKGUudmVyc2lvbiA9IHIpLCBlO1xuICAgIH1cbiAgfSxcbiAge1xuICAgIHRlc3Q6IFsvc2lsay9pXSxcbiAgICBkZXNjcmliZSh0KSB7XG4gICAgICBjb25zdCBlID0ge1xuICAgICAgICBuYW1lOiBcIkFtYXpvbiBTaWxrXCJcbiAgICAgIH0sIHIgPSBVdGlscy5nZXRGaXJzdE1hdGNoKC9zaWxrXFwvKFxcZCsoXFwuP18/XFxkKykrKS9pLCB0KTtcbiAgICAgIHJldHVybiByICYmIChlLnZlcnNpb24gPSByKSwgZTtcbiAgICB9XG4gIH0sXG4gIHtcbiAgICB0ZXN0OiBbL3BoYW50b20vaV0sXG4gICAgZGVzY3JpYmUodCkge1xuICAgICAgY29uc3QgZSA9IHtcbiAgICAgICAgbmFtZTogXCJQaGFudG9tSlNcIlxuICAgICAgfSwgciA9IFV0aWxzLmdldEZpcnN0TWF0Y2goL3BoYW50b21qc1xcLyhcXGQrKFxcLj9fP1xcZCspKykvaSwgdCk7XG4gICAgICByZXR1cm4gciAmJiAoZS52ZXJzaW9uID0gciksIGU7XG4gICAgfVxuICB9LFxuICB7XG4gICAgdGVzdDogWy9zbGltZXJqcy9pXSxcbiAgICBkZXNjcmliZSh0KSB7XG4gICAgICBjb25zdCBlID0ge1xuICAgICAgICBuYW1lOiBcIlNsaW1lckpTXCJcbiAgICAgIH0sIHIgPSBVdGlscy5nZXRGaXJzdE1hdGNoKC9zbGltZXJqc1xcLyhcXGQrKFxcLj9fP1xcZCspKykvaSwgdCk7XG4gICAgICByZXR1cm4gciAmJiAoZS52ZXJzaW9uID0gciksIGU7XG4gICAgfVxuICB9LFxuICB7XG4gICAgdGVzdDogWy9ibGFja2JlcnJ5fFxcYmJiXFxkKy9pLCAvcmltXFxzdGFibGV0L2ldLFxuICAgIGRlc2NyaWJlKHQpIHtcbiAgICAgIGNvbnN0IGUgPSB7XG4gICAgICAgIG5hbWU6IFwiQmxhY2tCZXJyeVwiXG4gICAgICB9LCByID0gVXRpbHMuZ2V0Rmlyc3RNYXRjaChjb21tb25WZXJzaW9uSWRlbnRpZmllciwgdCkgfHwgVXRpbHMuZ2V0Rmlyc3RNYXRjaCgvYmxhY2tiZXJyeVtcXGRdK1xcLyhcXGQrKFxcLj9fP1xcZCspKykvaSwgdCk7XG4gICAgICByZXR1cm4gciAmJiAoZS52ZXJzaW9uID0gciksIGU7XG4gICAgfVxuICB9LFxuICB7XG4gICAgdGVzdDogWy8od2VifGhwdylbbzBdcy9pXSxcbiAgICBkZXNjcmliZSh0KSB7XG4gICAgICBjb25zdCBlID0ge1xuICAgICAgICBuYW1lOiBcIldlYk9TIEJyb3dzZXJcIlxuICAgICAgfSwgciA9IFV0aWxzLmdldEZpcnN0TWF0Y2goY29tbW9uVmVyc2lvbklkZW50aWZpZXIsIHQpIHx8IFV0aWxzLmdldEZpcnN0TWF0Y2goL3coPzplYik/W28wXXNicm93c2VyXFwvKFxcZCsoXFwuP18/XFxkKykrKS9pLCB0KTtcbiAgICAgIHJldHVybiByICYmIChlLnZlcnNpb24gPSByKSwgZTtcbiAgICB9XG4gIH0sXG4gIHtcbiAgICB0ZXN0OiBbL2JhZGEvaV0sXG4gICAgZGVzY3JpYmUodCkge1xuICAgICAgY29uc3QgZSA9IHtcbiAgICAgICAgbmFtZTogXCJCYWRhXCJcbiAgICAgIH0sIHIgPSBVdGlscy5nZXRGaXJzdE1hdGNoKC9kb2xmaW5cXC8oXFxkKyhcXC4/Xz9cXGQrKSspL2ksIHQpO1xuICAgICAgcmV0dXJuIHIgJiYgKGUudmVyc2lvbiA9IHIpLCBlO1xuICAgIH1cbiAgfSxcbiAge1xuICAgIHRlc3Q6IFsvdGl6ZW4vaV0sXG4gICAgZGVzY3JpYmUodCkge1xuICAgICAgY29uc3QgZSA9IHtcbiAgICAgICAgbmFtZTogXCJUaXplblwiXG4gICAgICB9LCByID0gVXRpbHMuZ2V0Rmlyc3RNYXRjaCgvKD86dGl6ZW5cXHM/KT9icm93c2VyXFwvKFxcZCsoXFwuP18/XFxkKykrKS9pLCB0KSB8fCBVdGlscy5nZXRGaXJzdE1hdGNoKGNvbW1vblZlcnNpb25JZGVudGlmaWVyLCB0KTtcbiAgICAgIHJldHVybiByICYmIChlLnZlcnNpb24gPSByKSwgZTtcbiAgICB9XG4gIH0sXG4gIHtcbiAgICB0ZXN0OiBbL3F1cHppbGxhL2ldLFxuICAgIGRlc2NyaWJlKHQpIHtcbiAgICAgIGNvbnN0IGUgPSB7XG4gICAgICAgIG5hbWU6IFwiUXVwWmlsbGFcIlxuICAgICAgfSwgciA9IFV0aWxzLmdldEZpcnN0TWF0Y2goLyg/OnF1cHppbGxhKVtcXHMvXShcXGQrKFxcLj9fP1xcZCspKykvaSwgdCkgfHwgVXRpbHMuZ2V0Rmlyc3RNYXRjaChjb21tb25WZXJzaW9uSWRlbnRpZmllciwgdCk7XG4gICAgICByZXR1cm4gciAmJiAoZS52ZXJzaW9uID0gciksIGU7XG4gICAgfVxuICB9LFxuICB7XG4gICAgdGVzdDogWy9maXJlZm94fGljZXdlYXNlbHxmeGlvcy9pXSxcbiAgICBkZXNjcmliZSh0KSB7XG4gICAgICBjb25zdCBlID0ge1xuICAgICAgICBuYW1lOiBcIkZpcmVmb3hcIlxuICAgICAgfSwgciA9IFV0aWxzLmdldEZpcnN0TWF0Y2goLyg/OmZpcmVmb3h8aWNld2Vhc2VsfGZ4aW9zKVtcXHMvXShcXGQrKFxcLj9fP1xcZCspKykvaSwgdCk7XG4gICAgICByZXR1cm4gciAmJiAoZS52ZXJzaW9uID0gciksIGU7XG4gICAgfVxuICB9LFxuICB7XG4gICAgdGVzdDogWy9lbGVjdHJvbi9pXSxcbiAgICBkZXNjcmliZSh0KSB7XG4gICAgICBjb25zdCBlID0ge1xuICAgICAgICBuYW1lOiBcIkVsZWN0cm9uXCJcbiAgICAgIH0sIHIgPSBVdGlscy5nZXRGaXJzdE1hdGNoKC8oPzplbGVjdHJvbilcXC8oXFxkKyhcXC4/Xz9cXGQrKSspL2ksIHQpO1xuICAgICAgcmV0dXJuIHIgJiYgKGUudmVyc2lvbiA9IHIpLCBlO1xuICAgIH1cbiAgfSxcbiAge1xuICAgIHRlc3Q6IFsvTWl1aUJyb3dzZXIvaV0sXG4gICAgZGVzY3JpYmUodCkge1xuICAgICAgY29uc3QgZSA9IHtcbiAgICAgICAgbmFtZTogXCJNaXVpXCJcbiAgICAgIH0sIHIgPSBVdGlscy5nZXRGaXJzdE1hdGNoKC8oPzpNaXVpQnJvd3NlcilbXFxzL10oXFxkKyhcXC4/Xz9cXGQrKSspL2ksIHQpO1xuICAgICAgcmV0dXJuIHIgJiYgKGUudmVyc2lvbiA9IHIpLCBlO1xuICAgIH1cbiAgfSxcbiAge1xuICAgIHRlc3Q6IFsvY2hyb21pdW0vaV0sXG4gICAgZGVzY3JpYmUodCkge1xuICAgICAgY29uc3QgZSA9IHtcbiAgICAgICAgbmFtZTogXCJDaHJvbWl1bVwiXG4gICAgICB9LCByID0gVXRpbHMuZ2V0Rmlyc3RNYXRjaCgvKD86Y2hyb21pdW0pW1xccy9dKFxcZCsoXFwuP18/XFxkKykrKS9pLCB0KSB8fCBVdGlscy5nZXRGaXJzdE1hdGNoKGNvbW1vblZlcnNpb25JZGVudGlmaWVyLCB0KTtcbiAgICAgIHJldHVybiByICYmIChlLnZlcnNpb24gPSByKSwgZTtcbiAgICB9XG4gIH0sXG4gIHtcbiAgICB0ZXN0OiBbL2Nocm9tZXxjcmlvc3xjcm1vL2ldLFxuICAgIGRlc2NyaWJlKHQpIHtcbiAgICAgIGNvbnN0IGUgPSB7XG4gICAgICAgIG5hbWU6IFwiQ2hyb21lXCJcbiAgICAgIH0sIHIgPSBVdGlscy5nZXRGaXJzdE1hdGNoKC8oPzpjaHJvbWV8Y3Jpb3N8Y3JtbylcXC8oXFxkKyhcXC4/Xz9cXGQrKSspL2ksIHQpO1xuICAgICAgcmV0dXJuIHIgJiYgKGUudmVyc2lvbiA9IHIpLCBlO1xuICAgIH1cbiAgfSxcbiAge1xuICAgIHRlc3Q6IFsvR1NBL2ldLFxuICAgIGRlc2NyaWJlKHQpIHtcbiAgICAgIGNvbnN0IGUgPSB7XG4gICAgICAgIG5hbWU6IFwiR29vZ2xlIFNlYXJjaFwiXG4gICAgICB9LCByID0gVXRpbHMuZ2V0Rmlyc3RNYXRjaCgvKD86R1NBKVxcLyhcXGQrKFxcLj9fP1xcZCspKykvaSwgdCk7XG4gICAgICByZXR1cm4gciAmJiAoZS52ZXJzaW9uID0gciksIGU7XG4gICAgfVxuICB9LFxuICB7XG4gICAgdGVzdCh0KSB7XG4gICAgICBjb25zdCBlID0gIXQudGVzdCgvbGlrZSBhbmRyb2lkL2kpLCByID0gdC50ZXN0KC9hbmRyb2lkL2kpO1xuICAgICAgcmV0dXJuIGUgJiYgcjtcbiAgICB9LFxuICAgIGRlc2NyaWJlKHQpIHtcbiAgICAgIGNvbnN0IGUgPSB7XG4gICAgICAgIG5hbWU6IFwiQW5kcm9pZCBCcm93c2VyXCJcbiAgICAgIH0sIHIgPSBVdGlscy5nZXRGaXJzdE1hdGNoKGNvbW1vblZlcnNpb25JZGVudGlmaWVyLCB0KTtcbiAgICAgIHJldHVybiByICYmIChlLnZlcnNpb24gPSByKSwgZTtcbiAgICB9XG4gIH0sXG4gIHtcbiAgICB0ZXN0OiBbL3BsYXlzdGF0aW9uIDQvaV0sXG4gICAgZGVzY3JpYmUodCkge1xuICAgICAgY29uc3QgZSA9IHtcbiAgICAgICAgbmFtZTogXCJQbGF5U3RhdGlvbiA0XCJcbiAgICAgIH0sIHIgPSBVdGlscy5nZXRGaXJzdE1hdGNoKGNvbW1vblZlcnNpb25JZGVudGlmaWVyLCB0KTtcbiAgICAgIHJldHVybiByICYmIChlLnZlcnNpb24gPSByKSwgZTtcbiAgICB9XG4gIH0sXG4gIHtcbiAgICB0ZXN0OiBbL3NhZmFyaXxhcHBsZXdlYmtpdC9pXSxcbiAgICBkZXNjcmliZSh0KSB7XG4gICAgICBjb25zdCBlID0ge1xuICAgICAgICBuYW1lOiBcIlNhZmFyaVwiXG4gICAgICB9LCByID0gVXRpbHMuZ2V0Rmlyc3RNYXRjaChjb21tb25WZXJzaW9uSWRlbnRpZmllciwgdCk7XG4gICAgICByZXR1cm4gciAmJiAoZS52ZXJzaW9uID0gciksIGU7XG4gICAgfVxuICB9LFxuICB7XG4gICAgdGVzdDogWy8uKi9pXSxcbiAgICBkZXNjcmliZSh0KSB7XG4gICAgICBjb25zdCBlID0gL14oLiopXFwvKC4qKSAvLCByID0gL14oLiopXFwvKC4qKVsgXFx0XVxcKCguKikvLCBvID0gdC5zZWFyY2goXCJcXFxcKFwiKSAhPT0gLTEgPyByIDogZTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIG5hbWU6IFV0aWxzLmdldEZpcnN0TWF0Y2gobywgdCksXG4gICAgICAgIHZlcnNpb246IFV0aWxzLmdldFNlY29uZE1hdGNoKG8sIHQpXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXSwgb3NQYXJzZXJzTGlzdCA9IFtcbiAge1xuICAgIHRlc3Q6IFsvUm9rdVxcL0RWUC9dLFxuICAgIGRlc2NyaWJlKHQpIHtcbiAgICAgIGNvbnN0IGUgPSBVdGlscy5nZXRGaXJzdE1hdGNoKC9Sb2t1XFwvRFZQLShcXGQrXFwuXFxkKykvaSwgdCk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBuYW1lOiBPU19NQVAuUm9rdSxcbiAgICAgICAgdmVyc2lvbjogZVxuICAgICAgfTtcbiAgICB9XG4gIH0sXG4gIHtcbiAgICB0ZXN0OiBbL3dpbmRvd3MgcGhvbmUvaV0sXG4gICAgZGVzY3JpYmUodCkge1xuICAgICAgY29uc3QgZSA9IFV0aWxzLmdldEZpcnN0TWF0Y2goL3dpbmRvd3MgcGhvbmUgKD86b3MpP1xccz8oXFxkKyhcXC5cXGQrKSopL2ksIHQpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbmFtZTogT1NfTUFQLldpbmRvd3NQaG9uZSxcbiAgICAgICAgdmVyc2lvbjogZVxuICAgICAgfTtcbiAgICB9XG4gIH0sXG4gIHtcbiAgICB0ZXN0OiBbL3dpbmRvd3MgL2ldLFxuICAgIGRlc2NyaWJlKHQpIHtcbiAgICAgIGNvbnN0IGUgPSBVdGlscy5nZXRGaXJzdE1hdGNoKC9XaW5kb3dzICgoTlR8WFApKCBcXGRcXGQ/LlxcZCk/KS9pLCB0KSwgciA9IFV0aWxzLmdldFdpbmRvd3NWZXJzaW9uTmFtZShlKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIG5hbWU6IE9TX01BUC5XaW5kb3dzLFxuICAgICAgICB2ZXJzaW9uOiBlLFxuICAgICAgICB2ZXJzaW9uTmFtZTogclxuICAgICAgfTtcbiAgICB9XG4gIH0sXG4gIHtcbiAgICB0ZXN0OiBbL01hY2ludG9zaCguKj8pIEZ4aU9TKC4qPylcXC8vXSxcbiAgICBkZXNjcmliZSh0KSB7XG4gICAgICBjb25zdCBlID0ge1xuICAgICAgICBuYW1lOiBPU19NQVAuaU9TXG4gICAgICB9LCByID0gVXRpbHMuZ2V0U2Vjb25kTWF0Y2goLyhWZXJzaW9uXFwvKShcXGRbXFxkLl0rKS8sIHQpO1xuICAgICAgcmV0dXJuIHIgJiYgKGUudmVyc2lvbiA9IHIpLCBlO1xuICAgIH1cbiAgfSxcbiAge1xuICAgIHRlc3Q6IFsvbWFjaW50b3NoL2ldLFxuICAgIGRlc2NyaWJlKHQpIHtcbiAgICAgIGNvbnN0IGUgPSBVdGlscy5nZXRGaXJzdE1hdGNoKC9tYWMgb3MgeCAoXFxkKyhcXC4/Xz9cXGQrKSspL2ksIHQpLnJlcGxhY2UoL1tfXFxzXS9nLCBcIi5cIiksIHIgPSBVdGlscy5nZXRNYWNPU1ZlcnNpb25OYW1lKGUpLCBuID0ge1xuICAgICAgICBuYW1lOiBPU19NQVAuTWFjT1MsXG4gICAgICAgIHZlcnNpb246IGVcbiAgICAgIH07XG4gICAgICByZXR1cm4gciAmJiAobi52ZXJzaW9uTmFtZSA9IHIpLCBuO1xuICAgIH1cbiAgfSxcbiAge1xuICAgIHRlc3Q6IFsvKGlwb2R8aXBob25lfGlwYWQpL2ldLFxuICAgIGRlc2NyaWJlKHQpIHtcbiAgICAgIGNvbnN0IGUgPSBVdGlscy5nZXRGaXJzdE1hdGNoKC9vcyAoXFxkKyhbX1xcc11cXGQrKSopIGxpa2UgbWFjIG9zIHgvaSwgdCkucmVwbGFjZSgvW19cXHNdL2csIFwiLlwiKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIG5hbWU6IE9TX01BUC5pT1MsXG4gICAgICAgIHZlcnNpb246IGVcbiAgICAgIH07XG4gICAgfVxuICB9LFxuICB7XG4gICAgdGVzdCh0KSB7XG4gICAgICBjb25zdCBlID0gIXQudGVzdCgvbGlrZSBhbmRyb2lkL2kpLCByID0gdC50ZXN0KC9hbmRyb2lkL2kpO1xuICAgICAgcmV0dXJuIGUgJiYgcjtcbiAgICB9LFxuICAgIGRlc2NyaWJlKHQpIHtcbiAgICAgIGNvbnN0IGUgPSBVdGlscy5nZXRGaXJzdE1hdGNoKC9hbmRyb2lkW1xccy8tXShcXGQrKFxcLlxcZCspKikvaSwgdCksIHIgPSBVdGlscy5nZXRBbmRyb2lkVmVyc2lvbk5hbWUoZSksIG4gPSB7XG4gICAgICAgIG5hbWU6IE9TX01BUC5BbmRyb2lkLFxuICAgICAgICB2ZXJzaW9uOiBlXG4gICAgICB9O1xuICAgICAgcmV0dXJuIHIgJiYgKG4udmVyc2lvbk5hbWUgPSByKSwgbjtcbiAgICB9XG4gIH0sXG4gIHtcbiAgICB0ZXN0OiBbLyh3ZWJ8aHB3KVtvMF1zL2ldLFxuICAgIGRlc2NyaWJlKHQpIHtcbiAgICAgIGNvbnN0IGUgPSBVdGlscy5nZXRGaXJzdE1hdGNoKC8oPzp3ZWJ8aHB3KVtvMF1zXFwvKFxcZCsoXFwuXFxkKykqKS9pLCB0KSwgciA9IHtcbiAgICAgICAgbmFtZTogT1NfTUFQLldlYk9TXG4gICAgICB9O1xuICAgICAgcmV0dXJuIGUgJiYgZS5sZW5ndGggJiYgKHIudmVyc2lvbiA9IGUpLCByO1xuICAgIH1cbiAgfSxcbiAge1xuICAgIHRlc3Q6IFsvYmxhY2tiZXJyeXxcXGJiYlxcZCsvaSwgL3JpbVxcc3RhYmxldC9pXSxcbiAgICBkZXNjcmliZSh0KSB7XG4gICAgICBjb25zdCBlID0gVXRpbHMuZ2V0Rmlyc3RNYXRjaCgvcmltXFxzdGFibGV0XFxzb3NcXHMoXFxkKyhcXC5cXGQrKSopL2ksIHQpIHx8IFV0aWxzLmdldEZpcnN0TWF0Y2goL2JsYWNrYmVycnlcXGQrXFwvKFxcZCsoW19cXHNdXFxkKykqKS9pLCB0KSB8fCBVdGlscy5nZXRGaXJzdE1hdGNoKC9cXGJiYihcXGQrKS9pLCB0KTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIG5hbWU6IE9TX01BUC5CbGFja0JlcnJ5LFxuICAgICAgICB2ZXJzaW9uOiBlXG4gICAgICB9O1xuICAgIH1cbiAgfSxcbiAge1xuICAgIHRlc3Q6IFsvYmFkYS9pXSxcbiAgICBkZXNjcmliZSh0KSB7XG4gICAgICBjb25zdCBlID0gVXRpbHMuZ2V0Rmlyc3RNYXRjaCgvYmFkYVxcLyhcXGQrKFxcLlxcZCspKikvaSwgdCk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBuYW1lOiBPU19NQVAuQmFkYSxcbiAgICAgICAgdmVyc2lvbjogZVxuICAgICAgfTtcbiAgICB9XG4gIH0sXG4gIHtcbiAgICB0ZXN0OiBbL3RpemVuL2ldLFxuICAgIGRlc2NyaWJlKHQpIHtcbiAgICAgIGNvbnN0IGUgPSBVdGlscy5nZXRGaXJzdE1hdGNoKC90aXplblsvXFxzXShcXGQrKFxcLlxcZCspKikvaSwgdCk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBuYW1lOiBPU19NQVAuVGl6ZW4sXG4gICAgICAgIHZlcnNpb246IGVcbiAgICAgIH07XG4gICAgfVxuICB9LFxuICB7XG4gICAgdGVzdDogWy9saW51eC9pXSxcbiAgICBkZXNjcmliZSgpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIG5hbWU6IE9TX01BUC5MaW51eFxuICAgICAgfTtcbiAgICB9XG4gIH0sXG4gIHtcbiAgICB0ZXN0OiBbL0NyT1MvXSxcbiAgICBkZXNjcmliZSgpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIG5hbWU6IE9TX01BUC5DaHJvbWVPU1xuICAgICAgfTtcbiAgICB9XG4gIH0sXG4gIHtcbiAgICB0ZXN0OiBbL1BsYXlTdGF0aW9uIDQvXSxcbiAgICBkZXNjcmliZSh0KSB7XG4gICAgICBjb25zdCBlID0gVXRpbHMuZ2V0Rmlyc3RNYXRjaCgvUGxheVN0YXRpb24gNFsvXFxzXShcXGQrKFxcLlxcZCspKikvaSwgdCk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBuYW1lOiBPU19NQVAuUGxheVN0YXRpb240LFxuICAgICAgICB2ZXJzaW9uOiBlXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXSwgcGxhdGZvcm1QYXJzZXJzTGlzdCA9IFtcbiAge1xuICAgIHRlc3Q6IFsvZ29vZ2xlYm90L2ldLFxuICAgIGRlc2NyaWJlKCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogXCJib3RcIixcbiAgICAgICAgdmVuZG9yOiBcIkdvb2dsZVwiXG4gICAgICB9O1xuICAgIH1cbiAgfSxcbiAge1xuICAgIHRlc3Q6IFsvaHVhd2VpL2ldLFxuICAgIGRlc2NyaWJlKHQpIHtcbiAgICAgIGNvbnN0IGUgPSBVdGlscy5nZXRGaXJzdE1hdGNoKC8oY2FuLWwwMSkvaSwgdCkgJiYgXCJOb3ZhXCIsIHIgPSB7XG4gICAgICAgIHR5cGU6IFBMQVRGT1JNU19NQVAubW9iaWxlLFxuICAgICAgICB2ZW5kb3I6IFwiSHVhd2VpXCJcbiAgICAgIH07XG4gICAgICByZXR1cm4gZSAmJiAoci5tb2RlbCA9IGUpLCByO1xuICAgIH1cbiAgfSxcbiAge1xuICAgIHRlc3Q6IFsvbmV4dXNcXHMqKD86N3w4fDl8MTApLiovaV0sXG4gICAgZGVzY3JpYmUoKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiBQTEFURk9STVNfTUFQLnRhYmxldCxcbiAgICAgICAgdmVuZG9yOiBcIk5leHVzXCJcbiAgICAgIH07XG4gICAgfVxuICB9LFxuICB7XG4gICAgdGVzdDogWy9pcGFkL2ldLFxuICAgIGRlc2NyaWJlKCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogUExBVEZPUk1TX01BUC50YWJsZXQsXG4gICAgICAgIHZlbmRvcjogXCJBcHBsZVwiLFxuICAgICAgICBtb2RlbDogXCJpUGFkXCJcbiAgICAgIH07XG4gICAgfVxuICB9LFxuICB7XG4gICAgdGVzdDogWy9NYWNpbnRvc2goLio/KSBGeGlPUyguKj8pXFwvL10sXG4gICAgZGVzY3JpYmUoKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiBQTEFURk9STVNfTUFQLnRhYmxldCxcbiAgICAgICAgdmVuZG9yOiBcIkFwcGxlXCIsXG4gICAgICAgIG1vZGVsOiBcImlQYWRcIlxuICAgICAgfTtcbiAgICB9XG4gIH0sXG4gIHtcbiAgICB0ZXN0OiBbL2tmdHQgYnVpbGQvaV0sXG4gICAgZGVzY3JpYmUoKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiBQTEFURk9STVNfTUFQLnRhYmxldCxcbiAgICAgICAgdmVuZG9yOiBcIkFtYXpvblwiLFxuICAgICAgICBtb2RlbDogXCJLaW5kbGUgRmlyZSBIRCA3XCJcbiAgICAgIH07XG4gICAgfVxuICB9LFxuICB7XG4gICAgdGVzdDogWy9zaWxrL2ldLFxuICAgIGRlc2NyaWJlKCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogUExBVEZPUk1TX01BUC50YWJsZXQsXG4gICAgICAgIHZlbmRvcjogXCJBbWF6b25cIlxuICAgICAgfTtcbiAgICB9XG4gIH0sXG4gIHtcbiAgICB0ZXN0OiBbL3RhYmxldCg/ISBwYykvaV0sXG4gICAgZGVzY3JpYmUoKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiBQTEFURk9STVNfTUFQLnRhYmxldFxuICAgICAgfTtcbiAgICB9XG4gIH0sXG4gIHtcbiAgICB0ZXN0KHQpIHtcbiAgICAgIGNvbnN0IGUgPSB0LnRlc3QoL2lwb2R8aXBob25lL2kpLCByID0gdC50ZXN0KC9saWtlIChpcG9kfGlwaG9uZSkvaSk7XG4gICAgICByZXR1cm4gZSAmJiAhcjtcbiAgICB9LFxuICAgIGRlc2NyaWJlKHQpIHtcbiAgICAgIGNvbnN0IGUgPSBVdGlscy5nZXRGaXJzdE1hdGNoKC8oaXBvZHxpcGhvbmUpL2ksIHQpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogUExBVEZPUk1TX01BUC5tb2JpbGUsXG4gICAgICAgIHZlbmRvcjogXCJBcHBsZVwiLFxuICAgICAgICBtb2RlbDogZVxuICAgICAgfTtcbiAgICB9XG4gIH0sXG4gIHtcbiAgICB0ZXN0OiBbL25leHVzXFxzKlswLTZdLiovaSwgL2dhbGF4eSBuZXh1cy9pXSxcbiAgICBkZXNjcmliZSgpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6IFBMQVRGT1JNU19NQVAubW9iaWxlLFxuICAgICAgICB2ZW5kb3I6IFwiTmV4dXNcIlxuICAgICAgfTtcbiAgICB9XG4gIH0sXG4gIHtcbiAgICB0ZXN0OiBbL1teLV1tb2JpL2ldLFxuICAgIGRlc2NyaWJlKCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogUExBVEZPUk1TX01BUC5tb2JpbGVcbiAgICAgIH07XG4gICAgfVxuICB9LFxuICB7XG4gICAgdGVzdCh0KSB7XG4gICAgICByZXR1cm4gdC5nZXRCcm93c2VyTmFtZSghMCkgPT09IFwiYmxhY2tiZXJyeVwiO1xuICAgIH0sXG4gICAgZGVzY3JpYmUoKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiBQTEFURk9STVNfTUFQLm1vYmlsZSxcbiAgICAgICAgdmVuZG9yOiBcIkJsYWNrQmVycnlcIlxuICAgICAgfTtcbiAgICB9XG4gIH0sXG4gIHtcbiAgICB0ZXN0KHQpIHtcbiAgICAgIHJldHVybiB0LmdldEJyb3dzZXJOYW1lKCEwKSA9PT0gXCJiYWRhXCI7XG4gICAgfSxcbiAgICBkZXNjcmliZSgpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6IFBMQVRGT1JNU19NQVAubW9iaWxlXG4gICAgICB9O1xuICAgIH1cbiAgfSxcbiAge1xuICAgIHRlc3QodCkge1xuICAgICAgcmV0dXJuIHQuZ2V0QnJvd3Nlck5hbWUoKSA9PT0gXCJ3aW5kb3dzIHBob25lXCI7XG4gICAgfSxcbiAgICBkZXNjcmliZSgpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6IFBMQVRGT1JNU19NQVAubW9iaWxlLFxuICAgICAgICB2ZW5kb3I6IFwiTWljcm9zb2Z0XCJcbiAgICAgIH07XG4gICAgfVxuICB9LFxuICB7XG4gICAgdGVzdCh0KSB7XG4gICAgICBjb25zdCBlID0gTnVtYmVyKFN0cmluZyh0LmdldE9TVmVyc2lvbigpKS5zcGxpdChcIi5cIilbMF0pO1xuICAgICAgcmV0dXJuIHQuZ2V0T1NOYW1lKCEwKSA9PT0gXCJhbmRyb2lkXCIgJiYgZSA+PSAzO1xuICAgIH0sXG4gICAgZGVzY3JpYmUoKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiBQTEFURk9STVNfTUFQLnRhYmxldFxuICAgICAgfTtcbiAgICB9XG4gIH0sXG4gIHtcbiAgICB0ZXN0KHQpIHtcbiAgICAgIHJldHVybiB0LmdldE9TTmFtZSghMCkgPT09IFwiYW5kcm9pZFwiO1xuICAgIH0sXG4gICAgZGVzY3JpYmUoKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiBQTEFURk9STVNfTUFQLm1vYmlsZVxuICAgICAgfTtcbiAgICB9XG4gIH0sXG4gIHtcbiAgICB0ZXN0KHQpIHtcbiAgICAgIHJldHVybiB0LmdldE9TTmFtZSghMCkgPT09IFwibWFjb3NcIjtcbiAgICB9LFxuICAgIGRlc2NyaWJlKCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogUExBVEZPUk1TX01BUC5kZXNrdG9wLFxuICAgICAgICB2ZW5kb3I6IFwiQXBwbGVcIlxuICAgICAgfTtcbiAgICB9XG4gIH0sXG4gIHtcbiAgICB0ZXN0KHQpIHtcbiAgICAgIHJldHVybiB0LmdldE9TTmFtZSghMCkgPT09IFwid2luZG93c1wiO1xuICAgIH0sXG4gICAgZGVzY3JpYmUoKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiBQTEFURk9STVNfTUFQLmRlc2t0b3BcbiAgICAgIH07XG4gICAgfVxuICB9LFxuICB7XG4gICAgdGVzdCh0KSB7XG4gICAgICByZXR1cm4gdC5nZXRPU05hbWUoITApID09PSBcImxpbnV4XCI7XG4gICAgfSxcbiAgICBkZXNjcmliZSgpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6IFBMQVRGT1JNU19NQVAuZGVza3RvcFxuICAgICAgfTtcbiAgICB9XG4gIH0sXG4gIHtcbiAgICB0ZXN0KHQpIHtcbiAgICAgIHJldHVybiB0LmdldE9TTmFtZSghMCkgPT09IFwicGxheXN0YXRpb24gNFwiO1xuICAgIH0sXG4gICAgZGVzY3JpYmUoKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiBQTEFURk9STVNfTUFQLnR2XG4gICAgICB9O1xuICAgIH1cbiAgfSxcbiAge1xuICAgIHRlc3QodCkge1xuICAgICAgcmV0dXJuIHQuZ2V0T1NOYW1lKCEwKSA9PT0gXCJyb2t1XCI7XG4gICAgfSxcbiAgICBkZXNjcmliZSgpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6IFBMQVRGT1JNU19NQVAudHZcbiAgICAgIH07XG4gICAgfVxuICB9XG5dLCBlbmdpbmVzUGFyc2Vyc0xpc3QgPSBbXG4gIHtcbiAgICB0ZXN0KHQpIHtcbiAgICAgIHJldHVybiB0LmdldEJyb3dzZXJOYW1lKCEwKSA9PT0gXCJtaWNyb3NvZnQgZWRnZVwiO1xuICAgIH0sXG4gICAgZGVzY3JpYmUodCkge1xuICAgICAgaWYgKC9cXHNlZGdcXC8vaS50ZXN0KHQpKVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIG5hbWU6IEVOR0lORV9NQVAuQmxpbmtcbiAgICAgICAgfTtcbiAgICAgIGNvbnN0IHIgPSBVdGlscy5nZXRGaXJzdE1hdGNoKC9lZGdlXFwvKFxcZCsoXFwuP18/XFxkKykrKS9pLCB0KTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIG5hbWU6IEVOR0lORV9NQVAuRWRnZUhUTUwsXG4gICAgICAgIHZlcnNpb246IHJcbiAgICAgIH07XG4gICAgfVxuICB9LFxuICB7XG4gICAgdGVzdDogWy90cmlkZW50L2ldLFxuICAgIGRlc2NyaWJlKHQpIHtcbiAgICAgIGNvbnN0IGUgPSB7XG4gICAgICAgIG5hbWU6IEVOR0lORV9NQVAuVHJpZGVudFxuICAgICAgfSwgciA9IFV0aWxzLmdldEZpcnN0TWF0Y2goL3RyaWRlbnRcXC8oXFxkKyhcXC4/Xz9cXGQrKSspL2ksIHQpO1xuICAgICAgcmV0dXJuIHIgJiYgKGUudmVyc2lvbiA9IHIpLCBlO1xuICAgIH1cbiAgfSxcbiAge1xuICAgIHRlc3QodCkge1xuICAgICAgcmV0dXJuIHQudGVzdCgvcHJlc3RvL2kpO1xuICAgIH0sXG4gICAgZGVzY3JpYmUodCkge1xuICAgICAgY29uc3QgZSA9IHtcbiAgICAgICAgbmFtZTogRU5HSU5FX01BUC5QcmVzdG9cbiAgICAgIH0sIHIgPSBVdGlscy5nZXRGaXJzdE1hdGNoKC9wcmVzdG9cXC8oXFxkKyhcXC4/Xz9cXGQrKSspL2ksIHQpO1xuICAgICAgcmV0dXJuIHIgJiYgKGUudmVyc2lvbiA9IHIpLCBlO1xuICAgIH1cbiAgfSxcbiAge1xuICAgIHRlc3QodCkge1xuICAgICAgY29uc3QgZSA9IHQudGVzdCgvZ2Vja28vaSksIHIgPSB0LnRlc3QoL2xpa2UgZ2Vja28vaSk7XG4gICAgICByZXR1cm4gZSAmJiAhcjtcbiAgICB9LFxuICAgIGRlc2NyaWJlKHQpIHtcbiAgICAgIGNvbnN0IGUgPSB7XG4gICAgICAgIG5hbWU6IEVOR0lORV9NQVAuR2Vja29cbiAgICAgIH0sIHIgPSBVdGlscy5nZXRGaXJzdE1hdGNoKC9nZWNrb1xcLyhcXGQrKFxcLj9fP1xcZCspKykvaSwgdCk7XG4gICAgICByZXR1cm4gciAmJiAoZS52ZXJzaW9uID0gciksIGU7XG4gICAgfVxuICB9LFxuICB7XG4gICAgdGVzdDogWy8oYXBwbGUpP3dlYmtpdFxcLzUzN1xcLjM2L2ldLFxuICAgIGRlc2NyaWJlKCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbmFtZTogRU5HSU5FX01BUC5CbGlua1xuICAgICAgfTtcbiAgICB9XG4gIH0sXG4gIHtcbiAgICB0ZXN0OiBbLyhhcHBsZSk/d2Via2l0L2ldLFxuICAgIGRlc2NyaWJlKHQpIHtcbiAgICAgIGNvbnN0IGUgPSB7XG4gICAgICAgIG5hbWU6IEVOR0lORV9NQVAuV2ViS2l0XG4gICAgICB9LCByID0gVXRpbHMuZ2V0Rmlyc3RNYXRjaCgvd2Via2l0XFwvKFxcZCsoXFwuP18/XFxkKykrKS9pLCB0KTtcbiAgICAgIHJldHVybiByICYmIChlLnZlcnNpb24gPSByKSwgZTtcbiAgICB9XG4gIH1cbl07XG5jbGFzcyBQYXJzZXIge1xuICBjb25zdHJ1Y3RvcihlLCByID0gITEpIHtcbiAgICBpZiAoZSA9PSBudWxsIHx8IGUgPT09IFwiXCIpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVc2VyQWdlbnQgcGFyYW1ldGVyIGNhbid0IGJlIGVtcHR5XCIpO1xuICAgIHRoaXMuX3VhID0gZSwgdGhpcy5wYXJzZWRSZXN1bHQgPSB7fSwgciAhPT0gITAgJiYgdGhpcy5wYXJzZSgpO1xuICB9XG4gIGdldFVBKCkge1xuICAgIHJldHVybiB0aGlzLl91YTtcbiAgfVxuICB0ZXN0KGUpIHtcbiAgICByZXR1cm4gZS50ZXN0KHRoaXMuX3VhKTtcbiAgfVxuICBwYXJzZUJyb3dzZXIoKSB7XG4gICAgdGhpcy5wYXJzZWRSZXN1bHQuYnJvd3NlciA9IHt9O1xuICAgIGNvbnN0IGUgPSBVdGlscy5maW5kKGJyb3dzZXJzTGlzdCwgKHIpID0+IHtcbiAgICAgIGlmICh0eXBlb2Ygci50ZXN0ID09IFwiZnVuY3Rpb25cIilcbiAgICAgICAgcmV0dXJuIHIudGVzdCh0aGlzKTtcbiAgICAgIGlmIChyLnRlc3QgaW5zdGFuY2VvZiBBcnJheSlcbiAgICAgICAgcmV0dXJuIHIudGVzdC5zb21lKChuKSA9PiB0aGlzLnRlc3QobikpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQnJvd3NlcidzIHRlc3QgZnVuY3Rpb24gaXMgbm90IHZhbGlkXCIpO1xuICAgIH0pO1xuICAgIHJldHVybiBlICYmICh0aGlzLnBhcnNlZFJlc3VsdC5icm93c2VyID0gZS5kZXNjcmliZSh0aGlzLmdldFVBKCkpKSwgdGhpcy5wYXJzZWRSZXN1bHQuYnJvd3NlcjtcbiAgfVxuICBnZXRCcm93c2VyKCkge1xuICAgIHJldHVybiB0aGlzLnBhcnNlZFJlc3VsdC5icm93c2VyID8gdGhpcy5wYXJzZWRSZXN1bHQuYnJvd3NlciA6IHRoaXMucGFyc2VCcm93c2VyKCk7XG4gIH1cbiAgZ2V0QnJvd3Nlck5hbWUoZSkge1xuICAgIHJldHVybiBlID8gU3RyaW5nKHRoaXMuZ2V0QnJvd3NlcigpLm5hbWUpLnRvTG93ZXJDYXNlKCkgfHwgXCJcIiA6IHRoaXMuZ2V0QnJvd3NlcigpLm5hbWUgfHwgXCJcIjtcbiAgfVxuICBnZXRCcm93c2VyVmVyc2lvbigpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRCcm93c2VyKCkudmVyc2lvbjtcbiAgfVxuICBnZXRPUygpIHtcbiAgICByZXR1cm4gdGhpcy5wYXJzZWRSZXN1bHQub3MgPyB0aGlzLnBhcnNlZFJlc3VsdC5vcyA6IHRoaXMucGFyc2VPUygpO1xuICB9XG4gIHBhcnNlT1MoKSB7XG4gICAgdGhpcy5wYXJzZWRSZXN1bHQub3MgPSB7fTtcbiAgICBjb25zdCBlID0gVXRpbHMuZmluZChvc1BhcnNlcnNMaXN0LCAocikgPT4ge1xuICAgICAgaWYgKHR5cGVvZiByLnRlc3QgPT0gXCJmdW5jdGlvblwiKVxuICAgICAgICByZXR1cm4gci50ZXN0KHRoaXMpO1xuICAgICAgaWYgKHIudGVzdCBpbnN0YW5jZW9mIEFycmF5KVxuICAgICAgICByZXR1cm4gci50ZXN0LnNvbWUoKG4pID0+IHRoaXMudGVzdChuKSk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJCcm93c2VyJ3MgdGVzdCBmdW5jdGlvbiBpcyBub3QgdmFsaWRcIik7XG4gICAgfSk7XG4gICAgcmV0dXJuIGUgJiYgKHRoaXMucGFyc2VkUmVzdWx0Lm9zID0gZS5kZXNjcmliZSh0aGlzLmdldFVBKCkpKSwgdGhpcy5wYXJzZWRSZXN1bHQub3M7XG4gIH1cbiAgZ2V0T1NOYW1lKGUpIHtcbiAgICBjb25zdCB7IG5hbWU6IHIgfSA9IHRoaXMuZ2V0T1MoKTtcbiAgICByZXR1cm4gZSA/IFN0cmluZyhyKS50b0xvd2VyQ2FzZSgpIHx8IFwiXCIgOiByIHx8IFwiXCI7XG4gIH1cbiAgZ2V0T1NWZXJzaW9uKCkge1xuICAgIHJldHVybiB0aGlzLmdldE9TKCkudmVyc2lvbjtcbiAgfVxuICBnZXRQbGF0Zm9ybSgpIHtcbiAgICByZXR1cm4gdGhpcy5wYXJzZWRSZXN1bHQucGxhdGZvcm0gPyB0aGlzLnBhcnNlZFJlc3VsdC5wbGF0Zm9ybSA6IHRoaXMucGFyc2VQbGF0Zm9ybSgpO1xuICB9XG4gIGdldFBsYXRmb3JtVHlwZShlID0gITEpIHtcbiAgICBjb25zdCB7IHR5cGU6IHIgfSA9IHRoaXMuZ2V0UGxhdGZvcm0oKTtcbiAgICByZXR1cm4gZSA/IFN0cmluZyhyKS50b0xvd2VyQ2FzZSgpIHx8IFwiXCIgOiByIHx8IFwiXCI7XG4gIH1cbiAgcGFyc2VQbGF0Zm9ybSgpIHtcbiAgICB0aGlzLnBhcnNlZFJlc3VsdC5wbGF0Zm9ybSA9IHt9O1xuICAgIGNvbnN0IGUgPSBVdGlscy5maW5kKHBsYXRmb3JtUGFyc2Vyc0xpc3QsIChyKSA9PiB7XG4gICAgICBpZiAodHlwZW9mIHIudGVzdCA9PSBcImZ1bmN0aW9uXCIpXG4gICAgICAgIHJldHVybiByLnRlc3QodGhpcyk7XG4gICAgICBpZiAoci50ZXN0IGluc3RhbmNlb2YgQXJyYXkpXG4gICAgICAgIHJldHVybiByLnRlc3Quc29tZSgobikgPT4gdGhpcy50ZXN0KG4pKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkJyb3dzZXIncyB0ZXN0IGZ1bmN0aW9uIGlzIG5vdCB2YWxpZFwiKTtcbiAgICB9KTtcbiAgICByZXR1cm4gZSAmJiAodGhpcy5wYXJzZWRSZXN1bHQucGxhdGZvcm0gPSBlLmRlc2NyaWJlKHRoaXMuZ2V0VUEoKSkpLCB0aGlzLnBhcnNlZFJlc3VsdC5wbGF0Zm9ybTtcbiAgfVxuICBnZXRFbmdpbmUoKSB7XG4gICAgcmV0dXJuIHRoaXMucGFyc2VkUmVzdWx0LmVuZ2luZSA/IHRoaXMucGFyc2VkUmVzdWx0LmVuZ2luZSA6IHRoaXMucGFyc2VFbmdpbmUoKTtcbiAgfVxuICBnZXRFbmdpbmVOYW1lKGUpIHtcbiAgICByZXR1cm4gZSA/IFN0cmluZyh0aGlzLmdldEVuZ2luZSgpLm5hbWUpLnRvTG93ZXJDYXNlKCkgfHwgXCJcIiA6IHRoaXMuZ2V0RW5naW5lKCkubmFtZSB8fCBcIlwiO1xuICB9XG4gIHBhcnNlRW5naW5lKCkge1xuICAgIHRoaXMucGFyc2VkUmVzdWx0LmVuZ2luZSA9IHt9O1xuICAgIGNvbnN0IGUgPSBVdGlscy5maW5kKGVuZ2luZXNQYXJzZXJzTGlzdCwgKHIpID0+IHtcbiAgICAgIGlmICh0eXBlb2Ygci50ZXN0ID09IFwiZnVuY3Rpb25cIilcbiAgICAgICAgcmV0dXJuIHIudGVzdCh0aGlzKTtcbiAgICAgIGlmIChyLnRlc3QgaW5zdGFuY2VvZiBBcnJheSlcbiAgICAgICAgcmV0dXJuIHIudGVzdC5zb21lKChuKSA9PiB0aGlzLnRlc3QobikpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQnJvd3NlcidzIHRlc3QgZnVuY3Rpb24gaXMgbm90IHZhbGlkXCIpO1xuICAgIH0pO1xuICAgIHJldHVybiBlICYmICh0aGlzLnBhcnNlZFJlc3VsdC5lbmdpbmUgPSBlLmRlc2NyaWJlKHRoaXMuZ2V0VUEoKSkpLCB0aGlzLnBhcnNlZFJlc3VsdC5lbmdpbmU7XG4gIH1cbiAgcGFyc2UoKSB7XG4gICAgcmV0dXJuIHRoaXMucGFyc2VCcm93c2VyKCksIHRoaXMucGFyc2VPUygpLCB0aGlzLnBhcnNlUGxhdGZvcm0oKSwgdGhpcy5wYXJzZUVuZ2luZSgpLCB0aGlzO1xuICB9XG4gIGdldFJlc3VsdCgpIHtcbiAgICByZXR1cm4gVXRpbHMuYXNzaWduKHt9LCB0aGlzLnBhcnNlZFJlc3VsdCk7XG4gIH1cbiAgc2F0aXNmaWVzKGUpIHtcbiAgICBjb25zdCByID0ge307XG4gICAgbGV0IG4gPSAwO1xuICAgIGNvbnN0IG8gPSB7fTtcbiAgICBsZXQgaSA9IDA7XG4gICAgaWYgKE9iamVjdC5rZXlzKGUpLmZvckVhY2goKGEpID0+IHtcbiAgICAgIGNvbnN0IGMgPSBlW2FdO1xuICAgICAgdHlwZW9mIGMgPT0gXCJzdHJpbmdcIiA/IChvW2FdID0gYywgaSArPSAxKSA6IHR5cGVvZiBjID09IFwib2JqZWN0XCIgJiYgKHJbYV0gPSBjLCBuICs9IDEpO1xuICAgIH0pLCBuID4gMCkge1xuICAgICAgY29uc3QgYSA9IE9iamVjdC5rZXlzKHIpLCBjID0gVXRpbHMuZmluZChhLCAodSkgPT4gdGhpcy5pc09TKHUpKTtcbiAgICAgIGlmIChjKSB7XG4gICAgICAgIGNvbnN0IHUgPSB0aGlzLnNhdGlzZmllcyhyW2NdKTtcbiAgICAgICAgaWYgKHUgIT09IHZvaWQgMClcbiAgICAgICAgICByZXR1cm4gdTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGwgPSBVdGlscy5maW5kKFxuICAgICAgICBhLFxuICAgICAgICAodSkgPT4gdGhpcy5pc1BsYXRmb3JtKHUpXG4gICAgICApO1xuICAgICAgaWYgKGwpIHtcbiAgICAgICAgY29uc3QgdSA9IHRoaXMuc2F0aXNmaWVzKHJbbF0pO1xuICAgICAgICBpZiAodSAhPT0gdm9pZCAwKVxuICAgICAgICAgIHJldHVybiB1O1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoaSA+IDApIHtcbiAgICAgIGNvbnN0IGEgPSBPYmplY3Qua2V5cyhvKSwgYyA9IFV0aWxzLmZpbmQoYSwgKGwpID0+IHRoaXMuaXNCcm93c2VyKGwsICEwKSk7XG4gICAgICBpZiAoYyAhPT0gdm9pZCAwKVxuICAgICAgICByZXR1cm4gdGhpcy5jb21wYXJlVmVyc2lvbihvW2NdKTtcbiAgICB9XG4gIH1cbiAgaXNCcm93c2VyKGUsIHIgPSAhMSkge1xuICAgIGNvbnN0IG4gPSB0aGlzLmdldEJyb3dzZXJOYW1lKCkudG9Mb3dlckNhc2UoKTtcbiAgICBsZXQgbyA9IGUudG9Mb3dlckNhc2UoKTtcbiAgICBjb25zdCBpID0gVXRpbHMuZ2V0QnJvd3NlclR5cGVCeUFsaWFzKG8pO1xuICAgIHJldHVybiByICYmIGkgJiYgKG8gPSBpLnRvTG93ZXJDYXNlKCkpLCBvID09PSBuO1xuICB9XG4gIGNvbXBhcmVWZXJzaW9uKGUpIHtcbiAgICBsZXQgciA9IFswXSwgbiA9IGUsIG8gPSAhMTtcbiAgICBjb25zdCBpID0gdGhpcy5nZXRCcm93c2VyVmVyc2lvbigpO1xuICAgIGlmICh0eXBlb2YgaSA9PSBcInN0cmluZ1wiKVxuICAgICAgcmV0dXJuIGVbMF0gPT09IFwiPlwiIHx8IGVbMF0gPT09IFwiPFwiID8gKG4gPSBlLnN1YnN0cigxKSwgZVsxXSA9PT0gXCI9XCIgPyAobyA9ICEwLCBuID0gZS5zdWJzdHIoMikpIDogciA9IFtdLCBlWzBdID09PSBcIj5cIiA/IHIucHVzaCgxKSA6IHIucHVzaCgtMSkpIDogZVswXSA9PT0gXCI9XCIgPyBuID0gZS5zdWJzdHIoMSkgOiBlWzBdID09PSBcIn5cIiAmJiAobyA9ICEwLCBuID0gZS5zdWJzdHIoMSkpLCByLmluZGV4T2YoXG4gICAgICAgIFV0aWxzLmNvbXBhcmVWZXJzaW9ucyhpLCBuLCBvKVxuICAgICAgKSA+IC0xO1xuICB9XG4gIGlzT1MoZSkge1xuICAgIHJldHVybiB0aGlzLmdldE9TTmFtZSghMCkgPT09IFN0cmluZyhlKS50b0xvd2VyQ2FzZSgpO1xuICB9XG4gIGlzUGxhdGZvcm0oZSkge1xuICAgIHJldHVybiB0aGlzLmdldFBsYXRmb3JtVHlwZSghMCkgPT09IFN0cmluZyhlKS50b0xvd2VyQ2FzZSgpO1xuICB9XG4gIGlzRW5naW5lKGUpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRFbmdpbmVOYW1lKCEwKSA9PT0gU3RyaW5nKGUpLnRvTG93ZXJDYXNlKCk7XG4gIH1cbiAgaXMoZSwgciA9ICExKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNCcm93c2VyKGUsIHIpIHx8IHRoaXMuaXNPUyhlKSB8fCB0aGlzLmlzUGxhdGZvcm0oZSk7XG4gIH1cbiAgc29tZShlID0gW10pIHtcbiAgICByZXR1cm4gZS5zb21lKChyKSA9PiB0aGlzLmlzKHIpKTtcbiAgfVxufVxuLyohXG4gKiBCb3dzZXIgLSBhIGJyb3dzZXIgZGV0ZWN0b3JcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9sYW5jZWRpa3Nvbi9ib3dzZXJcbiAqIE1JVCBMaWNlbnNlIHwgKGMpIER1c3RpbiBEaWF6IDIwMTItMjAxNVxuICogTUlUIExpY2Vuc2UgfCAoYykgRGVuaXMgRGVtY2hlbmtvIDIwMTUtMjAxOVxuICovXG5jbGFzcyBCb3dzZXIge1xuICBzdGF0aWMgZ2V0UGFyc2VyKGUsIHIgPSAhMSkge1xuICAgIGlmICh0eXBlb2YgZSAhPSBcInN0cmluZ1wiKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVXNlckFnZW50IHNob3VsZCBiZSBhIHN0cmluZ1wiKTtcbiAgICByZXR1cm4gbmV3IFBhcnNlcihlLCByKTtcbiAgfVxuICBzdGF0aWMgcGFyc2UoZSkge1xuICAgIHJldHVybiBuZXcgUGFyc2VyKGUpLmdldFJlc3VsdCgpO1xuICB9XG4gIHN0YXRpYyBnZXQgQlJPV1NFUl9NQVAoKSB7XG4gICAgcmV0dXJuIEJST1dTRVJfTUFQO1xuICB9XG4gIHN0YXRpYyBnZXQgRU5HSU5FX01BUCgpIHtcbiAgICByZXR1cm4gRU5HSU5FX01BUDtcbiAgfVxuICBzdGF0aWMgZ2V0IE9TX01BUCgpIHtcbiAgICByZXR1cm4gT1NfTUFQO1xuICB9XG4gIHN0YXRpYyBnZXQgUExBVEZPUk1TX01BUCgpIHtcbiAgICByZXR1cm4gUExBVEZPUk1TX01BUDtcbiAgfVxufVxudmFyIFogPSBPYmplY3QuZGVmaW5lUHJvcGVydHksIFggPSAodCwgZSwgcikgPT4gZSBpbiB0ID8gWih0LCBlLCB7IGVudW1lcmFibGU6ICEwLCBjb25maWd1cmFibGU6ICEwLCB3cml0YWJsZTogITAsIHZhbHVlOiByIH0pIDogdFtlXSA9IHIsIEYgPSAodCwgZSwgcikgPT4gKFgodCwgdHlwZW9mIGUgIT0gXCJzeW1ib2xcIiA/IGUgKyBcIlwiIDogZSwgciksIHIpLCBCID0gKHQsIGUsIHIpID0+IHtcbiAgaWYgKCFlLmhhcyh0KSlcbiAgICB0aHJvdyBUeXBlRXJyb3IoXCJDYW5ub3QgXCIgKyByKTtcbn0sIE4gPSAodCwgZSwgcikgPT4gKEIodCwgZSwgXCJyZWFkIGZyb20gcHJpdmF0ZSBmaWVsZFwiKSwgciA/IHIuY2FsbCh0KSA6IGUuZ2V0KHQpKSwgTCA9ICh0LCBlLCByKSA9PiB7XG4gIGlmIChlLmhhcyh0KSlcbiAgICB0aHJvdyBUeXBlRXJyb3IoXCJDYW5ub3QgYWRkIHRoZSBzYW1lIHByaXZhdGUgbWVtYmVyIG1vcmUgdGhhbiBvbmNlXCIpO1xuICBlIGluc3RhbmNlb2YgV2Vha1NldCA/IGUuYWRkKHQpIDogZS5zZXQodCwgcik7XG59LCAkID0gKHQsIGUsIHIsIG4pID0+IChCKHQsIGUsIFwid3JpdGUgdG8gcHJpdmF0ZSBmaWVsZFwiKSwgbiA/IG4uY2FsbCh0LCByKSA6IGUuc2V0KHQsIHIpLCByKSwgUCA9ICh0LCBlLCByKSA9PiAoQih0LCBlLCBcImFjY2VzcyBwcml2YXRlIG1ldGhvZFwiKSwgcik7XG5jb25zdCBnZW5lcmF0ZVVJRCA9ICgpID0+IGAke0RhdGUubm93KCl9LSR7TWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogODk5OTk5OTk5OTk5OSkgKyAxZTEyfWAsIHNodWZmbGUgPSAodCkgPT4ge1xuICBmb3IgKGxldCBlID0gdC5sZW5ndGggLSAxOyBlID4gMDsgZS0tKSB7XG4gICAgY29uc3QgciA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChlICsgMSkpO1xuICAgIFt0W2VdLCB0W3JdXSA9IFt0W3JdLCB0W2VdXTtcbiAgfVxuICByZXR1cm4gdDtcbn07XG5mdW5jdGlvbiBwaXBlJDEoLi4udCkge1xuICByZXR1cm4gKGUpID0+IHQucmVkdWNlKChyLCBuKSA9PiByLnRoZW4obiksIFByb21pc2UucmVzb2x2ZShlKSk7XG59XG5jb25zdCBzc3JTYWZlV2luZG93ID0gdHlwZW9mIHdpbmRvdyA8IFwidVwiID8gd2luZG93IDogbnVsbDtcbnZhciBZLCBWO1xuY29uc3Qgd2FsbGV0cyA9IFtcbiAge1xuICAgIGlkOiBcImFyZ2VudFhcIixcbiAgICBuYW1lOiBcIkFyZ2VudCBYXCIsXG4gICAgaWNvbjogXCJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LENqeHpkbWNnZDJsa2RHZzlJalF3SWlCb1pXbG5hSFE5SWpNMklpQjJhV1YzUW05NFBTSXdJREFnTkRBZ016WWlJR1pwYkd3OUltNXZibVVpSUhodGJHNXpQU0pvZEhSd09pOHZkM2QzTG5jekxtOXlaeTh5TURBd0wzTjJaeUkrQ2p4d1lYUm9JR1E5SWsweU5DNDNOVGd5SUMwekxqazNNelkwWlMwd04wZ3hOQzQyTWpNNFF6RTBMakk0TlRFZ0xUTXVPVGN6TmpSbExUQTNJREUwTGpBeE16Z2dNQzR5T0RFeE56Z2dNVFF1TURBMk5DQXdMall6TURZNE0wTXhNeTQ0TURFM0lERXdMalExTkRrZ09DNDRNakl6TkNBeE9TNDNOemt5SURBdU1qVXhPRGt6SURJMkxqTTRNemRETFRBdU1ESXdNakEwTmlBeU5pNDFPVE16SUMwd0xqQTRNakU1TkRZZ01qWXVPVGczTWlBd0xqRXhOamN6TkNBeU55NHlOekE1VERZdU1EUTJNak1nTXpVdU56TTBRell1TWpRM09UWWdNell1TURJeUlEWXVOalF3T1RrZ016WXVNRGczSURZdU9URTNOallnTXpVdU9EYzFORU14TWk0eU56WTFJRE14TGpjM01qZ2dNVFl1TlRnMk9TQXlOaTQ0TWpNMklERTVMalk1TVNBeU1TNHpNemhETWpJdU56azFNU0F5Tmk0NE1qTTJJREkzTGpFd05UY2dNekV1TnpjeU9DQXpNaTQwTmpRMklETTFMamczTlRSRE16SXVOelF4SURNMkxqQTROeUF6TXk0eE16UXhJRE0yTGpBeU1pQXpNeTR6TXpZeElETTFMamN6TkV3ek9TNHlOalUySURJM0xqSTNNRGxETXprdU5EWTBNaUF5Tmk0NU9EY3lJRE01TGpRd01qSWdNall1TlRrek15QXpPUzR4TXpBMElESTJMak00TXpkRE16QXVOVFU1TnlBeE9TNDNOemt5SURJMUxqVTRNRFFnTVRBdU5EVTBPU0F5TlM0ek56VTVJREF1TmpNd05qZ3pRekkxTGpNMk9EVWdNQzR5T0RFeE56Z2dNalV1TURrMk9TQXRNeTQ1TnpNMk5HVXRNRGNnTWpRdU56VTRNaUF0TXk0NU56TTJOR1V0TURkYUlpQm1hV3hzUFNJalJrWTROelZDSWk4K0Nqd3ZjM1puUGdvPVwiLFxuICAgIGRvd25sb2Fkczoge1xuICAgICAgY2hyb21lOiBcImh0dHBzOi8vY2hyb21lLmdvb2dsZS5jb20vd2Vic3RvcmUvZGV0YWlsL2FyZ2VudC14LXN0YXJrbmV0LXdhbGxldC9kbGNvYnBqaWlncGlrb29ib2htYWJlaGhtaGZvb2RiYlwiLFxuICAgICAgZmlyZWZveDogXCJodHRwczovL2FkZG9ucy5tb3ppbGxhLm9yZy9lbi1VUy9maXJlZm94L2FkZG9uL2FyZ2VudC14XCIsXG4gICAgICBlZGdlOiBcImh0dHBzOi8vbWljcm9zb2Z0ZWRnZS5taWNyb3NvZnQuY29tL2FkZG9ucy9kZXRhaWwvYXJnZW50LXgvYWpjaWNqbGtpYm9sYmVhYWFnZWpmaG5vZm9nb2NnY2pcIlxuICAgIH1cbiAgfSxcbiAge1xuICAgIGlkOiBcImJyYWF2b3NcIixcbiAgICBuYW1lOiBcIkJyYWF2b3NcIixcbiAgICBpY29uOiBcImRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEhOMlp5QjNhV1IwYUQwaU1UQXdJaUJvWldsbmFIUTlJakV3TUNJZ2RtbGxkMEp2ZUQwaU1DQXdJREV3TUNBeE1EQWlJR1pwYkd3OUltNXZibVVpSUhodGJHNXpQU0pvZEhSd09pOHZkM2QzTG5jekxtOXlaeTh5TURBd0wzTjJaeUkrQ2lBZ0lDQThjR0YwYUFvZ0lDQWdJQ0FnSUdROUlrMDJNaTQzTURVZ01UTXVPVEV4TmtNMk1pNDRNelU1SURFMExqRXpNek1nTmpJdU5qWXlNU0F4TkM0ME1EY2dOakl1TkRBek9TQXhOQzQwTURkRE5UY3VNVGd3TnlBeE5DNDBNRGNnTlRJdU9UTTBPQ0F4T0M0MU5ESTNJRFV5TGpnek5URWdNak11TmpneE4wTTFNUzR3TkRZMUlESXpMak0wTnpjZ05Ea3VNVGt6TXlBeU15NHpNakkySURRM0xqTTJNallnTWpNdU5qTXhNVU0wTnk0eU16WXhJREU0TGpVeE5UWWdORE11TURBd09TQXhOQzQwTURjZ016Y3VOemswT0NBeE5DNDBNRGRETXpjdU5UTTJOU0F4TkM0ME1EY2dNemN1TXpZeU5TQXhOQzR4TXpNeElETTNMalE1TXpVZ01UTXVPVEV4TWtNME1DNHdNakUzSURrdU5qSTRNRGtnTkRRdU56SXdOQ0EyTGpjMUlEVXdMakE1T1RFZ05pNDNOVU0xTlM0ME56Z3hJRFl1TnpVZ05qQXVNVGMyT1NBNUxqWXlPREkySURZeUxqY3dOU0F4TXk0NU1URTJXaUlLSUNBZ0lDQWdJQ0JtYVd4c1BTSjFjbXdvSTNCaGFXNTBNRjlzYVc1bFlYSmZNemN5WHpRd01qVTVLU0lnTHo0S0lDQWdJRHh3WVhSb0NpQWdJQ0FnSUNBZ1pEMGlUVGM0TGpjMk1EWWdORFV1T0RjeE9FTTRNQzR5TnpJMUlEUTJMak15T1RjZ09ERXVOekF5TlNBME5TNHdNRFUxSURneExqRTNNVFFnTkRNdU5USXlNa00zTmk0ME1UTTNJRE13TGpJek16UWdOakV1TXpreE1TQXlOQzQ0TURNNUlEVXdMakF5TnpjZ01qUXVPREF6T1VNek9DNDJORFF5SURJMExqZ3dNemtnTWpNdU1qZzJPQ0F6TUM0ME1EY2dNVGd1T0RjMU5DQTBNeTQxT1RFeVF6RTRMak00TWpRZ05EVXVNRFkwTlNBeE9TNDRNRGd6SURRMkxqTTBORFlnTWpFdU1qazNPQ0EwTlM0NE9EZ3hURFE0TGpnM01pQXpOeTQwTXpneFF6UTVMalV6TXpFZ016Y3VNak0xTlNBMU1DNHlNems1SURNM0xqSXpORFFnTlRBdU9UQXhOeUF6Tnk0ME16UTRURGM0TGpjMk1EWWdORFV1T0RjeE9Gb2lDaUFnSUNBZ0lDQWdabWxzYkQwaWRYSnNLQ053WVdsdWRERmZiR2x1WldGeVh6TTNNbDgwTURJMU9Ta2lJQzgrQ2lBZ0lDQThjR0YwYUFvZ0lDQWdJQ0FnSUdROUlrMHhPQzQ0TVRNeUlEUTRMakUzTURkTU5EZ3VPRGt6TlNBek9TNHdORGN5UXpRNUxqVTFNRFlnTXpndU9EUTNPQ0ExTUM0eU5USTBJRE00TGpnME56TWdOVEF1T1RBNU9DQXpPUzR3TkRVMlREZ3hMakUzT0RFZ05EZ3VNVGMxTWtNNE15NDJPVEV5SURRNExqa3pNeklnT0RVdU5ERXhJRFV4TGpJME9ETWdPRFV1TkRFeElEVXpMamczTXpWV09ERXVNakl6TTBNNE5TNHlPVFEwSURnM0xqZzVPVEVnTnprdU1qazNOeUE1TXk0eU5TQTNNaTQyTWpRMUlEa3pMakkxU0RZeExqVTBNRFpETmpBdU5EUTBPU0E1TXk0eU5TQTFPUzQxTlRjM0lEa3lMak0yTXpjZ05Ua3VOVFUzTnlBNU1TNHlOamhXT0RFdU5qYzRPVU0xT1M0MU5UYzNJRGMzTGprd016RWdOakV1TnpreU1TQTNOQzQwT0RVMUlEWTFMakkwT1RnZ056SXVPVGN5T1VNMk9TNDRPRFE1SURjd0xqazBOVFFnTnpVdU16WTRNU0EyT0M0eU1ESTRJRGMyTGpNNU9UUWdOakl1TmprNU1rTTNOaTQzTXpJeklEWXdMamt5TWprZ056VXVOVGMwTVNBMU9TNHlNRGswSURjekxqZ3dNalFnTlRndU9EVTNNME0yT1M0ek1qSTJJRFUzTGprMk5qY2dOalF1TXpVMk1pQTFPQzR6TVRBM0lEWXdMakUxTmpRZ05qQXVNVGc1TTBNMU5TNHpPRGczSURZeUxqTXlNVGtnTlRRdU1UUXhOU0EyTlM0NE5qazBJRFV6TGpZM09UY2dOekF1TmpNek4wdzFNeTR4TWpBeElEYzFMamMyTmpKRE5USXVPVFE1TVNBM055NHpNelE1SURVeExqUTNPRFVnTnpndU5UTTJOaUEwT1M0NU1ERTBJRGM0TGpVek5qWkRORGd1TWpZNU9TQTNPQzQxTXpZMklEUTNMakEwTmpVZ056Y3VNamswSURRMkxqZzJPVFlnTnpVdU5qY3hNa3cwTmk0ek1qQTBJRGN3TGpZek16ZERORFV1T1RJME9TQTJOaTQxTlRJNUlEUTFMakl3TnprZ05qSXVOVGc0TnlBME1DNDVPRGsxSURZd0xqY3dNVGhETXpZdU1UYzNOaUExT0M0MU5EazBJRE14TGpNME1Ua2dOVGN1T0RNME55QXlOaTR4T1RjMklEVTRMamcxTnpORE1qUXVOREkySURVNUxqSXdPVFFnTWpNdU1qWTNPQ0EyTUM0NU1qSTVJREl6TGpZd01EY2dOakl1TmprNU1rTXlOQzQyTkRFZ05qZ3VNalV3TnlBek1DNHdPREV5SURjd0xqa3pNRFVnTXpRdU56VXdNeUEzTWk0NU56STVRek00TGpJd09DQTNOQzQwT0RVMUlEUXdMalEwTWpRZ056Y3VPVEF6TVNBME1DNDBOREkwSURneExqWTNPRGxXT1RFdU1qWTJNME0wTUM0ME5ESTBJRGt5TGpNMk1pQXpPUzQxTlRVMUlEa3pMakkxSURNNExqUTFPVGtnT1RNdU1qVklNamN1TXpjMU5rTXlNQzQzTURJMElEa3pMakkxSURFMExqY3dOVGNnT0RjdU9EazVNU0F4TkM0MU9Ea3hJRGd4TGpJeU16TldOVE11T0RZMk0wTXhOQzQxT0RreElEVXhMakkwTkRZZ01UWXVNekEwTlNBME9DNDVNekUySURFNExqZ3hNeklnTkRndU1UY3dOMW9pQ2lBZ0lDQWdJQ0FnWm1sc2JEMGlkWEpzS0NOd1lXbHVkREpmYkdsdVpXRnlYek0zTWw4ME1ESTFPU2tpSUM4K0NpQWdJQ0E4WkdWbWN6NEtJQ0FnSUNBZ0lDQThiR2x1WldGeVIzSmhaR2xsYm5RZ2FXUTlJbkJoYVc1ME1GOXNhVzVsWVhKZk16Y3lYelF3TWpVNUlpQjRNVDBpTkRrdU16QTFOeUlnZVRFOUlqSXVNRGM1SWlCNE1qMGlPREF1TXpZeU55SWdlVEk5SWprekxqWTFPVGNpQ2lBZ0lDQWdJQ0FnSUNBZ0lHZHlZV1JwWlc1MFZXNXBkSE05SW5WelpYSlRjR0ZqWlU5dVZYTmxJajRLSUNBZ0lDQWdJQ0FnSUNBZ1BITjBiM0FnYzNSdmNDMWpiMnh2Y2owaUkwWTFSRFExUlNJZ0x6NEtJQ0FnSUNBZ0lDQWdJQ0FnUEhOMGIzQWdiMlptYzJWMFBTSXhJaUJ6ZEc5d0xXTnZiRzl5UFNJalJrWTVOakF3SWlBdlBnb2dJQ0FnSUNBZ0lEd3ZiR2x1WldGeVIzSmhaR2xsYm5RK0NpQWdJQ0FnSUNBZ1BHeHBibVZoY2tkeVlXUnBaVzUwSUdsa1BTSndZV2x1ZERGZmJHbHVaV0Z5WHpNM01sODBNREkxT1NJZ2VERTlJalE1TGpNd05UY2lJSGt4UFNJeUxqQTNPU0lnZURJOUlqZ3dMak0yTWpjaUlIa3lQU0k1TXk0Mk5UazNJZ29nSUNBZ0lDQWdJQ0FnSUNCbmNtRmthV1Z1ZEZWdWFYUnpQU0oxYzJWeVUzQmhZMlZQYmxWelpTSStDaUFnSUNBZ0lDQWdJQ0FnSUR4emRHOXdJSE4wYjNBdFkyOXNiM0k5SWlOR05VUTBOVVVpSUM4K0NpQWdJQ0FnSUNBZ0lDQWdJRHh6ZEc5d0lHOW1abk5sZEQwaU1TSWdjM1J2Y0MxamIyeHZjajBpSTBaR09UWXdNQ0lnTHo0S0lDQWdJQ0FnSUNBOEwyeHBibVZoY2tkeVlXUnBaVzUwUGdvZ0lDQWdJQ0FnSUR4c2FXNWxZWEpIY21Ga2FXVnVkQ0JwWkQwaWNHRnBiblF5WDJ4cGJtVmhjbDh6TnpKZk5EQXlOVGtpSUhneFBTSTBPUzR6TURVM0lpQjVNVDBpTWk0d056a2lJSGd5UFNJNE1DNHpOakkzSWlCNU1qMGlPVE11TmpVNU55SUtJQ0FnSUNBZ0lDQWdJQ0FnWjNKaFpHbGxiblJWYm1sMGN6MGlkWE5sY2xOd1lXTmxUMjVWYzJVaVBnb2dJQ0FnSUNBZ0lDQWdJQ0E4YzNSdmNDQnpkRzl3TFdOdmJHOXlQU0lqUmpWRU5EVkZJaUF2UGdvZ0lDQWdJQ0FnSUNBZ0lDQThjM1J2Y0NCdlptWnpaWFE5SWpFaUlITjBiM0F0WTI5c2IzSTlJaU5HUmprMk1EQWlJQzgrQ2lBZ0lDQWdJQ0FnUEM5c2FXNWxZWEpIY21Ga2FXVnVkRDRLSUNBZ0lEd3ZaR1ZtY3o0S1BDOXpkbWMrXCIsXG4gICAgZG93bmxvYWRzOiB7XG4gICAgICBjaHJvbWU6IFwiaHR0cHM6Ly9jaHJvbWUuZ29vZ2xlLmNvbS93ZWJzdG9yZS9kZXRhaWwvYnJhYXZvcy13YWxsZXQvam5sZ2FtZWNicG1iYWpqZmhtbW1saGVqa2VtZWpkbWFcIixcbiAgICAgIGZpcmVmb3g6IFwiaHR0cHM6Ly9hZGRvbnMubW96aWxsYS5vcmcvZW4tVVMvZmlyZWZveC9hZGRvbi9icmFhdm9zLXdhbGxldFwiLFxuICAgICAgZWRnZTogXCJodHRwczovL21pY3Jvc29mdGVkZ2UubWljcm9zb2Z0LmNvbS9hZGRvbnMvZGV0YWlsL2JyYWF2b3Mtd2FsbGV0L2hra3BqZWhoY25oZ2VmaGJkY2dma2VlZ2dscGpjaGRjXCIsXG4gICAgICBpb3M6IGBodHRwczovL2xpbmsuYnJhYXZvcy5hcHAvZGFwcC8keyhZID0gc3NyU2FmZVdpbmRvdyA9PSBudWxsID8gdm9pZCAwIDogc3NyU2FmZVdpbmRvdy5sb2NhdGlvbikgPT0gbnVsbCA/IHZvaWQgMCA6IFkuaG9zdH1gLFxuICAgICAgYW5kcm9pZDogYGh0dHBzOi8vbGluay5icmFhdm9zLmFwcC9kYXBwLyR7KFYgPSBzc3JTYWZlV2luZG93ID09IG51bGwgPyB2b2lkIDAgOiBzc3JTYWZlV2luZG93LmxvY2F0aW9uKSA9PSBudWxsID8gdm9pZCAwIDogVi5ob3N0fWBcbiAgICB9XG4gIH0sXG4gIHtcbiAgICBpZDogXCJva3h3YWxsZXRcIixcbiAgICBuYW1lOiBcIk9LWCBXYWxsZXRcIixcbiAgICBpY29uOiBcImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBREFBQUFBd0NBWUFBQUJYQXZtSEFBQUFDWEJJV1hNQUFBc1RBQUFMRXdFQW1wd1lBQUFBQVhOU1IwSUFyczRjNlFBQUFBUm5RVTFCQUFDeGp3djhZUVVBQUFKRFNVUkJWSGdCN1pxOWp0cEFFTWZIbGhFZ1FMaWlvWEVrb0FHRUN3b0t4TWNUUkhtQzVFM0lveVJQa1BBRWtJN3VuSlltVGdFRlRZd0E4YTNOVEtTY0xuQ0hONmM5cjFlM1AybGxXUXk3TS9zMUd2MXR3Q1AwZWozN2REcTl4K1p1dDF0M3Q5dlpqREVISWlTUlNQZzRacERMNWZ4a012bjFjRGg4bTB3bWZ1Z2ZPNTNPb0ZRcS9jcm44d3hmWTlFeW1ReXJWQ3FNZkh2U2NaeDFwOWxzM3BGeFhCeS9iS2xVaXBHUHJWYkx1UXFBZnNDbGlxM3psMEg4NHp3dGpRck93NE10MVc2M1A1THZCbTJkK1h6K1l6cWRna3FVeStXZ1dDeStNYy9uYzI4Mm00RnFMQllMKzNnOGZqRHhlbnE3Mld4QU5aYkxKZUExM3pEWDY3VURpb0w1eWJYd2FmTVl1NjRMdG4zYmREd2VRNVI5N2ZkN0d5aEJRTWlweDRQT2VFREhJdTJMZkRkQklHR3oraEo5Q1ExQUJqb0EyZWdBWlBNNkFnaUNBRVFoc2kvQzRqSHlQQS82L2Y1TkczS3MyKzNDWURDNGFUY2NEcm42b2pHNTRNbkV2RzAwR29WbVdMSVJOWjd3VEN3REhZQnNkQUN5MFFISWhpdVJFVHhsSUNXcE1NaEdaSG1xUzhxSDZKTHlHZWdBWktNRGtJMHVLZjhYNFNXbGFabytQcDFiUnJ3bEpVOFpLTEl2VWpLaDBXaVEzc1JVYk5WcTljNUViZXc3S0VvMm0vMXA0ako0cUFtRGFxRFFCemo1WHlpQVQ0VkNRZXpKaWdBVStJRFUrejh2SkZuR1dlQytiS1FWLzVWWjcxRlY2TDdQQTNnZzN0WHJkUStEZ0xoQys3NVdxM25vNjlQM01DME5GUXB4MmxMMDRRbDlnSEsxYlJEanNTQkl2U2NCbkRUazFXcmxHSVpCb3JJREVZSmorcmhkZ25RNjdWbVdSZTB6bHBsWGw4MXZjeUV0MHJTb1lEVUFBQUFBU1VWT1JLNUNZSUk9XCIsXG4gICAgZG93bmxvYWRzOiB7XG4gICAgICBjaHJvbWU6IFwiaHR0cHM6Ly9jaHJvbWUuZ29vZ2xlLmNvbS93ZWJzdG9yZS9kZXRhaWwvbWNvaGlsbmNiZmFoYm1nZGprYnBlbWNjaWlvbGdjZ2VcIixcbiAgICAgIGZpcmVmb3g6IFwiaHR0cHM6Ly9hZGRvbnMubW96aWxsYS5vcmcvZW4tVVMvZmlyZWZveC9hZGRvbi9va2V4d2FsbGV0XCIsXG4gICAgICBlZGdlOiBcImh0dHBzOi8vbWljcm9zb2Z0ZWRnZS5taWNyb3NvZnQuY29tL2FkZG9ucy9kZXRhaWwvJUU2JUFDJUE3JUU2JTk4JTkzLXdlYjMtJUU5JTkyJUIxJUU1JThDJTg1L3BicGprY2xkamlmZmNoZ2JibmRtaG9qaWFjYmdmbGhhXCIsXG4gICAgICBzYWZhcmk6IFwiaHR0cHM6Ly9hcHBzLmFwcGxlLmNvbS91cy9hcHAvb2t4LXdhbGxldC9pZDY0NjM3OTc4MjVcIlxuICAgIH1cbiAgfSxcbiAge1xuICAgIGlkOiBcIm1ldGFtYXNrXCIsXG4gICAgbmFtZTogXCJNZXRhTWFza1wiLFxuICAgIGljb246IFwiZGF0YTppbWFnZS9zdmcreG1sO3V0Zjg7YmFzZTY0LFBITjJaeUI0Yld4dWN6MGlhSFIwY0RvdkwzZDNkeTUzTXk1dmNtY3ZNakF3TUM5emRtY2lJSGRwWkhSb1BTSXlNVElpSUdobGFXZG9kRDBpTVRnNUlpQjJhV1YzUW05NFBTSXdJREFnTWpFeUlERTRPU0krUEdjZ1ptbHNiRDBpYm05dVpTSWdabWxzYkMxeWRXeGxQU0psZG1WdWIyUmtJajQ4Y0c5c2VXZHZiaUJtYVd4c1BTSWpRMFJDUkVJeUlpQndiMmx1ZEhNOUlqWXdMamMxSURFM015NHlOU0E0T0M0ek1UTWdNVGd3TGpVMk15QTRPQzR6TVRNZ01UY3hJRGt3TGpVMk15QXhOamd1TnpVZ01UQTJMak14TXlBeE5qZ3VOelVnTVRBMkxqTXhNeUF4T0RBZ01UQTJMak14TXlBeE9EY3VPRGMxSURnNUxqUXpPQ0F4T0RjdU9EYzFJRFk0TGpZeU5TQXhOemd1T0RjMUlpOCtQSEJ2YkhsbmIyNGdabWxzYkQwaUkwTkVRa1JDTWlJZ2NHOXBiblJ6UFNJeE1EVXVOelVnTVRjekxqSTFJREV6TWk0M05TQXhPREF1TlRZeklERXpNaTQzTlNBeE56RWdNVE0xSURFMk9DNDNOU0F4TlRBdU56VWdNVFk0TGpjMUlERTFNQzQzTlNBeE9EQWdNVFV3TGpjMUlERTROeTQ0TnpVZ01UTXpMamczTlNBeE9EY3VPRGMxSURFeE15NHdOak1nTVRjNExqZzNOU0lnZEhKaGJuTm1iM0p0UFNKdFlYUnlhWGdvTFRFZ01DQXdJREVnTWpVMkxqVWdNQ2tpTHo0OGNHOXNlV2R2YmlCbWFXeHNQU0lqTXprek9UTTVJaUJ3YjJsdWRITTlJamt3TGpVMk15QXhOVEl1TkRNNElEZzRMak14TXlBeE56RWdPVEV1TVRJMUlERTJPQzQzTlNBeE1qQXVNemMxSURFMk9DNDNOU0F4TWpNdU56VWdNVGN4SURFeU1TNDFJREUxTWk0ME16Z2dNVEUzSURFME9TNDJNalVnT1RRdU5TQXhOVEF1TVRnNElpOCtQSEJ2YkhsbmIyNGdabWxzYkQwaUkwWTRPVU16TlNJZ2NHOXBiblJ6UFNJM05TNHpOelVnTWpjZ09EZ3VPRGMxSURVNExqVWdPVFV1TURZeklERTFNQzR4T0RnZ01URTNJREUxTUM0eE9EZ2dNVEl6TGpjMUlEVTRMalVnTVRNMkxqRXlOU0F5TnlJdlBqeHdiMng1WjI5dUlHWnBiR3c5SWlOR09EbEVNelVpSUhCdmFXNTBjejBpTVRZdU16RXpJRGsyTGpFNE9DQXVOVFl6SURFME1TNDNOU0F6T1M0NU16Z2dNVE01TGpVZ05qVXVNalVnTVRNNUxqVWdOalV1TWpVZ01URTVMamd4TXlBMk5DNHhNalVnTnprdU16RXpJRFU0TGpVZ09ETXVPREV6SWk4K1BIQnZiSGxuYjI0Z1ptbHNiRDBpSTBRNE4wTXpNQ0lnY0c5cGJuUnpQU0kwTmk0eE1qVWdNVEF4TGpJMUlEa3lMakkxSURFd01pNHpOelVnT0RjdU1UZzRJREV5TmlBMk5TNHlOU0F4TWpBdU16YzFJaTgrUEhCdmJIbG5iMjRnWm1sc2JEMGlJMFZCT0VRelFTSWdjRzlwYm5SelBTSTBOaTR4TWpVZ01UQXhMamd4TXlBMk5TNHlOU0F4TVRrdU9ERXpJRFkxTGpJMUlERXpOeTQ0TVRNaUx6NDhjRzlzZVdkdmJpQm1hV3hzUFNJalJqZzVSRE0xSWlCd2IybHVkSE05SWpZMUxqSTFJREV5TUM0ek56VWdPRGN1TnpVZ01USTJJRGsxTGpBMk15QXhOVEF1TVRnNElEa3dJREUxTXlBMk5TNHlOU0F4TXpndU16YzFJaTgrUEhCdmJIbG5iMjRnWm1sc2JEMGlJMFZDT0VZek5TSWdjRzlwYm5SelBTSTJOUzR5TlNBeE16Z3VNemMxSURZd0xqYzFJREUzTXk0eU5TQTVNQzQxTmpNZ01UVXlMalF6T0NJdlBqeHdiMng1WjI5dUlHWnBiR3c5SWlORlFUaEZNMEVpSUhCdmFXNTBjejBpT1RJdU1qVWdNVEF5TGpNM05TQTVOUzR3TmpNZ01UVXdMakU0T0NBNE5pNDJNalVnTVRJMUxqY3hPU0l2UGp4d2IyeDVaMjl1SUdacGJHdzlJaU5FT0RkRE16QWlJSEJ2YVc1MGN6MGlNemt1TXpjMUlERXpPQzQ1TXpnZ05qVXVNalVnTVRNNExqTTNOU0EyTUM0M05TQXhOek11TWpVaUx6NDhjRzlzZVdkdmJpQm1hV3hzUFNJalJVSTRSak0xSWlCd2IybHVkSE05SWpFeUxqa3pPQ0F4T0RndU5ETTRJRFl3TGpjMUlERTNNeTR5TlNBek9TNHpOelVnTVRNNExqa3pPQ0F1TlRZeklERTBNUzQzTlNJdlBqeHdiMng1WjI5dUlHWnBiR3c5SWlORk9EZ3lNVVVpSUhCdmFXNTBjejBpT0RndU9EYzFJRFU0TGpVZ05qUXVOamc0SURjNExqYzFJRFEyTGpFeU5TQXhNREV1TWpVZ09USXVNalVnTVRBeUxqa3pPQ0l2UGp4d2IyeDVaMjl1SUdacGJHdzlJaU5FUmtORlF6TWlJSEJ2YVc1MGN6MGlOakF1TnpVZ01UY3pMakkxSURrd0xqVTJNeUF4TlRJdU5ETTRJRGc0TGpNeE15QXhOekF1TkRNNElEZzRMak14TXlBeE9EQXVOVFl6SURZNExqQTJNeUF4TnpZdU5qSTFJaTgrUEhCdmJIbG5iMjRnWm1sc2JEMGlJMFJHUTBWRE15SWdjRzlwYm5SelBTSXhNakV1TlNBeE56TXVNalVnTVRVd0xqYzFJREUxTWk0ME16Z2dNVFE0TGpVZ01UY3dMalF6T0NBeE5EZ3VOU0F4T0RBdU5UWXpJREV5T0M0eU5TQXhOell1TmpJMUlpQjBjbUZ1YzJadmNtMDlJbTFoZEhKcGVDZ3RNU0F3SURBZ01TQXlOekl1TWpVZ01Da2lMejQ4Y0c5c2VXZHZiaUJtYVd4c1BTSWpNemt6T1RNNUlpQndiMmx1ZEhNOUlqY3dMak14TXlBeE1USXVOU0EyTkM0eE1qVWdNVEkxTGpRek9DQTROaTR3TmpNZ01URTVMamd4TXlJZ2RISmhibk5tYjNKdFBTSnRZWFJ5YVhnb0xURWdNQ0F3SURFZ01UVXdMakU0T0NBd0tTSXZQanh3YjJ4NVoyOXVJR1pwYkd3OUlpTkZPRGhHTXpVaUlIQnZhVzUwY3owaU1USXVNemMxSUM0MU5qTWdPRGd1T0RjMUlEVTRMalVnTnpVdU9UTTRJREkzSWk4K1BIQmhkR2dnWm1sc2JEMGlJemhGTlVFek1DSWdaRDBpVFRFeUxqTTNOVEF3TURJc01DNDFOakkxTURBd01EZ2dUREl1TWpVd01EQXdNRE1zTXpFdU5UQXdNREF3TlNCTU55NDROelV3TURBeE1pdzJOUzR5TlRBd01ERWdURE11T1RNM05UQXdNRFlzTmpjdU5UQXdNREF4SUV3NUxqVTJNalV3TURFMExEY3lMalUyTWpVZ1REVXVNRFl5TlRBd01EZ3NOell1TlRBd01EQXhNU0JNTVRFdU1qVXNPREl1TVRJMU1EQXhNaUJNTnk0ek1USTFNREF4TVN3NE5TNDFNREF3TURFeklFd3hOaTR6TVRJMU1EQXlMRGsyTGpjMU1EQXdNVFFnVERVNExqVXdNREF3TURrc09ETXVPREV5TlRBeE1pQkROemt1TVRJMU1EQXhNaXcyTnk0ek1USTFNREEwSURnNUxqSTFNREF3TVRNc05UZ3VPRGMxTURBd015QTRPQzQ0TnpVd01ERXpMRFU0TGpVd01EQXdNRGtnUXpnNExqVXdNREF3TVRNc05UZ3VNVEkxTURBd09TQTJNeTR3TURBd01EQTVMRE00TGpneE1qVXdNRFlnTVRJdU16YzFNREF3TWl3d0xqVTJNalV3TURBd09DQmFJaTgrUEdjZ2RISmhibk5tYjNKdFBTSnRZWFJ5YVhnb0xURWdNQ0F3SURFZ01qRXhMalVnTUNraVBqeHdiMng1WjI5dUlHWnBiR3c5SWlOR09EbEVNelVpSUhCdmFXNTBjejBpTVRZdU16RXpJRGsyTGpFNE9DQXVOVFl6SURFME1TNDNOU0F6T1M0NU16Z2dNVE01TGpVZ05qVXVNalVnTVRNNUxqVWdOalV1TWpVZ01URTVMamd4TXlBMk5DNHhNalVnTnprdU16RXpJRFU0TGpVZ09ETXVPREV6SWk4K1BIQnZiSGxuYjI0Z1ptbHNiRDBpSTBRNE4wTXpNQ0lnY0c5cGJuUnpQU0kwTmk0eE1qVWdNVEF4TGpJMUlEa3lMakkxSURFd01pNHpOelVnT0RjdU1UZzRJREV5TmlBMk5TNHlOU0F4TWpBdU16YzFJaTgrUEhCdmJIbG5iMjRnWm1sc2JEMGlJMFZCT0VRelFTSWdjRzlwYm5SelBTSTBOaTR4TWpVZ01UQXhMamd4TXlBMk5TNHlOU0F4TVRrdU9ERXpJRFkxTGpJMUlERXpOeTQ0TVRNaUx6NDhjRzlzZVdkdmJpQm1hV3hzUFNJalJqZzVSRE0xSWlCd2IybHVkSE05SWpZMUxqSTFJREV5TUM0ek56VWdPRGN1TnpVZ01USTJJRGsxTGpBMk15QXhOVEF1TVRnNElEa3dJREUxTXlBMk5TNHlOU0F4TXpndU16YzFJaTgrUEhCdmJIbG5iMjRnWm1sc2JEMGlJMFZDT0VZek5TSWdjRzlwYm5SelBTSTJOUzR5TlNBeE16Z3VNemMxSURZd0xqYzFJREUzTXk0eU5TQTVNQ0F4TlRNaUx6NDhjRzlzZVdkdmJpQm1hV3hzUFNJalJVRTRSVE5CSWlCd2IybHVkSE05SWpreUxqSTFJREV3TWk0ek56VWdPVFV1TURZeklERTFNQzR4T0RnZ09EWXVOakkxSURFeU5TNDNNVGtpTHo0OGNHOXNlV2R2YmlCbWFXeHNQU0lqUkRnM1F6TXdJaUJ3YjJsdWRITTlJak01TGpNM05TQXhNemd1T1RNNElEWTFMakkxSURFek9DNHpOelVnTmpBdU56VWdNVGN6TGpJMUlpOCtQSEJ2YkhsbmIyNGdabWxzYkQwaUkwVkNPRVl6TlNJZ2NHOXBiblJ6UFNJeE1pNDVNemdnTVRnNExqUXpPQ0EyTUM0M05TQXhOek11TWpVZ016a3VNemMxSURFek9DNDVNemdnTGpVMk15QXhOREV1TnpVaUx6NDhjRzlzZVdkdmJpQm1hV3hzUFNJalJUZzRNakZGSWlCd2IybHVkSE05SWpnNExqZzNOU0ExT0M0MUlEWTBMalk0T0NBM09DNDNOU0EwTmk0eE1qVWdNVEF4TGpJMUlEa3lMakkxSURFd01pNDVNemdpTHo0OGNHOXNlV2R2YmlCbWFXeHNQU0lqTXprek9UTTVJaUJ3YjJsdWRITTlJamN3TGpNeE15QXhNVEl1TlNBMk5DNHhNalVnTVRJMUxqUXpPQ0E0Tmk0d05qTWdNVEU1TGpneE15SWdkSEpoYm5ObWIzSnRQU0p0WVhSeWFYZ29MVEVnTUNBd0lERWdNVFV3TGpFNE9DQXdLU0l2UGp4d2IyeDVaMjl1SUdacGJHdzlJaU5GT0RoR016VWlJSEJ2YVc1MGN6MGlNVEl1TXpjMUlDNDFOak1nT0RndU9EYzFJRFU0TGpVZ056VXVPVE00SURJM0lpOCtQSEJoZEdnZ1ptbHNiRDBpSXpoRk5VRXpNQ0lnWkQwaVRURXlMak0zTlRBd01ESXNNQzQxTmpJMU1EQXdNRGdnVERJdU1qVXdNREF3TURNc016RXVOVEF3TURBd05TQk1OeTQ0TnpVd01EQXhNaXcyTlM0eU5UQXdNREVnVERNdU9UTTNOVEF3TURZc05qY3VOVEF3TURBeElFdzVMalUyTWpVd01ERTBMRGN5TGpVMk1qVWdURFV1TURZeU5UQXdNRGdzTnpZdU5UQXdNREF4TVNCTU1URXVNalVzT0RJdU1USTFNREF4TWlCTU55NHpNVEkxTURBeE1TdzROUzQxTURBd01ERXpJRXd4Tmk0ek1USTFNREF5TERrMkxqYzFNREF3TVRRZ1REVTRMalV3TURBd01Ea3NPRE11T0RFeU5UQXhNaUJETnprdU1USTFNREF4TWl3Mk55NHpNVEkxTURBMElEZzVMakkxTURBd01UTXNOVGd1T0RjMU1EQXdNeUE0T0M0NE56VXdNREV6TERVNExqVXdNREF3TURrZ1F6ZzRMalV3TURBd01UTXNOVGd1TVRJMU1EQXdPU0EyTXk0d01EQXdNREE1TERNNExqZ3hNalV3TURZZ01USXVNemMxTURBd01pd3dMalUyTWpVd01EQXdPQ0JhSWk4K1BDOW5Qand2Wno0OEwzTjJaejQ9XCIsXG4gICAgZG93bmxvYWRzOiB7XG4gICAgICBjaHJvbWU6IFwiaHR0cHM6Ly9jaHJvbWUuZ29vZ2xlLmNvbS93ZWJzdG9yZS9kZXRhaWwvbWV0YW1hc2svbmtiaWhmYmVvZ2FlYW9laGxlZm5rb2RiZWZncGdrbm5cIixcbiAgICAgIGZpcmVmb3g6IFwiaHR0cHM6Ly9hZGRvbnMubW96aWxsYS5vcmcvZW4tVVMvZmlyZWZveC9hZGRvbi9ldGhlci1tZXRhbWFzay9cIixcbiAgICAgIGVkZ2U6IFwiaHR0cHM6Ly9taWNyb3NvZnRlZGdlLm1pY3Jvc29mdC5jb20vYWRkb25zL2RldGFpbC9tZXRhbWFzay9lamJhbGJha29wbGNobGdoZWNkYWxtZWVlYWpuaW1obT9obD1lbi1VU1wiXG4gICAgfVxuICB9XG5dO1xudmFyIFQsIGosIHgsIEgsIFEsIEMsIEc7XG5jbGFzcyBMb2NhbFN0b3JhZ2VXcmFwcGVyIHtcbiAgY29uc3RydWN0b3IoZSkge1xuICAgIEwodGhpcywgSCksIEwodGhpcywgQyksIEwodGhpcywgVCwgITEpLCBMKHRoaXMsIGosIHZvaWQgMCksIEwodGhpcywgeCwgdm9pZCAwKSwgRih0aGlzLCBcInZhbHVlXCIpLCAkKHRoaXMsIHgsIGUpLCBQKHRoaXMsIEMsIEcpLmNhbGwodGhpcyk7XG4gIH1cbiAgc2V0KGUpIHtcbiAgICByZXR1cm4gIU4odGhpcywgVCkgJiYgIVAodGhpcywgQywgRykuY2FsbCh0aGlzKSA/ICExIDogKHRoaXMuZGVsZXRlKCksIHRoaXMudmFsdWUgPSBlLCBlICYmICgkKHRoaXMsIGosIGAke04odGhpcywgeCl9LSR7Z2VuZXJhdGVVSUQoKX1gKSwgbG9jYWxTdG9yYWdlLnNldEl0ZW0oTih0aGlzLCBqKSwgZSkpLCAhMCk7XG4gIH1cbiAgZ2V0KCkge1xuICAgIHJldHVybiBQKHRoaXMsIEgsIFEpLmNhbGwodGhpcyksIHRoaXMudmFsdWU7XG4gIH1cbiAgZGVsZXRlKCkge1xuICAgIHJldHVybiAhTih0aGlzLCBUKSAmJiAhUCh0aGlzLCBDLCBHKS5jYWxsKHRoaXMpID8gITEgOiAodGhpcy52YWx1ZSA9IG51bGwsIE4odGhpcywgaikgJiYgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oTih0aGlzLCBqKSksICEwKTtcbiAgfVxufVxuVCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgV2Vha01hcCgpLCBqID0gLyogQF9fUFVSRV9fICovIG5ldyBXZWFrTWFwKCksIHggPSAvKiBAX19QVVJFX18gKi8gbmV3IFdlYWtNYXAoKSwgSCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgV2Vha1NldCgpLCBRID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMudmFsdWUgJiYgdGhpcy5zZXQodGhpcy52YWx1ZSk7XG59LCBDID0gLyogQF9fUFVSRV9fICovIG5ldyBXZWFrU2V0KCksIEcgPSBmdW5jdGlvbigpIHtcbiAgdHJ5IHtcbiAgICAhTih0aGlzLCBUKSAmJiB0eXBlb2Ygd2luZG93IDwgXCJ1XCIgJiYgKCQodGhpcywgaiwgT2JqZWN0LmtleXMobG9jYWxTdG9yYWdlKS5maW5kKFxuICAgICAgKHQpID0+IHQuc3RhcnRzV2l0aChOKHRoaXMsIHgpKVxuICAgICkpLCAkKHRoaXMsIFQsICEwKSwgTih0aGlzLCBqKSAmJiB0aGlzLnNldChsb2NhbFN0b3JhZ2UuZ2V0SXRlbShOKHRoaXMsIGopKSkpO1xuICB9IGNhdGNoICh0KSB7XG4gICAgY29uc29sZS53YXJuKHQpO1xuICB9XG4gIHJldHVybiBOKHRoaXMsIFQpO1xufTtcbmZ1bmN0aW9uIGZpbHRlckJ5KHQsIGUpIHtcbiAgdmFyIHIsIG47XG4gIGlmICgociA9IGUgPT0gbnVsbCA/IHZvaWQgMCA6IGUuaW5jbHVkZSkgIT0gbnVsbCAmJiByLmxlbmd0aCkge1xuICAgIGNvbnN0IG8gPSBuZXcgU2V0KGUuaW5jbHVkZSk7XG4gICAgcmV0dXJuIHQuZmlsdGVyKChpKSA9PiBvLmhhcyhpLmlkKSk7XG4gIH1cbiAgaWYgKChuID0gZSA9PSBudWxsID8gdm9pZCAwIDogZS5leGNsdWRlKSAhPSBudWxsICYmIG4ubGVuZ3RoKSB7XG4gICAgY29uc3QgbyA9IG5ldyBTZXQoZS5leGNsdWRlKTtcbiAgICByZXR1cm4gdC5maWx0ZXIoKGkpID0+ICFvLmhhcyhpLmlkKSk7XG4gIH1cbiAgcmV0dXJuIHQ7XG59XG5jb25zdCBmaWx0ZXJCeVByZUF1dGhvcml6ZWQgPSBhc3luYyAodCkgPT4ge1xuICBjb25zdCBlID0gYXdhaXQgUHJvbWlzZS5hbGwoXG4gICAgdC5tYXAoKHIpID0+IHIuaXNQcmVhdXRob3JpemVkKCkuY2F0Y2goKCkgPT4gITEpKVxuICApO1xuICByZXR1cm4gdC5maWx0ZXIoKHIsIG4pID0+IGVbbl0pO1xufSwgaXNXYWxsZXRPYmogPSAodCkgPT4ge1xuICB0cnkge1xuICAgIHJldHVybiB0ICYmIFtcbiAgICAgIFwicmVxdWVzdFwiLFxuICAgICAgXCJpc0Nvbm5lY3RlZFwiLFxuICAgICAgXCJwcm92aWRlclwiLFxuICAgICAgXCJlbmFibGVcIixcbiAgICAgIFwiaXNQcmVhdXRob3JpemVkXCIsXG4gICAgICBcIm9uXCIsXG4gICAgICBcIm9mZlwiLFxuICAgICAgXCJ2ZXJzaW9uXCIsXG4gICAgICBcImlkXCIsXG4gICAgICBcIm5hbWVcIixcbiAgICAgIFwiaWNvblwiXG4gICAgXS5ldmVyeSgoZSkgPT4gZSBpbiB0KTtcbiAgfSBjYXRjaCB7XG4gIH1cbiAgcmV0dXJuICExO1xufTtcbmZ1bmN0aW9uIGdldEJ1aWxkZXJJZCgpIHtcbiAgcmV0dXJuIHR5cGVvZiBGRURFUkFUSU9OX0JVSUxEX0lERU5USUZJRVIgPCBcInVcIiA/IEZFREVSQVRJT05fQlVJTERfSURFTlRJRklFUiA6IFwiXCI7XG59XG5mdW5jdGlvbiBpc0RlYnVnTW9kZSQxKCkge1xuICByZXR1cm4gQm9vbGVhbihcIlwiKTtcbn1cbmZ1bmN0aW9uIGlzQnJvd3NlckVudiQxKCkge1xuICByZXR1cm4gdHlwZW9mIHdpbmRvdyA8IFwidVwiO1xufVxuY29uc3QgTE9HX0NBVEVHT1JZJDEgPSBcIlsgRmVkZXJhdGlvbiBSdW50aW1lIF1cIjtcbmZ1bmN0aW9uIGFzc2VydCh0LCBlKSB7XG4gIHQgfHwgZXJyb3IoZSk7XG59XG5mdW5jdGlvbiBlcnJvcih0KSB7XG4gIHRocm93IHQgaW5zdGFuY2VvZiBFcnJvciA/ICh0Lm1lc3NhZ2UgPSBgJHtMT0dfQ0FURUdPUlkkMX06ICR7dC5tZXNzYWdlfWAsIHQpIDogbmV3IEVycm9yKGAke0xPR19DQVRFR09SWSQxfTogJHt0fWApO1xufVxuZnVuY3Rpb24gd2FybiQxKHQpIHtcbiAgdCBpbnN0YW5jZW9mIEVycm9yID8gKHQubWVzc2FnZSA9IGAke0xPR19DQVRFR09SWSQxfTogJHt0Lm1lc3NhZ2V9YCwgY29uc29sZS53YXJuKHQpKSA6IGNvbnNvbGUud2FybihgJHtMT0dfQ0FURUdPUlkkMX06ICR7dH1gKTtcbn1cbmZ1bmN0aW9uIGFkZFVuaXF1ZUl0ZW0odCwgZSkge1xuICByZXR1cm4gdC5maW5kSW5kZXgoKHIpID0+IHIgPT09IGUpID09PSAtMSAmJiB0LnB1c2goZSksIHQ7XG59XG5mdW5jdGlvbiBnZXRGTUlkKHQpIHtcbiAgcmV0dXJuIFwidmVyc2lvblwiIGluIHQgJiYgdC52ZXJzaW9uID8gYCR7dC5uYW1lfToke3QudmVyc2lvbn1gIDogXCJlbnRyeVwiIGluIHQgJiYgdC5lbnRyeSA/IGAke3QubmFtZX06JHt0LmVudHJ5fWAgOiBgJHt0Lm5hbWV9YDtcbn1cbmZ1bmN0aW9uIGlzUmVtb3RlSW5mb1dpdGhFbnRyeSh0KSB7XG4gIHJldHVybiB0eXBlb2YgdC5lbnRyeSA8IFwidVwiO1xufVxuZnVuY3Rpb24gaXNQdXJlUmVtb3RlRW50cnkodCkge1xuICByZXR1cm4gIXQuZW50cnkuaW5jbHVkZXMoXCIuanNvblwiKSAmJiB0LmVudHJ5LmluY2x1ZGVzKFwiLmpzXCIpO1xufVxuZnVuY3Rpb24gc2FmZVRvU3RyaW5nJDEodCkge1xuICB0cnkge1xuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh0LCBudWxsLCAyKTtcbiAgfSBjYXRjaCB7XG4gICAgcmV0dXJuIFwiXCI7XG4gIH1cbn1cbmZ1bmN0aW9uIGlzT2JqZWN0KHQpIHtcbiAgcmV0dXJuIHQgJiYgdHlwZW9mIHQgPT0gXCJvYmplY3RcIjtcbn1cbmNvbnN0IG9iamVjdFRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcbmZ1bmN0aW9uIGlzUGxhaW5PYmplY3QodCkge1xuICByZXR1cm4gb2JqZWN0VG9TdHJpbmcuY2FsbCh0KSA9PT0gXCJbb2JqZWN0IE9iamVjdF1cIjtcbn1cbmZ1bmN0aW9uIF9leHRlbmRzJDEkMSgpIHtcbiAgcmV0dXJuIF9leHRlbmRzJDEkMSA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24odCkge1xuICAgIGZvciAodmFyIGUgPSAxOyBlIDwgYXJndW1lbnRzLmxlbmd0aDsgZSsrKSB7XG4gICAgICB2YXIgciA9IGFyZ3VtZW50c1tlXTtcbiAgICAgIGZvciAodmFyIG4gaW4gcilcbiAgICAgICAgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHIsIG4pICYmICh0W25dID0gcltuXSk7XG4gICAgfVxuICAgIHJldHVybiB0O1xuICB9LCBfZXh0ZW5kcyQxJDEuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbn1cbmZ1bmN0aW9uIF9vYmplY3Rfd2l0aG91dF9wcm9wZXJ0aWVzX2xvb3NlJDEodCwgZSkge1xuICBpZiAodCA9PSBudWxsKVxuICAgIHJldHVybiB7fTtcbiAgdmFyIHIgPSB7fSwgbiA9IE9iamVjdC5rZXlzKHQpLCBvLCBpO1xuICBmb3IgKGkgPSAwOyBpIDwgbi5sZW5ndGg7IGkrKylcbiAgICBvID0gbltpXSwgIShlLmluZGV4T2YobykgPj0gMCkgJiYgKHJbb10gPSB0W29dKTtcbiAgcmV0dXJuIHI7XG59XG5jb25zdCBuYXRpdmVHbG9iYWwgPSAoKCkgPT4ge1xuICB0cnkge1xuICAgIHJldHVybiBuZXcgRnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpO1xuICB9IGNhdGNoIHtcbiAgICByZXR1cm4gZ2xvYmFsVGhpcztcbiAgfVxufSkoKSwgR2xvYmFsID0gbmF0aXZlR2xvYmFsO1xuZnVuY3Rpb24gZGVmaW5lUHJvcGVydHlHbG9iYWxWYWwodCwgZSwgcikge1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgZSwge1xuICAgIHZhbHVlOiByLFxuICAgIGNvbmZpZ3VyYWJsZTogITEsXG4gICAgd3JpdGFibGU6ICEwXG4gIH0pO1xufVxuZnVuY3Rpb24gaW5jbHVkZU93blByb3BlcnR5KHQsIGUpIHtcbiAgcmV0dXJuIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsIGUpO1xufVxuaW5jbHVkZU93blByb3BlcnR5KGdsb2JhbFRoaXMsIFwiX19HTE9CQUxfTE9BRElOR19SRU1PVEVfRU5UUllfX1wiKSB8fCBkZWZpbmVQcm9wZXJ0eUdsb2JhbFZhbChnbG9iYWxUaGlzLCBcIl9fR0xPQkFMX0xPQURJTkdfUkVNT1RFX0VOVFJZX19cIiwge30pO1xuY29uc3QgZ2xvYmFsTG9hZGluZyA9IGdsb2JhbFRoaXMuX19HTE9CQUxfTE9BRElOR19SRU1PVEVfRU5UUllfXztcbmZ1bmN0aW9uIHNldEdsb2JhbERlZmF1bHRWYWwodCkge1xuICB2YXIgZSwgciwgbiwgbywgaSwgcztcbiAgaW5jbHVkZU93blByb3BlcnR5KHQsIFwiX19WTU9LX19cIikgJiYgIWluY2x1ZGVPd25Qcm9wZXJ0eSh0LCBcIl9fRkVERVJBVElPTl9fXCIpICYmIGRlZmluZVByb3BlcnR5R2xvYmFsVmFsKHQsIFwiX19GRURFUkFUSU9OX19cIiwgdC5fX1ZNT0tfXyksIGluY2x1ZGVPd25Qcm9wZXJ0eSh0LCBcIl9fRkVERVJBVElPTl9fXCIpIHx8IChkZWZpbmVQcm9wZXJ0eUdsb2JhbFZhbCh0LCBcIl9fRkVERVJBVElPTl9fXCIsIHtcbiAgICBfX0dMT0JBTF9QTFVHSU5fXzogW10sXG4gICAgX19JTlNUQU5DRVNfXzogW10sXG4gICAgbW9kdWxlSW5mbzoge30sXG4gICAgX19TSEFSRV9fOiB7fSxcbiAgICBfX01BTklGRVNUX0xPQURJTkdfXzoge30sXG4gICAgX19QUkVMT0FERURfTUFQX186IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKClcbiAgfSksIGRlZmluZVByb3BlcnR5R2xvYmFsVmFsKHQsIFwiX19WTU9LX19cIiwgdC5fX0ZFREVSQVRJT05fXykpLCAoZSA9IHQuX19GRURFUkFUSU9OX18pLl9fR0xPQkFMX1BMVUdJTl9fICE9IG51bGwgfHwgKGUuX19HTE9CQUxfUExVR0lOX18gPSBbXSksIChyID0gdC5fX0ZFREVSQVRJT05fXykuX19JTlNUQU5DRVNfXyAhPSBudWxsIHx8IChyLl9fSU5TVEFOQ0VTX18gPSBbXSksIChuID0gdC5fX0ZFREVSQVRJT05fXykubW9kdWxlSW5mbyAhPSBudWxsIHx8IChuLm1vZHVsZUluZm8gPSB7fSksIChvID0gdC5fX0ZFREVSQVRJT05fXykuX19TSEFSRV9fICE9IG51bGwgfHwgKG8uX19TSEFSRV9fID0ge30pLCAoaSA9IHQuX19GRURFUkFUSU9OX18pLl9fTUFOSUZFU1RfTE9BRElOR19fICE9IG51bGwgfHwgKGkuX19NQU5JRkVTVF9MT0FESU5HX18gPSB7fSksIChzID0gdC5fX0ZFREVSQVRJT05fXykuX19QUkVMT0FERURfTUFQX18gIT0gbnVsbCB8fCAocy5fX1BSRUxPQURFRF9NQVBfXyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCkpO1xufVxuc2V0R2xvYmFsRGVmYXVsdFZhbChnbG9iYWxUaGlzKTtcbnNldEdsb2JhbERlZmF1bHRWYWwobmF0aXZlR2xvYmFsKTtcbmZ1bmN0aW9uIGdldEdsb2JhbEZlZGVyYXRpb25JbnN0YW5jZSh0LCBlKSB7XG4gIGNvbnN0IHIgPSBnZXRCdWlsZGVySWQoKTtcbiAgcmV0dXJuIGdsb2JhbFRoaXMuX19GRURFUkFUSU9OX18uX19JTlNUQU5DRVNfXy5maW5kKChuKSA9PiAhIShyICYmIG4ub3B0aW9ucy5pZCA9PT0gZ2V0QnVpbGRlcklkKCkgfHwgbi5vcHRpb25zLm5hbWUgPT09IHQgJiYgIW4ub3B0aW9ucy52ZXJzaW9uICYmICFlIHx8IG4ub3B0aW9ucy5uYW1lID09PSB0ICYmIGUgJiYgbi5vcHRpb25zLnZlcnNpb24gPT09IGUpKTtcbn1cbmZ1bmN0aW9uIHNldEdsb2JhbEZlZGVyYXRpb25JbnN0YW5jZSh0KSB7XG4gIGdsb2JhbFRoaXMuX19GRURFUkFUSU9OX18uX19JTlNUQU5DRVNfXy5wdXNoKHQpO1xufVxuZnVuY3Rpb24gZ2V0R2xvYmFsRmVkZXJhdGlvbkNvbnN0cnVjdG9yKCkge1xuICByZXR1cm4gZ2xvYmFsVGhpcy5fX0ZFREVSQVRJT05fXy5fX0RFQlVHX0NPTlNUUlVDVE9SX187XG59XG5mdW5jdGlvbiBzZXRHbG9iYWxGZWRlcmF0aW9uQ29uc3RydWN0b3IodCwgZSA9IGlzRGVidWdNb2RlJDEoKSkge1xuICBlICYmIChnbG9iYWxUaGlzLl9fRkVERVJBVElPTl9fLl9fREVCVUdfQ09OU1RSVUNUT1JfXyA9IHQsIGdsb2JhbFRoaXMuX19GRURFUkFUSU9OX18uX19ERUJVR19DT05TVFJVQ1RPUl9WRVJTSU9OX18gPSBcIjAuMS4yXCIpO1xufVxuZnVuY3Rpb24gZ2V0SW5mb1dpdGhvdXRUeXBlKHQsIGUpIHtcbiAgaWYgKHR5cGVvZiBlID09IFwic3RyaW5nXCIpIHtcbiAgICBpZiAodFtlXSlcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbHVlOiB0W2VdLFxuICAgICAgICBrZXk6IGVcbiAgICAgIH07XG4gICAge1xuICAgICAgY29uc3QgciA9IE9iamVjdC5rZXlzKHQpO1xuICAgICAgZm9yIChjb25zdCBuIG9mIHIpIHtcbiAgICAgICAgY29uc3QgW28sIGldID0gbi5zcGxpdChcIjpcIiksIHMgPSBgJHtvfToke2V9YCwgYSA9IHRbc107XG4gICAgICAgIGlmIChhKVxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB2YWx1ZTogYSxcbiAgICAgICAgICAgIGtleTogc1xuICAgICAgICAgIH07XG4gICAgICB9XG4gICAgICByZXR1cm4ge1xuICAgICAgICB2YWx1ZTogdm9pZCAwLFxuICAgICAgICBrZXk6IGVcbiAgICAgIH07XG4gICAgfVxuICB9IGVsc2VcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJrZXkgbXVzdCBiZSBzdHJpbmdcIik7XG59XG5jb25zdCBnZXRHbG9iYWxTbmFwc2hvdCA9ICgpID0+IG5hdGl2ZUdsb2JhbC5fX0ZFREVSQVRJT05fXy5tb2R1bGVJbmZvLCBnZXRUYXJnZXRTbmFwc2hvdEluZm9CeU1vZHVsZUluZm8gPSAodCwgZSkgPT4ge1xuICBjb25zdCByID0gZ2V0Rk1JZCh0KSwgbiA9IGdldEluZm9XaXRob3V0VHlwZShlLCByKS52YWx1ZTtcbiAgaWYgKG4gJiYgIW4udmVyc2lvbiAmJiBcInZlcnNpb25cIiBpbiB0ICYmIHQudmVyc2lvbiAmJiAobi52ZXJzaW9uID0gdC52ZXJzaW9uKSwgbilcbiAgICByZXR1cm4gbjtcbiAgaWYgKFwidmVyc2lvblwiIGluIHQgJiYgdC52ZXJzaW9uKSB7XG4gICAgY29uc3QgeyB2ZXJzaW9uOiBvIH0gPSB0LCBpID0gX29iamVjdF93aXRob3V0X3Byb3BlcnRpZXNfbG9vc2UkMSh0LCBbXG4gICAgICBcInZlcnNpb25cIlxuICAgIF0pLCBzID0gZ2V0Rk1JZChpKSwgYSA9IGdldEluZm9XaXRob3V0VHlwZShuYXRpdmVHbG9iYWwuX19GRURFUkFUSU9OX18ubW9kdWxlSW5mbywgcykudmFsdWU7XG4gICAgaWYgKChhID09IG51bGwgPyB2b2lkIDAgOiBhLnZlcnNpb24pID09PSBvKVxuICAgICAgcmV0dXJuIGE7XG4gIH1cbn0sIGdldEdsb2JhbFNuYXBzaG90SW5mb0J5TW9kdWxlSW5mbyA9ICh0KSA9PiBnZXRUYXJnZXRTbmFwc2hvdEluZm9CeU1vZHVsZUluZm8odCwgbmF0aXZlR2xvYmFsLl9fRkVERVJBVElPTl9fLm1vZHVsZUluZm8pLCBzZXRHbG9iYWxTbmFwc2hvdEluZm9CeU1vZHVsZUluZm8gPSAodCwgZSkgPT4ge1xuICBjb25zdCByID0gZ2V0Rk1JZCh0KTtcbiAgcmV0dXJuIG5hdGl2ZUdsb2JhbC5fX0ZFREVSQVRJT05fXy5tb2R1bGVJbmZvW3JdID0gZSwgbmF0aXZlR2xvYmFsLl9fRkVERVJBVElPTl9fLm1vZHVsZUluZm87XG59LCBhZGRHbG9iYWxTbmFwc2hvdCA9ICh0KSA9PiAobmF0aXZlR2xvYmFsLl9fRkVERVJBVElPTl9fLm1vZHVsZUluZm8gPSBfZXh0ZW5kcyQxJDEoe30sIG5hdGl2ZUdsb2JhbC5fX0ZFREVSQVRJT05fXy5tb2R1bGVJbmZvLCB0KSwgKCkgPT4ge1xuICBjb25zdCBlID0gT2JqZWN0LmtleXModCk7XG4gIGZvciAoY29uc3QgciBvZiBlKVxuICAgIGRlbGV0ZSBuYXRpdmVHbG9iYWwuX19GRURFUkFUSU9OX18ubW9kdWxlSW5mb1tyXTtcbn0pLCBnZXRSZW1vdGVFbnRyeUV4cG9ydHMgPSAodCwgZSkgPT4ge1xuICBjb25zdCByID0gZSB8fCBgX19GRURFUkFUSU9OXyR7dH06Y3VzdG9tX19gLCBuID0gZ2xvYmFsVGhpc1tyXTtcbiAgcmV0dXJuIHtcbiAgICByZW1vdGVFbnRyeUtleTogcixcbiAgICBlbnRyeUV4cG9ydHM6IG5cbiAgfTtcbn0sIGdldEdsb2JhbEhvc3RQbHVnaW5zID0gKCkgPT4gbmF0aXZlR2xvYmFsLl9fRkVERVJBVElPTl9fLl9fR0xPQkFMX1BMVUdJTl9fLCBnZXRQcmVsb2FkZWQgPSAodCkgPT4gZ2xvYmFsVGhpcy5fX0ZFREVSQVRJT05fXy5fX1BSRUxPQURFRF9NQVBfXy5nZXQodCksIHNldFByZWxvYWRlZCA9ICh0KSA9PiBnbG9iYWxUaGlzLl9fRkVERVJBVElPTl9fLl9fUFJFTE9BREVEX01BUF9fLnNldCh0LCAhMCksIERFRkFVTFRfU0NPUEUgPSBcImRlZmF1bHRcIiwgREVGQVVMVF9SRU1PVEVfVFlQRSA9IFwiZ2xvYmFsXCIsIGJ1aWxkSWRlbnRpZmllciA9IFwiWzAtOUEtWmEtei1dK1wiLCBidWlsZCA9IGAoPzpcXFxcKygke2J1aWxkSWRlbnRpZmllcn0oPzpcXFxcLiR7YnVpbGRJZGVudGlmaWVyfSkqKSlgLCBudW1lcmljSWRlbnRpZmllciA9IFwiMHxbMS05XVxcXFxkKlwiLCBudW1lcmljSWRlbnRpZmllckxvb3NlID0gXCJbMC05XStcIiwgbm9uTnVtZXJpY0lkZW50aWZpZXIgPSBcIlxcXFxkKlthLXpBLVotXVthLXpBLVowLTktXSpcIiwgcHJlUmVsZWFzZUlkZW50aWZpZXJMb29zZSA9IGAoPzoke251bWVyaWNJZGVudGlmaWVyTG9vc2V9fCR7bm9uTnVtZXJpY0lkZW50aWZpZXJ9KWAsIHByZVJlbGVhc2VMb29zZSA9IGAoPzotPygke3ByZVJlbGVhc2VJZGVudGlmaWVyTG9vc2V9KD86XFxcXC4ke3ByZVJlbGVhc2VJZGVudGlmaWVyTG9vc2V9KSopKWAsIHByZVJlbGVhc2VJZGVudGlmaWVyID0gYCg/OiR7bnVtZXJpY0lkZW50aWZpZXJ9fCR7bm9uTnVtZXJpY0lkZW50aWZpZXJ9KWAsIHByZVJlbGVhc2UgPSBgKD86LSgke3ByZVJlbGVhc2VJZGVudGlmaWVyfSg/OlxcXFwuJHtwcmVSZWxlYXNlSWRlbnRpZmllcn0pKikpYCwgeFJhbmdlSWRlbnRpZmllciA9IGAke251bWVyaWNJZGVudGlmaWVyfXx4fFh8XFxcXCpgLCB4UmFuZ2VQbGFpbiA9IGBbdj1cXFxcc10qKCR7eFJhbmdlSWRlbnRpZmllcn0pKD86XFxcXC4oJHt4UmFuZ2VJZGVudGlmaWVyfSkoPzpcXFxcLigke3hSYW5nZUlkZW50aWZpZXJ9KSg/OiR7cHJlUmVsZWFzZX0pPyR7YnVpbGR9Pyk/KT9gLCBoeXBoZW5SYW5nZSA9IGBeXFxcXHMqKCR7eFJhbmdlUGxhaW59KVxcXFxzKy1cXFxccysoJHt4UmFuZ2VQbGFpbn0pXFxcXHMqJGAsIG1haW5WZXJzaW9uTG9vc2UgPSBgKCR7bnVtZXJpY0lkZW50aWZpZXJMb29zZX0pXFxcXC4oJHtudW1lcmljSWRlbnRpZmllckxvb3NlfSlcXFxcLigke251bWVyaWNJZGVudGlmaWVyTG9vc2V9KWAsIGxvb3NlUGxhaW4gPSBgW3Y9XFxcXHNdKiR7bWFpblZlcnNpb25Mb29zZX0ke3ByZVJlbGVhc2VMb29zZX0/JHtidWlsZH0/YCwgZ3RsdCA9IFwiKCg/Ojx8Pik/PT8pXCIsIGNvbXBhcmF0b3JUcmltID0gYChcXFxccyopJHtndGx0fVxcXFxzKigke2xvb3NlUGxhaW59fCR7eFJhbmdlUGxhaW59KWAsIGxvbmVUaWxkZSA9IFwiKD86fj4/KVwiLCB0aWxkZVRyaW0gPSBgKFxcXFxzKikke2xvbmVUaWxkZX1cXFxccytgLCBsb25lQ2FyZXQgPSBcIig/OlxcXFxeKVwiLCBjYXJldFRyaW0gPSBgKFxcXFxzKikke2xvbmVDYXJldH1cXFxccytgLCBzdGFyID0gXCIoPHw+KT89P1xcXFxzKlxcXFwqXCIsIGNhcmV0ID0gYF4ke2xvbmVDYXJldH0ke3hSYW5nZVBsYWlufSRgLCBtYWluVmVyc2lvbiA9IGAoJHtudW1lcmljSWRlbnRpZmllcn0pXFxcXC4oJHtudW1lcmljSWRlbnRpZmllcn0pXFxcXC4oJHtudW1lcmljSWRlbnRpZmllcn0pYCwgZnVsbFBsYWluID0gYHY/JHttYWluVmVyc2lvbn0ke3ByZVJlbGVhc2V9PyR7YnVpbGR9P2AsIHRpbGRlID0gYF4ke2xvbmVUaWxkZX0ke3hSYW5nZVBsYWlufSRgLCB4UmFuZ2UgPSBgXiR7Z3RsdH1cXFxccyoke3hSYW5nZVBsYWlufSRgLCBjb21wYXJhdG9yID0gYF4ke2d0bHR9XFxcXHMqKCR7ZnVsbFBsYWlufSkkfF4kYCwgZ3RlMCA9IFwiXlxcXFxzKj49XFxcXHMqMC4wLjBcXFxccyokXCI7XG5mdW5jdGlvbiBwYXJzZVJlZ2V4KHQpIHtcbiAgcmV0dXJuIG5ldyBSZWdFeHAodCk7XG59XG5mdW5jdGlvbiBpc1hWZXJzaW9uKHQpIHtcbiAgcmV0dXJuICF0IHx8IHQudG9Mb3dlckNhc2UoKSA9PT0gXCJ4XCIgfHwgdCA9PT0gXCIqXCI7XG59XG5mdW5jdGlvbiBwaXBlKC4uLnQpIHtcbiAgcmV0dXJuIChlKSA9PiB0LnJlZHVjZSgociwgbikgPT4gbihyKSwgZSk7XG59XG5mdW5jdGlvbiBleHRyYWN0Q29tcGFyYXRvcih0KSB7XG4gIHJldHVybiB0Lm1hdGNoKHBhcnNlUmVnZXgoY29tcGFyYXRvcikpO1xufVxuZnVuY3Rpb24gY29tYmluZVZlcnNpb24odCwgZSwgciwgbikge1xuICBjb25zdCBvID0gYCR7dH0uJHtlfS4ke3J9YDtcbiAgcmV0dXJuIG4gPyBgJHtvfS0ke259YCA6IG87XG59XG5mdW5jdGlvbiBwYXJzZUh5cGhlbih0KSB7XG4gIHJldHVybiB0LnJlcGxhY2UocGFyc2VSZWdleChoeXBoZW5SYW5nZSksIChlLCByLCBuLCBvLCBpLCBzLCBhLCBjLCBsLCB1LCBkLCBtKSA9PiAoaXNYVmVyc2lvbihuKSA/IHIgPSBcIlwiIDogaXNYVmVyc2lvbihvKSA/IHIgPSBgPj0ke259LjAuMGAgOiBpc1hWZXJzaW9uKGkpID8gciA9IGA+PSR7bn0uJHtvfS4wYCA6IHIgPSBgPj0ke3J9YCwgaXNYVmVyc2lvbihsKSA/IGMgPSBcIlwiIDogaXNYVmVyc2lvbih1KSA/IGMgPSBgPCR7TnVtYmVyKGwpICsgMX0uMC4wLTBgIDogaXNYVmVyc2lvbihkKSA/IGMgPSBgPCR7bH0uJHtOdW1iZXIodSkgKyAxfS4wLTBgIDogbSA/IGMgPSBgPD0ke2x9LiR7dX0uJHtkfS0ke219YCA6IGMgPSBgPD0ke2N9YCwgYCR7cn0gJHtjfWAudHJpbSgpKSk7XG59XG5mdW5jdGlvbiBwYXJzZUNvbXBhcmF0b3JUcmltKHQpIHtcbiAgcmV0dXJuIHQucmVwbGFjZShwYXJzZVJlZ2V4KGNvbXBhcmF0b3JUcmltKSwgXCIkMSQyJDNcIik7XG59XG5mdW5jdGlvbiBwYXJzZVRpbGRlVHJpbSh0KSB7XG4gIHJldHVybiB0LnJlcGxhY2UocGFyc2VSZWdleCh0aWxkZVRyaW0pLCBcIiQxflwiKTtcbn1cbmZ1bmN0aW9uIHBhcnNlQ2FyZXRUcmltKHQpIHtcbiAgcmV0dXJuIHQucmVwbGFjZShwYXJzZVJlZ2V4KGNhcmV0VHJpbSksIFwiJDFeXCIpO1xufVxuZnVuY3Rpb24gcGFyc2VDYXJldHModCkge1xuICByZXR1cm4gdC50cmltKCkuc3BsaXQoL1xccysvKS5tYXAoKGUpID0+IGUucmVwbGFjZShwYXJzZVJlZ2V4KGNhcmV0KSwgKHIsIG4sIG8sIGksIHMpID0+IGlzWFZlcnNpb24obikgPyBcIlwiIDogaXNYVmVyc2lvbihvKSA/IGA+PSR7bn0uMC4wIDwke051bWJlcihuKSArIDF9LjAuMC0wYCA6IGlzWFZlcnNpb24oaSkgPyBuID09PSBcIjBcIiA/IGA+PSR7bn0uJHtvfS4wIDwke259LiR7TnVtYmVyKG8pICsgMX0uMC0wYCA6IGA+PSR7bn0uJHtvfS4wIDwke051bWJlcihuKSArIDF9LjAuMC0wYCA6IHMgPyBuID09PSBcIjBcIiA/IG8gPT09IFwiMFwiID8gYD49JHtufS4ke299LiR7aX0tJHtzfSA8JHtufS4ke299LiR7TnVtYmVyKGkpICsgMX0tMGAgOiBgPj0ke259LiR7b30uJHtpfS0ke3N9IDwke259LiR7TnVtYmVyKG8pICsgMX0uMC0wYCA6IGA+PSR7bn0uJHtvfS4ke2l9LSR7c30gPCR7TnVtYmVyKG4pICsgMX0uMC4wLTBgIDogbiA9PT0gXCIwXCIgPyBvID09PSBcIjBcIiA/IGA+PSR7bn0uJHtvfS4ke2l9IDwke259LiR7b30uJHtOdW1iZXIoaSkgKyAxfS0wYCA6IGA+PSR7bn0uJHtvfS4ke2l9IDwke259LiR7TnVtYmVyKG8pICsgMX0uMC0wYCA6IGA+PSR7bn0uJHtvfS4ke2l9IDwke051bWJlcihuKSArIDF9LjAuMC0wYCkpLmpvaW4oXCIgXCIpO1xufVxuZnVuY3Rpb24gcGFyc2VUaWxkZXModCkge1xuICByZXR1cm4gdC50cmltKCkuc3BsaXQoL1xccysvKS5tYXAoKGUpID0+IGUucmVwbGFjZShwYXJzZVJlZ2V4KHRpbGRlKSwgKHIsIG4sIG8sIGksIHMpID0+IGlzWFZlcnNpb24obikgPyBcIlwiIDogaXNYVmVyc2lvbihvKSA/IGA+PSR7bn0uMC4wIDwke051bWJlcihuKSArIDF9LjAuMC0wYCA6IGlzWFZlcnNpb24oaSkgPyBgPj0ke259LiR7b30uMCA8JHtufS4ke051bWJlcihvKSArIDF9LjAtMGAgOiBzID8gYD49JHtufS4ke299LiR7aX0tJHtzfSA8JHtufS4ke051bWJlcihvKSArIDF9LjAtMGAgOiBgPj0ke259LiR7b30uJHtpfSA8JHtufS4ke051bWJlcihvKSArIDF9LjAtMGApKS5qb2luKFwiIFwiKTtcbn1cbmZ1bmN0aW9uIHBhcnNlWFJhbmdlcyh0KSB7XG4gIHJldHVybiB0LnNwbGl0KC9cXHMrLykubWFwKChlKSA9PiBlLnRyaW0oKS5yZXBsYWNlKHBhcnNlUmVnZXgoeFJhbmdlKSwgKHIsIG4sIG8sIGksIHMsIGEpID0+IHtcbiAgICBjb25zdCBjID0gaXNYVmVyc2lvbihvKSwgbCA9IGMgfHwgaXNYVmVyc2lvbihpKSwgdSA9IGwgfHwgaXNYVmVyc2lvbihzKTtcbiAgICByZXR1cm4gbiA9PT0gXCI9XCIgJiYgdSAmJiAobiA9IFwiXCIpLCBhID0gXCJcIiwgYyA/IG4gPT09IFwiPlwiIHx8IG4gPT09IFwiPFwiID8gXCI8MC4wLjAtMFwiIDogXCIqXCIgOiBuICYmIHUgPyAobCAmJiAoaSA9IDApLCBzID0gMCwgbiA9PT0gXCI+XCIgPyAobiA9IFwiPj1cIiwgbCA/IChvID0gTnVtYmVyKG8pICsgMSwgaSA9IDAsIHMgPSAwKSA6IChpID0gTnVtYmVyKGkpICsgMSwgcyA9IDApKSA6IG4gPT09IFwiPD1cIiAmJiAobiA9IFwiPFwiLCBsID8gbyA9IE51bWJlcihvKSArIDEgOiBpID0gTnVtYmVyKGkpICsgMSksIG4gPT09IFwiPFwiICYmIChhID0gXCItMFwiKSwgYCR7biArIG99LiR7aX0uJHtzfSR7YX1gKSA6IGwgPyBgPj0ke299LjAuMCR7YX0gPCR7TnVtYmVyKG8pICsgMX0uMC4wLTBgIDogdSA/IGA+PSR7b30uJHtpfS4wJHthfSA8JHtvfS4ke051bWJlcihpKSArIDF9LjAtMGAgOiByO1xuICB9KSkuam9pbihcIiBcIik7XG59XG5mdW5jdGlvbiBwYXJzZVN0YXIodCkge1xuICByZXR1cm4gdC50cmltKCkucmVwbGFjZShwYXJzZVJlZ2V4KHN0YXIpLCBcIlwiKTtcbn1cbmZ1bmN0aW9uIHBhcnNlR1RFMCh0KSB7XG4gIHJldHVybiB0LnRyaW0oKS5yZXBsYWNlKHBhcnNlUmVnZXgoZ3RlMCksIFwiXCIpO1xufVxuZnVuY3Rpb24gY29tcGFyZUF0b20odCwgZSkge1xuICByZXR1cm4gdCA9IE51bWJlcih0KSB8fCB0LCBlID0gTnVtYmVyKGUpIHx8IGUsIHQgPiBlID8gMSA6IHQgPT09IGUgPyAwIDogLTE7XG59XG5mdW5jdGlvbiBjb21wYXJlUHJlUmVsZWFzZSh0LCBlKSB7XG4gIGNvbnN0IHsgcHJlUmVsZWFzZTogciB9ID0gdCwgeyBwcmVSZWxlYXNlOiBuIH0gPSBlO1xuICBpZiAociA9PT0gdm9pZCAwICYmIEJvb2xlYW4obikpXG4gICAgcmV0dXJuIDE7XG4gIGlmIChCb29sZWFuKHIpICYmIG4gPT09IHZvaWQgMClcbiAgICByZXR1cm4gLTE7XG4gIGlmIChyID09PSB2b2lkIDAgJiYgbiA9PT0gdm9pZCAwKVxuICAgIHJldHVybiAwO1xuICBmb3IgKGxldCBvID0gMCwgaSA9IHIubGVuZ3RoOyBvIDw9IGk7IG8rKykge1xuICAgIGNvbnN0IHMgPSByW29dLCBhID0gbltvXTtcbiAgICBpZiAocyAhPT0gYSlcbiAgICAgIHJldHVybiBzID09PSB2b2lkIDAgJiYgYSA9PT0gdm9pZCAwID8gMCA6IHMgPyBhID8gY29tcGFyZUF0b20ocywgYSkgOiAtMSA6IDE7XG4gIH1cbiAgcmV0dXJuIDA7XG59XG5mdW5jdGlvbiBjb21wYXJlVmVyc2lvbih0LCBlKSB7XG4gIHJldHVybiBjb21wYXJlQXRvbSh0Lm1ham9yLCBlLm1ham9yKSB8fCBjb21wYXJlQXRvbSh0Lm1pbm9yLCBlLm1pbm9yKSB8fCBjb21wYXJlQXRvbSh0LnBhdGNoLCBlLnBhdGNoKSB8fCBjb21wYXJlUHJlUmVsZWFzZSh0LCBlKTtcbn1cbmZ1bmN0aW9uIGVxKHQsIGUpIHtcbiAgcmV0dXJuIHQudmVyc2lvbiA9PT0gZS52ZXJzaW9uO1xufVxuZnVuY3Rpb24gY29tcGFyZSh0LCBlKSB7XG4gIHN3aXRjaCAodC5vcGVyYXRvcikge1xuICAgIGNhc2UgXCJcIjpcbiAgICBjYXNlIFwiPVwiOlxuICAgICAgcmV0dXJuIGVxKHQsIGUpO1xuICAgIGNhc2UgXCI+XCI6XG4gICAgICByZXR1cm4gY29tcGFyZVZlcnNpb24odCwgZSkgPCAwO1xuICAgIGNhc2UgXCI+PVwiOlxuICAgICAgcmV0dXJuIGVxKHQsIGUpIHx8IGNvbXBhcmVWZXJzaW9uKHQsIGUpIDwgMDtcbiAgICBjYXNlIFwiPFwiOlxuICAgICAgcmV0dXJuIGNvbXBhcmVWZXJzaW9uKHQsIGUpID4gMDtcbiAgICBjYXNlIFwiPD1cIjpcbiAgICAgIHJldHVybiBlcSh0LCBlKSB8fCBjb21wYXJlVmVyc2lvbih0LCBlKSA+IDA7XG4gICAgY2FzZSB2b2lkIDA6XG4gICAgICByZXR1cm4gITA7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiAhMTtcbiAgfVxufVxuZnVuY3Rpb24gcGFyc2VDb21wYXJhdG9yU3RyaW5nKHQpIHtcbiAgcmV0dXJuIHBpcGUoXG4gICAgcGFyc2VDYXJldHMsXG4gICAgcGFyc2VUaWxkZXMsXG4gICAgcGFyc2VYUmFuZ2VzLFxuICAgIHBhcnNlU3RhclxuICApKHQpO1xufVxuZnVuY3Rpb24gcGFyc2VSYW5nZSh0KSB7XG4gIHJldHVybiBwaXBlKFxuICAgIHBhcnNlSHlwaGVuLFxuICAgIHBhcnNlQ29tcGFyYXRvclRyaW0sXG4gICAgcGFyc2VUaWxkZVRyaW0sXG4gICAgcGFyc2VDYXJldFRyaW1cbiAgKSh0LnRyaW0oKSkuc3BsaXQoL1xccysvKS5qb2luKFwiIFwiKTtcbn1cbmZ1bmN0aW9uIHNhdGlzZnkodCwgZSkge1xuICBpZiAoIXQpXG4gICAgcmV0dXJuICExO1xuICBjb25zdCByID0gcGFyc2VSYW5nZShlKS5zcGxpdChcIiBcIikubWFwKCh1KSA9PiBwYXJzZUNvbXBhcmF0b3JTdHJpbmcodSkpLmpvaW4oXCIgXCIpLnNwbGl0KC9cXHMrLykubWFwKCh1KSA9PiBwYXJzZUdURTAodSkpLCBuID0gZXh0cmFjdENvbXBhcmF0b3IodCk7XG4gIGlmICghbilcbiAgICByZXR1cm4gITE7XG4gIGNvbnN0IFssIG8sICwgaSwgcywgYSwgY10gPSBuLCBsID0ge1xuICAgIG9wZXJhdG9yOiBvLFxuICAgIHZlcnNpb246IGNvbWJpbmVWZXJzaW9uKGksIHMsIGEsIGMpLFxuICAgIG1ham9yOiBpLFxuICAgIG1pbm9yOiBzLFxuICAgIHBhdGNoOiBhLFxuICAgIHByZVJlbGVhc2U6IGMgPT0gbnVsbCA/IHZvaWQgMCA6IGMuc3BsaXQoXCIuXCIpXG4gIH07XG4gIGZvciAoY29uc3QgdSBvZiByKSB7XG4gICAgY29uc3QgZCA9IGV4dHJhY3RDb21wYXJhdG9yKHUpO1xuICAgIGlmICghZClcbiAgICAgIHJldHVybiAhMTtcbiAgICBjb25zdCBbLCBtLCAsIHAsIGgsIHksIHddID0gZCwgZyA9IHtcbiAgICAgIG9wZXJhdG9yOiBtLFxuICAgICAgdmVyc2lvbjogY29tYmluZVZlcnNpb24ocCwgaCwgeSwgdyksXG4gICAgICBtYWpvcjogcCxcbiAgICAgIG1pbm9yOiBoLFxuICAgICAgcGF0Y2g6IHksXG4gICAgICBwcmVSZWxlYXNlOiB3ID09IG51bGwgPyB2b2lkIDAgOiB3LnNwbGl0KFwiLlwiKVxuICAgIH07XG4gICAgaWYgKCFjb21wYXJlKGcsIGwpKVxuICAgICAgcmV0dXJuICExO1xuICB9XG4gIHJldHVybiAhMDtcbn1cbmZ1bmN0aW9uIF9leHRlbmRzJDYoKSB7XG4gIHJldHVybiBfZXh0ZW5kcyQ2ID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbih0KSB7XG4gICAgZm9yICh2YXIgZSA9IDE7IGUgPCBhcmd1bWVudHMubGVuZ3RoOyBlKyspIHtcbiAgICAgIHZhciByID0gYXJndW1lbnRzW2VdO1xuICAgICAgZm9yICh2YXIgbiBpbiByKVxuICAgICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwociwgbikgJiYgKHRbbl0gPSByW25dKTtcbiAgICB9XG4gICAgcmV0dXJuIHQ7XG4gIH0sIF9leHRlbmRzJDYuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbn1cbmZ1bmN0aW9uIGZvcm1hdFNoYXJlKHQsIGUpIHtcbiAgbGV0IHI7XG4gIHJldHVybiBcImdldFwiIGluIHQgPyByID0gdC5nZXQgOiByID0gKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHQubGliKSwgX2V4dGVuZHMkNih7XG4gICAgZGVwczogW10sXG4gICAgdXNlSW46IFtdLFxuICAgIGZyb206IGUsXG4gICAgbG9hZGluZzogbnVsbFxuICB9LCB0LCB7XG4gICAgc2hhcmVDb25maWc6IF9leHRlbmRzJDYoe1xuICAgICAgcmVxdWlyZWRWZXJzaW9uOiBgXiR7dC52ZXJzaW9ufWAsXG4gICAgICBzaW5nbGV0b246ICExLFxuICAgICAgZWFnZXI6ICExLFxuICAgICAgc3RyaWN0VmVyc2lvbjogITFcbiAgICB9LCB0LnNoYXJlQ29uZmlnKSxcbiAgICBnZXQ6IHIsXG4gICAgbG9hZGVkOiBcImxpYlwiIGluIHQgPyAhMCA6IHZvaWQgMCxcbiAgICBzY29wZTogQXJyYXkuaXNBcnJheSh0LnNjb3BlKSA/IHQuc2NvcGUgOiBbXG4gICAgICBcImRlZmF1bHRcIlxuICAgIF0sXG4gICAgc3RyYXRlZ3k6IHQuc3RyYXRlZ3kgfHwgXCJ2ZXJzaW9uLWZpcnN0XCJcbiAgfSk7XG59XG5mdW5jdGlvbiBmb3JtYXRTaGFyZUNvbmZpZ3ModCwgZSkge1xuICByZXR1cm4gdCA/IE9iamVjdC5rZXlzKHQpLnJlZHVjZSgociwgbikgPT4gKHJbbl0gPSBmb3JtYXRTaGFyZSh0W25dLCBlKSwgciksIHt9KSA6IHt9O1xufVxuZnVuY3Rpb24gdmVyc2lvbkx0KHQsIGUpIHtcbiAgY29uc3QgciA9IChuKSA9PiB7XG4gICAgaWYgKCFOdW1iZXIuaXNOYU4oTnVtYmVyKG4pKSkge1xuICAgICAgY29uc3QgbyA9IG4uc3BsaXQoXCIuXCIpO1xuICAgICAgbGV0IGkgPSBuO1xuICAgICAgZm9yIChsZXQgcyA9IDA7IHMgPCAzIC0gby5sZW5ndGg7IHMrKylcbiAgICAgICAgaSArPSBcIi4wXCI7XG4gICAgICByZXR1cm4gaTtcbiAgICB9XG4gICAgcmV0dXJuIG47XG4gIH07XG4gIHJldHVybiAhIXNhdGlzZnkocih0KSwgYDw9JHtyKGUpfWApO1xufVxuY29uc3QgZmluZFZlcnNpb24gPSAodCwgZSwgciwgbikgPT4ge1xuICBjb25zdCBvID0gdFtlXVtyXSwgaSA9IG4gfHwgZnVuY3Rpb24ocywgYSkge1xuICAgIHJldHVybiB2ZXJzaW9uTHQocywgYSk7XG4gIH07XG4gIHJldHVybiBPYmplY3Qua2V5cyhvKS5yZWR1Y2UoKHMsIGEpID0+ICFzIHx8IGkocywgYSkgfHwgcyA9PT0gXCIwXCIgPyBhIDogcywgMCk7XG59LCBpc0xvYWRlZCA9ICh0KSA9PiBCb29sZWFuKHQubG9hZGVkKSB8fCB0eXBlb2YgdC5saWIgPT0gXCJmdW5jdGlvblwiO1xuZnVuY3Rpb24gZmluZFNpbmdsZXRvblZlcnNpb25PcmRlckJ5VmVyc2lvbih0LCBlLCByKSB7XG4gIGNvbnN0IG4gPSB0W2VdW3JdO1xuICByZXR1cm4gZmluZFZlcnNpb24odCwgZSwgciwgZnVuY3Rpb24obywgaSkge1xuICAgIHJldHVybiAhaXNMb2FkZWQobltvXSkgJiYgdmVyc2lvbkx0KG8sIGkpO1xuICB9KTtcbn1cbmZ1bmN0aW9uIGZpbmRTaW5nbGV0b25WZXJzaW9uT3JkZXJCeUxvYWRlZCh0LCBlLCByKSB7XG4gIGNvbnN0IG4gPSB0W2VdW3JdO1xuICByZXR1cm4gZmluZFZlcnNpb24odCwgZSwgciwgZnVuY3Rpb24obywgaSkge1xuICAgIHJldHVybiBpc0xvYWRlZChuW2ldKSA/IGlzTG9hZGVkKG5bb10pID8gQm9vbGVhbih2ZXJzaW9uTHQobywgaSkpIDogITAgOiBpc0xvYWRlZChuW29dKSA/ICExIDogdmVyc2lvbkx0KG8sIGkpO1xuICB9KTtcbn1cbmZ1bmN0aW9uIGdldEZpbmRTaGFyZUZ1bmN0aW9uKHQpIHtcbiAgcmV0dXJuIHQgPT09IFwibG9hZGVkLWZpcnN0XCIgPyBmaW5kU2luZ2xldG9uVmVyc2lvbk9yZGVyQnlMb2FkZWQgOiBmaW5kU2luZ2xldG9uVmVyc2lvbk9yZGVyQnlWZXJzaW9uO1xufVxuZnVuY3Rpb24gZ2V0UmVnaXN0ZXJlZFNoYXJlKHQsIGUsIHIsIG4pIHtcbiAgaWYgKCF0KVxuICAgIHJldHVybjtcbiAgY29uc3QgeyBzaGFyZUNvbmZpZzogbywgc2NvcGU6IGkgPSBERUZBVUxUX1NDT1BFLCBzdHJhdGVneTogcyB9ID0gciwgYSA9IEFycmF5LmlzQXJyYXkoaSkgPyBpIDogW1xuICAgIGlcbiAgXTtcbiAgZm9yIChjb25zdCBjIG9mIGEpXG4gICAgaWYgKG8gJiYgdFtjXSAmJiB0W2NdW2VdKSB7XG4gICAgICBjb25zdCB7IHJlcXVpcmVkVmVyc2lvbjogbCB9ID0gbywgdSA9IGdldEZpbmRTaGFyZUZ1bmN0aW9uKHMpKHQsIGMsIGUpLCBkID0gKCkgPT4ge1xuICAgICAgICBpZiAoby5zaW5nbGV0b24pIHtcbiAgICAgICAgICBpZiAodHlwZW9mIGwgPT0gXCJzdHJpbmdcIiAmJiAhc2F0aXNmeSh1LCBsKSkge1xuICAgICAgICAgICAgY29uc3QgcCA9IGBWZXJzaW9uICR7dX0gZnJvbSAke3UgJiYgdFtjXVtlXVt1XS5mcm9tfSBvZiBzaGFyZWQgc2luZ2xldG9uIG1vZHVsZSAke2V9IGRvZXMgbm90IHNhdGlzZnkgdGhlIHJlcXVpcmVtZW50IG9mICR7ci5mcm9tfSB3aGljaCBuZWVkcyAke2x9KWA7XG4gICAgICAgICAgICBvLnN0cmljdFZlcnNpb24gPyBlcnJvcihwKSA6IHdhcm4kMShwKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHRbY11bZV1bdV07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKGwgPT09ICExIHx8IGwgPT09IFwiKlwiIHx8IHNhdGlzZnkodSwgbCkpXG4gICAgICAgICAgICByZXR1cm4gdFtjXVtlXVt1XTtcbiAgICAgICAgICBmb3IgKGNvbnN0IFtwLCBoXSBvZiBPYmplY3QuZW50cmllcyh0W2NdW2VdKSlcbiAgICAgICAgICAgIGlmIChzYXRpc2Z5KHAsIGwpKVxuICAgICAgICAgICAgICByZXR1cm4gaDtcbiAgICAgICAgfVxuICAgICAgfSwgbSA9IHtcbiAgICAgICAgc2hhcmVTY29wZU1hcDogdCxcbiAgICAgICAgc2NvcGU6IGMsXG4gICAgICAgIHBrZ05hbWU6IGUsXG4gICAgICAgIHZlcnNpb246IHUsXG4gICAgICAgIEdsb2JhbEZlZGVyYXRpb246IEdsb2JhbC5fX0ZFREVSQVRJT05fXyxcbiAgICAgICAgcmVzb2x2ZXI6IGRcbiAgICAgIH07XG4gICAgICByZXR1cm4gKG4uZW1pdChtKSB8fCBtKS5yZXNvbHZlcigpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGdldEdsb2JhbFNoYXJlU2NvcGUoKSB7XG4gIHJldHVybiBHbG9iYWwuX19GRURFUkFUSU9OX18uX19TSEFSRV9fO1xufVxuZnVuY3Rpb24gX2RlZmluZV9wcm9wZXJ0eSQzKHQsIGUsIHIpIHtcbiAgcmV0dXJuIGUgaW4gdCA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCBlLCB7XG4gICAgdmFsdWU6IHIsXG4gICAgZW51bWVyYWJsZTogITAsXG4gICAgY29uZmlndXJhYmxlOiAhMCxcbiAgICB3cml0YWJsZTogITBcbiAgfSkgOiB0W2VdID0gciwgdDtcbn1cbnZhciBNQU5JRkVTVF9FWFQgPSBcIi5qc29uXCIsIEJST1dTRVJfTE9HX0tFWSA9IFwiRkVERVJBVElPTl9ERUJVR1wiLCBCUk9XU0VSX0xPR19WQUxVRSA9IFwiMVwiLCBOYW1lVHJhbnNmb3JtU3ltYm9sID0ge1xuICBBVDogXCJAXCIsXG4gIEhZUEhFTjogXCItXCIsXG4gIFNMQVNIOiBcIi9cIlxufSwgX29iaiwgTmFtZVRyYW5zZm9ybU1hcCA9IChfb2JqID0ge30sIF9kZWZpbmVfcHJvcGVydHkkMyhfb2JqLCBOYW1lVHJhbnNmb3JtU3ltYm9sLkFULCBcInNjb3BlX1wiKSwgX2RlZmluZV9wcm9wZXJ0eSQzKF9vYmosIE5hbWVUcmFuc2Zvcm1TeW1ib2wuSFlQSEVOLCBcIl9cIiksIF9kZWZpbmVfcHJvcGVydHkkMyhfb2JqLCBOYW1lVHJhbnNmb3JtU3ltYm9sLlNMQVNILCBcIl9fXCIpLCBfb2JqKSwgX29iajE7XG5fb2JqMSA9IHt9LCBfZGVmaW5lX3Byb3BlcnR5JDMoX29iajEsIE5hbWVUcmFuc2Zvcm1NYXBbTmFtZVRyYW5zZm9ybVN5bWJvbC5BVF0sIE5hbWVUcmFuc2Zvcm1TeW1ib2wuQVQpLCBfZGVmaW5lX3Byb3BlcnR5JDMoX29iajEsIE5hbWVUcmFuc2Zvcm1NYXBbTmFtZVRyYW5zZm9ybVN5bWJvbC5IWVBIRU5dLCBOYW1lVHJhbnNmb3JtU3ltYm9sLkhZUEhFTiksIF9kZWZpbmVfcHJvcGVydHkkMyhfb2JqMSwgTmFtZVRyYW5zZm9ybU1hcFtOYW1lVHJhbnNmb3JtU3ltYm9sLlNMQVNIXSwgTmFtZVRyYW5zZm9ybVN5bWJvbC5TTEFTSCk7XG52YXIgU0VQQVJBVE9SID0gXCI6XCI7XG5mdW5jdGlvbiBpc0Jyb3dzZXJFbnYoKSB7XG4gIHJldHVybiB0eXBlb2Ygd2luZG93IDwgXCJ1XCI7XG59XG5mdW5jdGlvbiBpc0RlYnVnTW9kZSgpIHtcbiAgcmV0dXJuIHR5cGVvZiBwcm9jZXNzIDwgXCJ1XCIgJiYgcHJvY2Vzcy5lbnYgJiYgcHJvY2Vzcy5lbnYuRkVERVJBVElPTl9ERUJVRyA/IEJvb2xlYW4ocHJvY2Vzcy5lbnYuRkVERVJBVElPTl9ERUJVRykgOiB0eXBlb2YgRkVERVJBVElPTl9ERUJVRyA8IFwidVwiICYmIEJvb2xlYW4oRkVERVJBVElPTl9ERUJVRyk7XG59XG5mdW5jdGlvbiBfYXJyYXlfbGlrZV90b19hcnJheSQyKHQsIGUpIHtcbiAgKGUgPT0gbnVsbCB8fCBlID4gdC5sZW5ndGgpICYmIChlID0gdC5sZW5ndGgpO1xuICBmb3IgKHZhciByID0gMCwgbiA9IG5ldyBBcnJheShlKTsgciA8IGU7IHIrKylcbiAgICBuW3JdID0gdFtyXTtcbiAgcmV0dXJuIG47XG59XG5mdW5jdGlvbiBfYXJyYXlfd2l0aG91dF9ob2xlcyh0KSB7XG4gIGlmIChBcnJheS5pc0FycmF5KHQpKVxuICAgIHJldHVybiBfYXJyYXlfbGlrZV90b19hcnJheSQyKHQpO1xufVxuZnVuY3Rpb24gX2NsYXNzX2NhbGxfY2hlY2sodCwgZSkge1xuICBpZiAoISh0IGluc3RhbmNlb2YgZSkpXG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTtcbn1cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHQsIGUpIHtcbiAgZm9yICh2YXIgciA9IDA7IHIgPCBlLmxlbmd0aDsgcisrKSB7XG4gICAgdmFyIG4gPSBlW3JdO1xuICAgIG4uZW51bWVyYWJsZSA9IG4uZW51bWVyYWJsZSB8fCAhMSwgbi5jb25maWd1cmFibGUgPSAhMCwgXCJ2YWx1ZVwiIGluIG4gJiYgKG4ud3JpdGFibGUgPSAhMCksIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCBuLmtleSwgbik7XG4gIH1cbn1cbmZ1bmN0aW9uIF9jcmVhdGVfY2xhc3ModCwgZSwgcikge1xuICByZXR1cm4gZSAmJiBfZGVmaW5lUHJvcGVydGllcyh0LnByb3RvdHlwZSwgZSksIHIgJiYgX2RlZmluZVByb3BlcnRpZXModCwgciksIHQ7XG59XG5mdW5jdGlvbiBfZGVmaW5lX3Byb3BlcnR5JDIodCwgZSwgcikge1xuICByZXR1cm4gZSBpbiB0ID8gT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIGUsIHtcbiAgICB2YWx1ZTogcixcbiAgICBlbnVtZXJhYmxlOiAhMCxcbiAgICBjb25maWd1cmFibGU6ICEwLFxuICAgIHdyaXRhYmxlOiAhMFxuICB9KSA6IHRbZV0gPSByLCB0O1xufVxuZnVuY3Rpb24gX2l0ZXJhYmxlX3RvX2FycmF5JDEodCkge1xuICBpZiAodHlwZW9mIFN5bWJvbCA8IFwidVwiICYmIHRbU3ltYm9sLml0ZXJhdG9yXSAhPSBudWxsIHx8IHRbXCJAQGl0ZXJhdG9yXCJdICE9IG51bGwpXG4gICAgcmV0dXJuIEFycmF5LmZyb20odCk7XG59XG5mdW5jdGlvbiBfbm9uX2l0ZXJhYmxlX3NwcmVhZCgpIHtcbiAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBzcHJlYWQgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcXFxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLlwiKTtcbn1cbmZ1bmN0aW9uIF90b19jb25zdW1hYmxlX2FycmF5KHQpIHtcbiAgcmV0dXJuIF9hcnJheV93aXRob3V0X2hvbGVzKHQpIHx8IF9pdGVyYWJsZV90b19hcnJheSQxKHQpIHx8IF91bnN1cHBvcnRlZF9pdGVyYWJsZV90b19hcnJheSQyKHQpIHx8IF9ub25faXRlcmFibGVfc3ByZWFkKCk7XG59XG5mdW5jdGlvbiBfdW5zdXBwb3J0ZWRfaXRlcmFibGVfdG9fYXJyYXkkMih0LCBlKSB7XG4gIGlmICh0KSB7XG4gICAgaWYgKHR5cGVvZiB0ID09IFwic3RyaW5nXCIpXG4gICAgICByZXR1cm4gX2FycmF5X2xpa2VfdG9fYXJyYXkkMih0LCBlKTtcbiAgICB2YXIgciA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KS5zbGljZSg4LCAtMSk7XG4gICAgaWYgKHIgPT09IFwiT2JqZWN0XCIgJiYgdC5jb25zdHJ1Y3RvciAmJiAociA9IHQuY29uc3RydWN0b3IubmFtZSksIHIgPT09IFwiTWFwXCIgfHwgciA9PT0gXCJTZXRcIilcbiAgICAgIHJldHVybiBBcnJheS5mcm9tKHIpO1xuICAgIGlmIChyID09PSBcIkFyZ3VtZW50c1wiIHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KHIpKVxuICAgICAgcmV0dXJuIF9hcnJheV9saWtlX3RvX2FycmF5JDIodCwgZSk7XG4gIH1cbn1cbmZ1bmN0aW9uIHNhZmVUb1N0cmluZyh0KSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHQsIG51bGwsIDIpO1xuICB9IGNhdGNoIHtcbiAgICByZXR1cm4gXCJcIjtcbiAgfVxufVxudmFyIERFQlVHX0xPRyA9IFwiWyBGRURFUkFUSU9OIERFQlVHIF1cIjtcbmZ1bmN0aW9uIHNhZmVHZXRMb2NhbFN0b3JhZ2VJdGVtKCkge1xuICB0cnkge1xuICAgIGlmICh0eXBlb2Ygd2luZG93IDwgXCJ1XCIgJiYgd2luZG93LmxvY2FsU3RvcmFnZSlcbiAgICAgIHJldHVybiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShCUk9XU0VSX0xPR19LRVkpID09PSBCUk9XU0VSX0xPR19WQUxVRTtcbiAgfSBjYXRjaCB7XG4gICAgcmV0dXJuIHR5cGVvZiBkb2N1bWVudCA8IFwidVwiO1xuICB9XG4gIHJldHVybiAhMTtcbn1cbnZhciBMb2dnZXIgPSAvKiBAX19QVVJFX18gKi8gZnVuY3Rpb24oKSB7XG4gIGZ1bmN0aW9uIHQoZSkge1xuICAgIF9jbGFzc19jYWxsX2NoZWNrKHRoaXMsIHQpLCBfZGVmaW5lX3Byb3BlcnR5JDIodGhpcywgXCJlbmFibGVcIiwgITEpLCBfZGVmaW5lX3Byb3BlcnR5JDIodGhpcywgXCJpZGVudGlmaWVyXCIsIHZvaWQgMCksIHRoaXMuaWRlbnRpZmllciA9IGUgfHwgREVCVUdfTE9HLCBpc0Jyb3dzZXJFbnYoKSAmJiBzYWZlR2V0TG9jYWxTdG9yYWdlSXRlbSgpID8gdGhpcy5lbmFibGUgPSAhMCA6IGlzRGVidWdNb2RlKCkgJiYgKHRoaXMuZW5hYmxlID0gITApO1xuICB9XG4gIHJldHVybiBfY3JlYXRlX2NsYXNzKHQsIFtcbiAgICB7XG4gICAgICBrZXk6IFwiaW5mb1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uKGUsIHIpIHtcbiAgICAgICAgaWYgKHRoaXMuZW5hYmxlKSB7XG4gICAgICAgICAgdmFyIG4gPSBzYWZlVG9TdHJpbmcocikgfHwgXCJcIjtcbiAgICAgICAgICBpc0Jyb3dzZXJFbnYoKSA/IGNvbnNvbGUuaW5mbyhcIiVjIFwiLmNvbmNhdCh0aGlzLmlkZW50aWZpZXIsIFwiOiBcIikuY29uY2F0KGUsIFwiIFwiKS5jb25jYXQobiksIFwiY29sb3I6IzMzMDBDQ1wiKSA6IGNvbnNvbGUuaW5mbyhcIlxceDFCWzM0bSVzXCIsIFwiXCIuY29uY2F0KHRoaXMuaWRlbnRpZmllciwgXCI6IFwiKS5jb25jYXQoZSwgXCIgXCIpLmNvbmNhdChuID8gYFxuYC5jb25jYXQobikgOiBcIlwiKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIGtleTogXCJsb2dPcmlnaW5hbEluZm9cIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgZm9yICh2YXIgZSA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBuZXcgQXJyYXkoZSksIG4gPSAwOyBuIDwgZTsgbisrKVxuICAgICAgICAgIHJbbl0gPSBhcmd1bWVudHNbbl07XG4gICAgICAgIGlmICh0aGlzLmVuYWJsZSlcbiAgICAgICAgICBpZiAoaXNCcm93c2VyRW52KCkpIHtcbiAgICAgICAgICAgIHZhciBvO1xuICAgICAgICAgICAgY29uc29sZS5pbmZvKFwiJWMgXCIuY29uY2F0KHRoaXMuaWRlbnRpZmllciwgXCI6IE9yaWdpbmFsSW5mb1wiKSwgXCJjb2xvcjojMzMwMENDXCIpLCAobyA9IGNvbnNvbGUpLmxvZy5hcHBseShvLCBfdG9fY29uc3VtYWJsZV9hcnJheShyKSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciBpO1xuICAgICAgICAgICAgY29uc29sZS5pbmZvKFwiJWMgXCIuY29uY2F0KHRoaXMuaWRlbnRpZmllciwgXCI6IE9yaWdpbmFsSW5mb1wiKSwgXCJjb2xvcjojMzMwMENDXCIpLCAoaSA9IGNvbnNvbGUpLmxvZy5hcHBseShpLCBfdG9fY29uc3VtYWJsZV9hcnJheShyKSk7XG4gICAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgXSksIHQ7XG59KCksIExPR19DQVRFR09SWSA9IFwiWyBGZWRlcmF0aW9uIFJ1bnRpbWUgXVwiO1xubmV3IExvZ2dlcigpO1xudmFyIGNvbXBvc2VLZXlXaXRoU2VwYXJhdG9yID0gZnVuY3Rpb24oKSB7XG4gIGZvciAodmFyIHQgPSBhcmd1bWVudHMubGVuZ3RoLCBlID0gbmV3IEFycmF5KHQpLCByID0gMDsgciA8IHQ7IHIrKylcbiAgICBlW3JdID0gYXJndW1lbnRzW3JdO1xuICByZXR1cm4gZS5sZW5ndGggPyBlLnJlZHVjZShmdW5jdGlvbihuLCBvKSB7XG4gICAgcmV0dXJuIG8gPyBuID8gXCJcIi5jb25jYXQobikuY29uY2F0KFNFUEFSQVRPUikuY29uY2F0KG8pIDogbyA6IG47XG4gIH0sIFwiXCIpIDogXCJcIjtcbn0sIGdldFJlc291cmNlVXJsID0gZnVuY3Rpb24odCwgZSkge1xuICBpZiAoXCJnZXRQdWJsaWNQYXRoXCIgaW4gdCkge1xuICAgIHZhciByID0gbmV3IEZ1bmN0aW9uKHQuZ2V0UHVibGljUGF0aCkoKTtcbiAgICByZXR1cm4gXCJcIi5jb25jYXQocikuY29uY2F0KGUpO1xuICB9IGVsc2VcbiAgICByZXR1cm4gXCJwdWJsaWNQYXRoXCIgaW4gdCA/IFwiXCIuY29uY2F0KHQucHVibGljUGF0aCkuY29uY2F0KGUpIDogKGNvbnNvbGUud2FybihcIkNhbiBub3QgZ2V0IHJlc291cmNlIHVybCwgaWYgaW4gZGVidWcgbW9kZSwgcGxlYXNlIGlnbm9yZVwiLCB0LCBlKSwgXCJcIik7XG59LCB3YXJuID0gZnVuY3Rpb24odCkge1xuICBjb25zb2xlLndhcm4oXCJcIi5jb25jYXQoTE9HX0NBVEVHT1JZLCBcIjogXCIpLmNvbmNhdCh0KSk7XG59O1xuZnVuY3Rpb24gX2RlZmluZV9wcm9wZXJ0eSQxKHQsIGUsIHIpIHtcbiAgcmV0dXJuIGUgaW4gdCA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCBlLCB7XG4gICAgdmFsdWU6IHIsXG4gICAgZW51bWVyYWJsZTogITAsXG4gICAgY29uZmlndXJhYmxlOiAhMCxcbiAgICB3cml0YWJsZTogITBcbiAgfSkgOiB0W2VdID0gciwgdDtcbn1cbmZ1bmN0aW9uIF9vYmplY3Rfc3ByZWFkJDEodCkge1xuICBmb3IgKHZhciBlID0gMTsgZSA8IGFyZ3VtZW50cy5sZW5ndGg7IGUrKykge1xuICAgIHZhciByID0gYXJndW1lbnRzW2VdICE9IG51bGwgPyBhcmd1bWVudHNbZV0gOiB7fSwgbiA9IE9iamVjdC5rZXlzKHIpO1xuICAgIHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzID09IFwiZnVuY3Rpb25cIiAmJiAobiA9IG4uY29uY2F0KE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocikuZmlsdGVyKGZ1bmN0aW9uKG8pIHtcbiAgICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHIsIG8pLmVudW1lcmFibGU7XG4gICAgfSkpKSwgbi5mb3JFYWNoKGZ1bmN0aW9uKG8pIHtcbiAgICAgIF9kZWZpbmVfcHJvcGVydHkkMSh0LCBvLCByW29dKTtcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gdDtcbn1cbmZ1bmN0aW9uIG93bktleXModCwgZSkge1xuICB2YXIgciA9IE9iamVjdC5rZXlzKHQpO1xuICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykge1xuICAgIHZhciBuID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyh0KTtcbiAgICBlICYmIChuID0gbi5maWx0ZXIoZnVuY3Rpb24obykge1xuICAgICAgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCwgbykuZW51bWVyYWJsZTtcbiAgICB9KSksIHIucHVzaC5hcHBseShyLCBuKTtcbiAgfVxuICByZXR1cm4gcjtcbn1cbmZ1bmN0aW9uIF9vYmplY3Rfc3ByZWFkX3Byb3BzKHQsIGUpIHtcbiAgcmV0dXJuIGUgPSBlICE9IG51bGwgPyBlIDoge30sIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzID8gT2JqZWN0LmRlZmluZVByb3BlcnRpZXModCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoZSkpIDogb3duS2V5cyhPYmplY3QoZSkpLmZvckVhY2goZnVuY3Rpb24ocikge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCByLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsIHIpKTtcbiAgfSksIHQ7XG59XG52YXIgc2ltcGxlSm9pblJlbW90ZUVudHJ5ID0gZnVuY3Rpb24odCwgZSkge1xuICBpZiAoIXQpXG4gICAgcmV0dXJuIGU7XG4gIHZhciByID0gZnVuY3Rpb24obykge1xuICAgIGlmIChvID09PSBcIi5cIilcbiAgICAgIHJldHVybiBcIlwiO1xuICAgIGlmIChvLnN0YXJ0c1dpdGgoXCIuL1wiKSlcbiAgICAgIHJldHVybiBvLnJlcGxhY2UoXCIuL1wiLCBcIlwiKTtcbiAgICBpZiAoby5zdGFydHNXaXRoKFwiL1wiKSkge1xuICAgICAgdmFyIGkgPSBvLnNsaWNlKDEpO1xuICAgICAgcmV0dXJuIGkuZW5kc1dpdGgoXCIvXCIpID8gaS5zbGljZSgwLCAtMSkgOiBpO1xuICAgIH1cbiAgICByZXR1cm4gbztcbiAgfSwgbiA9IHIodCk7XG4gIHJldHVybiBuID8gbi5lbmRzV2l0aChcIi9cIikgPyBcIlwiLmNvbmNhdChuKS5jb25jYXQoZSkgOiBcIlwiLmNvbmNhdChuLCBcIi9cIikuY29uY2F0KGUpIDogZTtcbn07XG5mdW5jdGlvbiBnZW5lcmF0ZVNuYXBzaG90RnJvbU1hbmlmZXN0KHQpIHtcbiAgdmFyIGUgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHZvaWQgMCA/IGFyZ3VtZW50c1sxXSA6IHt9LCByLCBuLCBvID0gZS5yZW1vdGVzLCBpID0gbyA9PT0gdm9pZCAwID8ge30gOiBvLCBzID0gZS5vdmVycmlkZXMsIGEgPSBzID09PSB2b2lkIDAgPyB7fSA6IHMsIGMgPSBlLnZlcnNpb24sIGwsIHUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gXCJwdWJsaWNQYXRoXCIgaW4gdC5tZXRhRGF0YSA/IHQubWV0YURhdGEucHVibGljUGF0aCA6IHQubWV0YURhdGEuZ2V0UHVibGljUGF0aDtcbiAgfSwgZCA9IE9iamVjdC5rZXlzKGEpLCBtID0ge307XG4gIGlmICghT2JqZWN0LmtleXMoaSkubGVuZ3RoKSB7XG4gICAgdmFyIHA7XG4gICAgbSA9ICgocCA9IHQucmVtb3RlcykgPT09IG51bGwgfHwgcCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcC5yZWR1Y2UoZnVuY3Rpb24oQSwgTykge1xuICAgICAgdmFyIHosIFIgPSBPLmZlZGVyYXRpb25Db250YWluZXJOYW1lO1xuICAgICAgcmV0dXJuIGQuaW5jbHVkZXMoUikgPyB6ID0gYVtSXSA6IFwidmVyc2lvblwiIGluIE8gPyB6ID0gTy52ZXJzaW9uIDogeiA9IE8uZW50cnksIEFbUl0gPSB7XG4gICAgICAgIG1hdGNoZWRWZXJzaW9uOiB6XG4gICAgICB9LCBBO1xuICAgIH0sIHt9KSkgfHwge307XG4gIH1cbiAgT2JqZWN0LmtleXMoaSkuZm9yRWFjaChmdW5jdGlvbihBKSB7XG4gICAgcmV0dXJuIG1bQV0gPSB7XG4gICAgICBtYXRjaGVkVmVyc2lvbjogZC5pbmNsdWRlcyhBKSA/IGFbQV0gOiBpW0FdXG4gICAgfTtcbiAgfSk7XG4gIHZhciBoID0gdC5tZXRhRGF0YSwgeSA9IGgucmVtb3RlRW50cnksIHcgPSB5LnBhdGgsIGcgPSB5Lm5hbWUsIEkgPSB5LnR5cGUsIE0gPSBoLnR5cGVzLCBTID0gaC5idWlsZEluZm8uYnVpbGRWZXJzaW9uLCBFID0gaC5nbG9iYWxOYW1lLCBEID0gdC5leHBvc2VzLCBiID0ge1xuICAgIHZlcnNpb246IGMgfHwgXCJcIixcbiAgICBidWlsZFZlcnNpb246IFMsXG4gICAgZ2xvYmFsTmFtZTogRSxcbiAgICByZW1vdGVFbnRyeTogc2ltcGxlSm9pblJlbW90ZUVudHJ5KHcsIGcpLFxuICAgIHJlbW90ZUVudHJ5VHlwZTogSSxcbiAgICByZW1vdGVUeXBlczogc2ltcGxlSm9pblJlbW90ZUVudHJ5KE0ucGF0aCwgTS5uYW1lKSxcbiAgICByZW1vdGVUeXBlc1ppcDogTS56aXAgfHwgXCJcIixcbiAgICByZW1vdGVUeXBlc0FQSTogTS5hcGkgfHwgXCJcIixcbiAgICByZW1vdGVzSW5mbzogbSxcbiAgICBzaGFyZWQ6IHQgPT0gbnVsbCA/IHZvaWQgMCA6IHQuc2hhcmVkLm1hcChmdW5jdGlvbihBKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBhc3NldHM6IEEuYXNzZXRzLFxuICAgICAgICBzaGFyZWROYW1lOiBBLm5hbWVcbiAgICAgIH07XG4gICAgfSksXG4gICAgbW9kdWxlczogRCA9PSBudWxsID8gdm9pZCAwIDogRC5tYXAoZnVuY3Rpb24oQSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbW9kdWxlTmFtZTogQS5uYW1lLFxuICAgICAgICBtb2R1bGVQYXRoOiBBLnBhdGgsXG4gICAgICAgIGFzc2V0czogQS5hc3NldHNcbiAgICAgIH07XG4gICAgfSlcbiAgfTtcbiAgaWYgKCEoKHIgPSB0Lm1ldGFEYXRhKSA9PT0gbnVsbCB8fCByID09PSB2b2lkIDApICYmIHIucHJlZmV0Y2hJbnRlcmZhY2UpIHtcbiAgICB2YXIgXyA9IHQubWV0YURhdGEucHJlZmV0Y2hJbnRlcmZhY2U7XG4gICAgYiA9IF9vYmplY3Rfc3ByZWFkX3Byb3BzKF9vYmplY3Rfc3ByZWFkJDEoe30sIGIpLCB7XG4gICAgICBwcmVmZXRjaEludGVyZmFjZTogX1xuICAgIH0pO1xuICB9XG4gIGlmICghKChuID0gdC5tZXRhRGF0YSkgPT09IG51bGwgfHwgbiA9PT0gdm9pZCAwKSAmJiBuLnByZWZldGNoRW50cnkpIHtcbiAgICB2YXIgdiA9IHQubWV0YURhdGEucHJlZmV0Y2hFbnRyeSwgayA9IHYucGF0aCwgVSA9IHYubmFtZSwgcSA9IHYudHlwZTtcbiAgICBiID0gX29iamVjdF9zcHJlYWRfcHJvcHMoX29iamVjdF9zcHJlYWQkMSh7fSwgYiksIHtcbiAgICAgIHByZWZldGNoRW50cnk6IHNpbXBsZUpvaW5SZW1vdGVFbnRyeShrLCBVKSxcbiAgICAgIHByZWZldGNoRW50cnlUeXBlOiBxXG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIFwicHVibGljUGF0aFwiIGluIHQubWV0YURhdGEgPyBsID0gX29iamVjdF9zcHJlYWRfcHJvcHMoX29iamVjdF9zcHJlYWQkMSh7fSwgYiksIHtcbiAgICBwdWJsaWNQYXRoOiB1KClcbiAgfSkgOiBsID0gX29iamVjdF9zcHJlYWRfcHJvcHMoX29iamVjdF9zcHJlYWQkMSh7fSwgYiksIHtcbiAgICBnZXRQdWJsaWNQYXRoOiB1KClcbiAgfSksIGw7XG59XG5mdW5jdGlvbiBpc01hbmlmZXN0UHJvdmlkZXIodCkge1xuICByZXR1cm4gISEoXCJyZW1vdGVFbnRyeVwiIGluIHQgJiYgdC5yZW1vdGVFbnRyeS5pbmNsdWRlcyhNQU5JRkVTVF9FWFQpKTtcbn1cbmZ1bmN0aW9uIGFzeW5jR2VuZXJhdG9yU3RlcCQxKHQsIGUsIHIsIG4sIG8sIGksIHMpIHtcbiAgdHJ5IHtcbiAgICB2YXIgYSA9IHRbaV0ocyksIGMgPSBhLnZhbHVlO1xuICB9IGNhdGNoIChsKSB7XG4gICAgcihsKTtcbiAgICByZXR1cm47XG4gIH1cbiAgYS5kb25lID8gZShjKSA6IFByb21pc2UucmVzb2x2ZShjKS50aGVuKG4sIG8pO1xufVxuZnVuY3Rpb24gX2FzeW5jX3RvX2dlbmVyYXRvciQxKHQpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciBlID0gdGhpcywgciA9IGFyZ3VtZW50cztcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24obiwgbykge1xuICAgICAgdmFyIGkgPSB0LmFwcGx5KGUsIHIpO1xuICAgICAgZnVuY3Rpb24gcyhjKSB7XG4gICAgICAgIGFzeW5jR2VuZXJhdG9yU3RlcCQxKGksIG4sIG8sIHMsIGEsIFwibmV4dFwiLCBjKTtcbiAgICAgIH1cbiAgICAgIGZ1bmN0aW9uIGEoYykge1xuICAgICAgICBhc3luY0dlbmVyYXRvclN0ZXAkMShpLCBuLCBvLCBzLCBhLCBcInRocm93XCIsIGMpO1xuICAgICAgfVxuICAgICAgcyh2b2lkIDApO1xuICAgIH0pO1xuICB9O1xufVxuZnVuY3Rpb24gX2luc3RhbmNlb2YodCwgZSkge1xuICByZXR1cm4gZSAhPSBudWxsICYmIHR5cGVvZiBTeW1ib2wgPCBcInVcIiAmJiBlW1N5bWJvbC5oYXNJbnN0YW5jZV0gPyAhIWVbU3ltYm9sLmhhc0luc3RhbmNlXSh0KSA6IHQgaW5zdGFuY2VvZiBlO1xufVxuZnVuY3Rpb24gX3RzX2dlbmVyYXRvciQxKHQsIGUpIHtcbiAgdmFyIHIsIG4sIG8sIGksIHMgPSB7XG4gICAgbGFiZWw6IDAsXG4gICAgc2VudDogZnVuY3Rpb24oKSB7XG4gICAgICBpZiAob1swXSAmIDEpXG4gICAgICAgIHRocm93IG9bMV07XG4gICAgICByZXR1cm4gb1sxXTtcbiAgICB9LFxuICAgIHRyeXM6IFtdLFxuICAgIG9wczogW11cbiAgfTtcbiAgcmV0dXJuIGkgPSB7XG4gICAgbmV4dDogYSgwKSxcbiAgICB0aHJvdzogYSgxKSxcbiAgICByZXR1cm46IGEoMilcbiAgfSwgdHlwZW9mIFN5bWJvbCA9PSBcImZ1bmN0aW9uXCIgJiYgKGlbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzO1xuICB9KSwgaTtcbiAgZnVuY3Rpb24gYShsKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHUpIHtcbiAgICAgIHJldHVybiBjKFtcbiAgICAgICAgbCxcbiAgICAgICAgdVxuICAgICAgXSk7XG4gICAgfTtcbiAgfVxuICBmdW5jdGlvbiBjKGwpIHtcbiAgICBpZiAocilcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xuICAgIGZvciAoOyBzOyApXG4gICAgICB0cnkge1xuICAgICAgICBpZiAociA9IDEsIG4gJiYgKG8gPSBsWzBdICYgMiA/IG4ucmV0dXJuIDogbFswXSA/IG4udGhyb3cgfHwgKChvID0gbi5yZXR1cm4pICYmIG8uY2FsbChuKSwgMCkgOiBuLm5leHQpICYmICEobyA9IG8uY2FsbChuLCBsWzFdKSkuZG9uZSlcbiAgICAgICAgICByZXR1cm4gbztcbiAgICAgICAgc3dpdGNoIChuID0gMCwgbyAmJiAobCA9IFtcbiAgICAgICAgICBsWzBdICYgMixcbiAgICAgICAgICBvLnZhbHVlXG4gICAgICAgIF0pLCBsWzBdKSB7XG4gICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIG8gPSBsO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgcmV0dXJuIHMubGFiZWwrKywge1xuICAgICAgICAgICAgICB2YWx1ZTogbFsxXSxcbiAgICAgICAgICAgICAgZG9uZTogITFcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgcy5sYWJlbCsrLCBuID0gbFsxXSwgbCA9IFtcbiAgICAgICAgICAgICAgMFxuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIGNhc2UgNzpcbiAgICAgICAgICAgIGwgPSBzLm9wcy5wb3AoKSwgcy50cnlzLnBvcCgpO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGlmIChvID0gcy50cnlzLCAhKG8gPSBvLmxlbmd0aCA+IDAgJiYgb1tvLmxlbmd0aCAtIDFdKSAmJiAobFswXSA9PT0gNiB8fCBsWzBdID09PSAyKSkge1xuICAgICAgICAgICAgICBzID0gMDtcbiAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobFswXSA9PT0gMyAmJiAoIW8gfHwgbFsxXSA+IG9bMF0gJiYgbFsxXSA8IG9bM10pKSB7XG4gICAgICAgICAgICAgIHMubGFiZWwgPSBsWzFdO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChsWzBdID09PSA2ICYmIHMubGFiZWwgPCBvWzFdKSB7XG4gICAgICAgICAgICAgIHMubGFiZWwgPSBvWzFdLCBvID0gbDtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobyAmJiBzLmxhYmVsIDwgb1syXSkge1xuICAgICAgICAgICAgICBzLmxhYmVsID0gb1syXSwgcy5vcHMucHVzaChsKTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvWzJdICYmIHMub3BzLnBvcCgpLCBzLnRyeXMucG9wKCk7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBsID0gZS5jYWxsKHQsIHMpO1xuICAgICAgfSBjYXRjaCAodSkge1xuICAgICAgICBsID0gW1xuICAgICAgICAgIDYsXG4gICAgICAgICAgdVxuICAgICAgICBdLCBuID0gMDtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIHIgPSBvID0gMDtcbiAgICAgIH1cbiAgICBpZiAobFswXSAmIDUpXG4gICAgICB0aHJvdyBsWzFdO1xuICAgIHJldHVybiB7XG4gICAgICB2YWx1ZTogbFswXSA/IGxbMV0gOiB2b2lkIDAsXG4gICAgICBkb25lOiAhMFxuICAgIH07XG4gIH1cbn1cbmZ1bmN0aW9uIHNhZmVXcmFwcGVyKHQsIGUpIHtcbiAgcmV0dXJuIF9zYWZlV3JhcHBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufVxuZnVuY3Rpb24gX3NhZmVXcmFwcGVyKCkge1xuICByZXR1cm4gX3NhZmVXcmFwcGVyID0gX2FzeW5jX3RvX2dlbmVyYXRvciQxKGZ1bmN0aW9uKHQsIGUpIHtcbiAgICB2YXIgciwgbjtcbiAgICByZXR1cm4gX3RzX2dlbmVyYXRvciQxKHRoaXMsIGZ1bmN0aW9uKG8pIHtcbiAgICAgIHN3aXRjaCAoby5sYWJlbCkge1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgcmV0dXJuIG8udHJ5cy5wdXNoKFtcbiAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAyLFxuICAgICAgICAgICAgLFxuICAgICAgICAgICAgM1xuICAgICAgICAgIF0pLCBbXG4gICAgICAgICAgICA0LFxuICAgICAgICAgICAgdCgpXG4gICAgICAgICAgXTtcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgIHJldHVybiByID0gby5zZW50KCksIFtcbiAgICAgICAgICAgIDIsXG4gICAgICAgICAgICByXG4gICAgICAgICAgXTtcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgIHJldHVybiBuID0gby5zZW50KCksICFlICYmIHdhcm4obiksIFtcbiAgICAgICAgICAgIDJcbiAgICAgICAgICBdO1xuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIDJcbiAgICAgICAgICBdO1xuICAgICAgfVxuICAgIH0pO1xuICB9KSwgX3NhZmVXcmFwcGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59XG5mdW5jdGlvbiBpc1N0YXRpY1Jlc291cmNlc0VxdWFsKHQsIGUpIHtcbiAgdmFyIHIgPSAvXihodHRwcz86KT9cXC9cXC8vaSwgbiA9IHQucmVwbGFjZShyLCBcIlwiKS5yZXBsYWNlKC9cXC8kLywgXCJcIiksIG8gPSBlLnJlcGxhY2UociwgXCJcIikucmVwbGFjZSgvXFwvJC8sIFwiXCIpO1xuICByZXR1cm4gbiA9PT0gbztcbn1cbmZ1bmN0aW9uIGNyZWF0ZVNjcmlwdCh0LCBlLCByLCBuKSB7XG4gIGZvciAodmFyIG8gPSBudWxsLCBpID0gITAsIHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInNjcmlwdFwiKSwgYSA9IDA7IGEgPCBzLmxlbmd0aDsgYSsrKSB7XG4gICAgdmFyIGMgPSBzW2FdLCBsID0gYy5nZXRBdHRyaWJ1dGUoXCJzcmNcIik7XG4gICAgaWYgKGwgJiYgaXNTdGF0aWNSZXNvdXJjZXNFcXVhbChsLCB0KSkge1xuICAgICAgbyA9IGMsIGkgPSAhMTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICBpZiAoIW8gJiYgKG8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpLCBvLnR5cGUgPSBcInRleHQvamF2YXNjcmlwdFwiLCBvLnNyYyA9IHQsIG4pKSB7XG4gICAgdmFyIHUgPSBuKHQpO1xuICAgIF9pbnN0YW5jZW9mKHUsIEhUTUxTY3JpcHRFbGVtZW50KSAmJiAobyA9IHUpO1xuICB9XG4gIHIgJiYgT2JqZWN0LmtleXMocikuZm9yRWFjaChmdW5jdGlvbihtKSB7XG4gICAgbyAmJiAobSA9PT0gXCJhc3luY1wiIHx8IG0gPT09IFwiZGVmZXJcIiA/IG9bbV0gPSByW21dIDogby5zZXRBdHRyaWJ1dGUobSwgclttXSkpO1xuICB9KTtcbiAgdmFyIGQgPSBmdW5jdGlvbihtLCBwKSB7XG4gICAgaWYgKG8gJiYgKG8ub25lcnJvciA9IG51bGwsIG8ub25sb2FkID0gbnVsbCwgc2FmZVdyYXBwZXIoZnVuY3Rpb24oKSB7XG4gICAgICBvICE9IG51bGwgJiYgby5wYXJlbnROb2RlICYmIG8ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChvKTtcbiAgICB9KSwgbSkpIHtcbiAgICAgIHZhciBoID0gbShwKTtcbiAgICAgIHJldHVybiBlKCksIGg7XG4gICAgfVxuICAgIGUoKTtcbiAgfTtcbiAgcmV0dXJuIG8ub25lcnJvciA9IGQuYmluZChudWxsLCBvLm9uZXJyb3IpLCBvLm9ubG9hZCA9IGQuYmluZChudWxsLCBvLm9ubG9hZCksIHtcbiAgICBzY3JpcHQ6IG8sXG4gICAgbmVlZEF0dGFjaDogaVxuICB9O1xufVxuZnVuY3Rpb24gY3JlYXRlTGluayh0LCBlKSB7XG4gIGZvciAodmFyIHIgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHZvaWQgMCA/IGFyZ3VtZW50c1syXSA6IHt9LCBuID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgPyBhcmd1bWVudHNbM10gOiB2b2lkIDAsIG8gPSBudWxsLCBpID0gITAsIHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImxpbmtcIiksIGEgPSAwOyBhIDwgcy5sZW5ndGg7IGErKykge1xuICAgIHZhciBjID0gc1thXSwgbCA9IGMuZ2V0QXR0cmlidXRlKFwiaHJlZlwiKSwgdSA9IGMuZ2V0QXR0cmlidXRlKFwicmVmXCIpO1xuICAgIGlmIChsICYmIGlzU3RhdGljUmVzb3VyY2VzRXF1YWwobCwgdCkgJiYgdSA9PT0gci5yZWYpIHtcbiAgICAgIG8gPSBjLCBpID0gITE7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cbiAgaWYgKCFvICYmIChvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpbmtcIiksIG8uc2V0QXR0cmlidXRlKFwiaHJlZlwiLCB0KSwgbikpIHtcbiAgICB2YXIgZCA9IG4odCk7XG4gICAgX2luc3RhbmNlb2YoZCwgSFRNTExpbmtFbGVtZW50KSAmJiAobyA9IGQpO1xuICB9XG4gIHIgJiYgT2JqZWN0LmtleXMocikuZm9yRWFjaChmdW5jdGlvbihwKSB7XG4gICAgbyAmJiBvLnNldEF0dHJpYnV0ZShwLCByW3BdKTtcbiAgfSk7XG4gIHZhciBtID0gZnVuY3Rpb24ocCwgaCkge1xuICAgIGlmIChvICYmIChvLm9uZXJyb3IgPSBudWxsLCBvLm9ubG9hZCA9IG51bGwsIHNhZmVXcmFwcGVyKGZ1bmN0aW9uKCkge1xuICAgICAgbyAhPSBudWxsICYmIG8ucGFyZW50Tm9kZSAmJiBvLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobyk7XG4gICAgfSksIHApKSB7XG4gICAgICB2YXIgeSA9IHAoaCk7XG4gICAgICByZXR1cm4gZSgpLCB5O1xuICAgIH1cbiAgICBlKCk7XG4gIH07XG4gIHJldHVybiBvLm9uZXJyb3IgPSBtLmJpbmQobnVsbCwgby5vbmVycm9yKSwgby5vbmxvYWQgPSBtLmJpbmQobnVsbCwgby5vbmxvYWQpLCB7XG4gICAgbGluazogbyxcbiAgICBuZWVkQXR0YWNoOiBpXG4gIH07XG59XG5mdW5jdGlvbiBsb2FkU2NyaXB0KHQsIGUpIHtcbiAgdmFyIHIgPSBlLmF0dHJzLCBuID0gZS5jcmVhdGVTY3JpcHRIb29rO1xuICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24obywgaSkge1xuICAgIHZhciBzID0gY3JlYXRlU2NyaXB0KHQsIG8sIHIsIG4pLCBhID0gcy5zY3JpcHQsIGMgPSBzLm5lZWRBdHRhY2g7XG4gICAgYyAmJiBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImhlYWRcIilbMF0uYXBwZW5kQ2hpbGQoYSk7XG4gIH0pO1xufVxuZnVuY3Rpb24gX2FycmF5X2xpa2VfdG9fYXJyYXkodCwgZSkge1xuICAoZSA9PSBudWxsIHx8IGUgPiB0Lmxlbmd0aCkgJiYgKGUgPSB0Lmxlbmd0aCk7XG4gIGZvciAodmFyIHIgPSAwLCBuID0gbmV3IEFycmF5KGUpOyByIDwgZTsgcisrKVxuICAgIG5bcl0gPSB0W3JdO1xuICByZXR1cm4gbjtcbn1cbmZ1bmN0aW9uIF9hcnJheV93aXRoX2hvbGVzKHQpIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkodCkpXG4gICAgcmV0dXJuIHQ7XG59XG5mdW5jdGlvbiBhc3luY0dlbmVyYXRvclN0ZXAodCwgZSwgciwgbiwgbywgaSwgcykge1xuICB0cnkge1xuICAgIHZhciBhID0gdFtpXShzKSwgYyA9IGEudmFsdWU7XG4gIH0gY2F0Y2ggKGwpIHtcbiAgICByKGwpO1xuICAgIHJldHVybjtcbiAgfVxuICBhLmRvbmUgPyBlKGMpIDogUHJvbWlzZS5yZXNvbHZlKGMpLnRoZW4obiwgbyk7XG59XG5mdW5jdGlvbiBfYXN5bmNfdG9fZ2VuZXJhdG9yKHQpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciBlID0gdGhpcywgciA9IGFyZ3VtZW50cztcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24obiwgbykge1xuICAgICAgdmFyIGkgPSB0LmFwcGx5KGUsIHIpO1xuICAgICAgZnVuY3Rpb24gcyhjKSB7XG4gICAgICAgIGFzeW5jR2VuZXJhdG9yU3RlcChpLCBuLCBvLCBzLCBhLCBcIm5leHRcIiwgYyk7XG4gICAgICB9XG4gICAgICBmdW5jdGlvbiBhKGMpIHtcbiAgICAgICAgYXN5bmNHZW5lcmF0b3JTdGVwKGksIG4sIG8sIHMsIGEsIFwidGhyb3dcIiwgYyk7XG4gICAgICB9XG4gICAgICBzKHZvaWQgMCk7XG4gICAgfSk7XG4gIH07XG59XG5mdW5jdGlvbiBfaXRlcmFibGVfdG9fYXJyYXlfbGltaXQodCwgZSkge1xuICB2YXIgciA9IHQgPT0gbnVsbCA/IG51bGwgOiB0eXBlb2YgU3ltYm9sIDwgXCJ1XCIgJiYgdFtTeW1ib2wuaXRlcmF0b3JdIHx8IHRbXCJAQGl0ZXJhdG9yXCJdO1xuICBpZiAociAhPSBudWxsKSB7XG4gICAgdmFyIG4gPSBbXSwgbyA9ICEwLCBpID0gITEsIHMsIGE7XG4gICAgdHJ5IHtcbiAgICAgIGZvciAociA9IHIuY2FsbCh0KTsgIShvID0gKHMgPSByLm5leHQoKSkuZG9uZSkgJiYgKG4ucHVzaChzLnZhbHVlKSwgIShlICYmIG4ubGVuZ3RoID09PSBlKSk7IG8gPSAhMClcbiAgICAgICAgO1xuICAgIH0gY2F0Y2ggKGMpIHtcbiAgICAgIGkgPSAhMCwgYSA9IGM7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHRyeSB7XG4gICAgICAgICFvICYmIHIucmV0dXJuICE9IG51bGwgJiYgci5yZXR1cm4oKTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIGlmIChpKVxuICAgICAgICAgIHRocm93IGE7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBuO1xuICB9XG59XG5mdW5jdGlvbiBfbm9uX2l0ZXJhYmxlX3Jlc3QoKSB7XG4gIHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcXFxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLlwiKTtcbn1cbmZ1bmN0aW9uIF9zbGljZWRfdG9fYXJyYXkodCwgZSkge1xuICByZXR1cm4gX2FycmF5X3dpdGhfaG9sZXModCkgfHwgX2l0ZXJhYmxlX3RvX2FycmF5X2xpbWl0KHQsIGUpIHx8IF91bnN1cHBvcnRlZF9pdGVyYWJsZV90b19hcnJheSh0LCBlKSB8fCBfbm9uX2l0ZXJhYmxlX3Jlc3QoKTtcbn1cbmZ1bmN0aW9uIF91bnN1cHBvcnRlZF9pdGVyYWJsZV90b19hcnJheSh0LCBlKSB7XG4gIGlmICh0KSB7XG4gICAgaWYgKHR5cGVvZiB0ID09IFwic3RyaW5nXCIpXG4gICAgICByZXR1cm4gX2FycmF5X2xpa2VfdG9fYXJyYXkodCwgZSk7XG4gICAgdmFyIHIgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodCkuc2xpY2UoOCwgLTEpO1xuICAgIGlmIChyID09PSBcIk9iamVjdFwiICYmIHQuY29uc3RydWN0b3IgJiYgKHIgPSB0LmNvbnN0cnVjdG9yLm5hbWUpLCByID09PSBcIk1hcFwiIHx8IHIgPT09IFwiU2V0XCIpXG4gICAgICByZXR1cm4gQXJyYXkuZnJvbShyKTtcbiAgICBpZiAociA9PT0gXCJBcmd1bWVudHNcIiB8fCAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChyKSlcbiAgICAgIHJldHVybiBfYXJyYXlfbGlrZV90b19hcnJheSh0LCBlKTtcbiAgfVxufVxuZnVuY3Rpb24gX3RzX2dlbmVyYXRvcih0LCBlKSB7XG4gIHZhciByLCBuLCBvLCBpLCBzID0ge1xuICAgIGxhYmVsOiAwLFxuICAgIHNlbnQ6IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKG9bMF0gJiAxKVxuICAgICAgICB0aHJvdyBvWzFdO1xuICAgICAgcmV0dXJuIG9bMV07XG4gICAgfSxcbiAgICB0cnlzOiBbXSxcbiAgICBvcHM6IFtdXG4gIH07XG4gIHJldHVybiBpID0ge1xuICAgIG5leHQ6IGEoMCksXG4gICAgdGhyb3c6IGEoMSksXG4gICAgcmV0dXJuOiBhKDIpXG4gIH0sIHR5cGVvZiBTeW1ib2wgPT0gXCJmdW5jdGlvblwiICYmIChpW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfSksIGk7XG4gIGZ1bmN0aW9uIGEobCkge1xuICAgIHJldHVybiBmdW5jdGlvbih1KSB7XG4gICAgICByZXR1cm4gYyhbXG4gICAgICAgIGwsXG4gICAgICAgIHVcbiAgICAgIF0pO1xuICAgIH07XG4gIH1cbiAgZnVuY3Rpb24gYyhsKSB7XG4gICAgaWYgKHIpXG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtcbiAgICBmb3IgKDsgczsgKVxuICAgICAgdHJ5IHtcbiAgICAgICAgaWYgKHIgPSAxLCBuICYmIChvID0gbFswXSAmIDIgPyBuLnJldHVybiA6IGxbMF0gPyBuLnRocm93IHx8ICgobyA9IG4ucmV0dXJuKSAmJiBvLmNhbGwobiksIDApIDogbi5uZXh0KSAmJiAhKG8gPSBvLmNhbGwobiwgbFsxXSkpLmRvbmUpXG4gICAgICAgICAgcmV0dXJuIG87XG4gICAgICAgIHN3aXRjaCAobiA9IDAsIG8gJiYgKGwgPSBbXG4gICAgICAgICAgbFswXSAmIDIsXG4gICAgICAgICAgby52YWx1ZVxuICAgICAgICBdKSwgbFswXSkge1xuICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICBvID0gbDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgIHJldHVybiBzLmxhYmVsKyssIHtcbiAgICAgICAgICAgICAgdmFsdWU6IGxbMV0sXG4gICAgICAgICAgICAgIGRvbmU6ICExXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgIHMubGFiZWwrKywgbiA9IGxbMV0sIGwgPSBbXG4gICAgICAgICAgICAgIDBcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICBsID0gcy5vcHMucG9wKCksIHMudHJ5cy5wb3AoKTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBpZiAobyA9IHMudHJ5cywgIShvID0gby5sZW5ndGggPiAwICYmIG9bby5sZW5ndGggLSAxXSkgJiYgKGxbMF0gPT09IDYgfHwgbFswXSA9PT0gMikpIHtcbiAgICAgICAgICAgICAgcyA9IDA7XG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGxbMF0gPT09IDMgJiYgKCFvIHx8IGxbMV0gPiBvWzBdICYmIGxbMV0gPCBvWzNdKSkge1xuICAgICAgICAgICAgICBzLmxhYmVsID0gbFsxXTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobFswXSA9PT0gNiAmJiBzLmxhYmVsIDwgb1sxXSkge1xuICAgICAgICAgICAgICBzLmxhYmVsID0gb1sxXSwgbyA9IGw7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG8gJiYgcy5sYWJlbCA8IG9bMl0pIHtcbiAgICAgICAgICAgICAgcy5sYWJlbCA9IG9bMl0sIHMub3BzLnB1c2gobCk7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb1syXSAmJiBzLm9wcy5wb3AoKSwgcy50cnlzLnBvcCgpO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgbCA9IGUuY2FsbCh0LCBzKTtcbiAgICAgIH0gY2F0Y2ggKHUpIHtcbiAgICAgICAgbCA9IFtcbiAgICAgICAgICA2LFxuICAgICAgICAgIHVcbiAgICAgICAgXSwgbiA9IDA7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICByID0gbyA9IDA7XG4gICAgICB9XG4gICAgaWYgKGxbMF0gJiA1KVxuICAgICAgdGhyb3cgbFsxXTtcbiAgICByZXR1cm4ge1xuICAgICAgdmFsdWU6IGxbMF0gPyBsWzFdIDogdm9pZCAwLFxuICAgICAgZG9uZTogITBcbiAgICB9O1xuICB9XG59XG5mdW5jdGlvbiBpbXBvcnROb2RlTW9kdWxlKHQpIHtcbiAgaWYgKCF0KVxuICAgIHRocm93IG5ldyBFcnJvcihcImltcG9ydCBzcGVjaWZpZXIgaXMgcmVxdWlyZWRcIik7XG4gIHZhciBlID0gbmV3IEZ1bmN0aW9uKFwibmFtZVwiLCBcInJldHVybiBpbXBvcnQobmFtZSlcIik7XG4gIHJldHVybiBlKHQpLnRoZW4oZnVuY3Rpb24ocikge1xuICAgIHJldHVybiByLmRlZmF1bHQ7XG4gIH0pLmNhdGNoKGZ1bmN0aW9uKHIpIHtcbiAgICB0aHJvdyBjb25zb2xlLmVycm9yKFwiRXJyb3IgaW1wb3J0aW5nIG1vZHVsZSBcIi5jb25jYXQodCwgXCI6XCIpLCByKSwgcjtcbiAgfSk7XG59XG5mdW5jdGlvbiBjcmVhdGVTY3JpcHROb2RlKHVybCwgY2IsIGF0dHJzLCBjcmVhdGVTY3JpcHRIb29rKSB7XG4gIGlmIChjcmVhdGVTY3JpcHRIb29rKSB7XG4gICAgdmFyIGhvb2tSZXN1bHQgPSBjcmVhdGVTY3JpcHRIb29rKHVybCk7XG4gICAgaG9va1Jlc3VsdCAmJiB0eXBlb2YgaG9va1Jlc3VsdCA9PSBcIm9iamVjdFwiICYmIFwidXJsXCIgaW4gaG9va1Jlc3VsdCAmJiAodXJsID0gaG9va1Jlc3VsdC51cmwpO1xuICB9XG4gIHZhciB1cmxPYmo7XG4gIHRyeSB7XG4gICAgdXJsT2JqID0gbmV3IFVSTCh1cmwpO1xuICB9IGNhdGNoICh0KSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGNvbnN0cnVjdGluZyBVUkw6XCIsIHQpLCBjYihuZXcgRXJyb3IoXCJJbnZhbGlkIFVSTDogXCIuY29uY2F0KHQpKSk7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciBnZXRGZXRjaCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciB0ID0gX2FzeW5jX3RvX2dlbmVyYXRvcihmdW5jdGlvbigpIHtcbiAgICAgIHZhciBlO1xuICAgICAgcmV0dXJuIF90c19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24ocikge1xuICAgICAgICBzd2l0Y2ggKHIubGFiZWwpIHtcbiAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICByZXR1cm4gdHlwZW9mIGZldGNoID4gXCJ1XCIgPyBbXG4gICAgICAgICAgICAgIDQsXG4gICAgICAgICAgICAgIGltcG9ydE5vZGVNb2R1bGUoXCJub2RlLWZldGNoXCIpXG4gICAgICAgICAgICBdIDogW1xuICAgICAgICAgICAgICAzLFxuICAgICAgICAgICAgICAyXG4gICAgICAgICAgICBdO1xuICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIHJldHVybiBlID0gci5zZW50KCksIFtcbiAgICAgICAgICAgICAgMixcbiAgICAgICAgICAgICAgKGUgPT0gbnVsbCA/IHZvaWQgMCA6IGUuZGVmYXVsdCkgfHwgZVxuICAgICAgICAgICAgXTtcbiAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAyLFxuICAgICAgICAgICAgICBmZXRjaFxuICAgICAgICAgICAgXTtcbiAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAyXG4gICAgICAgICAgICBdO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH07XG4gIH0oKTtcbiAgY29uc29sZS5sb2coXCJmZXRjaGluZ1wiLCB1cmxPYmouaHJlZiksIGdldEZldGNoKCkudGhlbihmdW5jdGlvbihmKSB7XG4gICAgZih1cmxPYmouaHJlZikudGhlbihmdW5jdGlvbih0KSB7XG4gICAgICByZXR1cm4gdC50ZXh0KCk7XG4gICAgfSkudGhlbihmdW5jdGlvbigpIHtcbiAgICAgIHZhciBfcmVmID0gX2FzeW5jX3RvX2dlbmVyYXRvcihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgIHZhciBfcmVmLCBwYXRoLCB2bSwgc2NyaXB0Q29udGV4dCwgdXJsRGlybmFtZSwgZmlsZW5hbWUsIHNjcmlwdCwgZXhwb3J0ZWRJbnRlcmZhY2UsIGNvbnRhaW5lcjtcbiAgICAgICAgcmV0dXJuIF90c19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24oX3N0YXRlKSB7XG4gICAgICAgICAgc3dpdGNoIChfc3RhdGUubGFiZWwpIHtcbiAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICA0LFxuICAgICAgICAgICAgICAgIFByb21pc2UuYWxsKFtcbiAgICAgICAgICAgICAgICAgIGltcG9ydE5vZGVNb2R1bGUoXCJwYXRoXCIpLFxuICAgICAgICAgICAgICAgICAgaW1wb3J0Tm9kZU1vZHVsZShcInZtXCIpXG4gICAgICAgICAgICAgICAgXSlcbiAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgX3JlZiA9IF9zbGljZWRfdG9fYXJyYXkuYXBwbHkodm9pZCAwLCBbXG4gICAgICAgICAgICAgICAgX3N0YXRlLnNlbnQoKSxcbiAgICAgICAgICAgICAgICAyXG4gICAgICAgICAgICAgIF0pLCBwYXRoID0gX3JlZlswXSwgdm0gPSBfcmVmWzFdLCBzY3JpcHRDb250ZXh0ID0ge1xuICAgICAgICAgICAgICAgIGV4cG9ydHM6IHt9LFxuICAgICAgICAgICAgICAgIG1vZHVsZToge1xuICAgICAgICAgICAgICAgICAgZXhwb3J0czoge31cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0sIHVybERpcm5hbWUgPSB1cmxPYmoucGF0aG5hbWUuc3BsaXQoXCIvXCIpLnNsaWNlKDAsIC0xKS5qb2luKFwiL1wiKSwgZmlsZW5hbWUgPSBwYXRoLmJhc2VuYW1lKHVybE9iai5wYXRobmFtZSk7XG4gICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKHNjcmlwdCA9IG5ldyB2bS5TY3JpcHQoXCIoZnVuY3Rpb24oZXhwb3J0cywgbW9kdWxlLCByZXF1aXJlLCBfX2Rpcm5hbWUsIF9fZmlsZW5hbWUpIHtcIi5jb25jYXQoZGF0YSwgYFxufSlgKSwgZmlsZW5hbWUpLCBzY3JpcHQucnVuSW5UaGlzQ29udGV4dCgpKHNjcmlwdENvbnRleHQuZXhwb3J0cywgc2NyaXB0Q29udGV4dC5tb2R1bGUsIGV2YWwoXCJyZXF1aXJlXCIpLCB1cmxEaXJuYW1lLCBmaWxlbmFtZSksIGV4cG9ydGVkSW50ZXJmYWNlID0gc2NyaXB0Q29udGV4dC5tb2R1bGUuZXhwb3J0cyB8fCBzY3JpcHRDb250ZXh0LmV4cG9ydHMsIGF0dHJzICYmIGV4cG9ydGVkSW50ZXJmYWNlICYmIGF0dHJzLmdsb2JhbE5hbWUpXG4gICAgICAgICAgICAgICAgICByZXR1cm4gY29udGFpbmVyID0gZXhwb3J0ZWRJbnRlcmZhY2VbYXR0cnMuZ2xvYmFsTmFtZV0gfHwgZXhwb3J0ZWRJbnRlcmZhY2UsIGNiKHZvaWQgMCwgY29udGFpbmVyKSwgW1xuICAgICAgICAgICAgICAgICAgICAyXG4gICAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgIGNiKHZvaWQgMCwgZXhwb3J0ZWRJbnRlcmZhY2UpO1xuICAgICAgICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICAgICAgY2IobmV3IEVycm9yKFwiU2NyaXB0IGV4ZWN1dGlvbiBlcnJvcjogXCIuY29uY2F0KHQpKSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICAyXG4gICAgICAgICAgICAgIF07XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIH07XG4gICAgfSgpKS5jYXRjaChmdW5jdGlvbih0KSB7XG4gICAgICBjYih0KTtcbiAgICB9KTtcbiAgfSk7XG59XG5mdW5jdGlvbiBsb2FkU2NyaXB0Tm9kZSh0LCBlKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyLCBuKSB7XG4gICAgY3JlYXRlU2NyaXB0Tm9kZSh0LCBmdW5jdGlvbihvLCBpKSB7XG4gICAgICBpZiAobylcbiAgICAgICAgbihvKTtcbiAgICAgIGVsc2Uge1xuICAgICAgICB2YXIgcywgYSwgYyA9IChlID09IG51bGwgfHwgKHMgPSBlLmF0dHJzKSA9PT0gbnVsbCB8fCBzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzLmdsb2JhbE5hbWUpIHx8IFwiX19GRURFUkFUSU9OX1wiLmNvbmNhdChlID09IG51bGwgfHwgKGEgPSBlLmF0dHJzKSA9PT0gbnVsbCB8fCBhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBhLm5hbWUsIFwiOmN1c3RvbV9fXCIpLCBsID0gZ2xvYmFsVGhpc1tjXSA9IGk7XG4gICAgICAgIHIobCk7XG4gICAgICB9XG4gICAgfSwgZS5hdHRycywgZS5jcmVhdGVTY3JpcHRIb29rKTtcbiAgfSk7XG59XG5mdW5jdGlvbiBtYXRjaFJlbW90ZVdpdGhOYW1lQW5kRXhwb3NlKHQsIGUpIHtcbiAgZm9yIChjb25zdCByIG9mIHQpIHtcbiAgICBjb25zdCBuID0gZS5zdGFydHNXaXRoKHIubmFtZSk7XG4gICAgbGV0IG8gPSBlLnJlcGxhY2Uoci5uYW1lLCBcIlwiKTtcbiAgICBpZiAobikge1xuICAgICAgaWYgKG8uc3RhcnRzV2l0aChcIi9cIikpIHtcbiAgICAgICAgY29uc3QgYSA9IHIubmFtZTtcbiAgICAgICAgcmV0dXJuIG8gPSBgLiR7b31gLCB7XG4gICAgICAgICAgcGtnTmFtZU9yQWxpYXM6IGEsXG4gICAgICAgICAgZXhwb3NlOiBvLFxuICAgICAgICAgIHJlbW90ZTogclxuICAgICAgICB9O1xuICAgICAgfSBlbHNlIGlmIChvID09PSBcIlwiKVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHBrZ05hbWVPckFsaWFzOiByLm5hbWUsXG4gICAgICAgICAgZXhwb3NlOiBcIi5cIixcbiAgICAgICAgICByZW1vdGU6IHJcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY29uc3QgaSA9IHIuYWxpYXMgJiYgZS5zdGFydHNXaXRoKHIuYWxpYXMpO1xuICAgIGxldCBzID0gci5hbGlhcyAmJiBlLnJlcGxhY2Uoci5hbGlhcywgXCJcIik7XG4gICAgaWYgKHIuYWxpYXMgJiYgaSkge1xuICAgICAgaWYgKHMgJiYgcy5zdGFydHNXaXRoKFwiL1wiKSkge1xuICAgICAgICBjb25zdCBhID0gci5hbGlhcztcbiAgICAgICAgcmV0dXJuIHMgPSBgLiR7c31gLCB7XG4gICAgICAgICAgcGtnTmFtZU9yQWxpYXM6IGEsXG4gICAgICAgICAgZXhwb3NlOiBzLFxuICAgICAgICAgIHJlbW90ZTogclxuICAgICAgICB9O1xuICAgICAgfSBlbHNlIGlmIChzID09PSBcIlwiKVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHBrZ05hbWVPckFsaWFzOiByLmFsaWFzLFxuICAgICAgICAgIGV4cG9zZTogXCIuXCIsXG4gICAgICAgICAgcmVtb3RlOiByXG4gICAgICAgIH07XG4gICAgfVxuICB9XG59XG5mdW5jdGlvbiBtYXRjaFJlbW90ZSh0LCBlKSB7XG4gIGZvciAoY29uc3QgciBvZiB0KVxuICAgIGlmIChlID09PSByLm5hbWUgfHwgci5hbGlhcyAmJiBlID09PSByLmFsaWFzKVxuICAgICAgcmV0dXJuIHI7XG59XG5mdW5jdGlvbiByZWdpc3RlclBsdWdpbnModCwgZSkge1xuICBjb25zdCByID0gZ2V0R2xvYmFsSG9zdFBsdWdpbnMoKTtcbiAgci5sZW5ndGggPiAwICYmIHIuZm9yRWFjaCgobikgPT4ge1xuICAgIHQgIT0gbnVsbCAmJiB0LmZpbmQoKG8pID0+IG8ubmFtZSAhPT0gbi5uYW1lKSAmJiB0LnB1c2gobik7XG4gIH0pLCB0ICYmIHQubGVuZ3RoID4gMCAmJiB0LmZvckVhY2goKG4pID0+IHtcbiAgICBlLmZvckVhY2goKG8pID0+IHtcbiAgICAgIG8uYXBwbHlQbHVnaW4obik7XG4gICAgfSk7XG4gIH0pO1xufVxuZnVuY3Rpb24gX2V4dGVuZHMkNSgpIHtcbiAgcmV0dXJuIF9leHRlbmRzJDUgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uKHQpIHtcbiAgICBmb3IgKHZhciBlID0gMTsgZSA8IGFyZ3VtZW50cy5sZW5ndGg7IGUrKykge1xuICAgICAgdmFyIHIgPSBhcmd1bWVudHNbZV07XG4gICAgICBmb3IgKHZhciBuIGluIHIpXG4gICAgICAgIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChyLCBuKSAmJiAodFtuXSA9IHJbbl0pO1xuICAgIH1cbiAgICByZXR1cm4gdDtcbiAgfSwgX2V4dGVuZHMkNS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufVxuYXN5bmMgZnVuY3Rpb24gbG9hZEVzbUVudHJ5KHsgZW50cnk6IHQsIHJlbW90ZUVudHJ5RXhwb3J0czogZSB9KSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZSgociwgbikgPT4ge1xuICAgIHRyeSB7XG4gICAgICBlID8gcihlKSA6IG5ldyBGdW5jdGlvbihcImNhbGxiYWNrc1wiLCBgaW1wb3J0KFwiJHt0fVwiKS50aGVuKGNhbGxiYWNrc1swXSkuY2F0Y2goY2FsbGJhY2tzWzFdKWApKFtcbiAgICAgICAgcixcbiAgICAgICAgblxuICAgICAgXSk7XG4gICAgfSBjYXRjaCAobykge1xuICAgICAgbihvKTtcbiAgICB9XG4gIH0pO1xufVxuYXN5bmMgZnVuY3Rpb24gbG9hZEVudHJ5U2NyaXB0KHsgbmFtZTogdCwgZ2xvYmFsTmFtZTogZSwgZW50cnk6IHIsIGNyZWF0ZVNjcmlwdEhvb2s6IG4gfSkge1xuICBjb25zdCB7IGVudHJ5RXhwb3J0czogbyB9ID0gZ2V0UmVtb3RlRW50cnlFeHBvcnRzKHQsIGUpO1xuICByZXR1cm4gbyB8fCAodHlwZW9mIGRvY3VtZW50ID4gXCJ1XCIgPyBsb2FkU2NyaXB0Tm9kZShyLCB7XG4gICAgYXR0cnM6IHtcbiAgICAgIG5hbWU6IHQsXG4gICAgICBnbG9iYWxOYW1lOiBlXG4gICAgfSxcbiAgICBjcmVhdGVTY3JpcHRIb29rOiBuXG4gIH0pLnRoZW4oKCkgPT4ge1xuICAgIGNvbnN0IHsgcmVtb3RlRW50cnlLZXk6IGksIGVudHJ5RXhwb3J0czogcyB9ID0gZ2V0UmVtb3RlRW50cnlFeHBvcnRzKHQsIGUpO1xuICAgIHJldHVybiBhc3NlcnQocywgYFxuICAgICAgICBVbmFibGUgdG8gdXNlIHRoZSAke3R9J3MgJyR7cn0nIFVSTCB3aXRoICR7aX0ncyBnbG9iYWxOYW1lIHRvIGdldCByZW1vdGVFbnRyeSBleHBvcnRzLlxuICAgICAgICBQb3NzaWJsZSByZWFzb25zIGNvdWxkIGJlOlxuXG4gICAgICAgIDEuICcke3J9JyBpcyBub3QgdGhlIGNvcnJlY3QgVVJMLCBvciB0aGUgcmVtb3RlRW50cnkgcmVzb3VyY2Ugb3IgbmFtZSBpcyBpbmNvcnJlY3QuXG5cbiAgICAgICAgMi4gJHtpfSBjYW5ub3QgYmUgdXNlZCB0byBnZXQgcmVtb3RlRW50cnkgZXhwb3J0cyBpbiB0aGUgd2luZG93IG9iamVjdC5cbiAgICAgIGApLCBzO1xuICB9KS5jYXRjaCgoaSkgPT4gaSkgOiBsb2FkU2NyaXB0KHIsIHtcbiAgICBhdHRyczoge30sXG4gICAgY3JlYXRlU2NyaXB0SG9vazogblxuICB9KS50aGVuKCgpID0+IHtcbiAgICBjb25zdCB7IHJlbW90ZUVudHJ5S2V5OiBpLCBlbnRyeUV4cG9ydHM6IHMgfSA9IGdldFJlbW90ZUVudHJ5RXhwb3J0cyh0LCBlKTtcbiAgICByZXR1cm4gYXNzZXJ0KHMsIGBcbiAgICAgIFVuYWJsZSB0byB1c2UgdGhlICR7dH0ncyAnJHtyfScgVVJMIHdpdGggJHtpfSdzIGdsb2JhbE5hbWUgdG8gZ2V0IHJlbW90ZUVudHJ5IGV4cG9ydHMuXG4gICAgICBQb3NzaWJsZSByZWFzb25zIGNvdWxkIGJlOlxuXG4gICAgICAxLiAnJHtyfScgaXMgbm90IHRoZSBjb3JyZWN0IFVSTCwgb3IgdGhlIHJlbW90ZUVudHJ5IHJlc291cmNlIG9yIG5hbWUgaXMgaW5jb3JyZWN0LlxuXG4gICAgICAyLiAke2l9IGNhbm5vdCBiZSB1c2VkIHRvIGdldCByZW1vdGVFbnRyeSBleHBvcnRzIGluIHRoZSB3aW5kb3cgb2JqZWN0LlxuICAgIGApLCBzO1xuICB9KS5jYXRjaCgoaSkgPT4gaSkpO1xufVxuZnVuY3Rpb24gZ2V0UmVtb3RlRW50cnlVbmlxdWVLZXkodCkge1xuICBjb25zdCB7IGVudHJ5OiBlLCBuYW1lOiByIH0gPSB0O1xuICByZXR1cm4gY29tcG9zZUtleVdpdGhTZXBhcmF0b3IociwgZSk7XG59XG5hc3luYyBmdW5jdGlvbiBnZXRSZW1vdGVFbnRyeSh7IHJlbW90ZUVudHJ5RXhwb3J0czogdCwgcmVtb3RlSW5mbzogZSwgY3JlYXRlU2NyaXB0SG9vazogciB9KSB7XG4gIGNvbnN0IHsgZW50cnk6IG4sIG5hbWU6IG8sIHR5cGU6IGksIGVudHJ5R2xvYmFsTmFtZTogcyB9ID0gZSwgYSA9IGdldFJlbW90ZUVudHJ5VW5pcXVlS2V5KGUpO1xuICByZXR1cm4gdCB8fCAoZ2xvYmFsTG9hZGluZ1thXSB8fCAoaSA9PT0gXCJlc21cIiA/IGdsb2JhbExvYWRpbmdbYV0gPSBsb2FkRXNtRW50cnkoe1xuICAgIGVudHJ5OiBuLFxuICAgIHJlbW90ZUVudHJ5RXhwb3J0czogdFxuICB9KSA6IGdsb2JhbExvYWRpbmdbYV0gPSBsb2FkRW50cnlTY3JpcHQoe1xuICAgIG5hbWU6IG8sXG4gICAgZ2xvYmFsTmFtZTogcyxcbiAgICBlbnRyeTogbixcbiAgICBjcmVhdGVTY3JpcHRIb29rOiByXG4gIH0pKSwgZ2xvYmFsTG9hZGluZ1thXSk7XG59XG5mdW5jdGlvbiBnZXRSZW1vdGVJbmZvKHQpIHtcbiAgcmV0dXJuIF9leHRlbmRzJDUoe30sIHQsIHtcbiAgICBlbnRyeTogXCJlbnRyeVwiIGluIHQgPyB0LmVudHJ5IDogXCJcIixcbiAgICB0eXBlOiB0LnR5cGUgfHwgREVGQVVMVF9SRU1PVEVfVFlQRSxcbiAgICBlbnRyeUdsb2JhbE5hbWU6IHQuZW50cnlHbG9iYWxOYW1lIHx8IHQubmFtZSxcbiAgICBzaGFyZVNjb3BlOiB0LnNoYXJlU2NvcGUgfHwgREVGQVVMVF9TQ09QRVxuICB9KTtcbn1cbmZ1bmN0aW9uIF9leHRlbmRzJDQoKSB7XG4gIHJldHVybiBfZXh0ZW5kcyQ0ID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbih0KSB7XG4gICAgZm9yICh2YXIgZSA9IDE7IGUgPCBhcmd1bWVudHMubGVuZ3RoOyBlKyspIHtcbiAgICAgIHZhciByID0gYXJndW1lbnRzW2VdO1xuICAgICAgZm9yICh2YXIgbiBpbiByKVxuICAgICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwociwgbikgJiYgKHRbbl0gPSByW25dKTtcbiAgICB9XG4gICAgcmV0dXJuIHQ7XG4gIH0sIF9leHRlbmRzJDQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbn1cbmxldCBNb2R1bGUgPSBjbGFzcyB7XG4gIGFzeW5jIGdldEVudHJ5KCkge1xuICAgIGlmICh0aGlzLnJlbW90ZUVudHJ5RXhwb3J0cylcbiAgICAgIHJldHVybiB0aGlzLnJlbW90ZUVudHJ5RXhwb3J0cztcbiAgICBjb25zdCB0ID0gYXdhaXQgZ2V0UmVtb3RlRW50cnkoe1xuICAgICAgcmVtb3RlSW5mbzogdGhpcy5yZW1vdGVJbmZvLFxuICAgICAgcmVtb3RlRW50cnlFeHBvcnRzOiB0aGlzLnJlbW90ZUVudHJ5RXhwb3J0cyxcbiAgICAgIGNyZWF0ZVNjcmlwdEhvb2s6IChlKSA9PiB7XG4gICAgICAgIGNvbnN0IHIgPSB0aGlzLmhvc3QubG9hZGVySG9vay5saWZlY3ljbGUuY3JlYXRlU2NyaXB0LmVtaXQoe1xuICAgICAgICAgIHVybDogZVxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHR5cGVvZiBkb2N1bWVudCA+IFwidVwiIHx8IHIgaW5zdGFuY2VvZiBIVE1MU2NyaXB0RWxlbWVudClcbiAgICAgICAgICByZXR1cm4gcjtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gYXNzZXJ0KHQsIGByZW1vdGVFbnRyeUV4cG9ydHMgaXMgdW5kZWZpbmVkIFxuICR7c2FmZVRvU3RyaW5nJDEodGhpcy5yZW1vdGVJbmZvKX1gKSwgdGhpcy5yZW1vdGVFbnRyeUV4cG9ydHMgPSB0LCB0aGlzLnJlbW90ZUVudHJ5RXhwb3J0cztcbiAgfVxuICBhc3luYyBnZXQodCwgZSkge1xuICAgIGNvbnN0IHsgbG9hZEZhY3Rvcnk6IHIgPSAhMCB9ID0gZSB8fCB7XG4gICAgICBsb2FkRmFjdG9yeTogITBcbiAgICB9LCBuID0gYXdhaXQgdGhpcy5nZXRFbnRyeSgpO1xuICAgIGlmICghdGhpcy5pbml0ZWQpIHtcbiAgICAgIGNvbnN0IGkgPSB0aGlzLmhvc3Quc2hhcmVTY29wZU1hcCwgcyA9IHRoaXMucmVtb3RlSW5mby5zaGFyZVNjb3BlIHx8IFwiZGVmYXVsdFwiO1xuICAgICAgaVtzXSB8fCAoaVtzXSA9IHt9KTtcbiAgICAgIGNvbnN0IGEgPSBpW3NdLCBjID0gW10sIGwgPSB7XG4gICAgICAgIHZlcnNpb246IHRoaXMucmVtb3RlSW5mby52ZXJzaW9uIHx8IFwiXCJcbiAgICAgIH07XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobCwgXCJob3N0SWRcIiwge1xuICAgICAgICB2YWx1ZTogdGhpcy5ob3N0Lm9wdGlvbnMuaWQgfHwgdGhpcy5ob3N0Lm5hbWUsXG4gICAgICAgIGVudW1lcmFibGU6ICExXG4gICAgICB9KTtcbiAgICAgIGNvbnN0IHUgPSBhd2FpdCB0aGlzLmhvc3QuaG9va3MubGlmZWN5Y2xlLmJlZm9yZUluaXRDb250YWluZXIuZW1pdCh7XG4gICAgICAgIHNoYXJlU2NvcGU6IGEsXG4gICAgICAgIHJlbW90ZUVudHJ5SW5pdE9wdGlvbnM6IGwsXG4gICAgICAgIGluaXRTY29wZTogYyxcbiAgICAgICAgcmVtb3RlSW5mbzogdGhpcy5yZW1vdGVJbmZvLFxuICAgICAgICBvcmlnaW46IHRoaXMuaG9zdFxuICAgICAgfSk7XG4gICAgICBhd2FpdCBuLmluaXQodS5zaGFyZVNjb3BlLCB1LmluaXRTY29wZSwgdS5yZW1vdGVFbnRyeUluaXRPcHRpb25zKSwgYXdhaXQgdGhpcy5ob3N0Lmhvb2tzLmxpZmVjeWNsZS5pbml0Q29udGFpbmVyLmVtaXQoX2V4dGVuZHMkNCh7fSwgdSwge1xuICAgICAgICByZW1vdGVFbnRyeUV4cG9ydHM6IG5cbiAgICAgIH0pKTtcbiAgICB9XG4gICAgdGhpcy5saWIgPSBuLCB0aGlzLmluaXRlZCA9ICEwO1xuICAgIGNvbnN0IG8gPSBhd2FpdCBuLmdldCh0KTtcbiAgICByZXR1cm4gYXNzZXJ0KG8sIGAke2dldEZNSWQodGhpcy5yZW1vdGVJbmZvKX0gcmVtb3RlIGRvbid0IGV4cG9ydCAke3R9LmApLCByID8gYXdhaXQgbygpIDogbztcbiAgfVxuICBjb25zdHJ1Y3Rvcih7IHJlbW90ZUluZm86IHQsIGhvc3Q6IGUgfSkge1xuICAgIHRoaXMuaW5pdGVkID0gITEsIHRoaXMubGliID0gdm9pZCAwLCB0aGlzLnJlbW90ZUluZm8gPSB0LCB0aGlzLmhvc3QgPSBlO1xuICB9XG59O1xuY2xhc3MgU3luY0hvb2sge1xuICBvbihlKSB7XG4gICAgdHlwZW9mIGUgPT0gXCJmdW5jdGlvblwiICYmIHRoaXMubGlzdGVuZXJzLmFkZChlKTtcbiAgfVxuICBvbmNlKGUpIHtcbiAgICBjb25zdCByID0gdGhpcztcbiAgICB0aGlzLm9uKGZ1bmN0aW9uIG4oLi4ubykge1xuICAgICAgcmV0dXJuIHIucmVtb3ZlKG4pLCBlLmFwcGx5KG51bGwsIG8pO1xuICAgIH0pO1xuICB9XG4gIGVtaXQoLi4uZSkge1xuICAgIGxldCByO1xuICAgIHJldHVybiB0aGlzLmxpc3RlbmVycy5zaXplID4gMCAmJiB0aGlzLmxpc3RlbmVycy5mb3JFYWNoKChuKSA9PiB7XG4gICAgICByID0gbiguLi5lKTtcbiAgICB9KSwgcjtcbiAgfVxuICByZW1vdmUoZSkge1xuICAgIHRoaXMubGlzdGVuZXJzLmRlbGV0ZShlKTtcbiAgfVxuICByZW1vdmVBbGwoKSB7XG4gICAgdGhpcy5saXN0ZW5lcnMuY2xlYXIoKTtcbiAgfVxuICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgdGhpcy50eXBlID0gXCJcIiwgdGhpcy5saXN0ZW5lcnMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpLCBlICYmICh0aGlzLnR5cGUgPSBlKTtcbiAgfVxufVxuY2xhc3MgQXN5bmNIb29rIGV4dGVuZHMgU3luY0hvb2sge1xuICBlbWl0KC4uLmUpIHtcbiAgICBsZXQgcjtcbiAgICBjb25zdCBuID0gQXJyYXkuZnJvbSh0aGlzLmxpc3RlbmVycyk7XG4gICAgaWYgKG4ubGVuZ3RoID4gMCkge1xuICAgICAgbGV0IG8gPSAwO1xuICAgICAgY29uc3QgaSA9IChzKSA9PiBzID09PSAhMSA/ICExIDogbyA8IG4ubGVuZ3RoID8gUHJvbWlzZS5yZXNvbHZlKG5bbysrXS5hcHBseShudWxsLCBlKSkudGhlbihpKSA6IHM7XG4gICAgICByID0gaSgpO1xuICAgIH1cbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHIpO1xuICB9XG59XG5mdW5jdGlvbiBjaGVja1JldHVybkRhdGEodCwgZSkge1xuICBpZiAoIWlzT2JqZWN0KGUpKVxuICAgIHJldHVybiAhMTtcbiAgaWYgKHQgIT09IGUpIHtcbiAgICBmb3IgKGNvbnN0IHIgaW4gdClcbiAgICAgIGlmICghKHIgaW4gZSkpXG4gICAgICAgIHJldHVybiAhMTtcbiAgfVxuICByZXR1cm4gITA7XG59XG5jbGFzcyBTeW5jV2F0ZXJmYWxsSG9vayBleHRlbmRzIFN5bmNIb29rIHtcbiAgZW1pdChlKSB7XG4gICAgaXNPYmplY3QoZSkgfHwgZXJyb3IoYFRoZSBkYXRhIGZvciB0aGUgXCIke3RoaXMudHlwZX1cIiBob29rIHNob3VsZCBiZSBhbiBvYmplY3QuYCk7XG4gICAgZm9yIChjb25zdCByIG9mIHRoaXMubGlzdGVuZXJzKVxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgbiA9IHIoZSk7XG4gICAgICAgIGlmIChjaGVja1JldHVybkRhdGEoZSwgbikpXG4gICAgICAgICAgZSA9IG47XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIHRoaXMub25lcnJvcihgQSBwbHVnaW4gcmV0dXJuZWQgYW4gdW5hY2NlcHRhYmxlIHZhbHVlIGZvciB0aGUgXCIke3RoaXMudHlwZX1cIiB0eXBlLmApO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChuKSB7XG4gICAgICAgIHdhcm4kMShuKSwgdGhpcy5vbmVycm9yKG4pO1xuICAgICAgfVxuICAgIHJldHVybiBlO1xuICB9XG4gIGNvbnN0cnVjdG9yKGUpIHtcbiAgICBzdXBlcigpLCB0aGlzLm9uZXJyb3IgPSBlcnJvciwgdGhpcy50eXBlID0gZTtcbiAgfVxufVxuY2xhc3MgQXN5bmNXYXRlcmZhbGxIb29rIGV4dGVuZHMgU3luY0hvb2sge1xuICBlbWl0KGUpIHtcbiAgICBpc09iamVjdChlKSB8fCBlcnJvcihgVGhlIHJlc3BvbnNlIGRhdGEgZm9yIHRoZSBcIiR7dGhpcy50eXBlfVwiIGhvb2sgbXVzdCBiZSBhbiBvYmplY3QuYCk7XG4gICAgY29uc3QgciA9IEFycmF5LmZyb20odGhpcy5saXN0ZW5lcnMpO1xuICAgIGlmIChyLmxlbmd0aCA+IDApIHtcbiAgICAgIGxldCBuID0gMDtcbiAgICAgIGNvbnN0IG8gPSAocykgPT4gKHdhcm4kMShzKSwgdGhpcy5vbmVycm9yKHMpLCBlKSwgaSA9IChzKSA9PiB7XG4gICAgICAgIGlmIChjaGVja1JldHVybkRhdGEoZSwgcykpIHtcbiAgICAgICAgICBpZiAoZSA9IHMsIG4gPCByLmxlbmd0aClcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUocltuKytdKGUpKS50aGVuKGksIG8pO1xuICAgICAgICAgICAgfSBjYXRjaCAoYSkge1xuICAgICAgICAgICAgICByZXR1cm4gbyhhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlXG4gICAgICAgICAgdGhpcy5vbmVycm9yKGBBIHBsdWdpbiByZXR1cm5lZCBhbiBpbmNvcnJlY3QgdmFsdWUgZm9yIHRoZSBcIiR7dGhpcy50eXBlfVwiIHR5cGUuYCk7XG4gICAgICAgIHJldHVybiBlO1xuICAgICAgfTtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoaShlKSk7XG4gICAgfVxuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoZSk7XG4gIH1cbiAgY29uc3RydWN0b3IoZSkge1xuICAgIHN1cGVyKCksIHRoaXMub25lcnJvciA9IGVycm9yLCB0aGlzLnR5cGUgPSBlO1xuICB9XG59XG5jbGFzcyBQbHVnaW5TeXN0ZW0ge1xuICBhcHBseVBsdWdpbihlKSB7XG4gICAgYXNzZXJ0KGlzUGxhaW5PYmplY3QoZSksIFwiUGx1Z2luIGNvbmZpZ3VyYXRpb24gaXMgaW52YWxpZC5cIik7XG4gICAgY29uc3QgciA9IGUubmFtZTtcbiAgICBhc3NlcnQociwgXCJBIG5hbWUgbXVzdCBiZSBwcm92aWRlZCBieSB0aGUgcGx1Z2luLlwiKSwgdGhpcy5yZWdpc3RlclBsdWdpbnNbcl0gfHwgKHRoaXMucmVnaXN0ZXJQbHVnaW5zW3JdID0gZSwgT2JqZWN0LmtleXModGhpcy5saWZlY3ljbGUpLmZvckVhY2goKG4pID0+IHtcbiAgICAgIGNvbnN0IG8gPSBlW25dO1xuICAgICAgbyAmJiB0aGlzLmxpZmVjeWNsZVtuXS5vbihvKTtcbiAgICB9KSk7XG4gIH1cbiAgcmVtb3ZlUGx1Z2luKGUpIHtcbiAgICBhc3NlcnQoZSwgXCJBIG5hbWUgaXMgcmVxdWlyZWQuXCIpO1xuICAgIGNvbnN0IHIgPSB0aGlzLnJlZ2lzdGVyUGx1Z2luc1tlXTtcbiAgICBhc3NlcnQociwgYFRoZSBwbHVnaW4gXCIke2V9XCIgaXMgbm90IHJlZ2lzdGVyZWQuYCksIE9iamVjdC5rZXlzKHIpLmZvckVhY2goKG4pID0+IHtcbiAgICAgIG4gIT09IFwibmFtZVwiICYmIHRoaXMubGlmZWN5Y2xlW25dLnJlbW92ZShyW25dKTtcbiAgICB9KTtcbiAgfVxuICBpbmhlcml0KHsgbGlmZWN5Y2xlOiBlLCByZWdpc3RlclBsdWdpbnM6IHIgfSkge1xuICAgIE9iamVjdC5rZXlzKGUpLmZvckVhY2goKG4pID0+IHtcbiAgICAgIGFzc2VydCghdGhpcy5saWZlY3ljbGVbbl0sIGBUaGUgaG9vayBcIiR7bn1cIiBoYXMgYSBjb25mbGljdCBhbmQgY2Fubm90IGJlIGluaGVyaXRlZC5gKSwgdGhpcy5saWZlY3ljbGVbbl0gPSBlW25dO1xuICAgIH0pLCBPYmplY3Qua2V5cyhyKS5mb3JFYWNoKChuKSA9PiB7XG4gICAgICBhc3NlcnQoIXRoaXMucmVnaXN0ZXJQbHVnaW5zW25dLCBgVGhlIHBsdWdpbiBcIiR7bn1cIiBoYXMgYSBjb25mbGljdCBhbmQgY2Fubm90IGJlIGluaGVyaXRlZC5gKSwgdGhpcy5hcHBseVBsdWdpbihyW25dKTtcbiAgICB9KTtcbiAgfVxuICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgdGhpcy5yZWdpc3RlclBsdWdpbnMgPSB7fSwgdGhpcy5saWZlY3ljbGUgPSBlLCB0aGlzLmxpZmVjeWNsZUtleXMgPSBPYmplY3Qua2V5cyhlKTtcbiAgfVxufVxuZnVuY3Rpb24gX2V4dGVuZHMkMygpIHtcbiAgcmV0dXJuIF9leHRlbmRzJDMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uKHQpIHtcbiAgICBmb3IgKHZhciBlID0gMTsgZSA8IGFyZ3VtZW50cy5sZW5ndGg7IGUrKykge1xuICAgICAgdmFyIHIgPSBhcmd1bWVudHNbZV07XG4gICAgICBmb3IgKHZhciBuIGluIHIpXG4gICAgICAgIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChyLCBuKSAmJiAodFtuXSA9IHJbbl0pO1xuICAgIH1cbiAgICByZXR1cm4gdDtcbiAgfSwgX2V4dGVuZHMkMy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufVxuZnVuY3Rpb24gZGVmYXVsdFByZWxvYWRBcmdzKHQpIHtcbiAgcmV0dXJuIF9leHRlbmRzJDMoe1xuICAgIHJlc291cmNlQ2F0ZWdvcnk6IFwic3luY1wiLFxuICAgIHNoYXJlOiAhMCxcbiAgICBkZXBzUmVtb3RlOiAhMCxcbiAgICBwcmVmZXRjaEludGVyZmFjZTogITFcbiAgfSwgdCk7XG59XG5mdW5jdGlvbiBmb3JtYXRQcmVsb2FkQXJncyh0LCBlKSB7XG4gIHJldHVybiBlLm1hcCgocikgPT4ge1xuICAgIGNvbnN0IG4gPSBtYXRjaFJlbW90ZSh0LCByLm5hbWVPckFsaWFzKTtcbiAgICByZXR1cm4gYXNzZXJ0KG4sIGBVbmFibGUgdG8gcHJlbG9hZCAke3IubmFtZU9yQWxpYXN9IGFzIGl0IGlzIG5vdCBpbmNsdWRlZCBpbiAkeyFuICYmIHNhZmVUb1N0cmluZyQxKHtcbiAgICAgIHJlbW90ZUluZm86IG4sXG4gICAgICByZW1vdGVzOiB0XG4gICAgfSl9YCksIHtcbiAgICAgIHJlbW90ZTogbixcbiAgICAgIHByZWxvYWRDb25maWc6IGRlZmF1bHRQcmVsb2FkQXJncyhyKVxuICAgIH07XG4gIH0pO1xufVxuZnVuY3Rpb24gbm9ybWFsaXplUHJlbG9hZEV4cG9zZXModCkge1xuICByZXR1cm4gdCA/IHQubWFwKChlKSA9PiBlID09PSBcIi5cIiA/IGUgOiBlLnN0YXJ0c1dpdGgoXCIuL1wiKSA/IGUucmVwbGFjZShcIi4vXCIsIFwiXCIpIDogZSkgOiBbXTtcbn1cbmZ1bmN0aW9uIHByZWxvYWRBc3NldHModCwgZSwgcikge1xuICBjb25zdCB7IGNzc0Fzc2V0czogbiwganNBc3NldHNXaXRob3V0RW50cnk6IG8sIGVudHJ5QXNzZXRzOiBpIH0gPSByO1xuICBpZiAoZS5vcHRpb25zLmluQnJvd3Nlcikge1xuICAgIGkuZm9yRWFjaCgoYSkgPT4ge1xuICAgICAgY29uc3QgeyBtb2R1bGVJbmZvOiBjIH0gPSBhLCBsID0gZS5tb2R1bGVDYWNoZS5nZXQodC5uYW1lKTtcbiAgICAgIGdldFJlbW90ZUVudHJ5KGwgPyB7XG4gICAgICAgIHJlbW90ZUluZm86IGMsXG4gICAgICAgIHJlbW90ZUVudHJ5RXhwb3J0czogbC5yZW1vdGVFbnRyeUV4cG9ydHMsXG4gICAgICAgIGNyZWF0ZVNjcmlwdEhvb2s6ICh1KSA9PiB7XG4gICAgICAgICAgY29uc3QgZCA9IGUubG9hZGVySG9vay5saWZlY3ljbGUuY3JlYXRlU2NyaXB0LmVtaXQoe1xuICAgICAgICAgICAgdXJsOiB1XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgaWYgKGQgaW5zdGFuY2VvZiBIVE1MU2NyaXB0RWxlbWVudClcbiAgICAgICAgICAgIHJldHVybiBkO1xuICAgICAgICB9XG4gICAgICB9IDoge1xuICAgICAgICByZW1vdGVJbmZvOiBjLFxuICAgICAgICByZW1vdGVFbnRyeUV4cG9ydHM6IHZvaWQgMCxcbiAgICAgICAgY3JlYXRlU2NyaXB0SG9vazogKHUpID0+IHtcbiAgICAgICAgICBjb25zdCBkID0gZS5sb2FkZXJIb29rLmxpZmVjeWNsZS5jcmVhdGVTY3JpcHQuZW1pdCh7XG4gICAgICAgICAgICB1cmw6IHVcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBpZiAoZCBpbnN0YW5jZW9mIEhUTUxTY3JpcHRFbGVtZW50KVxuICAgICAgICAgICAgcmV0dXJuIGQ7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIGNvbnN0IHMgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gICAgbi5mb3JFYWNoKChhKSA9PiB7XG4gICAgICBjb25zdCB7IGxpbms6IGMsIG5lZWRBdHRhY2g6IGwgfSA9IGNyZWF0ZUxpbmsoYSwgKCkgPT4ge1xuICAgICAgfSwge1xuICAgICAgICByZWw6IFwicHJlbG9hZFwiLFxuICAgICAgICBhczogXCJzdHlsZVwiXG4gICAgICB9LCAodSkgPT4ge1xuICAgICAgICBjb25zdCBkID0gZS5sb2FkZXJIb29rLmxpZmVjeWNsZS5jcmVhdGVMaW5rLmVtaXQoe1xuICAgICAgICAgIHVybDogdVxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGQgaW5zdGFuY2VvZiBIVE1MTGlua0VsZW1lbnQpXG4gICAgICAgICAgcmV0dXJuIGQ7XG4gICAgICB9KTtcbiAgICAgIGwgJiYgcy5hcHBlbmRDaGlsZChjKTtcbiAgICB9KSwgby5mb3JFYWNoKChhKSA9PiB7XG4gICAgICBjb25zdCB7IGxpbms6IGMsIG5lZWRBdHRhY2g6IGwgfSA9IGNyZWF0ZUxpbmsoYSwgKCkgPT4ge1xuICAgICAgfSwge1xuICAgICAgICByZWw6IFwicHJlbG9hZFwiLFxuICAgICAgICBhczogXCJzY3JpcHRcIlxuICAgICAgfSwgKHUpID0+IHtcbiAgICAgICAgY29uc3QgZCA9IGUubG9hZGVySG9vay5saWZlY3ljbGUuY3JlYXRlTGluay5lbWl0KHtcbiAgICAgICAgICB1cmw6IHVcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChkIGluc3RhbmNlb2YgSFRNTExpbmtFbGVtZW50KVxuICAgICAgICAgIHJldHVybiBkO1xuICAgICAgfSk7XG4gICAgICBsICYmIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoYyk7XG4gICAgfSksIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQocyk7XG4gIH1cbn1cbmZ1bmN0aW9uIF9leHRlbmRzJDIoKSB7XG4gIHJldHVybiBfZXh0ZW5kcyQyID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbih0KSB7XG4gICAgZm9yICh2YXIgZSA9IDE7IGUgPCBhcmd1bWVudHMubGVuZ3RoOyBlKyspIHtcbiAgICAgIHZhciByID0gYXJndW1lbnRzW2VdO1xuICAgICAgZm9yICh2YXIgbiBpbiByKVxuICAgICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwociwgbikgJiYgKHRbbl0gPSByW25dKTtcbiAgICB9XG4gICAgcmV0dXJuIHQ7XG4gIH0sIF9leHRlbmRzJDIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbn1cbmZ1bmN0aW9uIGFzc2lnblJlbW90ZUluZm8odCwgZSkge1xuICAoIShcInJlbW90ZUVudHJ5XCIgaW4gZSkgfHwgIWUucmVtb3RlRW50cnkpICYmIGVycm9yKGBUaGUgYXR0cmlidXRlIHJlbW90ZUVudHJ5IG9mICR7bmFtZX0gbXVzdCBub3QgYmUgdW5kZWZpbmVkLmApO1xuICBjb25zdCB7IHJlbW90ZUVudHJ5OiByIH0gPSBlLCBuID0gZ2V0UmVzb3VyY2VVcmwoZSwgcik7XG4gIHQudHlwZSA9IGUucmVtb3RlRW50cnlUeXBlLCB0LmVudHJ5R2xvYmFsTmFtZSA9IGUuZ2xvYmFsTmFtZSwgdC5lbnRyeSA9IG4sIHQudmVyc2lvbiA9IGUudmVyc2lvbiwgdC5idWlsZFZlcnNpb24gPSBlLmJ1aWxkVmVyc2lvbjtcbn1cbmZ1bmN0aW9uIHNuYXBzaG90UGx1Z2luKCkge1xuICByZXR1cm4ge1xuICAgIG5hbWU6IFwic25hcHNob3QtcGx1Z2luXCIsXG4gICAgYXN5bmMgYWZ0ZXJSZXNvbHZlKHQpIHtcbiAgICAgIGNvbnN0IHsgcmVtb3RlOiBlLCBwa2dOYW1lT3JBbGlhczogciwgZXhwb3NlOiBuLCBvcmlnaW46IG8sIHJlbW90ZUluZm86IGkgfSA9IHQ7XG4gICAgICBpZiAoIWlzUmVtb3RlSW5mb1dpdGhFbnRyeShlKSB8fCAhaXNQdXJlUmVtb3RlRW50cnkoZSkpIHtcbiAgICAgICAgY29uc3QgeyByZW1vdGVTbmFwc2hvdDogcywgZ2xvYmFsU25hcHNob3Q6IGEgfSA9IGF3YWl0IG8uc25hcHNob3RIYW5kbGVyLmxvYWRSZW1vdGVTbmFwc2hvdEluZm8oZSk7XG4gICAgICAgIGFzc2lnblJlbW90ZUluZm8oaSwgcyk7XG4gICAgICAgIGNvbnN0IGMgPSB7XG4gICAgICAgICAgcmVtb3RlOiBlLFxuICAgICAgICAgIHByZWxvYWRDb25maWc6IHtcbiAgICAgICAgICAgIG5hbWVPckFsaWFzOiByLFxuICAgICAgICAgICAgZXhwb3NlczogW1xuICAgICAgICAgICAgICBuXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgcmVzb3VyY2VDYXRlZ29yeTogXCJzeW5jXCIsXG4gICAgICAgICAgICBzaGFyZTogITEsXG4gICAgICAgICAgICBkZXBzUmVtb3RlOiAhMVxuICAgICAgICAgIH1cbiAgICAgICAgfSwgbCA9IGF3YWl0IG8uaG9va3MubGlmZWN5Y2xlLmdlbmVyYXRlUHJlbG9hZEFzc2V0cy5lbWl0KHtcbiAgICAgICAgICBvcmlnaW46IG8sXG4gICAgICAgICAgcHJlbG9hZE9wdGlvbnM6IGMsXG4gICAgICAgICAgcmVtb3RlSW5mbzogaSxcbiAgICAgICAgICByZW1vdGU6IGUsXG4gICAgICAgICAgcmVtb3RlU25hcHNob3Q6IHMsXG4gICAgICAgICAgZ2xvYmFsU25hcHNob3Q6IGFcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBsICYmIHByZWxvYWRBc3NldHMoaSwgbywgbCksIF9leHRlbmRzJDIoe30sIHQsIHtcbiAgICAgICAgICByZW1vdGVTbmFwc2hvdDogc1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0O1xuICAgIH1cbiAgfTtcbn1cbmZ1bmN0aW9uIHNwbGl0SWQodCkge1xuICBjb25zdCBlID0gdC5zcGxpdChcIjpcIik7XG4gIHJldHVybiBlLmxlbmd0aCA9PT0gMSA/IHtcbiAgICBuYW1lOiBlWzBdLFxuICAgIHZlcnNpb246IHZvaWQgMFxuICB9IDogZS5sZW5ndGggPT09IDIgPyB7XG4gICAgbmFtZTogZVswXSxcbiAgICB2ZXJzaW9uOiBlWzFdXG4gIH0gOiB7XG4gICAgbmFtZTogZVsxXSxcbiAgICB2ZXJzaW9uOiBlWzJdXG4gIH07XG59XG5mdW5jdGlvbiB0cmF2ZXJzZU1vZHVsZUluZm8odCwgZSwgciwgbiwgbyA9IHt9LCBpKSB7XG4gIGNvbnN0IHMgPSBnZXRGTUlkKGUpLCB7IHZhbHVlOiBhIH0gPSBnZXRJbmZvV2l0aG91dFR5cGUodCwgcyksIGMgPSBpIHx8IGE7XG4gIGlmIChjICYmICFpc01hbmlmZXN0UHJvdmlkZXIoYykgJiYgKHIoYywgZSwgbiksIGMucmVtb3Rlc0luZm8pKSB7XG4gICAgY29uc3QgbCA9IE9iamVjdC5rZXlzKGMucmVtb3Rlc0luZm8pO1xuICAgIGZvciAoY29uc3QgdSBvZiBsKSB7XG4gICAgICBpZiAob1t1XSlcbiAgICAgICAgY29udGludWU7XG4gICAgICBvW3VdID0gITA7XG4gICAgICBjb25zdCBkID0gc3BsaXRJZCh1KSwgbSA9IGMucmVtb3Rlc0luZm9bdV07XG4gICAgICB0cmF2ZXJzZU1vZHVsZUluZm8odCwge1xuICAgICAgICBuYW1lOiBkLm5hbWUsXG4gICAgICAgIHZlcnNpb246IG0ubWF0Y2hlZFZlcnNpb25cbiAgICAgIH0sIHIsICExLCBvLCB2b2lkIDApO1xuICAgIH1cbiAgfVxufVxuZnVuY3Rpb24gZ2VuZXJhdGVQcmVsb2FkQXNzZXRzKHQsIGUsIHIsIG4sIG8pIHtcbiAgY29uc3QgaSA9IFtdLCBzID0gW10sIGEgPSBbXSwgYyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCksIGwgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpLCB7IG9wdGlvbnM6IHUgfSA9IHQsIHsgcHJlbG9hZENvbmZpZzogZCB9ID0gZSwgeyBkZXBzUmVtb3RlOiBtIH0gPSBkO1xuICB0cmF2ZXJzZU1vZHVsZUluZm8obiwgciwgKGgsIHksIHcpID0+IHtcbiAgICBsZXQgZztcbiAgICBpZiAodylcbiAgICAgIGcgPSBkO1xuICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkobSkpIHtcbiAgICAgIGNvbnN0IGIgPSBtLmZpbmQoKF8pID0+IF8ubmFtZU9yQWxpYXMgPT09IHkubmFtZSB8fCBfLm5hbWVPckFsaWFzID09PSB5LmFsaWFzKTtcbiAgICAgIGlmICghYilcbiAgICAgICAgcmV0dXJuO1xuICAgICAgZyA9IGRlZmF1bHRQcmVsb2FkQXJncyhiKTtcbiAgICB9IGVsc2UgaWYgKG0gPT09ICEwKVxuICAgICAgZyA9IGQ7XG4gICAgZWxzZVxuICAgICAgcmV0dXJuO1xuICAgIGNvbnN0IEkgPSBnZXRSZXNvdXJjZVVybChoLCBcInJlbW90ZUVudHJ5XCIgaW4gaCA/IGgucmVtb3RlRW50cnkgOiBcIlwiKTtcbiAgICBJICYmIGEucHVzaCh7XG4gICAgICBuYW1lOiB5Lm5hbWUsXG4gICAgICBtb2R1bGVJbmZvOiB7XG4gICAgICAgIG5hbWU6IHkubmFtZSxcbiAgICAgICAgZW50cnk6IEksXG4gICAgICAgIHR5cGU6IFwicmVtb3RlRW50cnlUeXBlXCIgaW4gaCA/IGgucmVtb3RlRW50cnlUeXBlIDogXCJnbG9iYWxcIixcbiAgICAgICAgZW50cnlHbG9iYWxOYW1lOiBcImdsb2JhbE5hbWVcIiBpbiBoID8gaC5nbG9iYWxOYW1lIDogeS5uYW1lLFxuICAgICAgICBzaGFyZVNjb3BlOiBcIlwiLFxuICAgICAgICB2ZXJzaW9uOiBcInZlcnNpb25cIiBpbiBoID8gaC52ZXJzaW9uIDogdm9pZCAwXG4gICAgICB9LFxuICAgICAgdXJsOiBJXG4gICAgfSk7XG4gICAgbGV0IE0gPSBcIm1vZHVsZXNcIiBpbiBoID8gaC5tb2R1bGVzIDogW107XG4gICAgY29uc3QgUyA9IG5vcm1hbGl6ZVByZWxvYWRFeHBvc2VzKGcuZXhwb3Nlcyk7XG4gICAgaWYgKFMubGVuZ3RoICYmIFwibW9kdWxlc1wiIGluIGgpIHtcbiAgICAgIHZhciBFO1xuICAgICAgTSA9IGggPT0gbnVsbCB8fCAoRSA9IGgubW9kdWxlcykgPT0gbnVsbCA/IHZvaWQgMCA6IEUucmVkdWNlKChiLCBfKSA9PiAoKFMgPT0gbnVsbCA/IHZvaWQgMCA6IFMuaW5kZXhPZihfLm1vZHVsZU5hbWUpKSAhPT0gLTEgJiYgYi5wdXNoKF8pLCBiKSwgW10pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBEKGIpIHtcbiAgICAgIGNvbnN0IF8gPSBiLm1hcCgodikgPT4gZ2V0UmVzb3VyY2VVcmwoaCwgdikpO1xuICAgICAgcmV0dXJuIGcuZmlsdGVyID8gXy5maWx0ZXIoZy5maWx0ZXIpIDogXztcbiAgICB9XG4gICAgaWYgKE0pIHtcbiAgICAgIGNvbnN0IGIgPSBNLmxlbmd0aDtcbiAgICAgIGZvciAobGV0IF8gPSAwOyBfIDwgYjsgXysrKSB7XG4gICAgICAgIGNvbnN0IHYgPSBNW19dLCBrID0gYCR7eS5uYW1lfS8ke3YubW9kdWxlTmFtZX1gO1xuICAgICAgICB0Lmhvb2tzLmxpZmVjeWNsZS5oYW5kbGVQcmVsb2FkTW9kdWxlLmVtaXQoe1xuICAgICAgICAgIGlkOiB2Lm1vZHVsZU5hbWUgPT09IFwiLlwiID8geS5uYW1lIDogayxcbiAgICAgICAgICBuYW1lOiB5Lm5hbWUsXG4gICAgICAgICAgcmVtb3RlU25hcHNob3Q6IGgsXG4gICAgICAgICAgcHJlbG9hZENvbmZpZzogZyxcbiAgICAgICAgICByZW1vdGU6IHksXG4gICAgICAgICAgb3JpZ2luOiB0XG4gICAgICAgIH0pLCAhZ2V0UHJlbG9hZGVkKGspICYmIChnLnJlc291cmNlQ2F0ZWdvcnkgPT09IFwiYWxsXCIgPyAoaS5wdXNoKC4uLkQodi5hc3NldHMuY3NzLmFzeW5jKSksIGkucHVzaCguLi5EKHYuYXNzZXRzLmNzcy5zeW5jKSksIHMucHVzaCguLi5EKHYuYXNzZXRzLmpzLmFzeW5jKSksIHMucHVzaCguLi5EKHYuYXNzZXRzLmpzLnN5bmMpKSkgOiAoZy5yZXNvdXJjZUNhdGVnb3J5ID0gXCJzeW5jXCIpICYmIChpLnB1c2goLi4uRCh2LmFzc2V0cy5jc3Muc3luYykpLCBzLnB1c2goLi4uRCh2LmFzc2V0cy5qcy5zeW5jKSkpLCBzZXRQcmVsb2FkZWQoaykpO1xuICAgICAgfVxuICAgIH1cbiAgfSwgITAsIHt9LCBvKSwgby5zaGFyZWQgJiYgby5zaGFyZWQuZm9yRWFjaCgoaCkgPT4ge1xuICAgIHZhciB5O1xuICAgIGNvbnN0IHcgPSAoeSA9IHUuc2hhcmVkKSA9PSBudWxsID8gdm9pZCAwIDogeVtoLnNoYXJlZE5hbWVdO1xuICAgIGlmICghdylcbiAgICAgIHJldHVybjtcbiAgICBjb25zdCBnID0gZ2V0UmVnaXN0ZXJlZFNoYXJlKHQuc2hhcmVTY29wZU1hcCwgaC5zaGFyZWROYW1lLCB3LCB0Lmhvb2tzLmxpZmVjeWNsZS5yZXNvbHZlU2hhcmUpO1xuICAgIGcgJiYgdHlwZW9mIGcubGliID09IFwiZnVuY3Rpb25cIiAmJiAoaC5hc3NldHMuanMuc3luYy5mb3JFYWNoKChJKSA9PiB7XG4gICAgICBjLmFkZChJKTtcbiAgICB9KSwgaC5hc3NldHMuY3NzLnN5bmMuZm9yRWFjaCgoSSkgPT4ge1xuICAgICAgbC5hZGQoSSk7XG4gICAgfSkpO1xuICB9KTtcbiAgY29uc3QgcCA9IHMuZmlsdGVyKChoKSA9PiAhYy5oYXMoaCkpO1xuICByZXR1cm4ge1xuICAgIGNzc0Fzc2V0czogaS5maWx0ZXIoKGgpID0+ICFsLmhhcyhoKSksXG4gICAganNBc3NldHNXaXRob3V0RW50cnk6IHAsXG4gICAgZW50cnlBc3NldHM6IGFcbiAgfTtcbn1cbmNvbnN0IGdlbmVyYXRlUHJlbG9hZEFzc2V0c1BsdWdpbiA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4ge1xuICAgIG5hbWU6IFwiZ2VuZXJhdGUtcHJlbG9hZC1hc3NldHMtcGx1Z2luXCIsXG4gICAgYXN5bmMgZ2VuZXJhdGVQcmVsb2FkQXNzZXRzKHQpIHtcbiAgICAgIGNvbnN0IHsgb3JpZ2luOiBlLCBwcmVsb2FkT3B0aW9uczogciwgcmVtb3RlSW5mbzogbiwgcmVtb3RlOiBvLCBnbG9iYWxTbmFwc2hvdDogaSwgcmVtb3RlU25hcHNob3Q6IHMgfSA9IHQ7XG4gICAgICByZXR1cm4gaXNSZW1vdGVJbmZvV2l0aEVudHJ5KG8pICYmIGlzUHVyZVJlbW90ZUVudHJ5KG8pID8ge1xuICAgICAgICBjc3NBc3NldHM6IFtdLFxuICAgICAgICBqc0Fzc2V0c1dpdGhvdXRFbnRyeTogW10sXG4gICAgICAgIGVudHJ5QXNzZXRzOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogby5uYW1lLFxuICAgICAgICAgICAgdXJsOiBvLmVudHJ5LFxuICAgICAgICAgICAgbW9kdWxlSW5mbzoge1xuICAgICAgICAgICAgICBuYW1lOiBuLm5hbWUsXG4gICAgICAgICAgICAgIGVudHJ5OiBvLmVudHJ5LFxuICAgICAgICAgICAgICB0eXBlOiBcImdsb2JhbFwiLFxuICAgICAgICAgICAgICBlbnRyeUdsb2JhbE5hbWU6IFwiXCIsXG4gICAgICAgICAgICAgIHNoYXJlU2NvcGU6IFwiXCJcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIF1cbiAgICAgIH0gOiAoYXNzaWduUmVtb3RlSW5mbyhuLCBzKSwgZ2VuZXJhdGVQcmVsb2FkQXNzZXRzKGUsIHIsIG4sIGksIHMpKTtcbiAgICB9XG4gIH07XG59O1xuZnVuY3Rpb24gX2V4dGVuZHMkMSgpIHtcbiAgcmV0dXJuIF9leHRlbmRzJDEgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uKHQpIHtcbiAgICBmb3IgKHZhciBlID0gMTsgZSA8IGFyZ3VtZW50cy5sZW5ndGg7IGUrKykge1xuICAgICAgdmFyIHIgPSBhcmd1bWVudHNbZV07XG4gICAgICBmb3IgKHZhciBuIGluIHIpXG4gICAgICAgIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChyLCBuKSAmJiAodFtuXSA9IHJbbl0pO1xuICAgIH1cbiAgICByZXR1cm4gdDtcbiAgfSwgX2V4dGVuZHMkMS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufVxuY2xhc3MgU25hcHNob3RIYW5kbGVyIHtcbiAgYXN5bmMgbG9hZFNuYXBzaG90KGUpIHtcbiAgICBjb25zdCB7IG9wdGlvbnM6IHIgfSA9IHRoaXMuSG9zdEluc3RhbmNlLCB7IGhvc3RHbG9iYWxTbmFwc2hvdDogbiwgcmVtb3RlU25hcHNob3Q6IG8sIGdsb2JhbFNuYXBzaG90OiBpIH0gPSB0aGlzLmdldEdsb2JhbFJlbW90ZUluZm8oZSksIHsgcmVtb3RlU25hcHNob3Q6IHMsIGdsb2JhbFNuYXBzaG90OiBhIH0gPSBhd2FpdCB0aGlzLmhvb2tzLmxpZmVjeWNsZS5sb2FkU25hcHNob3QuZW1pdCh7XG4gICAgICBvcHRpb25zOiByLFxuICAgICAgbW9kdWxlSW5mbzogZSxcbiAgICAgIGhvc3RHbG9iYWxTbmFwc2hvdDogbixcbiAgICAgIHJlbW90ZVNuYXBzaG90OiBvLFxuICAgICAgZ2xvYmFsU25hcHNob3Q6IGlcbiAgICB9KTtcbiAgICByZXR1cm4ge1xuICAgICAgcmVtb3RlU25hcHNob3Q6IHMsXG4gICAgICBnbG9iYWxTbmFwc2hvdDogYVxuICAgIH07XG4gIH1cbiAgYXN5bmMgbG9hZFJlbW90ZVNuYXBzaG90SW5mbyhlKSB7XG4gICAgY29uc3QgeyBvcHRpb25zOiByIH0gPSB0aGlzLkhvc3RJbnN0YW5jZTtcbiAgICBhd2FpdCB0aGlzLmhvb2tzLmxpZmVjeWNsZS5iZWZvcmVMb2FkUmVtb3RlU25hcHNob3QuZW1pdCh7XG4gICAgICBvcHRpb25zOiByLFxuICAgICAgbW9kdWxlSW5mbzogZVxuICAgIH0pO1xuICAgIGxldCBuID0gZ2V0R2xvYmFsU25hcHNob3RJbmZvQnlNb2R1bGVJbmZvKHtcbiAgICAgIG5hbWU6IHRoaXMuSG9zdEluc3RhbmNlLm9wdGlvbnMubmFtZSxcbiAgICAgIHZlcnNpb246IHRoaXMuSG9zdEluc3RhbmNlLm9wdGlvbnMudmVyc2lvblxuICAgIH0pO1xuICAgIG4gfHwgKG4gPSB7XG4gICAgICB2ZXJzaW9uOiB0aGlzLkhvc3RJbnN0YW5jZS5vcHRpb25zLnZlcnNpb24gfHwgXCJcIixcbiAgICAgIHJlbW90ZUVudHJ5OiBcIlwiLFxuICAgICAgcmVtb3Rlc0luZm86IHt9XG4gICAgfSwgYWRkR2xvYmFsU25hcHNob3Qoe1xuICAgICAgW3RoaXMuSG9zdEluc3RhbmNlLm9wdGlvbnMubmFtZV06IG5cbiAgICB9KSksIG4gJiYgXCJyZW1vdGVzSW5mb1wiIGluIG4gJiYgIWdldEluZm9XaXRob3V0VHlwZShuLnJlbW90ZXNJbmZvLCBlLm5hbWUpLnZhbHVlICYmIChcInZlcnNpb25cIiBpbiBlIHx8IFwiZW50cnlcIiBpbiBlKSAmJiAobi5yZW1vdGVzSW5mbyA9IF9leHRlbmRzJDEoe30sIG4gPT0gbnVsbCA/IHZvaWQgMCA6IG4ucmVtb3Rlc0luZm8sIHtcbiAgICAgIFtlLm5hbWVdOiB7XG4gICAgICAgIG1hdGNoZWRWZXJzaW9uOiBcInZlcnNpb25cIiBpbiBlID8gZS52ZXJzaW9uIDogZS5lbnRyeVxuICAgICAgfVxuICAgIH0pKTtcbiAgICBjb25zdCB7IGhvc3RHbG9iYWxTbmFwc2hvdDogbywgcmVtb3RlU25hcHNob3Q6IGksIGdsb2JhbFNuYXBzaG90OiBzIH0gPSB0aGlzLmdldEdsb2JhbFJlbW90ZUluZm8oZSksIHsgcmVtb3RlU25hcHNob3Q6IGEsIGdsb2JhbFNuYXBzaG90OiBjIH0gPSBhd2FpdCB0aGlzLmhvb2tzLmxpZmVjeWNsZS5sb2FkU25hcHNob3QuZW1pdCh7XG4gICAgICBvcHRpb25zOiByLFxuICAgICAgbW9kdWxlSW5mbzogZSxcbiAgICAgIGhvc3RHbG9iYWxTbmFwc2hvdDogbyxcbiAgICAgIHJlbW90ZVNuYXBzaG90OiBpLFxuICAgICAgZ2xvYmFsU25hcHNob3Q6IHNcbiAgICB9KTtcbiAgICBpZiAoYSlcbiAgICAgIGlmIChpc01hbmlmZXN0UHJvdmlkZXIoYSkpIHtcbiAgICAgICAgY29uc3QgbCA9IGF3YWl0IHRoaXMuZ2V0TWFuaWZlc3RKc29uKGEucmVtb3RlRW50cnksIGUsIHt9KSwgdSA9IHNldEdsb2JhbFNuYXBzaG90SW5mb0J5TW9kdWxlSW5mbyhfZXh0ZW5kcyQxKHt9LCBlLCB7XG4gICAgICAgICAgZW50cnk6IGEucmVtb3RlRW50cnlcbiAgICAgICAgfSksIGwpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHJlbW90ZVNuYXBzaG90OiBsLFxuICAgICAgICAgIGdsb2JhbFNuYXBzaG90OiB1XG4gICAgICAgIH07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCB7IHJlbW90ZVNuYXBzaG90OiBsIH0gPSBhd2FpdCB0aGlzLmhvb2tzLmxpZmVjeWNsZS5sb2FkUmVtb3RlU25hcHNob3QuZW1pdCh7XG4gICAgICAgICAgb3B0aW9uczogdGhpcy5Ib3N0SW5zdGFuY2Uub3B0aW9ucyxcbiAgICAgICAgICBtb2R1bGVJbmZvOiBlLFxuICAgICAgICAgIHJlbW90ZVNuYXBzaG90OiBhLFxuICAgICAgICAgIGZyb206IFwiZ2xvYmFsXCJcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgcmVtb3RlU25hcHNob3Q6IGwsXG4gICAgICAgICAgZ2xvYmFsU25hcHNob3Q6IGNcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICBlbHNlIGlmIChpc1JlbW90ZUluZm9XaXRoRW50cnkoZSkpIHtcbiAgICAgIGNvbnN0IGwgPSBhd2FpdCB0aGlzLmdldE1hbmlmZXN0SnNvbihlLmVudHJ5LCBlLCB7fSksIHUgPSBzZXRHbG9iYWxTbmFwc2hvdEluZm9CeU1vZHVsZUluZm8oZSwgbCksIHsgcmVtb3RlU25hcHNob3Q6IGQgfSA9IGF3YWl0IHRoaXMuaG9va3MubGlmZWN5Y2xlLmxvYWRSZW1vdGVTbmFwc2hvdC5lbWl0KHtcbiAgICAgICAgb3B0aW9uczogdGhpcy5Ib3N0SW5zdGFuY2Uub3B0aW9ucyxcbiAgICAgICAgbW9kdWxlSW5mbzogZSxcbiAgICAgICAgcmVtb3RlU25hcHNob3Q6IGwsXG4gICAgICAgIGZyb206IFwiZ2xvYmFsXCJcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcmVtb3RlU25hcHNob3Q6IGQsXG4gICAgICAgIGdsb2JhbFNuYXBzaG90OiB1XG4gICAgICB9O1xuICAgIH0gZWxzZVxuICAgICAgZXJyb3IoYFxuICAgICAgICAgIENhbm5vdCBnZXQgcmVtb3RlU25hcHNob3Qgd2l0aCB0aGUgbmFtZTogJyR7ZS5uYW1lfScsIHZlcnNpb246ICcke2UudmVyc2lvbn0nIGZyb20gX19GRURFUkFUSU9OX18ubW9kdWxlSW5mby4gVGhlIGZvbGxvd2luZyByZWFzb25zIG1heSBiZSBjYXVzaW5nIHRoZSBwcm9ibGVtOlxuXG4gICAgICAgICAgMS4gVGhlIERlcGxveSBwbGF0Zm9ybSBkaWQgbm90IGRlbGl2ZXIgdGhlIGNvcnJlY3QgZGF0YS4gWW91IGNhbiB1c2UgX19GRURFUkFUSU9OX18ubW9kdWxlSW5mbyB0byBjaGVjayB0aGUgcmVtb3RlSW5mby5cblxuICAgICAgICAgIDIuIFRoZSByZW1vdGUgJyR7ZS5uYW1lfScgdmVyc2lvbiAnJHtlLnZlcnNpb259JyBpcyBub3QgcmVsZWFzZWQuXG5cbiAgICAgICAgICBUaGUgdHJhbnNmb3JtZWQgbW9kdWxlIGluZm86ICR7SlNPTi5zdHJpbmdpZnkoYyl9XG4gICAgICAgIGApO1xuICB9XG4gIGdldEdsb2JhbFJlbW90ZUluZm8oZSkge1xuICAgIGNvbnN0IHIgPSBnZXRHbG9iYWxTbmFwc2hvdEluZm9CeU1vZHVsZUluZm8oe1xuICAgICAgbmFtZTogdGhpcy5Ib3N0SW5zdGFuY2Uub3B0aW9ucy5uYW1lLFxuICAgICAgdmVyc2lvbjogdGhpcy5Ib3N0SW5zdGFuY2Uub3B0aW9ucy52ZXJzaW9uXG4gICAgfSksIG4gPSByICYmIFwicmVtb3Rlc0luZm9cIiBpbiByICYmIHIucmVtb3Rlc0luZm8gJiYgZ2V0SW5mb1dpdGhvdXRUeXBlKHIucmVtb3Rlc0luZm8sIGUubmFtZSkudmFsdWU7XG4gICAgcmV0dXJuIG4gJiYgbi5tYXRjaGVkVmVyc2lvbiA/IHtcbiAgICAgIGhvc3RHbG9iYWxTbmFwc2hvdDogcixcbiAgICAgIGdsb2JhbFNuYXBzaG90OiBnZXRHbG9iYWxTbmFwc2hvdCgpLFxuICAgICAgcmVtb3RlU25hcHNob3Q6IGdldEdsb2JhbFNuYXBzaG90SW5mb0J5TW9kdWxlSW5mbyh7XG4gICAgICAgIG5hbWU6IGUubmFtZSxcbiAgICAgICAgdmVyc2lvbjogbi5tYXRjaGVkVmVyc2lvblxuICAgICAgfSlcbiAgICB9IDoge1xuICAgICAgaG9zdEdsb2JhbFNuYXBzaG90OiB2b2lkIDAsXG4gICAgICBnbG9iYWxTbmFwc2hvdDogZ2V0R2xvYmFsU25hcHNob3QoKSxcbiAgICAgIHJlbW90ZVNuYXBzaG90OiBnZXRHbG9iYWxTbmFwc2hvdEluZm9CeU1vZHVsZUluZm8oe1xuICAgICAgICBuYW1lOiBlLm5hbWUsXG4gICAgICAgIHZlcnNpb246IFwidmVyc2lvblwiIGluIGUgPyBlLnZlcnNpb24gOiB2b2lkIDBcbiAgICAgIH0pXG4gICAgfTtcbiAgfVxuICBhc3luYyBnZXRNYW5pZmVzdEpzb24oZSwgciwgbikge1xuICAgIGNvbnN0IG8gPSBhc3luYyAoKSA9PiB7XG4gICAgICBsZXQgcyA9IHRoaXMubWFuaWZlc3RDYWNoZS5nZXQoZSk7XG4gICAgICBpZiAocylcbiAgICAgICAgcmV0dXJuIHM7XG4gICAgICB0cnkge1xuICAgICAgICBsZXQgYSA9IGF3YWl0IHRoaXMubG9hZGVySG9vay5saWZlY3ljbGUuZmV0Y2guZW1pdChlLCB7fSk7XG4gICAgICAgIHJldHVybiAoIWEgfHwgIShhIGluc3RhbmNlb2YgUmVzcG9uc2UpKSAmJiAoYSA9IGF3YWl0IGZldGNoKGUsIHt9KSksIHMgPSBhd2FpdCBhLmpzb24oKSwgYXNzZXJ0KHMubWV0YURhdGEgJiYgcy5leHBvc2VzICYmIHMuc2hhcmVkLCBgJHtlfSBpcyBub3QgYSBmZWRlcmF0aW9uIG1hbmlmZXN0YCksIHRoaXMubWFuaWZlc3RDYWNoZS5zZXQoZSwgcyksIHM7XG4gICAgICB9IGNhdGNoIChhKSB7XG4gICAgICAgIGVycm9yKGBGYWlsZWQgdG8gZ2V0IG1hbmlmZXN0SnNvbiBmb3IgJHtyLm5hbWV9LiBUaGUgbWFuaWZlc3QgVVJMIGlzICR7ZX0uIFBsZWFzZSBlbnN1cmUgdGhhdCB0aGUgbWFuaWZlc3RVcmwgaXMgYWNjZXNzaWJsZS5cbiAgICAgICAgICBcbiBFcnJvciBtZXNzYWdlOlxuICAgICAgICAgIFxuICR7YX1gKTtcbiAgICAgIH1cbiAgICB9LCBpID0gYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcyA9IGF3YWl0IG8oKSwgYSA9IGdlbmVyYXRlU25hcHNob3RGcm9tTWFuaWZlc3Qocywge1xuICAgICAgICB2ZXJzaW9uOiBlXG4gICAgICB9KSwgeyByZW1vdGVTbmFwc2hvdDogYyB9ID0gYXdhaXQgdGhpcy5ob29rcy5saWZlY3ljbGUubG9hZFJlbW90ZVNuYXBzaG90LmVtaXQoe1xuICAgICAgICBvcHRpb25zOiB0aGlzLkhvc3RJbnN0YW5jZS5vcHRpb25zLFxuICAgICAgICBtb2R1bGVJbmZvOiByLFxuICAgICAgICBtYW5pZmVzdEpzb246IHMsXG4gICAgICAgIHJlbW90ZVNuYXBzaG90OiBhLFxuICAgICAgICBtYW5pZmVzdFVybDogZSxcbiAgICAgICAgZnJvbTogXCJtYW5pZmVzdFwiXG4gICAgICB9KTtcbiAgICAgIHJldHVybiBjO1xuICAgIH07XG4gICAgcmV0dXJuIHRoaXMubWFuaWZlc3RMb2FkaW5nW2VdIHx8ICh0aGlzLm1hbmlmZXN0TG9hZGluZ1tlXSA9IGkoKS50aGVuKChzKSA9PiBzKSksIHRoaXMubWFuaWZlc3RMb2FkaW5nW2VdO1xuICB9XG4gIGNvbnN0cnVjdG9yKGUpIHtcbiAgICB0aGlzLmxvYWRpbmdIb3N0U25hcHNob3QgPSBudWxsLCB0aGlzLm1hbmlmZXN0Q2FjaGUgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpLCB0aGlzLmhvb2tzID0gbmV3IFBsdWdpblN5c3RlbSh7XG4gICAgICBiZWZvcmVMb2FkUmVtb3RlU25hcHNob3Q6IG5ldyBBc3luY0hvb2soXCJiZWZvcmVMb2FkUmVtb3RlU25hcHNob3RcIiksXG4gICAgICBsb2FkU25hcHNob3Q6IG5ldyBBc3luY1dhdGVyZmFsbEhvb2soXCJsb2FkR2xvYmFsU25hcHNob3RcIiksXG4gICAgICBsb2FkUmVtb3RlU25hcHNob3Q6IG5ldyBBc3luY1dhdGVyZmFsbEhvb2soXCJsb2FkUmVtb3RlU25hcHNob3RcIilcbiAgICB9KSwgdGhpcy5tYW5pZmVzdExvYWRpbmcgPSBHbG9iYWwuX19GRURFUkFUSU9OX18uX19NQU5JRkVTVF9MT0FESU5HX18sIHRoaXMuSG9zdEluc3RhbmNlID0gZSwgdGhpcy5sb2FkZXJIb29rID0gZS5sb2FkZXJIb29rO1xuICB9XG59XG5mdW5jdGlvbiBfZXh0ZW5kcygpIHtcbiAgcmV0dXJuIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbih0KSB7XG4gICAgZm9yICh2YXIgZSA9IDE7IGUgPCBhcmd1bWVudHMubGVuZ3RoOyBlKyspIHtcbiAgICAgIHZhciByID0gYXJndW1lbnRzW2VdO1xuICAgICAgZm9yICh2YXIgbiBpbiByKVxuICAgICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwociwgbikgJiYgKHRbbl0gPSByW25dKTtcbiAgICB9XG4gICAgcmV0dXJuIHQ7XG4gIH0sIF9leHRlbmRzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59XG5mdW5jdGlvbiBfb2JqZWN0X3dpdGhvdXRfcHJvcGVydGllc19sb29zZSh0LCBlKSB7XG4gIGlmICh0ID09IG51bGwpXG4gICAgcmV0dXJuIHt9O1xuICB2YXIgciA9IHt9LCBuID0gT2JqZWN0LmtleXModCksIG8sIGk7XG4gIGZvciAoaSA9IDA7IGkgPCBuLmxlbmd0aDsgaSsrKVxuICAgIG8gPSBuW2ldLCAhKGUuaW5kZXhPZihvKSA+PSAwKSAmJiAocltvXSA9IHRbb10pO1xuICByZXR1cm4gcjtcbn1cbmNsYXNzIEZlZGVyYXRpb25Ib3N0IHtcbiAgX3NldEdsb2JhbFNoYXJlU2NvcGVNYXAoKSB7XG4gICAgY29uc3QgZSA9IGdldEdsb2JhbFNoYXJlU2NvcGUoKSwgciA9IHRoaXMub3B0aW9ucy5pZCB8fCB0aGlzLm9wdGlvbnMubmFtZTtcbiAgICByICYmICFlW3JdICYmIChlW3JdID0gdGhpcy5zaGFyZVNjb3BlTWFwKTtcbiAgfVxuICBpbml0T3B0aW9ucyhlKSB7XG4gICAgdGhpcy5yZWdpc3RlclBsdWdpbnMoZS5wbHVnaW5zKTtcbiAgICBjb25zdCByID0gdGhpcy5mb3JtYXRPcHRpb25zKHRoaXMub3B0aW9ucywgZSk7XG4gICAgcmV0dXJuIHRoaXMub3B0aW9ucyA9IHIsIHI7XG4gIH1cbiAgYXN5bmMgbG9hZFNoYXJlKGUsIHIpIHtcbiAgICB2YXIgbjtcbiAgICBjb25zdCBvID0gT2JqZWN0LmFzc2lnbih7fSwgKG4gPSB0aGlzLm9wdGlvbnMuc2hhcmVkKSA9PSBudWxsID8gdm9pZCAwIDogbltlXSwgcik7XG4gICAgbyAhPSBudWxsICYmIG8uc2NvcGUgJiYgYXdhaXQgUHJvbWlzZS5hbGwoby5zY29wZS5tYXAoYXN5bmMgKGwpID0+IHtcbiAgICAgIGF3YWl0IFByb21pc2UuYWxsKHRoaXMuaW5pdGlhbGl6ZVNoYXJpbmcobCwgby5zdHJhdGVneSkpO1xuICAgIH0pKTtcbiAgICBjb25zdCBpID0gYXdhaXQgdGhpcy5ob29rcy5saWZlY3ljbGUuYmVmb3JlTG9hZFNoYXJlLmVtaXQoe1xuICAgICAgcGtnTmFtZTogZSxcbiAgICAgIHNoYXJlSW5mbzogbyxcbiAgICAgIHNoYXJlZDogdGhpcy5vcHRpb25zLnNoYXJlZCxcbiAgICAgIG9yaWdpbjogdGhpc1xuICAgIH0pLCB7IHNoYXJlSW5mbzogcyB9ID0gaTtcbiAgICBhc3NlcnQocywgYENhbm5vdCBmaW5kICR7ZX0gU2hhcmUgaW4gdGhlICR7dGhpcy5vcHRpb25zLm5hbWV9LiBQbGVhc2UgZW5zdXJlIHRoYXQgdGhlICR7ZX0gU2hhcmUgcGFyYW1ldGVycyBoYXZlIGJlZW4gaW5qZWN0ZWRgKTtcbiAgICBjb25zdCBhID0gZ2V0UmVnaXN0ZXJlZFNoYXJlKHRoaXMuc2hhcmVTY29wZU1hcCwgZSwgcywgdGhpcy5ob29rcy5saWZlY3ljbGUucmVzb2x2ZVNoYXJlKSwgYyA9IChsKSA9PiB7XG4gICAgICBsLnVzZUluIHx8IChsLnVzZUluID0gW10pLCBhZGRVbmlxdWVJdGVtKGwudXNlSW4sIHRoaXMub3B0aW9ucy5uYW1lKTtcbiAgICB9O1xuICAgIGlmIChhICYmIGEubGliKVxuICAgICAgcmV0dXJuIGMoYSksIGEubGliO1xuICAgIGlmIChhICYmIGEubG9hZGluZyAmJiAhYS5sb2FkZWQpIHtcbiAgICAgIGNvbnN0IGwgPSBhd2FpdCBhLmxvYWRpbmc7XG4gICAgICByZXR1cm4gYS5sb2FkZWQgPSAhMCwgYS5saWIgfHwgKGEubGliID0gbCksIGMoYSksIGw7XG4gICAgfSBlbHNlIGlmIChhKSB7XG4gICAgICBjb25zdCBsID0gKGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgdSA9IGF3YWl0IGEuZ2V0KCk7XG4gICAgICAgIHMubGliID0gdSwgcy5sb2FkZWQgPSAhMCwgYyhzKTtcbiAgICAgICAgY29uc3QgZCA9IGdldFJlZ2lzdGVyZWRTaGFyZSh0aGlzLnNoYXJlU2NvcGVNYXAsIGUsIHMsIHRoaXMuaG9va3MubGlmZWN5Y2xlLnJlc29sdmVTaGFyZSk7XG4gICAgICAgIHJldHVybiBkICYmIChkLmxpYiA9IHUsIGQubG9hZGVkID0gITApLCB1O1xuICAgICAgfSkoKTtcbiAgICAgIHJldHVybiB0aGlzLnNldFNoYXJlZCh7XG4gICAgICAgIHBrZ05hbWU6IGUsXG4gICAgICAgIGxvYWRlZDogITEsXG4gICAgICAgIHNoYXJlZDogYSxcbiAgICAgICAgZnJvbTogdGhpcy5vcHRpb25zLm5hbWUsXG4gICAgICAgIGxpYjogbnVsbCxcbiAgICAgICAgbG9hZGluZzogbFxuICAgICAgfSksIGw7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChyKVxuICAgICAgICByZXR1cm4gITE7XG4gICAgICBjb25zdCBsID0gKGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgdSA9IGF3YWl0IHMuZ2V0KCk7XG4gICAgICAgIHMubGliID0gdSwgcy5sb2FkZWQgPSAhMCwgYyhzKTtcbiAgICAgICAgY29uc3QgZCA9IGdldFJlZ2lzdGVyZWRTaGFyZSh0aGlzLnNoYXJlU2NvcGVNYXAsIGUsIHMsIHRoaXMuaG9va3MubGlmZWN5Y2xlLnJlc29sdmVTaGFyZSk7XG4gICAgICAgIHJldHVybiBkICYmIChkLmxpYiA9IHUsIGQubG9hZGVkID0gITApLCB1O1xuICAgICAgfSkoKTtcbiAgICAgIHJldHVybiB0aGlzLnNldFNoYXJlZCh7XG4gICAgICAgIHBrZ05hbWU6IGUsXG4gICAgICAgIGxvYWRlZDogITEsXG4gICAgICAgIHNoYXJlZDogcyxcbiAgICAgICAgZnJvbTogdGhpcy5vcHRpb25zLm5hbWUsXG4gICAgICAgIGxpYjogbnVsbCxcbiAgICAgICAgbG9hZGluZzogbFxuICAgICAgfSksIGw7XG4gICAgfVxuICB9XG4gIGxvYWRTaGFyZVN5bmMoZSwgcikge1xuICAgIHZhciBuO1xuICAgIGNvbnN0IG8gPSBPYmplY3QuYXNzaWduKHt9LCAobiA9IHRoaXMub3B0aW9ucy5zaGFyZWQpID09IG51bGwgPyB2b2lkIDAgOiBuW2VdLCByKTtcbiAgICBvICE9IG51bGwgJiYgby5zY29wZSAmJiBvLnNjb3BlLmZvckVhY2goKGEpID0+IHtcbiAgICAgIHRoaXMuaW5pdGlhbGl6ZVNoYXJpbmcoYSwgby5zdHJhdGVneSk7XG4gICAgfSk7XG4gICAgY29uc3QgaSA9IGdldFJlZ2lzdGVyZWRTaGFyZSh0aGlzLnNoYXJlU2NvcGVNYXAsIGUsIG8sIHRoaXMuaG9va3MubGlmZWN5Y2xlLnJlc29sdmVTaGFyZSksIHMgPSAoYSkgPT4ge1xuICAgICAgYS51c2VJbiB8fCAoYS51c2VJbiA9IFtdKSwgYWRkVW5pcXVlSXRlbShhLnVzZUluLCB0aGlzLm9wdGlvbnMubmFtZSk7XG4gICAgfTtcbiAgICBpZiAoaSkge1xuICAgICAgaWYgKHR5cGVvZiBpLmxpYiA9PSBcImZ1bmN0aW9uXCIpXG4gICAgICAgIHJldHVybiBzKGkpLCBpLmxvYWRlZCB8fCAoaS5sb2FkZWQgPSAhMCwgaS5mcm9tID09PSB0aGlzLm9wdGlvbnMubmFtZSAmJiAoby5sb2FkZWQgPSAhMCkpLCBpLmxpYjtcbiAgICAgIGlmICh0eXBlb2YgaS5nZXQgPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIGNvbnN0IGEgPSBpLmdldCgpO1xuICAgICAgICBpZiAoIShhIGluc3RhbmNlb2YgUHJvbWlzZSkpXG4gICAgICAgICAgcmV0dXJuIHMoaSksIHRoaXMuc2V0U2hhcmVkKHtcbiAgICAgICAgICAgIHBrZ05hbWU6IGUsXG4gICAgICAgICAgICBsb2FkZWQ6ICEwLFxuICAgICAgICAgICAgZnJvbTogdGhpcy5vcHRpb25zLm5hbWUsXG4gICAgICAgICAgICBsaWI6IGEsXG4gICAgICAgICAgICBzaGFyZWQ6IGlcbiAgICAgICAgICB9KSwgYTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKG8ubGliKVxuICAgICAgcmV0dXJuIG8ubG9hZGVkIHx8IChvLmxvYWRlZCA9ICEwKSwgby5saWI7XG4gICAgaWYgKG8uZ2V0KSB7XG4gICAgICBjb25zdCBhID0gby5nZXQoKTtcbiAgICAgIGlmIChhIGluc3RhbmNlb2YgUHJvbWlzZSlcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBcbiAgICAgICAgVGhlIGxvYWRTaGFyZVN5bmMgZnVuY3Rpb24gd2FzIHVuYWJsZSB0byBsb2FkICR7ZX0uIFRoZSAke2V9IGNvdWxkIG5vdCBiZSBmb3VuZCBpbiAke3RoaXMub3B0aW9ucy5uYW1lfS5cbiAgICAgICAgUG9zc2libGUgcmVhc29ucyBmb3IgZmFpbHVyZTogXG5cbiAgICAgICAgMS4gVGhlICR7ZX0gc2hhcmUgd2FzIHJlZ2lzdGVyZWQgd2l0aCB0aGUgJ2dldCcgYXR0cmlidXRlLCBidXQgbG9hZFNoYXJlIHdhcyBub3QgdXNlZCBiZWZvcmVoYW5kLlxuXG4gICAgICAgIDIuIFRoZSAke2V9IHNoYXJlIHdhcyBub3QgcmVnaXN0ZXJlZCB3aXRoIHRoZSAnbGliJyBhdHRyaWJ1dGUuXG5cbiAgICAgIGApO1xuICAgICAgcmV0dXJuIG8ubGliID0gYSwgdGhpcy5zZXRTaGFyZWQoe1xuICAgICAgICBwa2dOYW1lOiBlLFxuICAgICAgICBsb2FkZWQ6ICEwLFxuICAgICAgICBmcm9tOiB0aGlzLm9wdGlvbnMubmFtZSxcbiAgICAgICAgbGliOiBvLmxpYixcbiAgICAgICAgc2hhcmVkOiBvXG4gICAgICB9KSwgby5saWI7XG4gICAgfVxuICAgIHRocm93IG5ldyBFcnJvcihgXG4gICAgICAgIFRoZSBsb2FkU2hhcmVTeW5jIGZ1bmN0aW9uIHdhcyB1bmFibGUgdG8gbG9hZCAke2V9LiBUaGUgJHtlfSBjb3VsZCBub3QgYmUgZm91bmQgaW4gJHt0aGlzLm9wdGlvbnMubmFtZX0uXG4gICAgICAgIFBvc3NpYmxlIHJlYXNvbnMgZm9yIGZhaWx1cmU6IFxuXG4gICAgICAgIDEuIFRoZSAke2V9IHNoYXJlIHdhcyByZWdpc3RlcmVkIHdpdGggdGhlICdnZXQnIGF0dHJpYnV0ZSwgYnV0IGxvYWRTaGFyZSB3YXMgbm90IHVzZWQgYmVmb3JlaGFuZC5cblxuICAgICAgICAyLiBUaGUgJHtlfSBzaGFyZSB3YXMgbm90IHJlZ2lzdGVyZWQgd2l0aCB0aGUgJ2xpYicgYXR0cmlidXRlLlxuXG4gICAgICBgKTtcbiAgfVxuICBpbml0UmF3Q29udGFpbmVyKGUsIHIsIG4pIHtcbiAgICBjb25zdCBvID0gZ2V0UmVtb3RlSW5mbyh7XG4gICAgICBuYW1lOiBlLFxuICAgICAgZW50cnk6IHJcbiAgICB9KSwgaSA9IG5ldyBNb2R1bGUoe1xuICAgICAgaG9zdDogdGhpcyxcbiAgICAgIHJlbW90ZUluZm86IG9cbiAgICB9KTtcbiAgICByZXR1cm4gaS5yZW1vdGVFbnRyeUV4cG9ydHMgPSBuLCB0aGlzLm1vZHVsZUNhY2hlLnNldChlLCBpKSwgaTtcbiAgfVxuICBhc3luYyBfZ2V0UmVtb3RlTW9kdWxlQW5kT3B0aW9ucyhlKSB7XG4gICAgY29uc3QgciA9IGF3YWl0IHRoaXMuaG9va3MubGlmZWN5Y2xlLmJlZm9yZVJlcXVlc3QuZW1pdCh7XG4gICAgICBpZDogZSxcbiAgICAgIG9wdGlvbnM6IHRoaXMub3B0aW9ucyxcbiAgICAgIG9yaWdpbjogdGhpc1xuICAgIH0pLCB7IGlkOiBuIH0gPSByLCBvID0gbWF0Y2hSZW1vdGVXaXRoTmFtZUFuZEV4cG9zZSh0aGlzLm9wdGlvbnMucmVtb3Rlcywgbik7XG4gICAgYXNzZXJ0KG8sIGBcbiAgICAgICAgVW5hYmxlIHRvIGxvY2F0ZSAke259IGluICR7dGhpcy5vcHRpb25zLm5hbWV9LiBQb3RlbnRpYWwgcmVhc29ucyBmb3IgZmFpbHVyZSBpbmNsdWRlOlxuXG4gICAgICAgIDEuICR7bn0gd2FzIG5vdCBpbmNsdWRlZCBpbiB0aGUgJ3JlbW90ZXMnIHBhcmFtZXRlciBvZiAke3RoaXMub3B0aW9ucy5uYW1lIHx8IFwidGhlIGhvc3RcIn0uXG5cbiAgICAgICAgMi4gJHtufSBjb3VsZCBub3QgYmUgZm91bmQgaW4gdGhlICdyZW1vdGVzJyBvZiAke3RoaXMub3B0aW9ucy5uYW1lfSB3aXRoIGVpdGhlciAnbmFtZScgb3IgJ2FsaWFzJyBhdHRyaWJ1dGVzLlxuICAgICAgICAzLiAke259IGlzIG5vdCBvbmxpbmUsIGluamVjdGVkLCBvciBsb2FkZWQuXG4gICAgICAgIDQuICR7bn0gIGNhbm5vdCBiZSBhY2Nlc3NlZCBvbiB0aGUgZXhwZWN0ZWQuXG4gICAgICAgIDUuIFRoZSAnYmVmb3JlUmVxdWVzdCcgaG9vayB3YXMgcHJvdmlkZWQgYnV0IGRpZCBub3QgcmV0dXJuIHRoZSBjb3JyZWN0ICdyZW1vdGVJbmZvJyB3aGVuIGF0dGVtcHRpbmcgdG8gbG9hZCAke259LlxuICAgICAgYCk7XG4gICAgY29uc3QgeyByZW1vdGU6IGkgfSA9IG8sIHMgPSBnZXRSZW1vdGVJbmZvKGkpLCBhID0gYXdhaXQgdGhpcy5ob29rcy5saWZlY3ljbGUuYWZ0ZXJSZXNvbHZlLmVtaXQoX2V4dGVuZHMoe1xuICAgICAgaWQ6IG5cbiAgICB9LCBvLCB7XG4gICAgICBvcHRpb25zOiB0aGlzLm9wdGlvbnMsXG4gICAgICBvcmlnaW46IHRoaXMsXG4gICAgICByZW1vdGVJbmZvOiBzXG4gICAgfSkpLCB7IHJlbW90ZTogYywgZXhwb3NlOiBsIH0gPSBhO1xuICAgIGFzc2VydChjICYmIGwsIGBUaGUgJ2JlZm9yZVJlcXVlc3QnIGhvb2sgd2FzIGV4ZWN1dGVkLCBidXQgaXQgZmFpbGVkIHRvIHJldHVybiB0aGUgY29ycmVjdCAncmVtb3RlJyBhbmQgJ2V4cG9zZScgdmFsdWVzIHdoaWxlIGxvYWRpbmcgJHtufS5gKTtcbiAgICBsZXQgdSA9IHRoaXMubW9kdWxlQ2FjaGUuZ2V0KGMubmFtZSk7XG4gICAgY29uc3QgZCA9IHtcbiAgICAgIGhvc3Q6IHRoaXMsXG4gICAgICByZW1vdGVJbmZvOiBzXG4gICAgfTtcbiAgICByZXR1cm4gdSB8fCAodSA9IG5ldyBNb2R1bGUoZCksIHRoaXMubW9kdWxlQ2FjaGUuc2V0KGMubmFtZSwgdSkpLCB7XG4gICAgICBtb2R1bGU6IHUsXG4gICAgICBtb2R1bGVPcHRpb25zOiBkLFxuICAgICAgcmVtb3RlTWF0Y2hJbmZvOiBhXG4gICAgfTtcbiAgfVxuICBhc3luYyBsb2FkUmVtb3RlKGUsIHIpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBsb2FkRmFjdG9yeTogbiA9ICEwIH0gPSByIHx8IHtcbiAgICAgICAgbG9hZEZhY3Rvcnk6ICEwXG4gICAgICB9LCB7IG1vZHVsZTogbywgbW9kdWxlT3B0aW9uczogaSwgcmVtb3RlTWF0Y2hJbmZvOiBzIH0gPSBhd2FpdCB0aGlzLl9nZXRSZW1vdGVNb2R1bGVBbmRPcHRpb25zKGUpLCB7IHBrZ05hbWVPckFsaWFzOiBhLCByZW1vdGU6IGMsIGV4cG9zZTogbCwgaWQ6IHUgfSA9IHMsIGQgPSBhd2FpdCBvLmdldChsLCByKSwgbSA9IGF3YWl0IHRoaXMuaG9va3MubGlmZWN5Y2xlLm9uTG9hZC5lbWl0KHtcbiAgICAgICAgaWQ6IHUsXG4gICAgICAgIHBrZ05hbWVPckFsaWFzOiBhLFxuICAgICAgICBleHBvc2U6IGwsXG4gICAgICAgIGV4cG9zZU1vZHVsZTogbiA/IGQgOiB2b2lkIDAsXG4gICAgICAgIGV4cG9zZU1vZHVsZUZhY3Rvcnk6IG4gPyB2b2lkIDAgOiBkLFxuICAgICAgICByZW1vdGU6IGMsXG4gICAgICAgIG9wdGlvbnM6IGksXG4gICAgICAgIG1vZHVsZUluc3RhbmNlOiBvLFxuICAgICAgICBvcmlnaW46IHRoaXNcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHR5cGVvZiBtID09IFwiZnVuY3Rpb25cIiA/IG0gOiBkO1xuICAgIH0gY2F0Y2ggKG4pIHtcbiAgICAgIGNvbnN0IHsgZnJvbTogbyA9IFwicnVudGltZVwiIH0gPSByIHx8IHtcbiAgICAgICAgZnJvbTogXCJydW50aW1lXCJcbiAgICAgIH0sIGkgPSBhd2FpdCB0aGlzLmhvb2tzLmxpZmVjeWNsZS5lcnJvckxvYWRSZW1vdGUuZW1pdCh7XG4gICAgICAgIGlkOiBlLFxuICAgICAgICBlcnJvcjogbixcbiAgICAgICAgZnJvbTogbyxcbiAgICAgICAgb3JpZ2luOiB0aGlzXG4gICAgICB9KTtcbiAgICAgIGlmICghaSlcbiAgICAgICAgdGhyb3cgbjtcbiAgICAgIHJldHVybiBpO1xuICAgIH1cbiAgfVxuICBhc3luYyBwcmVsb2FkUmVtb3RlKGUpIHtcbiAgICBhd2FpdCB0aGlzLmhvb2tzLmxpZmVjeWNsZS5iZWZvcmVQcmVsb2FkUmVtb3RlLmVtaXQoe1xuICAgICAgcHJlbG9hZE9wdGlvbnM6IGUsXG4gICAgICBvcHRpb25zOiB0aGlzLm9wdGlvbnMsXG4gICAgICBvcmlnaW46IHRoaXNcbiAgICB9KTtcbiAgICBjb25zdCByID0gZm9ybWF0UHJlbG9hZEFyZ3ModGhpcy5vcHRpb25zLnJlbW90ZXMsIGUpO1xuICAgIGF3YWl0IFByb21pc2UuYWxsKHIubWFwKGFzeW5jIChuKSA9PiB7XG4gICAgICBjb25zdCB7IHJlbW90ZTogbyB9ID0gbiwgaSA9IGdldFJlbW90ZUluZm8obyksIHsgZ2xvYmFsU25hcHNob3Q6IHMsIHJlbW90ZVNuYXBzaG90OiBhIH0gPSBhd2FpdCB0aGlzLnNuYXBzaG90SGFuZGxlci5sb2FkUmVtb3RlU25hcHNob3RJbmZvKG8pLCBjID0gYXdhaXQgdGhpcy5ob29rcy5saWZlY3ljbGUuZ2VuZXJhdGVQcmVsb2FkQXNzZXRzLmVtaXQoe1xuICAgICAgICBvcmlnaW46IHRoaXMsXG4gICAgICAgIHByZWxvYWRPcHRpb25zOiBuLFxuICAgICAgICByZW1vdGU6IG8sXG4gICAgICAgIHJlbW90ZUluZm86IGksXG4gICAgICAgIGdsb2JhbFNuYXBzaG90OiBzLFxuICAgICAgICByZW1vdGVTbmFwc2hvdDogYVxuICAgICAgfSk7XG4gICAgICAhYyB8fCBwcmVsb2FkQXNzZXRzKGksIHRoaXMsIGMpO1xuICAgIH0pKTtcbiAgfVxuICBpbml0aWFsaXplU2hhcmluZyhlID0gREVGQVVMVF9TQ09QRSwgcikge1xuICAgIGNvbnN0IG4gPSB0aGlzLnNoYXJlU2NvcGVNYXAsIG8gPSB0aGlzLm9wdGlvbnMubmFtZTtcbiAgICBuW2VdIHx8IChuW2VdID0ge30pO1xuICAgIGNvbnN0IGkgPSBuW2VdLCBzID0gKHUsIGQpID0+IHtcbiAgICAgIHZhciBtO1xuICAgICAgY29uc3QgeyB2ZXJzaW9uOiBwLCBlYWdlcjogaCB9ID0gZDtcbiAgICAgIGlbdV0gPSBpW3VdIHx8IHt9O1xuICAgICAgY29uc3QgeSA9IGlbdV0sIHcgPSB5W3BdLCBnID0gQm9vbGVhbih3ICYmICh3LmVhZ2VyIHx8ICgobSA9IHcuc2hhcmVDb25maWcpID09IG51bGwgPyB2b2lkIDAgOiBtLmVhZ2VyKSkpO1xuICAgICAgKCF3IHx8IHcuc3RyYXRlZ3kgIT09IFwibG9hZGVkLWZpcnN0XCIgJiYgIXcubG9hZGVkICYmIChCb29sZWFuKCFoKSAhPT0gIWcgPyBoIDogbyA+IHcuZnJvbSkpICYmICh5W3BdID0gZCk7XG4gICAgfSwgYSA9IFtdLCBjID0gKHUpID0+IHUgJiYgdS5pbml0ICYmIHUuaW5pdChuW2VdKSwgbCA9IGFzeW5jICh1KSA9PiB7XG4gICAgICBjb25zdCB7IG1vZHVsZTogZCB9ID0gYXdhaXQgdGhpcy5fZ2V0UmVtb3RlTW9kdWxlQW5kT3B0aW9ucyh1KTtcbiAgICAgIGlmIChkLmdldEVudHJ5KSB7XG4gICAgICAgIGNvbnN0IG0gPSBhd2FpdCBkLmdldEVudHJ5KCk7XG4gICAgICAgIGQuaW5pdGVkIHx8IChjKG0pLCBkLmluaXRlZCA9ICEwKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBPYmplY3Qua2V5cyh0aGlzLm9wdGlvbnMuc2hhcmVkKS5mb3JFYWNoKCh1KSA9PiB7XG4gICAgICBjb25zdCBkID0gdGhpcy5vcHRpb25zLnNoYXJlZFt1XTtcbiAgICAgIGQuc2NvcGUuaW5jbHVkZXMoZSkgJiYgcyh1LCBkKTtcbiAgICB9KSwgciA9PT0gXCJ2ZXJzaW9uLWZpcnN0XCIgJiYgdGhpcy5vcHRpb25zLnJlbW90ZXMuZm9yRWFjaCgodSkgPT4ge1xuICAgICAgdS5zaGFyZVNjb3BlID09PSBlICYmIGEucHVzaChsKHUubmFtZSkpO1xuICAgIH0pLCBhO1xuICB9XG4gIGluaXRTaGFyZVNjb3BlTWFwKGUsIHIpIHtcbiAgICB0aGlzLnNoYXJlU2NvcGVNYXBbZV0gPSByLCB0aGlzLmhvb2tzLmxpZmVjeWNsZS5pbml0Q29udGFpbmVyU2hhcmVTY29wZU1hcC5lbWl0KHtcbiAgICAgIHNoYXJlU2NvcGU6IHIsXG4gICAgICBvcHRpb25zOiB0aGlzLm9wdGlvbnMsXG4gICAgICBvcmlnaW46IHRoaXNcbiAgICB9KTtcbiAgfVxuICBmb3JtYXRPcHRpb25zKGUsIHIpIHtcbiAgICBjb25zdCBuID0gZm9ybWF0U2hhcmVDb25maWdzKHIuc2hhcmVkIHx8IHt9LCByLm5hbWUpLCBvID0gX2V4dGVuZHMoe30sIGUuc2hhcmVkLCBuKSwgeyB1c2VyT3B0aW9uczogaSwgb3B0aW9uczogcyB9ID0gdGhpcy5ob29rcy5saWZlY3ljbGUuYmVmb3JlSW5pdC5lbWl0KHtcbiAgICAgIG9yaWdpbjogdGhpcyxcbiAgICAgIHVzZXJPcHRpb25zOiByLFxuICAgICAgb3B0aW9uczogZSxcbiAgICAgIHNoYXJlSW5mbzogb1xuICAgIH0pLCBhID0gKGkucmVtb3RlcyB8fCBbXSkucmVkdWNlKCh1LCBkKSA9PiAodGhpcy5yZWdpc3RlclJlbW90ZShkLCB1LCB7XG4gICAgICBmb3JjZTogITFcbiAgICB9KSwgdSksIHMucmVtb3Rlcyk7XG4gICAgT2JqZWN0LmtleXMobikuZm9yRWFjaCgodSkgPT4ge1xuICAgICAgY29uc3QgZCA9IG5bdV07XG4gICAgICAhZ2V0UmVnaXN0ZXJlZFNoYXJlKHRoaXMuc2hhcmVTY29wZU1hcCwgdSwgZCwgdGhpcy5ob29rcy5saWZlY3ljbGUucmVzb2x2ZVNoYXJlKSAmJiBkICYmIGQubGliICYmIHRoaXMuc2V0U2hhcmVkKHtcbiAgICAgICAgcGtnTmFtZTogdSxcbiAgICAgICAgbGliOiBkLmxpYixcbiAgICAgICAgZ2V0OiBkLmdldCxcbiAgICAgICAgbG9hZGVkOiAhMCxcbiAgICAgICAgc2hhcmVkOiBkLFxuICAgICAgICBmcm9tOiByLm5hbWVcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIGNvbnN0IGMgPSBbXG4gICAgICAuLi5zLnBsdWdpbnNcbiAgICBdO1xuICAgIGkucGx1Z2lucyAmJiBpLnBsdWdpbnMuZm9yRWFjaCgodSkgPT4ge1xuICAgICAgYy5pbmNsdWRlcyh1KSB8fCBjLnB1c2godSk7XG4gICAgfSk7XG4gICAgY29uc3QgbCA9IF9leHRlbmRzKHt9LCBlLCByLCB7XG4gICAgICBwbHVnaW5zOiBjLFxuICAgICAgcmVtb3RlczogYSxcbiAgICAgIHNoYXJlZDogb1xuICAgIH0pO1xuICAgIHJldHVybiB0aGlzLmhvb2tzLmxpZmVjeWNsZS5pbml0LmVtaXQoe1xuICAgICAgb3JpZ2luOiB0aGlzLFxuICAgICAgb3B0aW9uczogbFxuICAgIH0pLCBsO1xuICB9XG4gIHJlZ2lzdGVyUGx1Z2lucyhlKSB7XG4gICAgcmVnaXN0ZXJQbHVnaW5zKGUsIFtcbiAgICAgIHRoaXMuaG9va3MsXG4gICAgICB0aGlzLnNuYXBzaG90SGFuZGxlci5ob29rcyxcbiAgICAgIHRoaXMubG9hZGVySG9va1xuICAgIF0pO1xuICB9XG4gIHNldFNoYXJlZCh7IHBrZ05hbWU6IGUsIHNoYXJlZDogciwgZnJvbTogbiwgbGliOiBvLCBsb2FkaW5nOiBpLCBsb2FkZWQ6IHMsIGdldDogYSB9KSB7XG4gICAgY29uc3QgeyB2ZXJzaW9uOiBjLCBzY29wZTogbCA9IFwiZGVmYXVsdFwiIH0gPSByLCB1ID0gX29iamVjdF93aXRob3V0X3Byb3BlcnRpZXNfbG9vc2UociwgW1xuICAgICAgXCJ2ZXJzaW9uXCIsXG4gICAgICBcInNjb3BlXCJcbiAgICBdKTtcbiAgICAoQXJyYXkuaXNBcnJheShsKSA/IGwgOiBbXG4gICAgICBsXG4gICAgXSkuZm9yRWFjaCgoZCkgPT4ge1xuICAgICAgdGhpcy5zaGFyZVNjb3BlTWFwW2RdIHx8ICh0aGlzLnNoYXJlU2NvcGVNYXBbZF0gPSB7fSksIHRoaXMuc2hhcmVTY29wZU1hcFtkXVtlXSB8fCAodGhpcy5zaGFyZVNjb3BlTWFwW2RdW2VdID0ge30pLCAhdGhpcy5zaGFyZVNjb3BlTWFwW2RdW2VdW2NdICYmICh0aGlzLnNoYXJlU2NvcGVNYXBbZF1bZV1bY10gPSBfZXh0ZW5kcyh7XG4gICAgICAgIHZlcnNpb246IGMsXG4gICAgICAgIHNjb3BlOiBbXG4gICAgICAgICAgXCJkZWZhdWx0XCJcbiAgICAgICAgXVxuICAgICAgfSwgdSwge1xuICAgICAgICBsaWI6IG8sXG4gICAgICAgIGxvYWRlZDogcyxcbiAgICAgICAgbG9hZGluZzogaVxuICAgICAgfSksIGEgJiYgKHRoaXMuc2hhcmVTY29wZU1hcFtkXVtlXVtjXS5nZXQgPSBhKSk7XG4gICAgfSk7XG4gIH1cbiAgcmVtb3ZlUmVtb3RlKGUpIHtcbiAgICBjb25zdCB7IG5hbWU6IHIgfSA9IGUsIG4gPSB0aGlzLm9wdGlvbnMucmVtb3Rlcy5maW5kSW5kZXgoKGkpID0+IGkubmFtZSA9PT0gcik7XG4gICAgbiAhPT0gLTEgJiYgdGhpcy5vcHRpb25zLnJlbW90ZXMuc3BsaWNlKG4sIDEpO1xuICAgIGNvbnN0IG8gPSB0aGlzLm1vZHVsZUNhY2hlLmdldChlLm5hbWUpO1xuICAgIGlmIChvKSB7XG4gICAgICBjb25zdCBpID0gby5yZW1vdGVJbmZvLmVudHJ5R2xvYmFsTmFtZTtcbiAgICAgIGdsb2JhbFRoaXNbaV0gJiYgZGVsZXRlIGdsb2JhbFRoaXNbaV07XG4gICAgICBjb25zdCBzID0gZ2V0UmVtb3RlRW50cnlVbmlxdWVLZXkoby5yZW1vdGVJbmZvKTtcbiAgICAgIGdsb2JhbExvYWRpbmdbc10gJiYgZGVsZXRlIGdsb2JhbExvYWRpbmdbc10sIHRoaXMubW9kdWxlQ2FjaGUuZGVsZXRlKGUubmFtZSk7XG4gICAgfVxuICB9XG4gIHJlZ2lzdGVyUmVtb3RlKGUsIHIsIG4pIHtcbiAgICBjb25zdCBvID0gKCkgPT4ge1xuICAgICAgaWYgKGUuYWxpYXMpIHtcbiAgICAgICAgY29uc3QgcyA9IHIuZmluZCgoYSkgPT4ge1xuICAgICAgICAgIHZhciBjO1xuICAgICAgICAgIHJldHVybiBlLmFsaWFzICYmIChhLm5hbWUuc3RhcnRzV2l0aChlLmFsaWFzKSB8fCAoKGMgPSBhLmFsaWFzKSA9PSBudWxsID8gdm9pZCAwIDogYy5zdGFydHNXaXRoKGUuYWxpYXMpKSk7XG4gICAgICAgIH0pO1xuICAgICAgICBhc3NlcnQoIXMsIGBUaGUgYWxpYXMgJHtlLmFsaWFzfSBvZiByZW1vdGUgJHtlLm5hbWV9IGlzIG5vdCBhbGxvd2VkIHRvIGJlIHRoZSBwcmVmaXggb2YgJHtzICYmIHMubmFtZX0gbmFtZSBvciBhbGlhc2ApO1xuICAgICAgfVxuICAgICAgXCJlbnRyeVwiIGluIGUgJiYgaXNCcm93c2VyRW52JDEoKSAmJiAhZS5lbnRyeS5zdGFydHNXaXRoKFwiaHR0cFwiKSAmJiAoZS5lbnRyeSA9IG5ldyBVUkwoZS5lbnRyeSwgd2luZG93LmxvY2F0aW9uLm9yaWdpbikuaHJlZiksIGUuc2hhcmVTY29wZSB8fCAoZS5zaGFyZVNjb3BlID0gREVGQVVMVF9TQ09QRSksIGUudHlwZSB8fCAoZS50eXBlID0gREVGQVVMVF9SRU1PVEVfVFlQRSk7XG4gICAgfSwgaSA9IHIuZmluZCgocykgPT4gcy5uYW1lID09PSBlLm5hbWUpO1xuICAgIGlmICghaSlcbiAgICAgIG8oKSwgci5wdXNoKGUpO1xuICAgIGVsc2Uge1xuICAgICAgY29uc3QgcyA9IFtcbiAgICAgICAgYFRoZSByZW1vdGUgXCIke2UubmFtZX1cIiBpcyBhbHJlYWR5IHJlZ2lzdGVyZWQuYCxcbiAgICAgICAgbiAhPSBudWxsICYmIG4uZm9yY2UgPyBcIkhvcGUgeW91IGhhdmUga25vd24gdGhhdCBPVkVSUklERSBpdCBtYXkgaGF2ZSBzb21lIHVuZXhwZWN0ZWQgZXJyb3JzXCIgOiAnSWYgeW91IHdhbnQgdG8gbWVyZ2UgdGhlIHJlbW90ZSwgeW91IGNhbiBzZXQgXCJmb3JjZTogdHJ1ZVwiLidcbiAgICAgIF07XG4gICAgICBuICE9IG51bGwgJiYgbi5mb3JjZSAmJiAodGhpcy5yZW1vdmVSZW1vdGUoaSksIG8oKSwgci5wdXNoKGUpKSwgd2FybiQxKHMuam9pbihcIiBcIikpO1xuICAgIH1cbiAgfVxuICByZWdpc3RlclJlbW90ZXMoZSwgcikge1xuICAgIGUuZm9yRWFjaCgobikgPT4ge1xuICAgICAgdGhpcy5yZWdpc3RlclJlbW90ZShuLCB0aGlzLm9wdGlvbnMucmVtb3Rlcywge1xuICAgICAgICBmb3JjZTogciA9PSBudWxsID8gdm9pZCAwIDogci5mb3JjZVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbiAgY29uc3RydWN0b3IoZSkge1xuICAgIHRoaXMuaG9va3MgPSBuZXcgUGx1Z2luU3lzdGVtKHtcbiAgICAgIGJlZm9yZUluaXQ6IG5ldyBTeW5jV2F0ZXJmYWxsSG9vayhcImJlZm9yZUluaXRcIiksXG4gICAgICBpbml0OiBuZXcgU3luY0hvb2soKSxcbiAgICAgIGJlZm9yZVJlcXVlc3Q6IG5ldyBBc3luY1dhdGVyZmFsbEhvb2soXCJiZWZvcmVSZXF1ZXN0XCIpLFxuICAgICAgYWZ0ZXJSZXNvbHZlOiBuZXcgQXN5bmNXYXRlcmZhbGxIb29rKFwiYWZ0ZXJSZXNvbHZlXCIpLFxuICAgICAgYmVmb3JlSW5pdENvbnRhaW5lcjogbmV3IEFzeW5jV2F0ZXJmYWxsSG9vayhcImJlZm9yZUluaXRDb250YWluZXJcIiksXG4gICAgICBpbml0Q29udGFpbmVyU2hhcmVTY29wZU1hcDogbmV3IEFzeW5jV2F0ZXJmYWxsSG9vayhcImluaXRDb250YWluZXJcIiksXG4gICAgICBpbml0Q29udGFpbmVyOiBuZXcgQXN5bmNXYXRlcmZhbGxIb29rKFwiaW5pdENvbnRhaW5lclwiKSxcbiAgICAgIG9uTG9hZDogbmV3IEFzeW5jSG9vayhcIm9uTG9hZFwiKSxcbiAgICAgIGhhbmRsZVByZWxvYWRNb2R1bGU6IG5ldyBTeW5jSG9vayhcImhhbmRsZVByZWxvYWRNb2R1bGVcIiksXG4gICAgICBlcnJvckxvYWRSZW1vdGU6IG5ldyBBc3luY0hvb2soXCJlcnJvckxvYWRSZW1vdGVcIiksXG4gICAgICBiZWZvcmVMb2FkU2hhcmU6IG5ldyBBc3luY1dhdGVyZmFsbEhvb2soXCJiZWZvcmVMb2FkU2hhcmVcIiksXG4gICAgICBsb2FkU2hhcmU6IG5ldyBBc3luY0hvb2soKSxcbiAgICAgIHJlc29sdmVTaGFyZTogbmV3IFN5bmNXYXRlcmZhbGxIb29rKFwicmVzb2x2ZVNoYXJlXCIpLFxuICAgICAgYmVmb3JlUHJlbG9hZFJlbW90ZTogbmV3IEFzeW5jSG9vaygpLFxuICAgICAgZ2VuZXJhdGVQcmVsb2FkQXNzZXRzOiBuZXcgQXN5bmNIb29rKFwiZ2VuZXJhdGVQcmVsb2FkQXNzZXRzXCIpLFxuICAgICAgYWZ0ZXJQcmVsb2FkUmVtb3RlOiBuZXcgQXN5bmNIb29rKClcbiAgICB9KSwgdGhpcy52ZXJzaW9uID0gXCIwLjEuMlwiLCB0aGlzLm1vZHVsZUNhY2hlID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKSwgdGhpcy5sb2FkZXJIb29rID0gbmV3IFBsdWdpblN5c3RlbSh7XG4gICAgICBnZXRNb2R1bGVJbmZvOiBuZXcgU3luY0hvb2soKSxcbiAgICAgIGNyZWF0ZVNjcmlwdDogbmV3IFN5bmNIb29rKCksXG4gICAgICBjcmVhdGVMaW5rOiBuZXcgU3luY0hvb2soKSxcbiAgICAgIGZldGNoOiBuZXcgQXN5bmNIb29rKFwiZmV0Y2hcIilcbiAgICB9KTtcbiAgICBjb25zdCByID0ge1xuICAgICAgaWQ6IGdldEJ1aWxkZXJJZCgpLFxuICAgICAgbmFtZTogZS5uYW1lLFxuICAgICAgcGx1Z2luczogW1xuICAgICAgICBzbmFwc2hvdFBsdWdpbigpLFxuICAgICAgICBnZW5lcmF0ZVByZWxvYWRBc3NldHNQbHVnaW4oKVxuICAgICAgXSxcbiAgICAgIHJlbW90ZXM6IFtdLFxuICAgICAgc2hhcmVkOiB7fSxcbiAgICAgIGluQnJvd3NlcjogaXNCcm93c2VyRW52JDEoKVxuICAgIH07XG4gICAgdGhpcy5uYW1lID0gZS5uYW1lLCB0aGlzLm9wdGlvbnMgPSByLCB0aGlzLnNoYXJlU2NvcGVNYXAgPSB7fSwgdGhpcy5fc2V0R2xvYmFsU2hhcmVTY29wZU1hcCgpLCB0aGlzLnNuYXBzaG90SGFuZGxlciA9IG5ldyBTbmFwc2hvdEhhbmRsZXIodGhpcyksIHRoaXMucmVnaXN0ZXJQbHVnaW5zKFtcbiAgICAgIC4uLnIucGx1Z2lucyxcbiAgICAgIC4uLmUucGx1Z2lucyB8fCBbXVxuICAgIF0pLCB0aGlzLm9wdGlvbnMgPSB0aGlzLmZvcm1hdE9wdGlvbnMociwgZSk7XG4gIH1cbn1cbmxldCBGZWRlcmF0aW9uSW5zdGFuY2UgPSBudWxsO1xuZnVuY3Rpb24gaW5pdCh0KSB7XG4gIGNvbnN0IGUgPSBnZXRHbG9iYWxGZWRlcmF0aW9uSW5zdGFuY2UodC5uYW1lLCB0LnZlcnNpb24pO1xuICBpZiAoZSlcbiAgICByZXR1cm4gZS5pbml0T3B0aW9ucyh0KSwgRmVkZXJhdGlvbkluc3RhbmNlIHx8IChGZWRlcmF0aW9uSW5zdGFuY2UgPSBlKSwgZTtcbiAge1xuICAgIGNvbnN0IHIgPSBnZXRHbG9iYWxGZWRlcmF0aW9uQ29uc3RydWN0b3IoKSB8fCBGZWRlcmF0aW9uSG9zdDtcbiAgICByZXR1cm4gRmVkZXJhdGlvbkluc3RhbmNlID0gbmV3IHIodCksIHNldEdsb2JhbEZlZGVyYXRpb25JbnN0YW5jZShGZWRlcmF0aW9uSW5zdGFuY2UpLCBGZWRlcmF0aW9uSW5zdGFuY2U7XG4gIH1cbn1cbmZ1bmN0aW9uIGxvYWRSZW1vdGUoLi4udCkge1xuICByZXR1cm4gYXNzZXJ0KEZlZGVyYXRpb25JbnN0YW5jZSwgXCJQbGVhc2UgY2FsbCBpbml0IGZpcnN0XCIpLCBGZWRlcmF0aW9uSW5zdGFuY2UubG9hZFJlbW90ZS5hcHBseShGZWRlcmF0aW9uSW5zdGFuY2UsIHQpO1xufVxuc2V0R2xvYmFsRmVkZXJhdGlvbkNvbnN0cnVjdG9yKEZlZGVyYXRpb25Ib3N0KTtcbmZ1bmN0aW9uIGlzTWV0YU1hc2tQcm92aWRlcih0KSB7XG4gIHJldHVybiB0ICE9PSBudWxsICYmIHR5cGVvZiB0ID09IFwib2JqZWN0XCIgJiYgdC5oYXNPd25Qcm9wZXJ0eShcImlzTWV0YU1hc2tcIikgJiYgdC5oYXNPd25Qcm9wZXJ0eShcInJlcXVlc3RcIik7XG59XG5mdW5jdGlvbiBkZXRlY3RNZXRhTWFza1Byb3ZpZGVyKHQsIHsgdGltZW91dDogZSA9IDNlMyB9ID0ge30pIHtcbiAgbGV0IHIgPSAhMTtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChuKSA9PiB7XG4gICAgY29uc3QgbyA9IChpKSA9PiB7XG4gICAgICBjb25zdCB7IGluZm86IHMsIHByb3ZpZGVyOiBhIH0gPSBpLmRldGFpbDtcbiAgICAgIFtcImlvLm1ldGFtYXNrXCIsIFwiaW8ubWV0YW1hc2suZmxhc2tcIl0uaW5jbHVkZXMocy5yZG5zKSAmJiBpc01ldGFNYXNrUHJvdmlkZXIoYSkgJiYgKG4oYSksIHIgPSAhMCk7XG4gICAgfTtcbiAgICB0eXBlb2YgdC5hZGRFdmVudExpc3RlbmVyID09IFwiZnVuY3Rpb25cIiAmJiB0LmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICBcImVpcDY5NjM6YW5ub3VuY2VQcm92aWRlclwiLFxuICAgICAgb1xuICAgICksIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgciB8fCBuKG51bGwpO1xuICAgIH0sIGUpLCB0eXBlb2YgdC5kaXNwYXRjaEV2ZW50ID09IFwiZnVuY3Rpb25cIiAmJiB0LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwiZWlwNjk2MzpyZXF1ZXN0UHJvdmlkZXJcIikpO1xuICB9KTtcbn1cbmFzeW5jIGZ1bmN0aW9uIHdhaXRGb3JNZXRhTWFza1Byb3ZpZGVyKHQsIHsgdGltZW91dDogZSA9IDNlMywgcmV0cmllczogciA9IDAgfSA9IHt9KSB7XG4gIHJldHVybiBkZXRlY3RNZXRhTWFza1Byb3ZpZGVyKHQsIHsgdGltZW91dDogZSB9KS5jYXRjaChmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfSkudGhlbihmdW5jdGlvbihuKSB7XG4gICAgcmV0dXJuIG4gfHwgciA9PT0gMCA/IG4gOiB3YWl0Rm9yTWV0YU1hc2tQcm92aWRlcih0LCB7XG4gICAgICB0aW1lb3V0OiBlLFxuICAgICAgcmV0cmllczogciAtIDFcbiAgICB9KTtcbiAgfSk7XG59XG5hc3luYyBmdW5jdGlvbiBkZXRlY3RNZXRhbWFza1N1cHBvcnQodCkge1xuICByZXR1cm4gYXdhaXQgd2FpdEZvck1ldGFNYXNrUHJvdmlkZXIodCwgeyByZXRyaWVzOiAzIH0pO1xufVxuYXN5bmMgZnVuY3Rpb24gZmV0Y2hNZXRhTWFza1NuYXBXYWxsZXQodCkge1xuICBhd2FpdCBpbml0KHtcbiAgICBuYW1lOiBcIk1ldGFNYXNrU3RhcmtuZXRTbmFwV2FsbGV0XCIsXG4gICAgcmVtb3RlczogW1xuICAgICAge1xuICAgICAgICBuYW1lOiBcIk1ldGFNYXNrU3RhcmtuZXRTbmFwV2FsbGV0XCIsXG4gICAgICAgIGFsaWFzOiBcIk1ldGFNYXNrU3RhcmtuZXRTbmFwV2FsbGV0XCIsXG4gICAgICAgIGVudHJ5OiBcImh0dHBzOi8vc25hcHMuY29uc2Vuc3lzLmlvL3N0YXJrbmV0L2dldC1zdGFya25ldC92MS9yZW1vdGVFbnRyeS5qc1wiXG4gICAgICB9XG4gICAgXVxuICB9KTtcbiAgY29uc3QgZSA9IGF3YWl0IGxvYWRSZW1vdGUoXCJNZXRhTWFza1N0YXJrbmV0U25hcFdhbGxldC9pbmRleFwiKSwgeyBNZXRhTWFza1NuYXBXYWxsZXQ6IHIgfSA9IGU7XG4gIHJldHVybiBuZXcgcih0LCBcIipcIik7XG59XG5mdW5jdGlvbiBjcmVhdGVNZXRhTWFza1Byb3ZpZGVyV3JhcHBlcih0LCBlKSB7XG4gIGxldCByLCBuO1xuICByZXR1cm4ge1xuICAgIGlkOiB0LmlkLFxuICAgIG5hbWU6IHQubmFtZSxcbiAgICBpY29uOiB0Lmljb24sXG4gICAgZ2V0IHZlcnNpb24oKSB7XG4gICAgICB2YXIgbztcbiAgICAgIHJldHVybiAobyA9IHIgPT0gbnVsbCA/IHZvaWQgMCA6IHIudmVyc2lvbikgIT0gbnVsbCA/IG8gOiBcIjAuMC4wXCI7XG4gICAgfSxcbiAgICBnZXQgaXNDb25uZWN0ZWQoKSB7XG4gICAgICB2YXIgbztcbiAgICAgIHJldHVybiAobyA9IHIgPT0gbnVsbCA/IHZvaWQgMCA6IHIuaXNDb25uZWN0ZWQpICE9IG51bGwgPyBvIDogITE7XG4gICAgfSxcbiAgICBnZXQgcHJvdmlkZXIoKSB7XG4gICAgICByZXR1cm4gciA9PSBudWxsID8gdm9pZCAwIDogci5wcm92aWRlcjtcbiAgICB9LFxuICAgIGdldCBhY2NvdW50KCkge1xuICAgICAgcmV0dXJuIHIgPT0gbnVsbCA/IHZvaWQgMCA6IHIuYWNjb3VudDtcbiAgICB9LFxuICAgIGdldCBzZWxlY3RlZEFkZHJlc3MoKSB7XG4gICAgICByZXR1cm4gciA9PSBudWxsID8gdm9pZCAwIDogci5zZWxlY3RlZEFkZHJlc3M7XG4gICAgfSxcbiAgICBnZXQgY2hhaW5JZCgpIHtcbiAgICAgIHJldHVybiByID09IG51bGwgPyB2b2lkIDAgOiByLmNoYWluSWQ7XG4gICAgfSxcbiAgICByZXF1ZXN0KG8pIHtcbiAgICAgIGlmICghcilcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiV2FsbGV0IG5vdCBlbmFibGVkXCIpO1xuICAgICAgcmV0dXJuIHIucmVxdWVzdChvKTtcbiAgICB9LFxuICAgIGFzeW5jIGVuYWJsZSgpIHtcbiAgICAgIHJldHVybiByIHx8IChuID0gbiB8fCBmZXRjaE1ldGFNYXNrU25hcFdhbGxldChlKSwgciA9IGF3YWl0IG4pLCBhd2FpdCByLmVuYWJsZSgpO1xuICAgIH0sXG4gICAgaXNQcmVhdXRob3JpemVkKCkge1xuICAgICAgdmFyIG87XG4gICAgICByZXR1cm4gKG8gPSByID09IG51bGwgPyB2b2lkIDAgOiByLmlzUHJlYXV0aG9yaXplZCgpKSAhPSBudWxsID8gbyA6IFByb21pc2UucmVzb2x2ZSghMSk7XG4gICAgfSxcbiAgICBvbihvLCBpKSB7XG4gICAgICBpZiAoIXIpXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIldhbGxldCBub3QgZW5hYmxlZFwiKTtcbiAgICAgIHJldHVybiByLm9uKG8sIGkpO1xuICAgIH0sXG4gICAgb2ZmKG8sIGkpIHtcbiAgICAgIGlmICghcilcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiV2FsbGV0IG5vdCBlbmFibGVkXCIpO1xuICAgICAgcmV0dXJuIHIub2ZmKG8sIGkpO1xuICAgIH1cbiAgfTtcbn1cbmFzeW5jIGZ1bmN0aW9uIGluamVjdE1ldGFtYXNrQnJpZGdlKHQpIHtcbiAgaWYgKHQuaGFzT3duUHJvcGVydHkoXCJzdGFya25ldF9tZXRhbWFza1wiKSlcbiAgICByZXR1cm47XG4gIGNvbnN0IGUgPSB3YWxsZXRzLmZpbmQoKG4pID0+IG4uaWQgPT09IFwibWV0YW1hc2tcIik7XG4gIGlmICghZSlcbiAgICByZXR1cm47XG4gIGNvbnN0IHIgPSBhd2FpdCBkZXRlY3RNZXRhbWFza1N1cHBvcnQodCk7XG4gICFyIHx8ICh0LnN0YXJrbmV0X21ldGFtYXNrID0gY3JlYXRlTWV0YU1hc2tQcm92aWRlcldyYXBwZXIoXG4gICAgZSxcbiAgICByXG4gICkpO1xufVxuZnVuY3Rpb24gc2Nhbk9iamVjdEZvcldhbGxldHModCwgZSkge1xuICByZXR1cm4gT2JqZWN0LnZhbHVlcyhcbiAgICBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0KS5yZWR1Y2UoKHIsIG4pID0+IHtcbiAgICAgIGlmIChuLnN0YXJ0c1dpdGgoXCJzdGFya25ldFwiKSkge1xuICAgICAgICBjb25zdCBvID0gdFtuXTtcbiAgICAgICAgZShvKSAmJiAhcltvLmlkXSAmJiAocltvLmlkXSA9IG8pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHI7XG4gICAgfSwge30pXG4gICk7XG59XG5jb25zdCBzb3J0QnkgPSAodCwgZSkgPT4ge1xuICBpZiAoZSAmJiBBcnJheS5pc0FycmF5KGUpKSB7XG4gICAgdC5zb3J0KChuLCBvKSA9PiBlLmluZGV4T2Yobi5pZCkgLSBlLmluZGV4T2Yoby5pZCkpO1xuICAgIGNvbnN0IHIgPSB0Lmxlbmd0aCAtIGUubGVuZ3RoO1xuICAgIHJldHVybiBbXG4gICAgICAuLi50LnNsaWNlKHIpLFxuICAgICAgLi4uc2h1ZmZsZSh0LnNsaWNlKDAsIHIpKVxuICAgIF07XG4gIH0gZWxzZVxuICAgIHJldHVybiBzaHVmZmxlKHQpO1xufSwgZGVmYXVsdE9wdGlvbnMgPSB7XG4gIHdpbmRvd09iamVjdDogc3NyU2FmZVdpbmRvdyAhPSBudWxsID8gc3NyU2FmZVdpbmRvdyA6IHt9LFxuICBpc1dhbGxldE9iamVjdDogaXNXYWxsZXRPYmosXG4gIHN0b3JhZ2VGYWN0b3J5SW1wbGVtZW50YXRpb246ICh0KSA9PiBuZXcgTG9jYWxTdG9yYWdlV3JhcHBlcih0KVxufTtcbmZ1bmN0aW9uIGdldFN0YXJrbmV0KHQgPSB7fSkge1xuICBjb25zdCB7IHN0b3JhZ2VGYWN0b3J5SW1wbGVtZW50YXRpb246IGUsIHdpbmRvd09iamVjdDogciwgaXNXYWxsZXRPYmplY3Q6IG4gfSA9IHtcbiAgICAuLi5kZWZhdWx0T3B0aW9ucyxcbiAgICAuLi50XG4gIH0sIG8gPSBlKFwiZ3N3LWxhc3RcIik7XG4gIHJldHVybiBpbmplY3RNZXRhbWFza0JyaWRnZShyKSwge1xuICAgIGdldEF2YWlsYWJsZVdhbGxldHM6IGFzeW5jIChpID0ge30pID0+IHtcbiAgICAgIGNvbnN0IHMgPSBzY2FuT2JqZWN0Rm9yV2FsbGV0cyhcbiAgICAgICAgcixcbiAgICAgICAgblxuICAgICAgKTtcbiAgICAgIHJldHVybiBwaXBlJDEoXG4gICAgICAgIChhKSA9PiBmaWx0ZXJCeShhLCBpKSxcbiAgICAgICAgKGEpID0+IHNvcnRCeShhLCBpLnNvcnQpXG4gICAgICApKHMpO1xuICAgIH0sXG4gICAgZ2V0UHJlQXV0aG9yaXplZFdhbGxldHM6IGFzeW5jIChpID0ge30pID0+IHtcbiAgICAgIGNvbnN0IHMgPSBzY2FuT2JqZWN0Rm9yV2FsbGV0cyhcbiAgICAgICAgcixcbiAgICAgICAgblxuICAgICAgKTtcbiAgICAgIHJldHVybiBwaXBlJDEoXG4gICAgICAgIChhKSA9PiBmaWx0ZXJCeVByZUF1dGhvcml6ZWQoYSksXG4gICAgICAgIChhKSA9PiBmaWx0ZXJCeShhLCBpKSxcbiAgICAgICAgKGEpID0+IHNvcnRCeShhLCBpLnNvcnQpXG4gICAgICApKHMpO1xuICAgIH0sXG4gICAgZ2V0RGlzY292ZXJ5V2FsbGV0czogYXN5bmMgKGkgPSB7fSkgPT4gcGlwZSQxKFxuICAgICAgKHMpID0+IGZpbHRlckJ5KHMsIGkpLFxuICAgICAgKHMpID0+IHNvcnRCeShzLCBpLnNvcnQpXG4gICAgKSh3YWxsZXRzKSxcbiAgICBnZXRMYXN0Q29ubmVjdGVkV2FsbGV0OiBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBpID0gby5nZXQoKSwgcyA9IHNjYW5PYmplY3RGb3JXYWxsZXRzKHIsIG4pLmZpbmQoXG4gICAgICAgIChjKSA9PiBjLmlkID09PSBpXG4gICAgICApLCBbYV0gPSBhd2FpdCBmaWx0ZXJCeVByZUF1dGhvcml6ZWQoXG4gICAgICAgIHMgPyBbc10gOiBbXVxuICAgICAgKTtcbiAgICAgIHJldHVybiBhIHx8IChvLmRlbGV0ZSgpLCBudWxsKTtcbiAgICB9LFxuICAgIGVuYWJsZTogYXN5bmMgKGksIHMpID0+IHtcbiAgICAgIGlmIChhd2FpdCBpLmVuYWJsZShzICE9IG51bGwgPyBzIDogeyBzdGFya25ldFZlcnNpb246IFwidjVcIiB9KSwgIWkuaXNDb25uZWN0ZWQpXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBjb25uZWN0IHRvIHdhbGxldFwiKTtcbiAgICAgIHJldHVybiBvLnNldChpLmlkKSwgaTtcbiAgICB9LFxuICAgIGRpc2Nvbm5lY3Q6IGFzeW5jICh7IGNsZWFyTGFzdFdhbGxldDogaSB9ID0ge30pID0+IHtcbiAgICAgIGkgJiYgby5kZWxldGUoKTtcbiAgICB9XG4gIH07XG59XG5jb25zdCBtYWluID0gZ2V0U3RhcmtuZXQoKTtcbmZ1bmN0aW9uIGdldEJyb3dzZXJTdG9yZVZlcnNpb25Gcm9tQnJvd3NlcigpIHtcbiAgdmFyIGU7XG4gIHN3aXRjaCAoKGUgPSBCb3dzZXIuZ2V0UGFyc2VyKHNzclNhZmVXaW5kb3cgPT0gbnVsbCA/IHZvaWQgMCA6IHNzclNhZmVXaW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCkuZ2V0QnJvd3Nlck5hbWUoKSkgPT0gbnVsbCA/IHZvaWQgMCA6IGUudG9Mb3dlckNhc2UoKSkge1xuICAgIGNhc2UgXCJmaXJlZm94XCI6XG4gICAgICByZXR1cm4gXCJmaXJlZm94XCI7XG4gICAgY2FzZSBcIm1pY3Jvc29mdCBlZGdlXCI6XG4gICAgICByZXR1cm4gXCJlZGdlXCI7XG4gICAgY2FzZSBcImFuZHJvaWQgYnJvd3NlclwiOlxuICAgIGNhc2UgXCJjaHJvbWVcIjpcbiAgICBjYXNlIFwiY2hyb21pdW1cIjpcbiAgICBjYXNlIFwiZWxlY3Ryb25cIjpcbiAgICBjYXNlIFwib3BlcmFcIjpcbiAgICBjYXNlIFwidml2YWxkaVwiOlxuICAgICAgcmV0dXJuIFwiY2hyb21lXCI7XG4gICAgY2FzZSBcInNhZmFyaVwiOlxuICAgICAgcmV0dXJuIFwic2FmYXJpXCI7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBudWxsO1xuICB9XG59XG5mdW5jdGlvbiBnZXRPcGVyYXRpbmdTeXN0ZW1TdG9yZVZlcnNpb25Gcm9tQnJvd3NlcigpIHtcbiAgdmFyIGUsIHIsIG47XG4gIGNvbnN0IHQgPSAobiA9IChyID0gKGUgPSBCb3dzZXIuZ2V0UGFyc2VyKHNzclNhZmVXaW5kb3cgPT0gbnVsbCA/IHZvaWQgMCA6IHNzclNhZmVXaW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCkuZ2V0T1MoKSkgPT0gbnVsbCA/IHZvaWQgMCA6IGUubmFtZSkgPT0gbnVsbCA/IHZvaWQgMCA6IHIudG9Mb3dlckNhc2UoKSkgIT0gbnVsbCA/IG4gOiBudWxsO1xuICBzd2l0Y2ggKHQpIHtcbiAgICBjYXNlIFwiaW9zXCI6XG4gICAgY2FzZSBcImFuZHJvaWRcIjpcbiAgICAgIHJldHVybiB0O1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuY29uc3QgZW5hYmxlV2l0aFZlcnNpb24gPSBhc3luYyAodCkgPT4gdCA/IG1haW4uZW5hYmxlKHQsIHsgc3RhcmtuZXRWZXJzaW9uOiBcInY1XCIgfSkuY2F0Y2goKCkgPT4gbnVsbCkgOiBudWxsLCBjb25uZWN0ID0gYXN5bmMgKHtcbiAgbW9kYWxNb2RlOiB0ID0gXCJjYW5Bc2tcIixcbiAgc3RvcmVWZXJzaW9uOiBlID0gZ2V0QnJvd3NlclN0b3JlVmVyc2lvbkZyb21Ccm93c2VyKCksXG4gIG9zVmVyc2lvbjogciA9IGdldE9wZXJhdGluZ1N5c3RlbVN0b3JlVmVyc2lvbkZyb21Ccm93c2VyKCksXG4gIG1vZGFsVGhlbWU6IG4sXG4gIC4uLm9cbn0gPSB7fSkgPT4ge1xuICB2YXIgdSwgZDtcbiAgY29uc3QgaSA9IGF3YWl0IG1haW4uZ2V0UHJlQXV0aG9yaXplZFdhbGxldHMoe1xuICAgIC4uLm9cbiAgfSksIHMgPSBhd2FpdCBtYWluLmdldExhc3RDb25uZWN0ZWRXYWxsZXQoKTtcbiAgaWYgKHQgPT09IFwibmV2ZXJBc2tcIikge1xuICAgIGNvbnN0IG0gPSAodSA9IGkuZmluZCgocCkgPT4gcC5pZCA9PT0gKHMgPT0gbnVsbCA/IHZvaWQgMCA6IHMuaWQpKSkgIT0gbnVsbCA/IHUgOiBpWzBdO1xuICAgIHJldHVybiBlbmFibGVXaXRoVmVyc2lvbihtKTtcbiAgfVxuICBjb25zdCBhID0gYXdhaXQgbWFpbi5nZXRBdmFpbGFibGVXYWxsZXRzKG8pO1xuICBpZiAodCA9PT0gXCJjYW5Bc2tcIiAmJiBzKSB7XG4gICAgY29uc3QgbSA9IChkID0gaS5maW5kKChwKSA9PiBwLmlkID09PSAocyA9PSBudWxsID8gdm9pZCAwIDogcy5pZCkpKSAhPSBudWxsID8gZCA6IGEubGVuZ3RoID09PSAxID8gYVswXSA6IHZvaWQgMDtcbiAgICBpZiAobSlcbiAgICAgIHJldHVybiBlbmFibGVXaXRoVmVyc2lvbihtKTtcbiAgfVxuICBjb25zdCBsID0gKGF3YWl0IG1haW4uZ2V0RGlzY292ZXJ5V2FsbGV0cyhvKSkucmVkdWNlKChtLCBwKSA9PiB7XG4gICAgY29uc3QgaCA9IHAuZG93bmxvYWRzW3JdIHx8IHAuZG93bmxvYWRzW2VdO1xuICAgIGlmIChoKSB7XG4gICAgICBjb25zdCB5ID0gT2JqZWN0LmtleXMocC5kb3dubG9hZHMpLmZpbmQoXG4gICAgICAgIChJKSA9PiBwLmRvd25sb2Fkc1tJXSA9PT0gaFxuICAgICAgKSwgZyA9IHkgPT09IFwiYW5kcm9pZFwiIHx8IHkgPT09IFwiaW9zXCIgPyBgJHtwLm5hbWV9IE1vYmlsZWAgOiBgSW5zdGFsbCAke3AubmFtZX1gO1xuICAgICAgbS5wdXNoKHsgLi4ucCwgbmFtZTogZywgZG93bmxvYWQ6IGggfSk7XG4gICAgfVxuICAgIHJldHVybiBtO1xuICB9LCBbXSk7XG4gIHJldHVybiBzaG93KHtcbiAgICBsYXN0V2FsbGV0OiBzLFxuICAgIHByZUF1dGhvcml6ZWRXYWxsZXRzOiBpLFxuICAgIGluc3RhbGxlZFdhbGxldHM6IGEsXG4gICAgZGlzY292ZXJ5V2FsbGV0czogbCxcbiAgICBlbmFibGU6IGVuYWJsZVdpdGhWZXJzaW9uLFxuICAgIG1vZGFsT3B0aW9uczoge1xuICAgICAgdGhlbWU6IG5cbiAgICB9XG4gIH0pO1xufTtcbmZ1bmN0aW9uIGRpc2Nvbm5lY3QodCA9IHt9KSB7XG4gIHJldHVybiBtYWluLmRpc2Nvbm5lY3QodCk7XG59XG5leHBvcnQge1xuICBjb25uZWN0LFxuICBkaXNjb25uZWN0XG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/get-starknet@3.3.3_starknet@6.24.1_encoding@0.1.13_/node_modules/get-starknet/dist/ui.js\n");

/***/ })

};
;